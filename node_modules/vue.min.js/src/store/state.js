import vue, {lib, library} from "vue.min.js"
import ini from "@/package.json"
import j_son from "@/store/data/state.json"
let {define} = lib
let {zero, one} = lib

var store = true
vue.store.state = function (context) { vue.commit (context) }
vue.store.register = function (context) { vue.on ("store", function () { vue.store (context) }) }
vue.store.register (function (state) {
	state.dummy = []
	})

vue.pinia = function (context) { vue.v.mutation (context) }
vue.pinia.register = function (context) { vue.on ("pinia", function () { vue.pinia (context) }) }
vue.pinia.register (function (state) {
	state.dummy = []
	})

vue.state = function (v, context) {
	if (v) {
		if (lib.is.string (v)) {
			if (store) return vue.x.state [v]
			else return vue.v [v]
			}
		else if (context) {
			if (store) vue.store.state (context.bind ({vue: v}))
			else vue.pinia (context.bind ({vue: v}))
			}
		else {
			if (store) vue.store.state (v)
			else vue.pinia (v)
			}
		}
	else if (store) return vue.x.state
	else return vue.v
	}

function data (state) { for (var i in j_son) state [i] = j_son [i] }
vue.store.register (function (state) { data (state) })
vue.pinia.register (function (state) { data (state) })
