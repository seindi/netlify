<script>
import vue, {lib, library} from "vue.min.js"
export default vue.next ({
	element: "form:select-option",
	attribute: ["for", "model", "data"],
	setup: function (prop) {
		var data = vue.reference (prop.data)
		var label = vue.reference (prop.for)
		var model = vue.reference (vue.model.format (prop.model))
		if (vue.ini ("watch:legacy")) vue.watch (prop, function () {
			label.value = prop.for
			model.value = vue.model.format (prop.model)
			})
		return {vue, label, model, data}
		},
	method: {
		slot () { return vue.slot (this).default },
		},
	})
</script>

<template id="form:select-option">
	<select v-if="label" v-bind:for="label" v-model="vue.model.data [model]" v-on:focus="vue.form.focus" v-on:blur="vue.form.blur" element="form:select-option">
		<slot v-if="slot ()"/>
		<option v-else v-for="data in data" v-bind:value="data.key">{{ data.value }}</option>
	</select>
	<select v-model="vue.model.data [model]" element="form:select-option" v-else>
		<slot v-if="slot ()"/>
		<option v-else v-for="data in data" v-bind:value="data.key">{{ data.value }}</option>
	</select>
</template>
