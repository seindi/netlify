<script>
import vue, {lib, library} from "vue.min.js"
export default vue.next ({
	element: "button:material",
	attribute: ["url", "icon", "option"],
	setup: function (prop) {
		var url = vue.reference (prop.url)
		var icon = vue.reference (prop.icon)
		var option = vue.reactive ({icon: {}})
		vue.react (option, prop.option)
		return {vue, url, icon, option}
		},
	method: {
		function () {},
		slot () { return vue.slot (this).default },
		go__ () { if (this.url) vue.router.go (this.url) },
		is_icon () { if (this.icon) return ! this.slot () },
		is_text () { if (this.slot ()) return ! this.icon },
		is_left (position) { return position === "left" },
		is_right (position) { return position === "right" },
		is_symbol (icon) { return icon === "symbol" },
		},
	})
</script>

<template id="button:material" type="element">
	<button v-on:click="go__ ()" element="button:material">
		<div v-if="is_icon ()" container>
			<icon:symbol v-if="is_symbol (option.icon.style)" v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css" pad/>
			<icon:material v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css" pad v-else/>
		</div>
		<div v-else-if="is_text ()" container>
			<string padding both><slot slot/></string>
		</div>
		<div v-else-if="is_right (option.icon.position)" container>
			<string padding left><slot slot/></string>
			<icon:symbol v-if="is_symbol (option.icon.style)" v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css"/>
			<icon:material v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css" v-else/>
		</div>
		<div container v-else>
			<icon:symbol v-if="is_symbol (option.icon.style)" v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css"/>
			<icon:material v-bind:src="icon" v-bind:type="option.icon.type" v-bind:weight="option.icon.weight" v-bind:class="option.icon.css" v-else/>
			<string padding right><slot slot/></string>
		</div>
	</button>
</template>

<style scoped>
[element="button:material"] { color: rgb(var(--font-color)); position: relative; border: none; border-radius: var(--border-radius-pop); background-color: rgba(var(--background-mono-color), 0.85); }
[element="button:material"]:hover { background-color: rgb(var(--background-mono-color)); }
[container] { font-weight: var(--font-bold-light); display: flex; align-items: center; gap: var(--px); padding-left: var(--px); padding-right: var(--px); }
[padding] { padding-top: 7px; padding-bottom: 7px; }
[pad] { padding-top: var(--px-small); padding-bottom: var(--px-small); }
[left] { padding-left: var(--px-small); }
[right] { padding-right: var(--px-small); }
[both] { padding-left: var(--px-small); padding-right: var(--px-small); }
[accent="transparent"] { color: rgb(var(--font-color)); background-color: transparent; }
[accent="transparent"]:hover {}
[accent="red"] { color: rgb(var(--white)); background-color: rgba(var(--red-color), 0.85); }
[accent="red"]:hover { background-color: rgb(var(--red-color)); }
[accent="green"] { color: rgb(var(--white)); background-color: rgba(var(--green-color), 0.85); }
[accent="green"]:hover { background-color: rgb(var(--green-color)); }
[accent="blue"] { color: rgb(var(--white)); background-color: rgba(var(--blue-color), 0.85); }
[accent="blue"]:hover { background-color: rgb(var(--blue-color)); }
[round] { border-radius: var(--border-radius-round); }
</style>
