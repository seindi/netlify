(self["webpackChunk"]=self["webpackChunk"]||[]).push([[998],{262:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,BK:()=>Ke,Bj:()=>o,EB:()=>u,Fl:()=>Ye,IU:()=>Re,Jd:()=>S,PG:()=>Oe,SU:()=>$e,Um:()=>Se,WL:()=>He,X$:()=>x,X3:()=>Fe,XI:()=>Ve,Xl:()=>Ne,dq:()=>Ue,iH:()=>qe,j:()=>C,lk:()=>P,nZ:()=>c,qj:()=>Te,qq:()=>I,yT:()=>Ae});var i=n(577);let r;class o{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){r=this}off(){r=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function s(e){return new o(e)}function a(e,t=r){t&&t.active&&t.effects.push(e)}function c(){return r}function u(e){r&&r.cleanups.push(e)}const l=e=>{const t=new Set(e);return t.w=0,t.n=0,t},h=e=>(e.w&y)>0,d=e=>(e.n&y)>0,f=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=y},p=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];h(r)&&!d(r)?r.delete(e):t[n++]=r,r.w&=~y,r.n&=~y}t.length=n}},m=new WeakMap;let g=0,y=1;const v=30;let b;const w=Symbol(""),_=Symbol("");class I{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=b,t=E;while(e){if(e===this)return;e=e.parent}try{return this.parent=b,b=this,E=!0,y=1<<++g,g<=v?f(this):k(this),this.fn()}finally{g<=v&&p(this),y=1<<--g,b=this.parent,E=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(k(this),this.onStop&&this.onStop(),this.active=!1)}}function k(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let E=!0;const T=[];function S(){T.push(E),E=!1}function P(){const e=T.pop();E=void 0===e||e}function C(e,t,n){if(E&&b){let t=m.get(e);t||m.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=l());const r=void 0;O(i,r)}}function O(e,t){let n=!1;g<=v?d(e)||(e.n|=y,n=!h(e)):n=!e.has(b),n&&(e.add(b),b.deps.push(e))}function x(e,t,n,r,o,s){const a=m.get(e);if(!a)return;let c=[];if("clear"===t)c=[...a.values()];else if("length"===n&&(0,i.kJ)(e)){const e=Number(r);a.forEach(((t,n)=>{("length"===n||n>=e)&&c.push(t)}))}else switch(void 0!==n&&c.push(a.get(n)),t){case"add":(0,i.kJ)(e)?(0,i.S0)(n)&&c.push(a.get("length")):(c.push(a.get(w)),(0,i._N)(e)&&c.push(a.get(_)));break;case"delete":(0,i.kJ)(e)||(c.push(a.get(w)),(0,i._N)(e)&&c.push(a.get(_)));break;case"set":(0,i._N)(e)&&c.push(a.get(w));break}if(1===c.length)c[0]&&A(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);A(l(e))}}function A(e,t){const n=(0,i.kJ)(e)?e:[...e];for(const i of n)i.computed&&F(i,t);for(const i of n)i.computed||F(i,t)}function F(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function R(e,t){var n;return null===(n=m.get(e))||void 0===n?void 0:n.get(t)}const N=(0,i.fY)("__proto__,__v_isRef,__isVue"),D=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(i.yk)),j=B(),L=B(!1,!0),M=B(!0),U=q();function q(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Re(this);for(let t=0,r=this.length;t<r;t++)C(n,"get",t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(Re)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){S();const n=Re(this)[t].apply(this,e);return P(),n}})),e}function V(e){const t=Re(this);return C(t,"has",e),t.hasOwnProperty(e)}function B(e=!1,t=!1){return function(n,r,o){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&o===(e?t?Ie:_e:t?we:be).get(n))return n;const s=(0,i.kJ)(n);if(!e){if(s&&(0,i.RI)(U,r))return Reflect.get(U,r,o);if("hasOwnProperty"===r)return V}const a=Reflect.get(n,r,o);return((0,i.yk)(r)?D.has(r):N(r))?a:(e||C(n,"get",r),t?a:Ue(a)?s&&(0,i.S0)(r)?a:a.value:(0,i.Kn)(a)?e?Pe(a):Te(a):a)}}const Z=z(),$=z(!0);function z(e=!1){return function(t,n,r,o){let s=t[n];if(xe(s)&&Ue(s)&&!Ue(r))return!1;if(!e&&(Ae(r)||xe(r)||(s=Re(s),r=Re(r)),!(0,i.kJ)(t)&&Ue(s)&&!Ue(r)))return s.value=r,!0;const a=(0,i.kJ)(t)&&(0,i.S0)(n)?Number(n)<t.length:(0,i.RI)(t,n),c=Reflect.set(t,n,r,o);return t===Re(o)&&(a?(0,i.aU)(r,s)&&x(t,"set",n,r,s):x(t,"add",n,r)),c}}function H(e,t){const n=(0,i.RI)(e,t),r=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&x(e,"delete",t,void 0,r),o}function K(e,t){const n=Reflect.has(e,t);return(0,i.yk)(t)&&D.has(t)||C(e,"has",t),n}function G(e){return C(e,"iterate",(0,i.kJ)(e)?"length":w),Reflect.ownKeys(e)}const W={get:j,set:Z,deleteProperty:H,has:K,ownKeys:G},Q={get:M,set(e,t){return!0},deleteProperty(e,t){return!0}},J=(0,i.l7)({},W,{get:L,set:$}),Y=e=>e,X=e=>Reflect.getPrototypeOf(e);function ee(e,t,n=!1,i=!1){e=e["__v_raw"];const r=Re(e),o=Re(t);n||(t!==o&&C(r,"get",t),C(r,"get",o));const{has:s}=X(r),a=i?Y:n?je:De;return s.call(r,t)?a(e.get(t)):s.call(r,o)?a(e.get(o)):void(e!==r&&e.get(t))}function te(e,t=!1){const n=this["__v_raw"],i=Re(n),r=Re(e);return t||(e!==r&&C(i,"has",e),C(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function ne(e,t=!1){return e=e["__v_raw"],!t&&C(Re(e),"iterate",w),Reflect.get(e,"size",e)}function ie(e){e=Re(e);const t=Re(this),n=X(t),i=n.has.call(t,e);return i||(t.add(e),x(t,"add",e,e)),this}function re(e,t){t=Re(t);const n=Re(this),{has:r,get:o}=X(n);let s=r.call(n,e);s||(e=Re(e),s=r.call(n,e));const a=o.call(n,e);return n.set(e,t),s?(0,i.aU)(t,a)&&x(n,"set",e,t,a):x(n,"add",e,t),this}function oe(e){const t=Re(this),{has:n,get:i}=X(t);let r=n.call(t,e);r||(e=Re(e),r=n.call(t,e));const o=i?i.call(t,e):void 0,s=t.delete(e);return r&&x(t,"delete",e,void 0,o),s}function se(){const e=Re(this),t=0!==e.size,n=void 0,i=e.clear();return t&&x(e,"clear",void 0,void 0,n),i}function ae(e,t){return function(n,i){const r=this,o=r["__v_raw"],s=Re(o),a=t?Y:e?je:De;return!e&&C(s,"iterate",w),o.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function ce(e,t,n){return function(...r){const o=this["__v_raw"],s=Re(o),a=(0,i._N)(s),c="entries"===e||e===Symbol.iterator&&a,u="keys"===e&&a,l=o[e](...r),h=n?Y:t?je:De;return!t&&C(s,"iterate",u?_:w),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:c?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function ue(e){return function(...t){return"delete"!==e&&this}}function le(){const e={get(e){return ee(this,e)},get size(){return ne(this)},has:te,add:ie,set:re,delete:oe,clear:se,forEach:ae(!1,!1)},t={get(e){return ee(this,e,!1,!0)},get size(){return ne(this)},has:te,add:ie,set:re,delete:oe,clear:se,forEach:ae(!1,!0)},n={get(e){return ee(this,e,!0)},get size(){return ne(this,!0)},has(e){return te.call(this,e,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:ae(!0,!1)},i={get(e){return ee(this,e,!0,!0)},get size(){return ne(this,!0)},has(e){return te.call(this,e,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:ae(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{e[r]=ce(r,!1,!1),n[r]=ce(r,!0,!1),t[r]=ce(r,!1,!0),i[r]=ce(r,!0,!0)})),[e,n,t,i]}const[he,de,fe,pe]=le();function me(e,t){const n=t?e?pe:fe:e?de:he;return(t,r,o)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,i.RI)(n,r)&&r in t?n:t,r,o)}const ge={get:me(!1,!1)},ye={get:me(!1,!0)},ve={get:me(!0,!1)};const be=new WeakMap,we=new WeakMap,_e=new WeakMap,Ie=new WeakMap;function ke(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ee(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ke((0,i.W7)(e))}function Te(e){return xe(e)?e:Ce(e,!1,W,ge,be)}function Se(e){return Ce(e,!1,J,ye,we)}function Pe(e){return Ce(e,!0,Q,ve,_e)}function Ce(e,t,n,r,o){if(!(0,i.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const s=o.get(e);if(s)return s;const a=Ee(e);if(0===a)return e;const c=new Proxy(e,2===a?r:n);return o.set(e,c),c}function Oe(e){return xe(e)?Oe(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function xe(e){return!(!e||!e["__v_isReadonly"])}function Ae(e){return!(!e||!e["__v_isShallow"])}function Fe(e){return Oe(e)||xe(e)}function Re(e){const t=e&&e["__v_raw"];return t?Re(t):e}function Ne(e){return(0,i.Nj)(e,"__v_skip",!0),e}const De=e=>(0,i.Kn)(e)?Te(e):e,je=e=>(0,i.Kn)(e)?Pe(e):e;function Le(e){E&&b&&(e=Re(e),O(e.dep||(e.dep=l())))}function Me(e,t){e=Re(e);const n=e.dep;n&&A(n)}function Ue(e){return!(!e||!0!==e.__v_isRef)}function qe(e){return Be(e,!1)}function Ve(e){return Be(e,!0)}function Be(e,t){return Ue(e)?e:new Ze(e,t)}class Ze{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Re(e),this._value=t?e:De(e)}get value(){return Le(this),this._value}set value(e){const t=this.__v_isShallow||Ae(e)||xe(e);e=t?e:Re(e),(0,i.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:De(e),Me(this,e))}}function $e(e){return Ue(e)?e.value:e}const ze={get:(e,t,n)=>$e(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Ue(r)&&!Ue(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function He(e){return Oe(e)?e:new Proxy(e,ze)}function Ke(e){const t=(0,i.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=We(e,n);return t}class Ge{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return R(Re(this._object),this._key)}}function We(e,t,n){const i=e[t];return Ue(i)?i:new Ge(e,t,n)}var Qe;class Je{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Qe]=!1,this._dirty=!0,this.effect=new I(e,(()=>{this._dirty||(this._dirty=!0,Me(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const e=Re(this);return Le(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ye(e,t,n=!1){let r,o;const s=(0,i.mf)(e);s?(r=e,o=i.dG):(r=e.get,o=e.set);const a=new Je(r,o,s||!o,n);return a}Qe="__v_isReadonly"},252:(e,t,n)=>{"use strict";n.d(t,{$d:()=>s,Ah:()=>Se,FN:()=>vn,Fl:()=>Nn,HY:()=>jt,JJ:()=>$,Ko:()=>Ve,LL:()=>Le,P$:()=>ne,Q2:()=>Me,Q6:()=>ce,U2:()=>re,Uk:()=>sn,Us:()=>xt,WI:()=>Be,Wm:()=>tn,Y3:()=>v,Y8:()=>X,YP:()=>G,_:()=>en,aZ:()=>ue,bv:()=>Ie,f3:()=>z,h:()=>Dn,iD:()=>Kt,ic:()=>Ee,j4:()=>Gt,kq:()=>cn,m0:()=>H,nK:()=>ae,uE:()=>an,up:()=>De,w5:()=>D,wg:()=>Bt,wy:()=>Ae});var i=n(262),r=n(577);function o(e,t,n,i){let r;try{r=i?e(...i):e()}catch(o){a(o,t,n)}return r}function s(e,t,n,i){if((0,r.mf)(e)){const s=o(e,t,n,i);return s&&(0,r.tI)(s)&&s.catch((e=>{a(e,t,n)})),s}const c=[];for(let r=0;r<e.length;r++)c.push(s(e[r],t,n,i));return c}function a(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const r=t.proxy,s=n;while(i){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const a=t.appContext.config.errorHandler;if(a)return void o(a,null,10,[e,r,s])}c(e,n,r,i)}function c(e,t,n,i=!0){console.error(e)}let u=!1,l=!1;const h=[];let d=0;const f=[];let p=null,m=0;const g=Promise.resolve();let y=null;function v(e){const t=y||g;return e?t.then(this?e.bind(this):e):t}function b(e){let t=d+1,n=h.length;while(t<n){const i=t+n>>>1,r=S(h[i]);r<e?t=i+1:n=i}return t}function w(e){h.length&&h.includes(e,u&&e.allowRecurse?d+1:d)||(null==e.id?h.push(e):h.splice(b(e.id),0,e),_())}function _(){u||l||(l=!0,y=g.then(C))}function I(e){const t=h.indexOf(e);t>d&&h.splice(t,1)}function k(e){(0,r.kJ)(e)?f.push(...e):p&&p.includes(e,e.allowRecurse?m+1:m)||f.push(e),_()}function E(e,t=(u?d+1:0)){for(0;t<h.length;t++){const e=h[t];e&&e.pre&&(h.splice(t,1),t--,e())}}function T(e){if(f.length){const e=[...new Set(f)];if(f.length=0,p)return void p.push(...e);for(p=e,p.sort(((e,t)=>S(e)-S(t))),m=0;m<p.length;m++)p[m]();p=null,m=0}}const S=e=>null==e.id?1/0:e.id,P=(e,t)=>{const n=S(e)-S(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function C(e){l=!1,u=!0,h.sort(P);r.dG;try{for(d=0;d<h.length;d++){const e=h[d];e&&!1!==e.active&&o(e,null,14)}}finally{d=0,h.length=0,T(e),u=!1,y=null,(h.length||f.length)&&C(e)}}new Set;new Map;function O(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r.kT;let o=n;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in i){const e=`${"modelValue"===c?"model":c}Modifiers`,{number:t,trim:s}=i[e]||r.kT;s&&(o=n.map((e=>(0,r.HD)(e)?e.trim():e))),t&&(o=n.map(r.h5))}let u;let l=i[u=(0,r.hR)(t)]||i[u=(0,r.hR)((0,r._A)(t))];!l&&a&&(l=i[u=(0,r.hR)((0,r.rs)(t))]),l&&s(l,e,6,o);const h=i[u+"Once"];if(h){if(e.emitted){if(e.emitted[u])return}else e.emitted={};e.emitted[u]=!0,s(h,e,6,o)}}function x(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(void 0!==o)return o;const s=e.emits;let a={},c=!1;if(!(0,r.mf)(e)){const i=e=>{const n=x(e,t,!0);n&&(c=!0,(0,r.l7)(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||c?((0,r.kJ)(s)?s.forEach((e=>a[e]=null)):(0,r.l7)(a,s),(0,r.Kn)(e)&&i.set(e,a),a):((0,r.Kn)(e)&&i.set(e,null),null)}function A(e,t){return!(!e||!(0,r.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,r.RI)(e,(0,r.rs)(t))||(0,r.RI)(e,t))}let F=null,R=null;function N(e){const t=F;return F=e,R=e&&e.type.__scopeId||null,t}function D(e,t=F,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&zt(-1);const r=N(t);let o;try{o=e(...n)}finally{N(r),i._d&&zt(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function j(e){const{type:t,vnode:n,proxy:i,withProxy:o,props:s,propsOptions:[c],slots:u,attrs:l,emit:h,render:d,renderCache:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=e;let v,b;const w=N(e);try{if(4&n.shapeFlag){const e=o||i;v=un(d.call(e,e,f,s,m,p,g)),b=l}else{const e=t;0,v=un(e.length>1?e(s,{attrs:l,slots:u,emit:h}):e(s,null)),b=t.props?l:L(l)}}catch(I){qt.length=0,a(I,e,1),v=tn(Mt)}let _=v;if(b&&!1!==y){const e=Object.keys(b),{shapeFlag:t}=_;e.length&&7&t&&(c&&e.some(r.tR)&&(b=M(b,c)),_=on(_,b))}return n.dirs&&(_=on(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_,N(w),v}const L=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,r.F7)(n))&&((t||(t={}))[n]=e[n]);return t},M=(e,t)=>{const n={};for(const i in e)(0,r.tR)(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function U(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:c}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||q(i,s,u):!!s);if(1024&c)return!0;if(16&c)return i?q(i,s,u):!!s;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==i[n]&&!A(u,n))return!0}}return!1}function q(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!A(n,o))return!0}return!1}function V({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const B=e=>e.__isSuspense;function Z(e,t){t&&t.pendingBranch?(0,r.kJ)(e)?t.effects.push(...e):t.effects.push(e):k(e)}function $(e,t){if(yn){let n=yn.provides;const i=yn.parent&&yn.parent.provides;i===n&&(n=yn.provides=Object.create(i)),n[e]=t}else 0}function z(e,t,n=!1){const i=yn||F;if(i){const o=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&(0,r.mf)(t)?t.call(i.proxy):t}else 0}function H(e,t){return W(e,null,t)}const K={};function G(e,t,n){return W(e,t,n)}function W(e,t,{immediate:n,deep:a,flush:c,onTrack:u,onTrigger:l}=r.kT){const h=(0,i.nZ)()===(null===yn||void 0===yn?void 0:yn.scope)?yn:null;let d,f,p=!1,m=!1;if((0,i.dq)(e)?(d=()=>e.value,p=(0,i.yT)(e)):(0,i.PG)(e)?(d=()=>e,a=!0):(0,r.kJ)(e)?(m=!0,p=e.some((e=>(0,i.PG)(e)||(0,i.yT)(e))),d=()=>e.map((e=>(0,i.dq)(e)?e.value:(0,i.PG)(e)?Y(e):(0,r.mf)(e)?o(e,h,2):void 0))):d=(0,r.mf)(e)?t?()=>o(e,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),s(e,h,3,[y])}:r.dG,t&&a){const e=d;d=()=>Y(e())}let g,y=e=>{f=I.onStop=()=>{o(e,h,4)}};if(En){if(y=r.dG,t?n&&s(t,h,3,[d(),m?[]:void 0,y]):d(),"sync"!==c)return r.dG;{const e=Ln();g=e.__watcherHandles||(e.__watcherHandles=[])}}let v=m?new Array(e.length).fill(K):K;const b=()=>{if(I.active)if(t){const e=I.run();(a||p||(m?e.some(((e,t)=>(0,r.aU)(e,v[t]))):(0,r.aU)(e,v)))&&(f&&f(),s(t,h,3,[e,v===K?void 0:m&&v[0]===K?[]:v,y]),v=e)}else I.run()};let _;b.allowRecurse=!!t,"sync"===c?_=b:"post"===c?_=()=>Ot(b,h&&h.suspense):(b.pre=!0,h&&(b.id=h.uid),_=()=>w(b));const I=new i.qq(d,_);t?n?b():v=I.run():"post"===c?Ot(I.run.bind(I),h&&h.suspense):I.run();const k=()=>{I.stop(),h&&h.scope&&(0,r.Od)(h.scope.effects,I)};return g&&g.push(k),k}function Q(e,t,n){const i=this.proxy,o=(0,r.HD)(e)?e.includes(".")?J(i,e):()=>i[e]:e.bind(i,i);let s;(0,r.mf)(t)?s=t:(s=t.handler,n=t);const a=yn;bn(this);const c=W(o,s.bind(i),n);return a?bn(a):wn(),c}function J(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Y(e,t){if(!(0,r.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,i.dq)(e))Y(e.value,t);else if((0,r.kJ)(e))for(let n=0;n<e.length;n++)Y(e[n],t);else if((0,r.DM)(e)||(0,r._N)(e))e.forEach((e=>{Y(e,t)}));else if((0,r.PO)(e))for(const n in e)Y(e[n],t);return e}function X(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ie((()=>{e.isMounted=!0})),Te((()=>{e.isUnmounting=!0})),e}const ee=[Function,Array],te={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ee,onEnter:ee,onAfterEnter:ee,onEnterCancelled:ee,onBeforeLeave:ee,onLeave:ee,onAfterLeave:ee,onLeaveCancelled:ee,onBeforeAppear:ee,onAppear:ee,onAfterAppear:ee,onAppearCancelled:ee},setup(e,{slots:t}){const n=vn(),r=X();let o;return()=>{const s=t.default&&ce(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let e=!1;for(const t of s)if(t.type!==Mt){0,a=t,e=!0;break}}const c=(0,i.IU)(e),{mode:u}=c;if(r.isLeaving)return oe(a);const l=se(a);if(!l)return oe(a);const h=re(l,c,r,n);ae(l,h);const d=n.subTree,f=d&&se(d);let p=!1;const{getTransitionKey:m}=l.type;if(m){const e=m();void 0===o?o=e:e!==o&&(o=e,p=!0)}if(f&&f.type!==Mt&&(!Qt(l,f)||p)){const e=re(f,c,r,n);if(ae(f,e),"out-in"===u)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},oe(a);"in-out"===u&&l.type!==Mt&&(e.delayLeave=(e,t,n)=>{const i=ie(r,f);i[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},ne=te;function ie(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function re(e,t,n,i){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:b,onAppearCancelled:w}=t,_=String(e.key),I=ie(n,e),k=(e,t)=>{e&&s(e,i,9,t)},E=(e,t)=>{const n=t[1];k(e,t),(0,r.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},T={mode:a,persisted:c,beforeEnter(t){let i=u;if(!n.isMounted){if(!o)return;i=y||u}t._leaveCb&&t._leaveCb(!0);const r=I[_];r&&Qt(e,r)&&r.el._leaveCb&&r.el._leaveCb(),k(i,[t])},enter(e){let t=l,i=h,r=d;if(!n.isMounted){if(!o)return;t=v||l,i=b||h,r=w||d}let s=!1;const a=e._enterCb=t=>{s||(s=!0,k(t?r:i,[e]),T.delayedLeave&&T.delayedLeave(),e._enterCb=void 0)};t?E(t,[e,a]):a()},leave(t,i){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return i();k(f,[t]);let o=!1;const s=t._leaveCb=n=>{o||(o=!0,i(),k(n?g:m,[t]),t._leaveCb=void 0,I[r]===e&&delete I[r])};I[r]=e,p?E(p,[t,s]):s()},clone(e){return re(e,t,n,i)}};return T}function oe(e){if(he(e))return e=on(e),e.children=null,e}function se(e){return he(e)?e.children?e.children[0]:void 0:e}function ae(e,t){6&e.shapeFlag&&e.component?ae(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ce(e,t=!1,n){let i=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===jt?(128&s.patchFlag&&r++,i=i.concat(ce(s.children,t,a))):(t||s.type!==Mt)&&i.push(null!=a?on(s,{key:a}):s)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function ue(e){return(0,r.mf)(e)?{setup:e,name:e.name}:e}const le=e=>!!e.type.__asyncLoader;const he=e=>e.type.__isKeepAlive;RegExp,RegExp;function de(e,t){return(0,r.kJ)(e)?e.some((e=>de(e,t))):(0,r.HD)(e)?e.split(",").includes(t):!!(0,r.Kj)(e)&&e.test(t)}function fe(e,t){me(e,"a",t)}function pe(e,t){me(e,"da",t)}function me(e,t,n=yn){const i=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(be(t,i,n),n){let e=n.parent;while(e&&e.parent)he(e.parent.vnode)&&ge(i,t,n,e),e=e.parent}}function ge(e,t,n,i){const o=be(t,e,i,!0);Se((()=>{(0,r.Od)(i[t],o)}),n)}function ye(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ve(e){return 128&e.shapeFlag?e.ssContent:e}function be(e,t,n=yn,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.Jd)(),bn(n);const o=s(t,n,e,r);return wn(),(0,i.lk)(),o});return r?o.unshift(a):o.push(a),a}}const we=e=>(t,n=yn)=>(!En||"sp"===e)&&be(e,((...e)=>t(...e)),n),_e=we("bm"),Ie=we("m"),ke=we("bu"),Ee=we("u"),Te=we("bum"),Se=we("um"),Pe=we("sp"),Ce=we("rtg"),Oe=we("rtc");function xe(e,t=yn){be("ec",e,t)}function Ae(e,t){const n=F;if(null===n)return e;const i=An(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,n,a,c=r.kT]=t[s];e&&((0,r.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&Y(n),o.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:c}))}return e}function Fe(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let l=u.dir[r];l&&((0,i.Jd)(),s(l,n,8,[e.el,u,e,t]),(0,i.lk)())}}const Re="components",Ne="directives";function De(e,t){return Ue(Re,e,!0,t)||e}const je=Symbol();function Le(e){return(0,r.HD)(e)?Ue(Re,e,!1)||e:e||je}function Me(e){return Ue(Ne,e)}function Ue(e,t,n=!0,i=!1){const o=F||yn;if(o){const n=o.type;if(e===Re){const e=Fn(n,!1);if(e&&(e===t||e===(0,r._A)(t)||e===(0,r.kC)((0,r._A)(t))))return n}const s=qe(o[e]||n[e],t)||qe(o.appContext[e],t);return!s&&i?n:s}}function qe(e,t){return e&&(e[t]||e[(0,r._A)(t)]||e[(0,r.kC)((0,r._A)(t))])}function Ve(e,t,n,i){let o;const s=n&&n[i];if((0,r.kJ)(e)||(0,r.HD)(e)){o=new Array(e.length);for(let n=0,i=e.length;n<i;n++)o[n]=t(e[n],n,void 0,s&&s[n])}else if("number"===typeof e){0,o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,s&&s[n])}else if((0,r.Kn)(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);o=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];o[i]=t(e[r],r,i,s&&s[i])}}else o=[];return n&&(n[i]=o),o}function Be(e,t,n={},i,r){if(F.isCE||F.parent&&le(F.parent)&&F.parent.isCE)return"default"!==t&&(n.name=t),tn("slot",n,i&&i());let o=e[t];o&&o._c&&(o._d=!1),Bt();const s=o&&Ze(o(n)),a=Gt(jt,{key:n.key||s&&s.key||`_${t}`},s||(i?i():[]),s&&1===e._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Ze(e){return e.some((e=>!Wt(e)||e.type!==Mt&&!(e.type===jt&&!Ze(e.children))))?e:null}const $e=e=>e?_n(e)?An(e)||e.proxy:$e(e.parent):null,ze=(0,r.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$e(e.parent),$root:e=>$e(e.root),$emit:e=>e.emit,$options:e=>Xe(e),$forceUpdate:e=>e.f||(e.f=()=>w(e.update)),$nextTick:e=>e.n||(e.n=v.bind(e.proxy)),$watch:e=>Q.bind(e)}),He=(e,t)=>e!==r.kT&&!e.__isScriptSetup&&(0,r.RI)(e,t),Ke={get({_:e},t){const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:u,appContext:l}=e;let h;if("$"!==t[0]){const i=c[t];if(void 0!==i)switch(i){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(He(o,t))return c[t]=1,o[t];if(s!==r.kT&&(0,r.RI)(s,t))return c[t]=2,s[t];if((h=e.propsOptions[0])&&(0,r.RI)(h,t))return c[t]=3,a[t];if(n!==r.kT&&(0,r.RI)(n,t))return c[t]=4,n[t];Ge&&(c[t]=0)}}const d=ze[t];let f,p;return d?("$attrs"===t&&(0,i.j)(e,"get",t),d(e)):(f=u.__cssModules)&&(f=f[t])?f:n!==r.kT&&(0,r.RI)(n,t)?(c[t]=4,n[t]):(p=l.config.globalProperties,(0,r.RI)(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:s}=e;return He(o,t)?(o[t]=n,!0):i!==r.kT&&(0,r.RI)(i,t)?(i[t]=n,!0):!(0,r.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:s}},a){let c;return!!n[a]||e!==r.kT&&(0,r.RI)(e,a)||He(t,a)||(c=s[0])&&(0,r.RI)(c,a)||(0,r.RI)(i,a)||(0,r.RI)(ze,a)||(0,r.RI)(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,r.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ge=!0;function We(e){const t=Xe(e),n=e.proxy,o=e.ctx;Ge=!1,t.beforeCreate&&Je(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:c,watch:u,provide:l,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:v,beforeDestroy:b,beforeUnmount:w,destroyed:_,unmounted:I,render:k,renderTracked:E,renderTriggered:T,errorCaptured:S,serverPrefetch:P,expose:C,inheritAttrs:O,components:x,directives:A,filters:F}=t,R=null;if(h&&Qe(h,o,R,e.appContext.config.unwrapInjectedRef),c)for(const i in c){const e=c[i];(0,r.mf)(e)&&(o[i]=e.bind(n))}if(s){0;const t=s.call(n,n);0,(0,r.Kn)(t)&&(e.data=(0,i.qj)(t))}if(Ge=!0,a)for(const i in a){const e=a[i],t=(0,r.mf)(e)?e.bind(n,n):(0,r.mf)(e.get)?e.get.bind(n,n):r.dG;0;const s=!(0,r.mf)(e)&&(0,r.mf)(e.set)?e.set.bind(n):r.dG,c=Nn({get:t,set:s});Object.defineProperty(o,i,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(u)for(const i in u)Ye(u[i],o,n,i);if(l){const e=(0,r.mf)(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{$(t,e[t])}))}function N(e,t){(0,r.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&Je(d,e,"c"),N(_e,f),N(Ie,p),N(ke,m),N(Ee,g),N(fe,y),N(pe,v),N(xe,S),N(Oe,E),N(Ce,T),N(Te,w),N(Se,I),N(Pe,P),(0,r.kJ)(C))if(C.length){const t=e.exposed||(e.exposed={});C.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===r.dG&&(e.render=k),null!=O&&(e.inheritAttrs=O),x&&(e.components=x),A&&(e.directives=A)}function Qe(e,t,n=r.dG,o=!1){(0,r.kJ)(e)&&(e=rt(e));for(const s in e){const n=e[s];let a;a=(0,r.Kn)(n)?"default"in n?z(n.from||s,n.default,!0):z(n.from||s):z(n),(0,i.dq)(a)&&o?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[s]=a}}function Je(e,t,n){s((0,r.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Ye(e,t,n,i){const o=i.includes(".")?J(n,i):()=>n[i];if((0,r.HD)(e)){const n=t[e];(0,r.mf)(n)&&G(o,n)}else if((0,r.mf)(e))G(o,e.bind(n));else if((0,r.Kn)(e))if((0,r.kJ)(e))e.forEach((e=>Ye(e,t,n,i)));else{const i=(0,r.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,r.mf)(i)&&G(o,i,e)}else 0}function Xe(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let u;return c?u=c:o.length||n||i?(u={},o.length&&o.forEach((e=>et(u,e,a,!0))),et(u,t,a)):u=t,(0,r.Kn)(t)&&s.set(t,u),u}function et(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&et(e,o,n,!0),r&&r.forEach((t=>et(e,t,n,!0)));for(const s in t)if(i&&"expose"===s);else{const i=tt[s]||n&&n[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const tt={data:nt,props:st,emits:st,methods:st,computed:st,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:st,directives:st,watch:at,provide:nt,inject:it};function nt(e,t){return t?e?function(){return(0,r.l7)((0,r.mf)(e)?e.call(this,this):e,(0,r.mf)(t)?t.call(this,this):t)}:t:e}function it(e,t){return st(rt(e),rt(t))}function rt(e){if((0,r.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function st(e,t){return e?(0,r.l7)((0,r.l7)(Object.create(null),e),t):t}function at(e,t){if(!e)return t;if(!t)return e;const n=(0,r.l7)(Object.create(null),e);for(const i in t)n[i]=ot(e[i],t[i]);return n}function ct(e,t,n,o=!1){const s={},a={};(0,r.Nj)(a,Jt,1),e.propsDefaults=Object.create(null),lt(e,t,s,a);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:(0,i.Um)(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function ut(e,t,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=e,u=(0,i.IU)(s),[l]=e.propsOptions;let h=!1;if(!(o||c>0)||16&c){let i;lt(e,t,s,a)&&(h=!0);for(const o in u)t&&((0,r.RI)(t,o)||(i=(0,r.rs)(o))!==o&&(0,r.RI)(t,i))||(l?!n||void 0===n[o]&&void 0===n[i]||(s[o]=ht(l,u,o,void 0,e,!0)):delete s[o]);if(a!==u)for(const e in a)t&&(0,r.RI)(t,e)||(delete a[e],h=!0)}else if(8&c){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let o=n[i];if(A(e.emitsOptions,o))continue;const c=t[o];if(l)if((0,r.RI)(a,o))c!==a[o]&&(a[o]=c,h=!0);else{const t=(0,r._A)(o);s[t]=ht(l,u,t,c,e,!1)}else c!==a[o]&&(a[o]=c,h=!0)}}h&&(0,i.X$)(e,"set","$attrs")}function lt(e,t,n,o){const[s,a]=e.propsOptions;let c,u=!1;if(t)for(let i in t){if((0,r.Gg)(i))continue;const l=t[i];let h;s&&(0,r.RI)(s,h=(0,r._A)(i))?a&&a.includes(h)?(c||(c={}))[h]=l:n[h]=l:A(e.emitsOptions,i)||i in o&&l===o[i]||(o[i]=l,u=!0)}if(a){const t=(0,i.IU)(n),o=c||r.kT;for(let i=0;i<a.length;i++){const c=a[i];n[c]=ht(s,t,c,o[c],e,!(0,r.RI)(o,c))}}return u}function ht(e,t,n,i,o,s){const a=e[n];if(null!=a){const e=(0,r.RI)(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&(0,r.mf)(e)){const{propsDefaults:r}=o;n in r?i=r[n]:(bn(o),i=r[n]=e.call(null,t),wn())}else i=e}a[0]&&(s&&!e?i=!1:!a[1]||""!==i&&i!==(0,r.rs)(n)||(i=!0))}return i}function dt(e,t,n=!1){const i=t.propsCache,o=i.get(e);if(o)return o;const s=e.props,a={},c=[];let u=!1;if(!(0,r.mf)(e)){const i=e=>{u=!0;const[n,i]=dt(e,t,!0);(0,r.l7)(a,n),i&&c.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!s&&!u)return(0,r.Kn)(e)&&i.set(e,r.Z6),r.Z6;if((0,r.kJ)(s))for(let h=0;h<s.length;h++){0;const e=(0,r._A)(s[h]);ft(e)&&(a[e]=r.kT)}else if(s){0;for(const e in s){const t=(0,r._A)(e);if(ft(t)){const n=s[e],i=a[t]=(0,r.kJ)(n)||(0,r.mf)(n)?{type:n}:Object.assign({},n);if(i){const e=gt(Boolean,i.type),n=gt(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||(0,r.RI)(i,"default"))&&c.push(t)}}}}const l=[a,c];return(0,r.Kn)(e)&&i.set(e,l),l}function ft(e){return"$"!==e[0]}function pt(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function mt(e,t){return pt(e)===pt(t)}function gt(e,t){return(0,r.kJ)(t)?t.findIndex((t=>mt(t,e))):(0,r.mf)(t)&&mt(t,e)?0:-1}const yt=e=>"_"===e[0]||"$stable"===e,vt=e=>(0,r.kJ)(e)?e.map(un):[un(e)],bt=(e,t,n)=>{if(t._n)return t;const i=D(((...e)=>vt(t(...e))),n);return i._c=!1,i},wt=(e,t,n)=>{const i=e._ctx;for(const o in e){if(yt(o))continue;const n=e[o];if((0,r.mf)(n))t[o]=bt(o,n,i);else if(null!=n){0;const e=vt(n);t[o]=()=>e}}},_t=(e,t)=>{const n=vt(t);e.slots.default=()=>n},It=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,i.IU)(t),(0,r.Nj)(t,"_",n)):wt(t,e.slots={})}else e.slots={},t&&_t(e,t);(0,r.Nj)(e.slots,Jt,1)},kt=(e,t,n)=>{const{vnode:i,slots:o}=e;let s=!0,a=r.kT;if(32&i.shapeFlag){const e=t._;e?n&&1===e?s=!1:((0,r.l7)(o,t),n||1!==e||delete o._):(s=!t.$stable,wt(t,o)),a=t}else t&&(_t(e,t),a={default:1});if(s)for(const r in o)yt(r)||r in a||delete o[r]};function Et(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tt=0;function St(e,t){return function(n,i=null){(0,r.mf)(n)||(n=Object.assign({},n)),null==i||(0,r.Kn)(i)||(i=null);const o=Et(),s=new Set;let a=!1;const c=o.app={_uid:Tt++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Mn,get config(){return o.config},set config(e){0},use(e,...t){return s.has(e)||(e&&(0,r.mf)(e.install)?(s.add(e),e.install(c,...t)):(0,r.mf)(e)&&(s.add(e),e(c,...t))),c},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),c},component(e,t){return t?(o.components[e]=t,c):o.components[e]},directive(e,t){return t?(o.directives[e]=t,c):o.directives[e]},mount(r,s,u){if(!a){0;const l=tn(n,i);return l.appContext=o,s&&t?t(l,r):e(l,r,u),a=!0,c._container=r,r.__vue_app__=c,An(l.component)||l.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return o.provides[e]=t,c}};return c}}function Pt(e,t,n,s,a=!1){if((0,r.kJ)(e))return void e.forEach(((e,i)=>Pt(e,t&&((0,r.kJ)(t)?t[i]:t),n,s,a)));if(le(s)&&!a)return;const c=4&s.shapeFlag?An(s.component)||s.component.proxy:s.el,u=a?null:c,{i:l,r:h}=e;const d=t&&t.r,f=l.refs===r.kT?l.refs={}:l.refs,p=l.setupState;if(null!=d&&d!==h&&((0,r.HD)(d)?(f[d]=null,(0,r.RI)(p,d)&&(p[d]=null)):(0,i.dq)(d)&&(d.value=null)),(0,r.mf)(h))o(h,l,12,[u,f]);else{const t=(0,r.HD)(h),o=(0,i.dq)(h);if(t||o){const i=()=>{if(e.f){const n=t?(0,r.RI)(p,h)?p[h]:f[h]:h.value;a?(0,r.kJ)(n)&&(0,r.Od)(n,c):(0,r.kJ)(n)?n.includes(c)||n.push(c):t?(f[h]=[c],(0,r.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],e.k&&(f[e.k]=h.value))}else t?(f[h]=u,(0,r.RI)(p,h)&&(p[h]=u)):o&&(h.value=u,e.k&&(f[e.k]=u))};u?(i.id=-1,Ot(i,n)):i()}else 0}}function Ct(){}const Ot=Z;function xt(e){return At(e)}function At(e,t){Ct();const n=(0,r.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:u,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=r.dG,insertStaticContent:g}=e,y=(e,t,n,i=null,r=null,o=null,s=!1,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Qt(e,t)&&(i=Y(e),K(e,r,o,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=t;switch(u){case Lt:v(e,t,n,i);break;case Mt:b(e,t,n,i);break;case Ut:null==e&&_(t,n,i,s);break;case jt:N(e,t,n,i,r,o,s,a,c);break;default:1&h?P(e,t,n,i,r,o,s,a,c):6&h?D(e,t,n,i,r,o,s,a,c):(64&h||128&h)&&u.process(e,t,n,i,r,o,s,a,c,ee)}null!=l&&r&&Pt(l,e&&e.ref,o,t||e,!t)},v=(e,t,n,i)=>{if(null==e)o(t.el=u(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},b=(e,t,n,i)=>{null==e?o(t.el=l(t.children||""),n,i):t.el=e.el},_=(e,t,n,i)=>{[e.el,e.anchor]=g(e.children,t,n,i,e.el,e.anchor)},k=({el:e,anchor:t},n,i)=>{let r;while(e&&e!==t)r=p(e),o(e,n,i),e=r;o(t,n,i)},S=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=p(e),s(e),e=n;s(t)},P=(e,t,n,i,r,o,s,a,c)=>{s=s||"svg"===t.type,null==e?C(t,n,i,r,o,s,a,c):A(e,t,r,o,s,a,c)},C=(e,t,n,i,s,u,l,h)=>{let f,p;const{type:m,props:g,shapeFlag:y,transition:v,dirs:b}=e;if(f=e.el=c(e.type,u,g&&g.is,g),8&y?d(f,e.children):16&y&&x(e.children,f,null,i,s,u&&"foreignObject"!==m,l,h),b&&Fe(e,null,i,"created"),O(f,e,e.scopeId,l,i),g){for(const t in g)"value"===t||(0,r.Gg)(t)||a(f,t,null,g[t],u,e.children,i,s,J);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&fn(p,i,e)}b&&Fe(e,null,i,"beforeMount");const w=(!s||s&&!s.pendingBranch)&&v&&!v.persisted;w&&v.beforeEnter(f),o(f,t,n),((p=g&&g.onVnodeMounted)||w||b)&&Ot((()=>{p&&fn(p,i,e),w&&v.enter(f),b&&Fe(e,null,i,"mounted")}),s)},O=(e,t,n,i,r)=>{if(n&&m(e,n),i)for(let o=0;o<i.length;o++)m(e,i[o]);if(r){let n=r.subTree;if(t===n){const t=r.vnode;O(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},x=(e,t,n,i,r,o,s,a,c=0)=>{for(let u=c;u<e.length;u++){const c=e[u]=a?ln(e[u]):un(e[u]);y(null,c,t,n,i,r,o,s,a)}},A=(e,t,n,i,o,s,c)=>{const u=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=t;l|=16&e.patchFlag;const p=e.props||r.kT,m=t.props||r.kT;let g;n&&Ft(n,!1),(g=m.onVnodeBeforeUpdate)&&fn(g,n,t,e),f&&Fe(t,e,n,"beforeUpdate"),n&&Ft(n,!0);const y=o&&"foreignObject"!==t.type;if(h?F(e.dynamicChildren,h,u,n,i,y,s):c||Z(e,t,u,null,n,i,y,s,!1),l>0){if(16&l)R(u,t,p,m,n,i,o);else if(2&l&&p.class!==m.class&&a(u,"class",null,m.class,o),4&l&&a(u,"style",p.style,m.style,o),8&l){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const s=r[t],c=p[s],l=m[s];l===c&&"value"!==s||a(u,s,c,l,o,e.children,n,i,J)}}1&l&&e.children!==t.children&&d(u,t.children)}else c||null!=h||R(u,t,p,m,n,i,o);((g=m.onVnodeUpdated)||f)&&Ot((()=>{g&&fn(g,n,t,e),f&&Fe(t,e,n,"updated")}),i)},F=(e,t,n,i,r,o,s)=>{for(let a=0;a<t.length;a++){const c=e[a],u=t[a],l=c.el&&(c.type===jt||!Qt(c,u)||70&c.shapeFlag)?f(c.el):n;y(c,u,l,null,i,r,o,s,!0)}},R=(e,t,n,i,o,s,c)=>{if(n!==i){if(n!==r.kT)for(const u in n)(0,r.Gg)(u)||u in i||a(e,u,n[u],null,c,t.children,o,s,J);for(const u in i){if((0,r.Gg)(u))continue;const l=i[u],h=n[u];l!==h&&"value"!==u&&a(e,u,h,l,c,t.children,o,s,J)}"value"in i&&a(e,"value",n.value,i.value)}},N=(e,t,n,i,r,s,a,c,l)=>{const h=t.el=e?e.el:u(""),d=t.anchor=e?e.anchor:u("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(o(h,n,i),o(d,n,i),x(t.children,n,d,r,s,a,c,l)):f>0&&64&f&&p&&e.dynamicChildren?(F(e.dynamicChildren,p,n,r,s,a,c),(null!=t.key||r&&t===r.subTree)&&Rt(e,t,!0)):Z(e,t,n,d,r,s,a,c,l)},D=(e,t,n,i,r,o,s,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,s,c):L(t,n,i,r,o,s,c):M(e,t,c)},L=(e,t,n,i,r,o,s)=>{const a=e.component=gn(e,i,r);if(he(e)&&(a.ctx.renderer=ee),Tn(a),a.asyncDep){if(r&&r.registerDep(a,q),!e.el){const e=a.subTree=tn(Mt);b(null,e,t,n)}}else q(a,e,t,n,r,o,s)},M=(e,t,n)=>{const i=t.component=e.component;if(U(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void B(i,t,n);i.next=t,I(i.update),i.update()}else t.el=e.el,i.vnode=t},q=(e,t,n,o,s,a,c)=>{const u=()=>{if(e.isMounted){let t,{next:n,bu:i,u:o,parent:u,vnode:l}=e,h=n;0,Ft(e,!1),n?(n.el=l.el,B(e,n,c)):n=l,i&&(0,r.ir)(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&fn(t,u,n,l),Ft(e,!0);const d=j(e);0;const p=e.subTree;e.subTree=d,y(p,d,f(p.el),Y(p),e,s,a),n.el=d.el,null===h&&V(e,d.el),o&&Ot(o,s),(t=n.props&&n.props.onVnodeUpdated)&&Ot((()=>fn(t,u,n,l)),s)}else{let i;const{el:c,props:u}=t,{bm:l,m:h,parent:d}=e,f=le(t);if(Ft(e,!1),l&&(0,r.ir)(l),!f&&(i=u&&u.onVnodeBeforeMount)&&fn(i,d,t),Ft(e,!0),c&&ne){const n=()=>{e.subTree=j(e),ne(c,e.subTree,e,s,null)};f?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const i=e.subTree=j(e);0,y(null,i,n,o,e,s,a),t.el=i.el}if(h&&Ot(h,s),!f&&(i=u&&u.onVnodeMounted)){const e=t;Ot((()=>fn(i,d,e)),s)}(256&t.shapeFlag||d&&le(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&Ot(e.a,s),e.isMounted=!0,t=n=o=null}},l=e.effect=new i.qq(u,(()=>w(h)),e.scope),h=e.update=()=>l.run();h.id=e.uid,Ft(e,!0),h()},B=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,ut(e,t.props,r,n),kt(e,t.children,n),(0,i.Jd)(),E(),(0,i.lk)()},Z=(e,t,n,i,r,o,s,a,c=!1)=>{const u=e&&e.children,l=e?e.shapeFlag:0,h=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void z(u,h,n,i,r,o,s,a,c);if(256&f)return void $(u,h,n,i,r,o,s,a,c)}8&p?(16&l&&J(u,r,o),h!==u&&d(n,h)):16&l?16&p?z(u,h,n,i,r,o,s,a,c):J(u,r,o,!0):(8&l&&d(n,""),16&p&&x(h,n,i,r,o,s,a,c))},$=(e,t,n,i,o,s,a,c,u)=>{e=e||r.Z6,t=t||r.Z6;const l=e.length,h=t.length,d=Math.min(l,h);let f;for(f=0;f<d;f++){const i=t[f]=u?ln(t[f]):un(t[f]);y(e[f],i,n,null,o,s,a,c,u)}l>h?J(e,o,s,!0,!1,d):x(t,n,i,o,s,a,c,u,d)},z=(e,t,n,i,o,s,a,c,u)=>{let l=0;const h=t.length;let d=e.length-1,f=h-1;while(l<=d&&l<=f){const i=e[l],r=t[l]=u?ln(t[l]):un(t[l]);if(!Qt(i,r))break;y(i,r,n,null,o,s,a,c,u),l++}while(l<=d&&l<=f){const i=e[d],r=t[f]=u?ln(t[f]):un(t[f]);if(!Qt(i,r))break;y(i,r,n,null,o,s,a,c,u),d--,f--}if(l>d){if(l<=f){const e=f+1,r=e<h?t[e].el:i;while(l<=f)y(null,t[l]=u?ln(t[l]):un(t[l]),n,r,o,s,a,c,u),l++}}else if(l>f)while(l<=d)K(e[l],o,s,!0),l++;else{const p=l,m=l,g=new Map;for(l=m;l<=f;l++){const e=t[l]=u?ln(t[l]):un(t[l]);null!=e.key&&g.set(e.key,l)}let v,b=0;const w=f-m+1;let _=!1,I=0;const k=new Array(w);for(l=0;l<w;l++)k[l]=0;for(l=p;l<=d;l++){const i=e[l];if(b>=w){K(i,o,s,!0);continue}let r;if(null!=i.key)r=g.get(i.key);else for(v=m;v<=f;v++)if(0===k[v-m]&&Qt(i,t[v])){r=v;break}void 0===r?K(i,o,s,!0):(k[r-m]=l+1,r>=I?I=r:_=!0,y(i,t[r],n,null,o,s,a,c,u),b++)}const E=_?Nt(k):r.Z6;for(v=E.length-1,l=w-1;l>=0;l--){const e=m+l,r=t[e],d=e+1<h?t[e+1].el:i;0===k[l]?y(null,r,n,d,o,s,a,c,u):_&&(v<0||l!==E[v]?H(r,n,d,2):v--)}}},H=(e,t,n,i,r=null)=>{const{el:s,type:a,transition:c,children:u,shapeFlag:l}=e;if(6&l)return void H(e.component.subTree,t,n,i);if(128&l)return void e.suspense.move(t,n,i);if(64&l)return void a.move(e,t,n,ee);if(a===jt){o(s,t,n);for(let e=0;e<u.length;e++)H(u[e],t,n,i);return void o(e.anchor,t,n)}if(a===Ut)return void k(e,t,n);const h=2!==i&&1&l&&c;if(h)if(0===i)c.beforeEnter(s),o(s,t,n),Ot((()=>c.enter(s)),r);else{const{leave:e,delayLeave:i,afterLeave:r}=c,a=()=>o(s,t,n),u=()=>{e(s,(()=>{a(),r&&r()}))};i?i(s,a,u):u()}else o(s,t,n)},K=(e,t,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:d}=e;if(null!=a&&Pt(a,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const f=1&l&&d,p=!le(e);let m;if(p&&(m=s&&s.onVnodeBeforeUnmount)&&fn(m,t,e),6&l)Q(e.component,n,i);else{if(128&l)return void e.suspense.unmount(n,i);f&&Fe(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,r,ee,i):u&&(o!==jt||h>0&&64&h)?J(u,t,n,!1,!0):(o===jt&&384&h||!r&&16&l)&&J(c,t,n),i&&G(e)}(p&&(m=s&&s.onVnodeUnmounted)||f)&&Ot((()=>{m&&fn(m,t,e),f&&Fe(e,null,t,"unmounted")}),n)},G=e=>{const{type:t,el:n,anchor:i,transition:r}=e;if(t===jt)return void W(n,i);if(t===Ut)return void S(e);const o=()=>{s(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,s=()=>t(n,o);i?i(e.el,o,s):s()}else o()},W=(e,t)=>{let n;while(e!==t)n=p(e),s(e),e=n;s(t)},Q=(e,t,n)=>{const{bum:i,scope:o,update:s,subTree:a,um:c}=e;i&&(0,r.ir)(i),o.stop(),s&&(s.active=!1,K(a,e,t,n)),c&&Ot(c,t),Ot((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,i=!1,r=!1,o=0)=>{for(let s=o;s<e.length;s++)K(e[s],t,n,i,r)},Y=e=>6&e.shapeFlag?Y(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),X=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),E(),T(),t._vnode=e},ee={p:y,um:K,m:H,r:G,mt:L,mc:x,pc:Z,pbc:F,n:Y,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:X,hydrate:te,createApp:St(X,te)}}function Ft({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Rt(e,t,n=!1){const i=e.children,o=t.children;if((0,r.kJ)(i)&&(0,r.kJ)(o))for(let r=0;r<i.length;r++){const e=i[r];let t=o[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[r]=ln(o[r]),t.el=e.el),n||Rt(e,t)),t.type===Lt&&(t.el=e.el)}}function Nt(e){const t=e.slice(),n=[0];let i,r,o,s,a;const c=e.length;for(i=0;i<c;i++){const c=e[i];if(0!==c){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,e[n[a]]<c?o=a+1:s=a;c<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=t[s];return n}const Dt=e=>e.__isTeleport;const jt=Symbol(void 0),Lt=Symbol(void 0),Mt=Symbol(void 0),Ut=Symbol(void 0),qt=[];let Vt=null;function Bt(e=!1){qt.push(Vt=e?null:[])}function Zt(){qt.pop(),Vt=qt[qt.length-1]||null}let $t=1;function zt(e){$t+=e}function Ht(e){return e.dynamicChildren=$t>0?Vt||r.Z6:null,Zt(),$t>0&&Vt&&Vt.push(e),e}function Kt(e,t,n,i,r,o){return Ht(en(e,t,n,i,r,o,!0))}function Gt(e,t,n,i,r){return Ht(tn(e,t,n,i,r,!0))}function Wt(e){return!!e&&!0===e.__v_isVNode}function Qt(e,t){return e.type===t.type&&e.key===t.key}const Jt="__vInternal",Yt=({key:e})=>null!=e?e:null,Xt=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,r.HD)(e)||(0,i.dq)(e)||(0,r.mf)(e)?{i:F,r:e,k:t,f:!!n}:e:null;function en(e,t=null,n=null,i=0,o=null,s=(e===jt?0:1),a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yt(t),ref:t&&Xt(t),scopeId:R,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:F};return c?(hn(u,n),128&s&&e.normalize(u)):n&&(u.shapeFlag|=(0,r.HD)(n)?8:16),$t>0&&!a&&Vt&&(u.patchFlag>0||6&s)&&32!==u.patchFlag&&Vt.push(u),u}const tn=nn;function nn(e,t=null,n=null,o=0,s=null,a=!1){if(e&&e!==je||(e=Mt),Wt(e)){const i=on(e,t,!0);return n&&hn(i,n),$t>0&&!a&&Vt&&(6&i.shapeFlag?Vt[Vt.indexOf(e)]=i:Vt.push(i)),i.patchFlag|=-2,i}if(Rn(e)&&(e=e.__vccOpts),t){t=rn(t);let{class:e,style:n}=t;e&&!(0,r.HD)(e)&&(t.class=(0,r.C_)(e)),(0,r.Kn)(n)&&((0,i.X3)(n)&&!(0,r.kJ)(n)&&(n=(0,r.l7)({},n)),t.style=(0,r.j5)(n))}const c=(0,r.HD)(e)?1:B(e)?128:Dt(e)?64:(0,r.Kn)(e)?4:(0,r.mf)(e)?2:0;return en(e,t,n,o,s,c,a,!0)}function rn(e){return e?(0,i.X3)(e)||Jt in e?(0,r.l7)({},e):e:null}function on(e,t,n=!1){const{props:i,ref:o,patchFlag:s,children:a}=e,c=t?dn(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Yt(c),ref:t&&t.ref?n&&o?(0,r.kJ)(o)?o.concat(Xt(t)):[o,Xt(t)]:Xt(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==jt?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&on(e.ssContent),ssFallback:e.ssFallback&&on(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u}function sn(e=" ",t=0){return tn(Lt,null,e,t)}function an(e,t){const n=tn(Ut,null,e);return n.staticCount=t,n}function cn(e="",t=!1){return t?(Bt(),Gt(Mt,null,e)):tn(Mt,null,e)}function un(e){return null==e||"boolean"===typeof e?tn(Mt):(0,r.kJ)(e)?tn(jt,null,e.slice()):"object"===typeof e?ln(e):tn(Lt,null,String(e))}function ln(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:on(e)}function hn(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if((0,r.kJ)(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),hn(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||Jt in t?3===i&&F&&(1===F.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=F}}else(0,r.mf)(t)?(t={default:t,_ctx:F},n=32):(t=String(t),64&i?(n=16,t=[sn(t)]):n=8);e.children=t,e.shapeFlag|=n}function dn(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=(0,r.C_)([t.class,i.class]));else if("style"===e)t.style=(0,r.j5)([t.style,i.style]);else if((0,r.F7)(e)){const n=t[e],o=i[e];!o||n===o||(0,r.kJ)(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=i[e])}return t}function fn(e,t,n,i=null){s(e,t,7,[n,i])}const pn=Et();let mn=0;function gn(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||pn,a={uid:mn++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dt(o,s),emitsOptions:x(o,s),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:o.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=O.bind(null,a),e.ce&&e.ce(a),a}let yn=null;const vn=()=>yn||F,bn=e=>{yn=e,e.scope.on()},wn=()=>{yn&&yn.scope.off(),yn=null};function _n(e){return 4&e.vnode.shapeFlag}let In,kn,En=!1;function Tn(e,t=!1){En=t;const{props:n,children:i}=e.vnode,r=_n(e);ct(e,n,r,t),It(e,i);const o=r?Sn(e,t):void 0;return En=!1,o}function Sn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,i.Xl)(new Proxy(e.ctx,Ke));const{setup:s}=n;if(s){const n=e.setupContext=s.length>1?xn(e):null;bn(e),(0,i.Jd)();const c=o(s,e,0,[e.props,n]);if((0,i.lk)(),wn(),(0,r.tI)(c)){if(c.then(wn,wn),t)return c.then((n=>{Pn(e,n,t)})).catch((t=>{a(t,e,0)}));e.asyncDep=c}else Pn(e,c,t)}else Cn(e,t)}function Pn(e,t,n){(0,r.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Kn)(t)&&(e.setupState=(0,i.WL)(t)),Cn(e,n)}function Cn(e,t,n){const o=e.type;if(!e.render){if(!t&&In&&!o.render){const t=o.template||Xe(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,r.l7)((0,r.l7)({isCustomElement:n,delimiters:s},i),a);o.render=In(t,c)}}e.render=o.render||r.dG,kn&&kn(e)}bn(e),(0,i.Jd)(),We(e),(0,i.lk)(),wn()}function On(e){return new Proxy(e.attrs,{get(t,n){return(0,i.j)(e,"get","$attrs"),t[n]}})}function xn(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=On(e))},slots:e.slots,emit:e.emit,expose:t}}function An(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in ze?ze[n](e):void 0},has(e,t){return t in e||t in ze}}))}function Fn(e,t=!0){return(0,r.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Rn(e){return(0,r.mf)(e)&&"__vccOpts"in e}const Nn=(e,t)=>(0,i.Fl)(e,t,En);function Dn(e,t,n){const i=arguments.length;return 2===i?(0,r.Kn)(t)&&!(0,r.kJ)(t)?Wt(t)?tn(e,null,[t]):tn(e,t):tn(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Wt(n)&&(n=[n]),tn(e,t,n))}const jn=Symbol(""),Ln=()=>{{const e=z(jn);return e}};const Mn="3.2.47"},963:(e,t,n)=>{"use strict";n.d(t,{G2:()=>he,bM:()=>de,e8:()=>ue,iM:()=>ve,nr:()=>ce,ri:()=>Ie});var i=n(577),r=n(252),o=n(262);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),u={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?a.createElementNS(s,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const s=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),n),r===o||!(r=r.nextSibling))break}else{c.innerHTML=i?`<svg>${e}</svg>`:e;const r=c.content;if(i){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function l(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function h(e,t,n){const r=e.style,o=(0,i.HD)(n);if(n&&!o){if(t&&!(0,i.HD)(t))for(const e in t)null==n[e]&&f(r,e,"");for(const e in n)f(r,e,n[e])}else{const i=r.display;o?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const d=/\s*!important$/;function f(e,t,n){if((0,i.kJ)(n))n.forEach((n=>f(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=g(e,t);d.test(n)?e.setProperty((0,i.rs)(r),n.replace(d,""),"important"):e[r]=n}}const p=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let r=(0,i._A)(t);if("filter"!==r&&r in e)return m[t]=r;r=(0,i.kC)(r);for(let i=0;i<p.length;i++){const n=p[i]+r;if(n in e)return m[t]=n}return t}const y="http://www.w3.org/1999/xlink";function v(e,t,n,r,o){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(y,t.slice(6,t.length)):e.setAttributeNS(y,t,n);else{const r=(0,i.Pq)(t);null==n||r&&!(0,i.yA)(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function b(e,t,n,r,o,s,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,o,s),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const i=null==n?"":n;return e.value===i&&"OPTION"!==e.tagName||(e.value=i),void(null==n&&e.removeAttribute(t))}let c=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=(0,i.yA)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{e[t]=n}catch(u){0}c&&e.removeAttribute(t)}function w(e,t,n,i){e.addEventListener(t,n,i)}function _(e,t,n,i){e.removeEventListener(t,n,i)}function I(e,t,n,i,r=null){const o=e._vei||(e._vei={}),s=o[t];if(i&&s)s.value=i;else{const[n,a]=E(t);if(i){const s=o[t]=C(i,r);w(e,n,s,a)}else s&&(_(e,n,s,a),o[t]=void 0)}}const k=/(?:Once|Passive|Capture)$/;function E(e){let t;if(k.test(e)){let n;t={};while(n=e.match(k))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,i.rs)(e.slice(2));return[n,t]}let T=0;const S=Promise.resolve(),P=()=>T||(S.then((()=>T=0)),T=Date.now());function C(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,r.$d)(O(e,n.value),t,5,[e])};return n.value=e,n.attached=P(),n}function O(e,t){if((0,i.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const x=/^on[a-z]/,A=(e,t,n,r,o=!1,s,a,c,u)=>{"class"===t?l(e,r,o):"style"===t?h(e,n,r):(0,i.F7)(t)?(0,i.tR)(t)||I(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):F(e,t,r,o))?b(e,t,r,s,a,c,u):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),v(e,t,r,o))};function F(e,t,n,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&x.test(t)&&(0,i.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!x.test(t)||!(0,i.HD)(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const R="transition",N="animation",D=(e,{slots:t})=>(0,r.h)(r.P$,q(e),t);D.displayName="Transition";const j={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},L=D.props=(0,i.l7)({},r.P$.props,j),M=(e,t=[])=>{(0,i.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},U=e=>!!e&&((0,i.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function q(e){const t={};for(const i in e)i in j||(t[i]=e[i]);if(!1===e.css)return t;const{name:n="v",type:r,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:u=s,appearActiveClass:l=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=V(o),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:I,onBeforeAppear:k=v,onAppear:E=b,onAppearCancelled:T=w}=t,S=(e,t,n)=>{$(e,t?h:c),$(e,t?l:a),n&&n()},P=(e,t)=>{e._isLeaving=!1,$(e,d),$(e,p),$(e,f),t&&t()},C=e=>(t,n)=>{const i=e?E:b,o=()=>S(t,e,n);M(i,[t,o]),z((()=>{$(t,e?u:s),Z(t,e?h:c),U(i)||K(t,r,g,o)}))};return(0,i.l7)(t,{onBeforeEnter(e){M(v,[e]),Z(e,s),Z(e,a)},onBeforeAppear(e){M(k,[e]),Z(e,u),Z(e,l)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>P(e,t);Z(e,d),J(),Z(e,f),z((()=>{e._isLeaving&&($(e,d),Z(e,p),U(_)||K(e,r,y,n))})),M(_,[e,n])},onEnterCancelled(e){S(e,!1),M(w,[e])},onAppearCancelled(e){S(e,!0),M(T,[e])},onLeaveCancelled(e){P(e),M(I,[e])}})}function V(e){if(null==e)return null;if((0,i.Kn)(e))return[B(e.enter),B(e.leave)];{const t=B(e);return[t,t]}}function B(e){const t=(0,i.He)(e);return t}function Z(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function $(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function z(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let H=0;function K(e,t,n,i){const r=e._endId=++H,o=()=>{r===e._endId&&i()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=G(e,t);if(!s)return i();const u=s+"end";let l=0;const h=()=>{e.removeEventListener(u,d),o()},d=t=>{t.target===e&&++l>=c&&h()};setTimeout((()=>{l<c&&h()}),a+1),e.addEventListener(u,d)}function G(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${R}Delay`),o=i(`${R}Duration`),s=W(r,o),a=i(`${N}Delay`),c=i(`${N}Duration`),u=W(a,c);let l=null,h=0,d=0;t===R?s>0&&(l=R,h=s,d=o.length):t===N?u>0&&(l=N,h=u,d=c.length):(h=Math.max(s,u),l=h>0?s>u?R:N:null,d=l?l===R?o.length:c.length:0);const f=l===R&&/\b(transform|all)(,|$)/.test(i(`${R}Property`).toString());return{type:l,timeout:h,propCount:d,hasTransform:f}}function W(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>Q(t)+Q(e[n]))))}function Q(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function J(){return document.body.offsetHeight}const Y=new WeakMap,X=new WeakMap,ee={name:"TransitionGroup",props:(0,i.l7)({},L,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,r.FN)(),i=(0,r.Y8)();let s,a;return(0,r.ic)((()=>{if(!s.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!re(s[0].el,n.vnode.el,t))return;s.forEach(te),s.forEach(ne);const i=s.filter(ie);J(),i.forEach((e=>{const n=e.el,i=n.style;Z(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,$(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const c=(0,o.IU)(e),u=q(c);let l=c.tag||r.HY;s=a,a=t.default?(0,r.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,r.nK)(t,(0,r.U2)(t,u,i,n))}if(s)for(let e=0;e<s.length;e++){const t=s[e];(0,r.nK)(t,(0,r.U2)(t,u,i,n)),Y.set(t,t.el.getBoundingClientRect())}return(0,r.Wm)(l,null,a)}}};ee.props;function te(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ne(e){X.set(e,e.el.getBoundingClientRect())}function ie(e){const t=Y.get(e),n=X.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}function re(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&i.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&i.classList.add(e))),i.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(i);const{hasTransform:o}=G(i);return r.removeChild(i),o}const oe=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,i.kJ)(t)?e=>(0,i.ir)(t,e):t};function se(e){e.target.composing=!0}function ae(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ce={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e._assign=oe(o);const s=r||o.props&&"number"===o.props.type;w(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),s&&(r=(0,i.h5)(r)),e._assign(r)})),n&&w(e,"change",(()=>{e.value=e.value.trim()})),t||(w(e,"compositionstart",se),w(e,"compositionend",ae),w(e,"change",ae))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:o}},s){if(e._assign=oe(s),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(r&&e.value.trim()===t)return;if((o||"number"===e.type)&&(0,i.h5)(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},ue={deep:!0,created(e,t,n){e._assign=oe(n),w(e,"change",(()=>{const t=e._modelValue,n=pe(e),r=e.checked,o=e._assign;if((0,i.kJ)(t)){const e=(0,i.hq)(t,n),s=-1!==e;if(r&&!s)o(t.concat(n));else if(!r&&s){const n=[...t];n.splice(e,1),o(n)}}else if((0,i.DM)(t)){const e=new Set(t);r?e.add(n):e.delete(n),o(e)}else o(me(e,r))}))},mounted:le,beforeUpdate(e,t,n){e._assign=oe(n),le(e,t,n)}};function le(e,{value:t,oldValue:n},r){e._modelValue=t,(0,i.kJ)(t)?e.checked=(0,i.hq)(t,r.props.value)>-1:(0,i.DM)(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=(0,i.WV)(t,me(e,!0)))}const he={created(e,{value:t},n){e.checked=(0,i.WV)(t,n.props.value),e._assign=oe(n),w(e,"change",(()=>{e._assign(pe(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=oe(r),t!==n&&(e.checked=(0,i.WV)(t,r.props.value))}},de={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=(0,i.DM)(t);w(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?(0,i.h5)(pe(e)):pe(e)));e._assign(e.multiple?o?new Set(t):t:t[0])})),e._assign=oe(r)},mounted(e,{value:t}){fe(e,t)},beforeUpdate(e,t,n){e._assign=oe(n)},updated(e,{value:t}){fe(e,t)}};function fe(e,t){const n=e.multiple;if(!n||(0,i.kJ)(t)||(0,i.DM)(t)){for(let r=0,o=e.options.length;r<o;r++){const o=e.options[r],s=pe(o);if(n)(0,i.kJ)(t)?o.selected=(0,i.hq)(t,s)>-1:o.selected=t.has(s);else if((0,i.WV)(pe(o),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function pe(e){return"_value"in e?e._value:e.value}function me(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ge=["ctrl","shift","alt","meta"],ye={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ge.some((n=>e[`${n}Key`]&&!t.includes(n)))},ve=(e,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const i=ye[t[e]];if(i&&i(n,t))return}return e(n,...i)};const be=(0,i.l7)({patchProp:A},u);let we;function _e(){return we||(we=(0,r.Us)(be))}const Ie=(...e)=>{const t=_e().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=ke(e);if(!r)return;const o=t._component;(0,i.mf)(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function ke(e){if((0,i.HD)(e)){const t=document.querySelector(e);return t}return e}},577:(e,t,n)=>{"use strict";function i(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{C_:()=>h,DM:()=>R,E9:()=>se,F7:()=>T,Gg:()=>H,HD:()=>L,He:()=>re,Kj:()=>D,Kn:()=>U,NO:()=>k,Nj:()=>ne,Od:()=>C,PO:()=>$,Pq:()=>f,RI:()=>x,S0:()=>z,W7:()=>Z,WV:()=>g,Z6:()=>_,_A:()=>W,_N:()=>F,aU:()=>ee,dG:()=>I,e1:()=>o,fY:()=>i,h5:()=>ie,hR:()=>X,hq:()=>y,ir:()=>te,j5:()=>s,kC:()=>Y,kJ:()=>A,kT:()=>w,l7:()=>P,mf:()=>j,rs:()=>J,tI:()=>q,tR:()=>S,yA:()=>p,yk:()=>M,zw:()=>v});const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=i(r);function s(e){if(A(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=L(i)?l(i):s(i);if(r)for(const e in r)t[e]=r[e]}return t}return L(e)||U(e)?e:void 0}const a=/;(?![^(]*\))/g,c=/:([^]+)/,u=/\/\*.*?\*\//gs;function l(e){const t={};return e.replace(u,"").split(a).forEach((e=>{if(e){const n=e.split(c);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function h(e){let t="";if(L(e))t=e;else if(A(e))for(let n=0;n<e.length;n++){const i=h(e[n]);i&&(t+=i+" ")}else if(U(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f=i(d);function p(e){return!!e||""===e}function m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=g(e[i],t[i]);return n}function g(e,t){if(e===t)return!0;let n=N(e),i=N(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=M(e),i=M(t),n||i)return e===t;if(n=A(e),i=A(t),n||i)return!(!n||!i)&&m(e,t);if(n=U(e),i=U(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!g(e[n],t[n]))return!1}}return String(e)===String(t)}function y(e,t){return e.findIndex((e=>g(e,t)))}const v=e=>L(e)?e:null==e?"":A(e)||U(e)&&(e.toString===V||!j(e.toString))?JSON.stringify(e,b,2):String(e),b=(e,t)=>t&&t.__v_isRef?b(e,t.value):F(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:R(t)?{[`Set(${t.size})`]:[...t.values()]}:!U(t)||A(t)||$(t)?t:String(t),w={},_=[],I=()=>{},k=()=>!1,E=/^on[^a-z]/,T=e=>E.test(e),S=e=>e.startsWith("onUpdate:"),P=Object.assign,C=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},O=Object.prototype.hasOwnProperty,x=(e,t)=>O.call(e,t),A=Array.isArray,F=e=>"[object Map]"===B(e),R=e=>"[object Set]"===B(e),N=e=>"[object Date]"===B(e),D=e=>"[object RegExp]"===B(e),j=e=>"function"===typeof e,L=e=>"string"===typeof e,M=e=>"symbol"===typeof e,U=e=>null!==e&&"object"===typeof e,q=e=>U(e)&&j(e.then)&&j(e.catch),V=Object.prototype.toString,B=e=>V.call(e),Z=e=>B(e).slice(8,-1),$=e=>"[object Object]"===B(e),z=e=>L(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,H=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),K=e=>{const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}},G=/-(\w)/g,W=K((e=>e.replace(G,((e,t)=>t?t.toUpperCase():"")))),Q=/\B([A-Z])/g,J=K((e=>e.replace(Q,"-$1").toLowerCase())),Y=K((e=>e.charAt(0).toUpperCase()+e.slice(1))),X=K((e=>e?`on${Y(e)}`:"")),ee=(e,t)=>!Object.is(e,t),te=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ne=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ie=e=>{const t=parseFloat(e);return isNaN(t)?e:t},re=e=>{const t=L(e)?Number(e):NaN;return isNaN(t)?e:t};let oe;const se=()=>oe||(oe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},177:function(e,t){var n="undefined"!==typeof self?self:this,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();(function(e){(function(t){var n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function i(e){return e&&DataView.prototype.isPrototypeOf(e)}if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!==typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function d(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function f(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&i(e)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return f(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=s(e),t=a(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype["delete"]=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=a(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},u.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},u.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function b(e,t){t=t||{};var n=t.body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=v(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function _(e){var t=new u,n=e.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t}function I(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},I.error=function(){var e=new I(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];I.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new I(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(T){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,i){return new Promise((function(r,o){var s=new b(e,i);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new I(t,e))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&n.blob&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=u,e.Request=b,e.Response=I),t.Headers=u,t.Request=b,t.Response=I,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=i;t=r.fetch,t["default"]=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,e.exports=t},70:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){var e=e||function(e,t){var i;if("undefined"!==typeof window&&window.crypto&&(i=window.crypto),"undefined"!==typeof self&&self.crypto&&(i=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!==typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!==typeof n.g&&n.g.crypto&&(i=n.g.crypto),!i)try{i=n(548)}catch(g){}var r=function(){if(i){if("function"===typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base=function(){return{extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var a=0;a<r;a+=4)t[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new u.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,o=i.sigBytes,s=this.blockSize,a=4*s,c=o/a;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var l=c*s,h=e.min(4*l,o);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(r,d);n=r.splice(0,l),i.sigBytes-=h}return new u.init(n,h)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(a.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math);return e}))},106:function(e,t,n){(function(t,i){e.exports=i(n(70))})(0,(function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[];(function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0})();var c=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],v=e[t+7],b=e[t+8],w=e[t+9],_=e[t+10],I=e[t+11],k=e[t+12],E=e[t+13],T=e[t+14],S=e[t+15],P=o[0],C=o[1],O=o[2],x=o[3];P=u(P,C,O,x,s,7,a[0]),x=u(x,P,C,O,c,12,a[1]),O=u(O,x,P,C,f,17,a[2]),C=u(C,O,x,P,p,22,a[3]),P=u(P,C,O,x,m,7,a[4]),x=u(x,P,C,O,g,12,a[5]),O=u(O,x,P,C,y,17,a[6]),C=u(C,O,x,P,v,22,a[7]),P=u(P,C,O,x,b,7,a[8]),x=u(x,P,C,O,w,12,a[9]),O=u(O,x,P,C,_,17,a[10]),C=u(C,O,x,P,I,22,a[11]),P=u(P,C,O,x,k,7,a[12]),x=u(x,P,C,O,E,12,a[13]),O=u(O,x,P,C,T,17,a[14]),C=u(C,O,x,P,S,22,a[15]),P=l(P,C,O,x,c,5,a[16]),x=l(x,P,C,O,y,9,a[17]),O=l(O,x,P,C,I,14,a[18]),C=l(C,O,x,P,s,20,a[19]),P=l(P,C,O,x,g,5,a[20]),x=l(x,P,C,O,_,9,a[21]),O=l(O,x,P,C,S,14,a[22]),C=l(C,O,x,P,m,20,a[23]),P=l(P,C,O,x,w,5,a[24]),x=l(x,P,C,O,T,9,a[25]),O=l(O,x,P,C,p,14,a[26]),C=l(C,O,x,P,b,20,a[27]),P=l(P,C,O,x,E,5,a[28]),x=l(x,P,C,O,f,9,a[29]),O=l(O,x,P,C,v,14,a[30]),C=l(C,O,x,P,k,20,a[31]),P=h(P,C,O,x,g,4,a[32]),x=h(x,P,C,O,b,11,a[33]),O=h(O,x,P,C,I,16,a[34]),C=h(C,O,x,P,T,23,a[35]),P=h(P,C,O,x,c,4,a[36]),x=h(x,P,C,O,m,11,a[37]),O=h(O,x,P,C,v,16,a[38]),C=h(C,O,x,P,_,23,a[39]),P=h(P,C,O,x,E,4,a[40]),x=h(x,P,C,O,s,11,a[41]),O=h(O,x,P,C,p,16,a[42]),C=h(C,O,x,P,y,23,a[43]),P=h(P,C,O,x,w,4,a[44]),x=h(x,P,C,O,k,11,a[45]),O=h(O,x,P,C,S,16,a[46]),C=h(C,O,x,P,f,23,a[47]),P=d(P,C,O,x,s,6,a[48]),x=d(x,P,C,O,v,10,a[49]),O=d(O,x,P,C,T,15,a[50]),C=d(C,O,x,P,g,21,a[51]),P=d(P,C,O,x,k,6,a[52]),x=d(x,P,C,O,p,10,a[53]),O=d(O,x,P,C,_,15,a[54]),C=d(C,O,x,P,c,21,a[55]),P=d(P,C,O,x,b,6,a[56]),x=d(x,P,C,O,S,10,a[57]),O=d(O,x,P,C,y,15,a[58]),C=d(C,O,x,P,E,21,a[59]),P=d(P,C,O,x,m,6,a[60]),x=d(x,P,C,O,I,10,a[61]),O=d(O,x,P,C,f,15,a[62]),C=d(C,O,x,P,w,21,a[63]),o[0]=o[0]+P|0,o[1]=o[1]+C|0,o[2]=o[2]+O|0,o[3]=o[3]+x|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var o=t.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),e.MD5}))},389:function(e,t,n){(function(t,i){e.exports=i(n(70))})(0,(function(e){return function(){var t=e,n=t.lib,i=n.WordArray,r=n.Hasher,o=t.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],u=0;u<80;u++){if(u<16)s[u]=0|e[t+u];else{var l=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=l<<1|l>>>31}var h=(i<<5|i>>>27)+c+s[u];h+=u<20?1518500249+(r&o|~r&a):u<40?1859775393+(r^o^a):u<60?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,c=a,a=o,o=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=r._createHelper(a),t.HmacSHA1=r._createHmacHelper(a)}(),e.SHA1}))},872:function(e,t,n){(function(t,i){e.exports=i(n(70))})(0,(function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],c=[];(function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}var i=2,r=0;while(r<64)e(i)&&(r<8&&(a[r]=n(t.pow(i,.5))),c[r]=n(t.pow(i,1/3)),r++),i++})();var u=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[f]=m+u[f-7]+y+u[f-16]}var v=a&l^~a&h,b=i&r^i&o^r&o,w=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),_=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),I=d+_+v+c[f]+u[f],k=w+b;d=h,h=l,l=a,a=s+I|0,s=o,o=r,r=i,i=I+k|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),e.SHA256}))},19:e=>{e.exports=window.FormData},315:()=>{function e(t,n,i,r){if(!Array.isArray(n))return n?e.property(t,n,i,r):"__"in t?t["__"]:e.property(t,"__",i=new e.properties(t),r);for(var o in n)e.property(t,n[o],i,r)}function t(e,t){var r;return Number.format(n(e,r=i(e)),t=Number.properties(t)).concat(t.delimiter,Number.BYTE.unit[r])}function n(e,t){return e/Math.BYTE.log[t]}function i(e){for(var t in Math.BYTE.unit)if(e>Math.BYTE.log[Math.BYTE.unit[t]]-1)return Math.BYTE.unit[t];return 0}function r(){}e.properties=class{constructor(t){e.property(this,"__",t)}function(e,t,n){return this.apply(e,t,n)}class(e,t,n){return this.apply(e,t,n)}clone(e,t,n){return this.apply(e,t,n)}on(e,t,n){return this.apply(e,t,n)}set(e,t,n){return this.apply(e,t,n)}apply(t,n,i){if(Array.isArray(t))for(var r in t)e.property(this["__"],t[r],n,i);else e.property(this["__"],t,n,i);return n}export(e){return arguments.length?this["__"].exports=e:this["__"].exports}},e.get=function(e,t,n,i){return Object.defineProperty(e,t,Object.assign({get:n},i)),n},e.set=function(e,t,n,i){return Object.defineProperty(e,t,Object.assign({set:n},i)),n},e.value=function(e,t,n,i){return Object.defineProperty(e,t,Object.assign({value:n},{writable:!0},i)),n},e.property=function(e,t,n,i){return Object.defineProperty(e,t,Object.assign({value:n},i)),n},e.function=function(t,n,i,r){return e.property(t,n,i,r)},e.class=function(t,n,i,r){return e.property(t,n,i,r)},e.descriptor=function(t,n,i){return e.property(e.properties.prototype,t,n,i)},e(Object,"type",(function(e){return typeof e})),e(Object.type,"array",(function(e){return arguments.length?e instanceof Array||"array"===typeof e:Array})),e(Object.type,"boolean",(function(e){return arguments.length?e instanceof Boolean||"boolean"===typeof e:Boolean})),e(Object.type,"date",(function(e){return arguments.length?e instanceof Date||"date"===typeof e:Date})),e(Object.type,"error",(function(e){return arguments.length?e instanceof Error||"error"===typeof e:Error})),e(Object.type,"function",(function(e){return arguments.length?e instanceof Function||"function"===typeof e:Function})),e(Object.type,"number",(function(e){return arguments.length?e instanceof Number||"number"===typeof e:Number})),e(Object.type,"object",(function(e){return arguments.length?e instanceof Object||"object"===typeof e:Object})),e(Object.type,"regex",(function(e){return arguments.length?e instanceof RegExp||"regex"===typeof e:RegExp})),e(Object.type,"promise",(function(e){return arguments.length?e instanceof Promise||"promise"===typeof e:Promise})),e(Object.type,"string",(function(e){return arguments.length?e instanceof String||"string"===typeof e:String})),e(Object.type,"of",(function(e){return Object.prototype.toString.call(e)})),e(Object.type.of,"array",(function(e){return arguments.length?"[object Array]"===Object.type.of(e):"[object Array]"})),e(Object.type.of,"boolean",(function(e){return arguments.length?"[object Boolean]"===Object.type.of(e):"[object Boolean]"})),e(Object.type.of,"date",(function(e){return arguments.length?"[object Date]"===Object.type.of(e):"[object Date]"})),e(Object.type.of,"function",(function(e){return arguments.length?"[object Function]"===Object.type.of(e):"[object Function]"})),e(Object.type.of,"null",(function(e){return arguments.length?"[object Null]"===Object.type.of(e):"[object Null]"})),e(Object.type.of,"number",(function(e){return arguments.length?"[object Number]"===Object.type.of(e):"[object Number]"})),e(Object.type.of,"object",(function(e){return arguments.length?"[object Object]"===Object.type.of(e):"[object Object]"})),e(Object.type.of,"regex",(function(e){return arguments.length?"[object RegExp]"===Object.type.of(e):"[object RegExp]"})),e(Object.type.of,"string",(function(e){return arguments.length?"[object String]"===Object.type.of(e):"[object String]"})),e(Object.is,"object",(function(e){return Object.isObject(e)})),e(Object,"isObject",(function(e){return!Function.isFunction(e)&&(!Array.isArray(e)&&(!!Object.type.of.object(e)||Object.type.object(e)))})),e(Object.is,"array",(function(e){return Array.isArray(e)})),e(Object.is,"string",(function(e){return String.isString(e)})),e(String,"isString",(function(e){return!!Object.type.of.string(e)||Object.type.string(e)})),e(Object.is,"boolean",(function(e){return Boolean.isBoolean(e)})),e(Boolean,"isBoolean",(function(e){return!!Object.type.of.boolean(e)||Object.type.boolean(e)})),e(Object.is,"function",(function(e){return Function.isFunction(e)})),e(Function,"isFunction",(function(e){return!!Object.type.of.function(e)||Object.type.function(e)})),e(Object.is,"date",(function(e){return Date.isDate(e)})),e(Date,"isDate",(function(e){return!!Object.type.of.date(e)||Object.type.date(e)})),e(Object.is,"regex",(function(e){return RegExp.isRegExp(e)})),e(RegExp,"isRegExp",(function(e){return!!Object.type.of.regex(e)||Object.type.regex(e)})),e(Object.is,"buffer",(function(e){return Buffer.isBuffer(e)})),e(Object.is,"number",(function(e){return Number.isNumber(e)})),e(Number,"isNumber",(function(e){return!1===Number.isNaN(Number(e))?!!Object.type.of.number(e)||!!Object.type.of.string(e)&&!!e:Object.type.number(e)})),e(Object.is,"nan",(function(e){return Number.isNaN(e)})),e(Object.is,"integer",(function(e){return Number.isInteger(e)})),e(Object.is,"float",(function(e){return Number.isFloat(e)})),e(Number,"isFloat",(function(e){return!!Number.isNumber(e)&&2===e.toString().split(Number.float()).length})),e(Object.is,"decimal",(function(e){return Number.isDecimal(e)})),e(Number,"isDecimal",(function(e){return Number.isFloat(e)})),e(Object.is,"double",(function(e){return Number.isDouble(e)})),e(Number,"isDouble",(function(e){return Number.isFloat(e)})),e(Object.is,"finite",(function(e){return Number.isFinite(e)})),e(Object.is,"promise",(function(e){return Object.type.promise(e)})),e(Object.is,"stream",(function(e){return Object.type.stream(e)})),e(Object.is,"true",(function(e){return!0===e})),e(Object.is,"false",(function(e){return!1===e})),e(Object.is,"null",(function(e){return!!Object.type.of.null(e)||null===e})),e(Object.is,"define",(function(e){return!Object.un.define(e)})),e(Object.is,"set",(function(e,t){return!Object.un.set(e)})),e(Object.is,"char",(function(e){return["string","number"].includes(Object.type(e))})),e(Object.is,"empty",(function(e){return String.isString(e)?""===e.trim():Number.isNumber(e)?0===Number(e):Array.isArray(e)?0===e.length:Object.isObject(e)?0===Object.length(e):Object.is.define(e)||!1===Object.is.null(e)})),e(Object.is,"ip",(function(e){if(String.isString(e)&&4===(e=e.split(".")).length){for(var t in e){if(!1===Number.isNumber(e[t]))return!1;if(Number(e[t])<0)return!1;if(Number(e[t])>255)return!1}return!0}return!1})),e(Object,"un",(function(e){return!e})),e(Object.un,"define",(function(e){return arguments.length?void 0===e:void 0})),e(Object.un,"set",(function(e){return!!Object.un.define(e)||!!Object.is.null(e)})),e(Object.un,"char",(function(e){return Function.isFunction(e)||Object.isObject(e)||Array.isArray(e)})),e(Object,"to",(function(){})),e(Object.to,"array",(function(e){return Object.values(e)})),e(Object.to,"string",(function(e){return Object.is.set(e)?e.toString():""})),e(Object.to,"number",(function(e){return Number.isNumber(Object.to.string(e).trim())?Number(e):0})),e(Object.to,"integer",(function(e){return Number.isNaN(e=parseInt(e))?0:e})),e(Object.to,"float",(function(e){return Number.isNaN(e=parseFloat(e))?0:e})),e(Object.to,"boolean",(function(e){return Boolean.isBoolean(e)?e:!![1].concat(Object.to_bool["true"]).includes(e)||![0].concat(Object.to_bool["false"]).includes(e)&&!!e})),e(Object.to,"email",(function(e){return e?e.toString().toLowerCase().trim():""})),e(Object.to,"promise",(function(e,t){return t?new Function.promise.s(new Promise(t.bind(e))):e instanceof Promise||e.then||e.catch?new Function.promise.s(e):new Function.promise.s(new Promise(e))})),e(Object,"to_boolean",(function(e){return Object.is_true(e)?"true":"false"})),e(Object,"to_bool",(function(e,t="default"){return t=Object.to_bool[t],Object.is_true(e)?t.true:t.false})),e.value(Object.to_bool,"true",["true","enable","on","yes","y"]),e.value(Object.to_bool,"false",["false","disable","off","no","n"]),e.value(Object.to_bool,"default",{true:"enable",false:"disable"}),e.value(Object.to_bool,"switch",{true:"on",false:"off"}),e(Object,"is_true",(function(e){return!0===e||Object.to_bool["true"].includes(e)})),e(Object,"is_false",(function(e){return!1===e||Object.to_bool["false"].includes(e)})),e(Object,"to_style",(function(e){var t=[];for(var n in e)t.push(n+":"+e[n]);return t.join("; ")})),e(Object,"on",{}),e(Object,"descriptor",(function(){return e.property(Object.prototype,key,value,option)})),e(Object,"init",(function(e){var t=Object.empty();for(var n in e)t[n]=e[n];return e?t:e})),e(Object,"only",(function(e){var t=Object.empty(),n=Object.keys(e);for(var i in n)t[n[i]]=e[n[i]];return t})),e(Object,"concat",(function(...e){var t=Object.empty();for(var n in e)for(var i in e[n])t[i]=e[n][i];return t})),e(Object,"empty",(function(){return Object.assign({})})),e(Object,"exist",(function(e,t,n){return Object.values(t).includes(e,n)})),e(Object,"find",(function(e,t){})),e(Object,"filter",(function(e,t){var n=Object.empty();for(var i in e)!0===t(e[i],i,e)&&(n[i]=e[i]);return n})),e(Object,"flip",(function(e){var t=Object.empty();for(var n in e)t[e[n]]=n;return t})),e(Object,"format",(function(e,t,n){if(t=t.toString())for(var i in n=Object.keys.format(e,n))t=t.replace(i,n[i]);return t})),e(Object,"get",(function(e,t,n){return t in e?e[t]:n})),e(Object,"has",(function(e,t){return e in t})),e(Object,"length",(function(e){var t=0;for(var n in e)t++;return t})),e(Object,"join",(function(e,t){if(t)for(var n in t)Object.is.object(t[n])?e[n]=Object.join(e[n],t[n]):e[n]=t[n];return e})),e(Object,"replace",(function(e,t){if(t=t.toString())for(var n in e)t=t.replace(n,e[n]);return t})),e(Object,"clone",(function(e){return JSON.parse(JSON.stringify(e))})),e(Object,"merge",(function(e,t){if(null===e)return null;if(null===t)return null;var n={};for(var i in e)n[i]=e[i];for(var i in t)Object.is.object(t[i])&&Object.is.object(n[i])?n[i]=Object.merge(n[i],t[i]):n[i]=t[i];return n})),e(Object,"__merge",(function(e,t){var n=Object.init(e);if(e)for(var i in t)i in n&&Object.is.object(n[i])?n[i]=Object.merge(n[i],t[i]):n[i]=t[i];return n})),e(Object,"step",(function(e,t,n="."){if(t.includes(n)){var i={},r=t.split(n);for(var o in e)i[o]=e[o];for(var o in r){if(!Object.is.object(i))return;if(!(r[o]in i))return;i=i[r[o]]}return i}return e[t]})),e(Object,"__step",(function(e,t,n="."){if(t.includes(n)){var i=Object.init(e),r=t.split(n);for(var o in r)r[o]in i&&(i=i[r[o]]);return i}return e[t]})),e(Object.keys,"exist",(function(e,t,n){return Object.keys(t).includes(e,n)})),e(Object.keys,"find",(function(e,t){for(var n in t)if(t[n]===e)return n})),e(Object.keys,"format",(function(e,t=String.format.key){e=Object.only(e);var n=Object.empty();if(Object.is.string(t))for(var i in e)n[t.replace(String.format.key,i)]=e[i];if(Object.is.object(t))for(var i in e)Object.is.object(e[i])&&(n[i]=Object.keys.format(e[i],t)),t[i]?(n[t[i]]=e[i],delete n[i]):n[i]=e[i];return n})),e(Object,"key",Object.keys),e(Object,"value",Object.values),e(Object,"sort",(function(e,t){var n;return n=Object.is.object(e)?Object.values(e):[...e],n.sort((function(e,n){var i=Object.sort.convert(e,t),r=Object.sort.convert(n,t);return i<r?-1:i>r?1:0})),n})),e(Object.sort,"convert",(function(e,t){for(var n in t=t.split("."),e)if(n===t[0]){var i=e[n];for(var r in t)0!=r&&Object.is.define(i[t[r]])&&(i=i[t[r]]);return i}})),e(Object,"default",(function(e,t){return Object.is.set(e)?e:t})),e(Object,"id",(function(e){if(arguments.length){var t;try{t=new Function.ObjectID(e)}catch(n){t=e}return t}return Function.ObjectID()})),e(Function,"catch",class{constructor(){this.data={}}get(e){return this.data[e]}push(e){return this.data[e]=!0,this}remove(e){return delete this.data[e],this}}),e(Array,"descriptor",(function(t,n,i){return e.property(Array.prototype,t,n,i)})),e(Array.prototype,"string",(function(){return this.toString()})),e(Array.prototype,"begin",(function(e=""){for(var t in this)return this[t];return e})),e(Array.prototype,"clone",(function(){var e=[];for(var t in this)e.push(this[t]);return e})),e(Array.prototype,"end",(function(e=""){for(var t in this)e=this[t];return e})),e(Array.prototype,"exist",(function(e,t){return this.includes(e,t)})),e(Array.prototype,"for",(function(e){this.forEach(e)})),e(Array.prototype,"include",(function(e,t){for(var n in e){if(this.includes(e[n],t))continue;return!1}return!0})),e(Array.prototype,"have",(function(e,t){for(var n in e)if(this.includes(e[n],t))return!0;return!1})),e(Array.prototype,"index",(function(e,t){var n;return n=Object.is.function(e)?this.slice(t).findIndex(e):this.indexOf(e,t),Function.indexOf(n)})),e(Array.prototype,"max",(function(){return Math.max(...this)})),e(Array.prototype,"min",(function(){return Math.min(...this)})),e(Array.prototype,"rand",(function(){return this[(this.length-1).shuffle()]})),e(Array.prototype,"replace",(function(e,t,n){var i;if(t=t.toString())for(var r in i=this.slice(n))t=t.replace(i[r],e);return t})),e(Array.prototype,"shuffle",(function(e){var t=this.slice(e),n=(this.length-1).decrease();for(var i in n){var r=n[i].shuffle(),o=t[n[i]];t[n[i]]=t[r],t[r]=o}return t})),e(Array.prototype,"unique",(function(){return Array.from(new Set(this))})),e(Array.prototype,"trim",(function(){var e=[];for(var t in this)e.push(this[t].toString().trim());return e})),e(Array.prototype,"key",(function(){var e=[];for(var[t]of this.entries())e.push(t);return e})),e(Array.prototype,"value",(function(){return this})),e(Array.prototype,"insert",(function(e,...t){return this.splice(e,0,...t)})),e(Array.prototype,"update",(function(e,...t){return this.splice(e,1,...t)})),e(Array.prototype,"delete",(function(e,t=1){return Object.is.string(e)?this.filter((function(t){return t!==e})):this.splice(e,t)})),e(Array.prototype,"implode",(function(e=""){return e===String.space&&(e=String.char.space),this.join(e)})),e(Array.prototype,"next",(function(e){return this[Number(e)+1]})),e(Array.prototype,"previous",(function(e){return this[Number(e)-1]})),e(Array.prototype,"single",(function(){for(var e in this)return this[e]})),e(Array.prototype,"count",(function(e,t){if(arguments.length){if(Object.is.object(e)){var n=[],i=0,r=Object.length(e),o=Object.is.function(e);for(var s in this){var a=0;if(o){if(!0!==o(this[s],s,e))continue;a++}else for(var c in e)Object.step(this[s],c)===e[c]&&a++;a===r&&(t&&n.push(this[s]),i++)}return t?n:i}n=this.slice(t),i=0;for(var s in n)n[s]===e&&i++;return i}return this.length-1})),e(Array.prototype,"distinct",(function(e){var t=[];for(var n in this){var i=Object.step(this[n],e);!1===t.includes(i)&&i&&t.push(i)}return t})),e(Array.prototype,"select",(function(e,t,n=""){1===arguments.length&&(t=e)&&(e=null);var i=Object.length(t);for(var r in this){var o=0;for(var s in t)this[r][Function.key.s(s)]===t[s]&&o++;if(o===i)return e?"*"===e?this[r]:this[r][e]:this[r]}return n})),e(Array.prototype,"get",(function(e,t){return e?this[t||0][Function.key.s(e)]:this[0]})),e(Array.prototype,"where",(function(e){var t=Object.length(e);for(var n in this){var i=0;for(var r in e)this[n][r]===e[r]&&i++;if(i===t)return this[n]}return{}})),e(Array.prototype,"index_of",(function(e,t){var n;return n=Object.is.function(e)?this.slice(t).findIndex((function(t){return e(new Function.fire.base.fetch.data(t))})):this.indexOf(e,t),Function.indexOf(n)})),e(Array.prototype,"fetch",(function(e){var t=Array.fetch_of.context.end();for(var n in this)e(new t(this[n]))})),e(Array,"fetch_of",(function(e){Array.fetch_of.context.push(e)})),e(Array.fetch_of,"context",[]),Array.fetch_of(class{constructor(e){this.data=e}get(e){return e?("$:id"===e&&"_id"in this.data&&(e="_id"),"$:id"===e&&"$id"in this.data&&(e="$id"),"$:identity"===e&&(e="_identity"),"$:doc"===e&&(e="_doc"),"$:reference"===e&&(e="_reference"),"$:stamp"===e&&(e="_stamp"),this.data[e]):this.data}}),e(String,"descriptor",(function(t,n,i){return e.property(String.prototype,t,n,i)})),e(String.prototype,"value",(function(){return this.valueOf()})),e(String.prototype,"string",(function(){return this.toString()})),e(String.prototype,"number",(function(){return Object.to.number(this)})),e(String.prototype,"integer",(function(){return Object.to.integer(this)})),e(String.prototype,"float",(function(){return Object.to.float(this)})),e(String.prototype,"char",(function(){return String.char(this)})),e(String.prototype,"md",(function(){return Function.hash.md(this)})),e(String.prototype,"sha",(function(e){return e?Function.hash.sha.one(this):Function.hash.sha(this)})),e(String.prototype,"after",(function(e,t){return(t=this.indexOf(e,t))>=0?this.substr(t+e.length):""})),e(String.prototype,"before",(function(e,t){return(t=this.indexOf(e,t))>=0?this.substr(0,t):""})),e(String.prototype,"begin",(function(e=1,t){return Object.is.string(e)?this.startsWith(e,t):this.substr(0,e)})),e(String.prototype,"big",(function(){return this.toUpperCase()})),e(String.prototype,"count",(function(e,t){return arguments.length?this.substr(t).split(e).length-1:this.length-1})),e(String.prototype,"decode",(function(){return String.decode(this)})),e(String.prototype,"delete",(function(e){return this.split(e).implode()})),e(String.prototype,"encode",(function(e){return"base"===e?String.encode(this):"md"===e?this.md():"sha"===e?this.sha():"sha:one"===e?this.sha_one():String.encode(this)})),e(String.prototype,"end",(function(e=1,t){return Object.is.string(e)?this.endsWith(e,t):this.substr(-e)})),e(String.prototype,"exist",(function(e,t){return this.includes(e,t)})),e(String.prototype,"format",(function(...e){if(Function.util&&Function.util.format)return Function.util.format(this.toString(),...e);var t=this.split(String.format.key),n=1;for(var i in e)t.splice(n,0,e[i]),n+=2;return t.implode()})),e(String.prototype,"include",(function(e,t){for(var n in e){if(this.includes(e[n],t))continue;return!1}return!0})),e(String.prototype,"index",(function(e,t){return Function.indexOf(this.indexOf(e,t))})),e(String.prototype,"pad",(function(e,t,n="begin"){return"begin"===n?this.padStart(t,e):"end"===n?this.padEnd(t,e):this})),e(String.prototype,"pop",(function(e=1){return Object.is.string(e)?this.substr(0,this.length-e.length):this.substr(0,this.length-e)})),e(String.prototype,"pos",(function(e,t=1){return this.substr(e,t)})),e(String.prototype,"rand",(function(){return this[(this.length-1).shuffle()]})),e(String.prototype,"replace",(function(e,t){return Object.is.regex(e)?e[Symbol.replace](this,t):this.split(e).join(t)})),e(String.prototype,"reverse",(function(){return this.explode().reverse().implode()})),e(String.prototype,"shift",(function(e=1){return Object.is.string(e)?this.substr(e.length):this.substr(e)})),e(String.prototype,"shuffle",(function(){return this.explode().shuffle().implode()})),e(String.prototype,"small",(function(){return this.toLowerCase()})),e(String.prototype,"splice",(function(e=1,t){if("end"===t)return this.reverse().splice(e).map((function(e){return e.reverse()})).reverse();var n=[],i=[];t=e;for(var r in this)i.push(this[r]),r==t-1&&(n.push(i.implode()),i=[],t+=e);return i.length&&n.push(i.implode()),n})),e(String.prototype,"trim",(function(e){if(e===String.space)return this.delete(String.char.space);if("begin"===e)return this.trimStart();if("end"===e)return this.trimEnd();var t=this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(e){for(var n in e=[],t=t.split(String.char.space))t[n]&&e.push(t[n]);return e.join(String.char.space)}return t})),e(String.prototype,"explode",(function(e=""){return e===String.space&&(e=String.char.space),this.split(e)})),e(String.prototype,"implode",(function(e,t=""){return e?this.concat(String.char.space,t,e):this})),e(String.prototype,"uc_begin",(function(){return this.substr(0,1).toUpperCase()+this.substr(1)})),e(String.prototype,"uc_word",(function(){var e=this.split(String.char.space),t=[];for(var n in e)t.push(e[n].uc_begin());return t.join(String.char.space)})),e(String,"decode",(function(e){return atob(e)}),{writable:!0}),e(String,"encode",(function(e){return btoa(e)}),{writable:!0}),e(String,"format",(function(e,t){return Object.to.string(e).split(String.format.key).join(t)})),e.value(String.format,"key","%s"),e(String,"empty",(function(e=""){return e})),e(String,"space",(function(){})),e(String,"char",(function(e){return e.charCodeAt()})),e.value(String.char,"alpha",{small:"abcdefghijklmnopqrstuvwxyz",big:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",numeric:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"}),e.value(String.char,"separator",{eol:"; ",c:", "}),e.value(String.char,"under",{score:"_"}),e.value(String.char,"coma",","),e.value(String.char,"space"," "),e.value(String.char,"equal","="),e.value(String.char,"ls",":"),e.value(String.char,"eol",";"),e.value(String.char,"protocol","://"),e.value(String.char,"special",["-","_","."]),e(String.char,"line",(function(){return"\r\n"})),e(String.char,"ln",(function(e,t){return arguments.length?t?"\n".concat(e):e.concat("\n"):"\n"})),e(String.char.ln,"r",(function(e,t){return arguments.length?t?"\r".concat(e):e.concat("\r"):"\r"})),e(String.char.ln,"tab",(function(e,t){return arguments.length?t?"\t".concat(e):e.concat("\t"):"\t"})),e(Math,"BYTE",(function(){})),e(Math.BYTE,"log",[],{configurable:!0,enumerable:!0,writable:!0}),e(Math.BYTE,"unit",[],{configurable:!0,enumerable:!0,writable:!0}),e.get(Number.prototype,"length",(function(){return this.toString().length})),e(Number,"zero",0),e(Number,"one",1),e(Number,"char",String.char.alpha.number),e(Number,"count",(function(e){return e++,e})),e(Number,"descriptor",(function(t,n,i){return e.property(Number.prototype,t,n,i)})),e(Number.prototype,"string",(function(){return this.toString()})),e(Number.prototype,"number",(function(){return Number(this)})),e(Number.prototype,"integer",(function(){return parseInt(this)})),e(Number.prototype,"float",(function(){return parseFloat(this)})),e(Number.prototype,"char",(function(){return String.fromCharCode(this)})),e(Number.prototype,"second",(function(){return 1e3*this})),e(Number.prototype,"absolute",(function(){return Math.abs(this)})),e(Number.prototype,"ceil",(function(){return Math.ceil(this)})),e(Number.prototype,"decrease",(function(e=0,t=1){var n=[];if(this>=e)for(var i=this;i>=e;i-=t)n.push(i);return n})),e(Number.prototype,"exponent",(function(e){return Math.pow(this,e)})),e(Number.prototype,"floor",(function(){return Math.floor(this)})),e(Number.prototype,"increase",(function(e,t=1){var n=[];if(this<=e)for(var i=this;i<=e;i+=t)n.push(i);return n})),e(Number.prototype,"log",(function(){return Math.log(this)})),e(Number.prototype,"rand",(function(e=0){var t=[this,e],n=Math.min(...t),i=Math.max(...t);return(i-n).absolute().shuffle()+n})),e(Number.prototype,"round",(function(){return Math.round(this)})),e(Number.prototype,"shuffle",(function(){return Math.floor(Math.random()*(this+1))})),e(Number.prototype,"percent",(function(e){return this/100})),e(Number.prototype,"percentage",(function(e){return this/e*100})),e(Number.prototype,"stamp",(function(){return Number(this.toString().padEnd(Date.stamp.length,"0"))})),e(Number.prototype,"format",(function(e){return Number.format(this,e)})),e(Number.prototype,"KB",(function(){return this*Number.BYTE.log})),e(Number.prototype,"MB",(function(){return this*(Number.BYTE.log*Number.BYTE.log)})),e(Number.prototype,"GB",(function(){return this*(Number.BYTE.log*Number.BYTE.log*Number.BYTE.log)})),e(Number.prototype,"TB",(function(){return this*(Number.BYTE.log*Number.BYTE.log*Number.BYTE.log*Number.BYTE.log)})),e(Number,"format",(function(e,n){if(!0===(n=Number.properties(n)).byte)return n.byte=!1,t(e,n);e=e.toString().split(Number.float());var i=e[0],r=e[1],o=i.reverse().splice(n.thousand).join(n.separator).reverse();return r&&(o=o.concat(n.float,r.begin(n.decimal))),o})),e(Number.format,"extra",(function(e,t){return Number.format(Number.format.special(e),t)})),e(Number.format,"clear",(function(e){return Number(Number.format.special(e))})),e(Number.format,"special",(function(e){return Object.to.string(e).delete(".").delete(",")})),e(Number,"BYTE",class{constructor(){for(var[e]of(Math.BYTE.log=[],Math.BYTE.unit=Number.BYTE.unit.key().reverse(),Number.BYTE.unit.entries()))Math.BYTE.log.push(Number.BYTE.log.exponent(e))}}),e(Number.BYTE,"log",1024),e(Number.BYTE,"unit",["B","KB","MB","GB","TB"]),e(Number.BYTE,"name",{B:"BYTE",KB:"KILOBYTE",MB:"MEGABYTE",GB:"GIGABYTE",TB:"TERABYTE",PB:"PETABYTE",EB:"EXABYTE",ZB:"ZETTABYTE",YB:"YOTTABYTE"}),e(Number,"properties",(function(e){return Object.assign({thousand:Number.thousand(),decimal:Number.decimal(),separator:Number.separator(),delimiter:Number.delimiter(),float:Number.float(),byte:!1},e)})),e(Number,"thousand",(function(e){return arguments.length&&(Number.thousand.value=e),Number.thousand.value})),e.value(Number.thousand,"value",3),e(Number,"decimal",(function(e){return arguments.length&&(Number.decimal.value=e),Number.decimal.value})),e(Number.decimal,"format",(function(e,t){return e=Object.to.string(e).split((t=Number.properties(t)).float),e[1]=Object.to.string(e[1]).substr(0,t.decimal),""===e[1]&&(e[1]="0".repeat(t.decimal)),t.pad?e.join(Number.float()):Number(e.join(Number.float()))})),e.value(Number.decimal,"value",3),e(Number,"separator",(function(e){return arguments.length&&(Number.separator.value=e),Number.separator.value})),e.value(Number.separator,"value",","),e(Number,"delimiter",(function(e){return arguments.length&&(Number.delimiter.value=e),Number.delimiter.value})),e.value(Number.delimiter,"value"," "),e(Number,"float",(function(e){return arguments.length&&(Number.float.value=e),Number.float.value})),e.value(Number.float,"value",.5.toString().substr(1,1)),new Number.BYTE,e(Function,"byte",Number.BYTE),e(Function,"define",e),e(Function,"void",(function(){})),e(Function,"__void",(function(){})),e(Function,"__void__",(function(){})),e(Function,"un_define",(function(){})),e(Function,"indexOf",(function(e){if(e>=0)return e})),e(Function,"lastIndexOf",(function(e){})),e(Function,"__of","pro"),e(Function,Function.__of,(function(t){return e(Function[Function.__of],t,(function(e,n){return arguments.length>1?Function[Function.__of][t].__data[e]=n:e?Function[Function.__of][t].__data[e]:Function[Function.__of][t].__data})),e(Function[Function.__of][t],"value",(function(e){return arguments.length?Function[Function.__of][t].value.__data=e:Function[Function.__of][t].value.__data})),e.value(Function[Function.__of][t],"__data",{}),Function[Function.__of][t]})),e(Function,"context",(function(){var e=Function.argument.of(arguments),t=e.object,n=e.function;if(n)return t?n.bind(t):n})),e(Function,"event",class{constructor(t){this.event={listener:{},priority:{}},t&&Object.is.function(t)&&"event"in t===!1&&(e.property(t,"event",this),e.property(t,"on",function(e,t){this.event.on(e,t)}.bind({event:this})),e.property(t,"emit",function(e,...t){this.event.emit(e,...t)}.bind({event:this})))}on(e,t,n){return e in this.event.listener===!1&&(this.event.listener[e]=[],this.event.priority[e]=[]),n?this.event.priority[e][n]?this.event.priority[e][n].push(t):this.event.priority[e][n]=[t]:this.event.listener[e].push(t),this}emit(e,...t){for(var n in this.event.priority[e])for(var i in this.event.priority[e][n])this.event.priority[e][n][i].call(this.event.emitter,...t);for(var n in this.event.listener[e])this.event.listener[e][n].call(this.event.emitter,...t);return this}}),e(Function.event,"listener",(function(e,t,n){return e.addEventListener(t,n)})),e.value(Function.event,"loop",{}),e.value(Function.event,"list",{}),e(Function,"emitter",class{constructor(...e){this.emitter=e}next(...e){return this.then(...e).catch()}then(...e){return this.context=Function.context(...e),this.error?this.emit():this}catch(e){return this.context?this.emit(e):(this.error=e,this)}emit(e){return(e||this.error||console.log).call(null,...this.emitter)}}),e(Function,"argument",(function(){var e={length:arguments.length};for(var t in arguments)Object.is.object(arguments[t])?e.object=arguments[t]:Object.is.array(arguments[t])?e.array=arguments[t]:Object.is.string(arguments[t])?e.string=arguments[t]:Object.is.integer(arguments[t])?e.integer=arguments[t]:Object.is.number(arguments[t])?e.number=arguments[t]:Object.is.function(arguments[t])?e.function=arguments[t]:e.of=arguments[t];return e})),e(Function.argument,"of",(function(e){var t={length:e.length};for(var n in e)Object.is.object(e[n])?t.object=e[n]:Object.is.array(e[n])?t.array=e[n]:Object.is.string(e[n])?t.string=e[n]:Object.is.integer(e[n])?t.integer=e[n]:Object.is.number(e[n])?t.number=e[n]:Object.is.function(e[n])?t.function=e[n]:t.of=e[n];return t})),e(Function,"option",(function(e,t,n=!0){return n?Object.assign({},t,e):Object.assign({},e,t)})),e(Function.option,"of",(function(e,t,n=!0){return n?Object.merge(t,e):Object.merge(e,t)})),e(Function.option,"set",(function(e,t,n){if(!Object.is.object(e))return{};if(!Object.is.object(t)){if(t.includes(":")){var i=t.split(":"),r=i[0],o=i[1];return Object.is.object(e[r])?e[r][o]=n:e[r]={[o]:n},n}return e[t]=n}for(var s in t)e[s]=t[s]})),e(Function,"optional",(function(e,t={}){var n={};for(var i in e)i in t?n[t[i]]=e[i]:n[i]=e[i];return n})),e(Function.optional,"of",(function(e,t){var n={};if(t=Object.flip(t))for(var i in e)i in t?n[t[i]]=e[i]:n[i]=e[i];return n})),e(Function,"setting",Function.pro("setting")),e(Function,"system",(function(){})),e(Function,"plugin",(function(){})),e(Function,"debug",(function(){})),e(Function,"log",(function(){})),e(Function,"echo",(function(){Function.setting("debug")&&console.log(...arguments)})),e(Function,"print",(function(){Function.setting("debug")&&console.log(...arguments)})),e(Function,"key",(function(){})),e(Function.key,"s",(function(e){return e.replace("$:id","_id").replace("$:identity","_identity").replace("$:doc","_doc").replace("$:reference","_reference").replace("$:stamp","_stamp")})),e(Function,"value",(function(){})),e(Function,"promise",class{constructor(...e){this.promise=new Promise(Function.context(...e))}next(...e){return this.then(...e).catch()}then(...e){return this.context=Function.context(...e),this.error?this.emit():this}catch(e){return this.context?this.emit(e):(this.error=e,this)}emit(e){return this.promise.then(this.context).catch(e||this.error||function(e){console.log("promise:error",e)})}}),e(Function.promise,"call",(function(e,...t){return new Promise(function(e,t){this.promise.call({resolve:e,reject:t},...this.arg)}.bind({promise:e,arg:t}))})),e(Function.promise,"all",(function(...e){return Promise.all(...e)})),e(Function.promise,"resolve",(function(...e){return Promise.resolve(...e)})),e(Function.promise,"reject",(function(...e){return Promise.reject(...e)})),e(Function.promise,"then",(function(e){return new Promise((function(t,n){t(e)}))})),e(Function.promise,"catch",(function(e){return new Promise((function(t,n){n(e)}))})),e(Function.promise,"s",class{constructor(e){this.promise=e}then(e=function(){}){return this.context=this.promise.then(e),this.error?this.context.catch(this.error):this}catch(e=console.log){return this.context?this.context.catch(e):(this.error=e,this)}exec(e=function(){}){return this.then().catch().finally(e)}}),e(Function.promise,"less",(function(e,t){return Object.to.promise(new Promise(e.bind(t||{})))})),e(Date,"Time",class{constructor(e,t){this.option={zone:{year:0,month:0,day:0,hour:0,minute:0,second:0,ms:0},month:{name:[]},day:{name:[]}},this.option.month.name=t.month.name||Date.month.name,this.option.day.name=t.day.name||Date.day.name,this.get={year:0,month:0,day:0,hour:0,minute:0,second:0,ms:0},this.date={input:e},this.zone(t.zone)}use(e,t){"month:name"===e&&t&&(this.option.month.name=t),"day:name"===e&&t&&(this.option.day.name=t)}zone(e){if(e)for(var t in e)this.option.zone[t]=e[t];return this.set()}input(){return this.date.input=arguments,this.set()}offset(){var e,t;for(var n in arguments)"object"===typeof arguments[n]&&(e=arguments[n]),"number"===typeof arguments[n]&&(t=arguments[n]);return t?new Date.Time([t],this.option).set(e):this}set(e){if(null===e)return{year:{s:this.get.year,pad:this.get.year.toString()},month:{s:this.get.month,name:this.option.month.name[this.get.month],pad:Date.pad(this.get.month+1)},day:{s:this.get.day,name:this.option.day.name[this.get.week],pad:Date.pad(this.get.day)},hour:{s:this.get.hour,pad:Date.pad(this.get.hour),suffix:{pad:Date.pad(this.get.hour>12?this.get.hour-12:this.get.hour)},map:this.get.hour>=12?"PM":"AM"},minute:{s:this.get.minute,pad:Date.pad(this.get.minute)},second:{s:this.get.second,pad:Date.pad(this.get.second)},ms:this.get.ms,week:this.get.week,stamp:this.get.stamp,sub:{stamp:this.get.sub.stamp}};e=Date.offset(e);var t=new Date(...this.date.input),n=t.getStamp();return t=Date.property(new Date(n-Date.universal.offset),n),t=new Date(t.year+e.year+this.option.zone.year,t.month+e.month+this.option.zone.month,t.day+e.day+this.option.zone.day,t.hour+e.hour+this.option.zone.hour,t.minute+e.minute+this.option.zone.minute,t.second+e.second+this.option.zone.second,t.ms+e.ms+this.option.zone.ms),this.get=Date.property(t,n),this}object(){var e=this.set(null);return{Y:e.year.pad,M:e.month.pad,F:e.month.name,D:e.day.pad,L:e.day.name,H:e.hour.pad,I:e.minute.pad,S:e.second.pad,Q:e.ms,A:e.hour.map,J:e.hour.suffix.pad,W:e.week,X:e.stamp,Z:e.sub.stamp}}format(){var e,t,n="default";for(var i in arguments)if(arguments[i])if(Object.is.number(arguments[i]))t=Number(arguments[i]);else if(Object.is.string(arguments[i]))n=arguments[i];else{if(!Object.is.object(arguments[i]))break;e=arguments[i]}if(t)return this.offset(t,e).format(n);if(e)return this.offset(this.get.stamp,e).format(n);var r=[],o=this.object();for(var i in n=Date.format()[n||"default"]||n,n=n.explode(),n)r.push(o[n[i]]||n[i]);return r.implode()}}),e(Date.prototype,"getStamp",(function(){return this.getTime().stamp()})),e(Date,"universal",(function(e){var t=new Date;if(e&&(e=Date.offset(e)))return Date.universal.offset=Date.now()-new Date(t.getUTCFullYear()+e.year,t.getUTCMonth()+e.month,t.getUTCDate()+e.day,t.getUTCHours()+e.hour,t.getUTCMinutes()+e.minute,t.getUTCSeconds()+e.second,t.getUTCMilliseconds()+e.ms).getStamp()})),e.value(Date.universal,"offset",0),e(Date,"zone",(function(e){if(e)for(var t in e)Date.zone.offset[t]=e[t]})),e.value(Date.zone,"universal",{name:"Universal",base:{name:"UTC"},c:{name:"Universal"},offset:{hour:0,minute:0}}),e(Date,"stamp",(function(e,t){return"serial"===e?{insert:Date.now(),update:0,delete:0}:e?(e=new Date(e))&&t&&(t=Date.offset(t))?new Date(e.getFullYear()+t.year,e.getMonth()+t.month,e.getDate()+t.day,e.getHours()+t.hour,e.getMinutes()+t.minute,e.getSeconds()+t.second,e.getMilliseconds()+t.ms).getStamp():e.getStamp():Date.now().stamp()})),e.value(Date.stamp,"length",13),e(Date,"sleep",(function(e,t=1,...n){return setTimeout(e,Object.to.number(t).second(),...n)})),e(Date.sleep,"clear",(function(e){clearTimeout(e)})),e(Date,"interval",(function(e,t=1,...n){return setInterval(e,Object.to.number(t).second(),...n)})),e(Date.interval,"clear",(function(e){clearInterval(e)})),e(Date,"expire",(function(e,t,n){return new Date(...Date.properties(new Date(t),n)).getStamp()<e})),e(Date,"offset",(function(e){return Object.assign({year:0,month:0,day:0,hour:0,minute:0,second:0,ms:0},e)})),e(Date,"pad",(function(e,t=2){return Object.to.string(e).padStart(t,"0")})),e(Date,"format",(function(e,t){return t?Date.format.value[e]=t:e?Date.format.value[e]:Date.format.value})),e.value(Date.format,"value",{default:"L, F D, Y - H:I:S A",common:"L, F D, Y",date:"Y-M-D","date:x":"Y-M","date:s":"YMD","date:c":"YM","date:time":"Y-M-D H:I:S",time:"H:I:S","time:x":"H:I","time:s":"HIS","time:c":"HI",factory:"D/M/Y"}),e.value(Date,"month",{name:["January","February","March","April","May","June","July","August","September","October","November","December"]}),e.value(Date,"day",{name:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}),e(Date.Time,"zone",(function(e,t){if(!t)return e in Date.Time.zone.value?Date.Time.zone.value[e]:["*","universal"].includes(e)?Date.zone.universal:e?null:Date.Time.zone.value;Date.Time.zone.value[e]=t})),e(Date.Time.zone,"exist",(function(e){return e in Date.Time.zone.value})),e.value(Date.Time.zone,"value",{"asia/jakarta":{name:"Indonesia Jakarta",base:{name:"Asia/Jakarta"},c:{name:"Indonesia"},offset:{hour:7,minute:0}},"asia/seoul":{name:"South Korea Seoul",base:{name:"Asia/Seoul"},c:{name:"South Korea"},offset:{hour:9,minute:0}},"asia/tokyo":{name:"Japan Tokyo",base:{name:"Asia/Tokyo"},c:{name:"Japan"},offset:{hour:9,minute:0}},"asia/singapore":{name:"Singapore",base:{name:"Asia/Singapore"},c:{name:"Singapore"},offset:{hour:8,minute:0}},"asia/shanghai":{name:"China Shanghai",base:{name:"Asia/Shanghai"},c:{name:"China"},offset:{hour:8,minute:0}},"asia/hong_kong":{name:"Hong Kong",base:{name:"Asia/Hong_Kong"},c:{name:"Hong Kong"},offset:{hour:8,minute:0}},"asia/taipei":{name:"Taiwan Taipei",base:{name:"Asia/Taipei"},c:{name:"Taiwan"},offset:{hour:8,minute:0}},"asia/kuala_lumpur":{name:"Malaysia Kuala Lumpur",base:{name:"Asia/Kuala_Lumpur"},c:{name:"Malaysia"},offset:{hour:8,minute:0}},"asia/qatar":{name:"Qatar",base:{name:"Asia/Qatar"},c:{name:"Qatar"},offset:{hour:3,minute:0}},"asia/dubai":{name:"United Arab Emirate (UAE) Dubai",base:{name:"Asia/Dubai"},c:{name:"United Arab Emirate (UAE)"},offset:{hour:4,minute:0}}}),e(Date,"create",(function(e){var t=function(...e){return new Date.Time(e,this.option)};return t.bind({option:e})})),e(Date,"property",(function(e,t){return t||(t=e.getStamp()),{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),ms:e.getUTCMilliseconds(),week:e.getDay(),sub:{stamp:e.getStamp()},stamp:t}})),e(Date,"properties",(function(e,t){return t=Date.offset(t),[e.getFullYear()+t.year,e.getMonth()+t.month,e.getDate()+t.day,e.getHours()+t.hour,e.getMinutes()+t.minute,e.getSeconds()+t.second,e.getUTCMilliseconds()+t.ms]})),e.value(URL,"__protocol",{"*":"url",file:"file","file:transport":"ftp","file-transport:secure":"ftps",scheme:"http","scheme:secure":"https"}),e.value(URL,"__host",{local:{name:"localhost",ip:"127.0.0.1"},"*":"0.0.0.0"}),e.value(URL,"__port",80),e.value(URL,"__path","/"),e.value(URL,"favorite.ico","/favicon.ico"),e.value(URL,"package.json","./package.json"),e.value(URL,"package-lock","./package-lock.js"),e.value(URL,"src","./src"),e(Object.is,"url",(function(e){return URL.is(e)})),e(Object.is.url,"host",(function(e){return URL.is.host(e)})),e(URL,"is",(function(e){try{return!!new URL(e)}catch(t){return!1}})),e(URL.is,"host",(function(e){return!!Object.is.ip(e.host.name)||!!e.domain.name})),e(URL,"decode",(function(e){return decodeURIComponent(e)})),e(URL,"encode",(function(e){return encodeURIComponent(e)})),e(URL,"format",(function(e,t){return t=Function.option(t),"socket"===t.protocol?(e=e.replace("http://","ws://"),e=e.replace("https://","wss://"),e):"socket:io"===t.protocol?(e=e.replace("ws://","http://"),e=e.replace("wss://","https://"),e):Object.is.string(e)?e?URL.protocol(e,t.protocol)||Object.is.url(e)?e:URL.protocol.format(t.protocol).concat(e):void 0:Object.is.object(e)?(e=Object.assign({protocol:URL.protocol.scheme(),host:URL.host("*")},e),e.protocol=URL.protocol.format(e.protocol),e.query=URL.query.format(e.query),e.account=URL.account.format(e),e.port=URL.port.format(e),e.path=URL.path.format(e),e.protocol+e.account+e.host+e.port+e.path+e.query):e})),e(URL,"parse_url",(function(e,t){return(e=URL.parse(e,t))?e:URL.parse_url.property()})),e(URL.parse_url,"property",(function(e){return"domain"===e?{name:"",base:{name:""},extension:"",sub:URL.domain.sub(),"*":""}:{reference:"",location:"",protocol:"",host:{name:"",base:{name:""},"*":""},port:"",user:"",password:"",search:"",query:{},path:"",tag:"",domain:{name:"",base:{name:""},extension:"",sub:URL.domain.sub(),"*":""},name:""}})),e(URL,"parse",(function(e,t,n=!0){var i,r=URL.parse.component(e);return t=Function.option(t,{strict:!1,protocol:URL.protocol(),host:URL.host("*"),path:URL.path()}),r?(t.referer&&(r.referer=URL.parse(t.referer)),r.location=URL.protocol.format(r.protocol).concat(r.host.base.name),(r.domain=URL.parse_url.property("domain"))&&(i=URL.parse.element(r.host.name,t.domain))&&(r.host["*"]="."+(r.domain.name=i.domain),r.domain.base.name=i.name,r.domain.extension=i.extension,r.domain.sub=i.sub,r.domain["*"]=i["*"]),r.name=r.domain.name||r.host.name,r.search&&(r.query=URL.query.parse(r.search,t.query)),r.port&&(r.port=Number(r.port)),(!0!==t.strict||!1!==t.protocol.includes(r.protocol))&&r):!(!0!==n||!(e=URL.parse(URL.protocol.format().concat(e),t,!1)))&&e})),e(URL.parse,"component",(function(e){try{return e.includes("://")?!!(e=new URL(e))&&{reference:e.href,location:"",protocol:e.protocol.pop(),host:{name:e.hostname,base:{name:e.host},"*":e.hostname},port:e.port,user:e.username,password:e.password,search:e.search.shift(),query:{},path:URL.decode(e.pathname),tag:e.hash.shift()}:null}catch(t){}})),e(URL.parse,"element",(function(e,t){var n,i,r,o,s;if(e)for(var a in t=Function.option(t,{extension:URL.domain.extension(),sub:URL.domain.sub()}),t.extension)if(e.end(s=(r=t.extension[a]).length)===r)return""===(o=e.pop((i=(n=e.pop(s).split(".").end()).concat(r)).length+1))&&(o=t.sub),{name:n,domain:i,extension:r,sub:o,"*":o.split(".").reverse().join(".")}})),e(URL,"query",(function(){})),e(URL.query,"separator",(function(e){return e&&(URL.query.separator.value=e),URL.query.separator.value})),e.value(URL.query.separator,"value","&"),e(URL.query,"delimiter",(function(e){return e&&(URL.query.delimiter.value=e),URL.query.delimiter.value})),e.value(URL.query.delimiter,"value","="),e(URL.query,"format",(function(e,t){var n=[];if(t=Function.option(t,{question:!0}),e)for(var i in e)Object.is.array(e[i])?n.push(i.concat(URL.query.delimiter()).concat("["+e[i].join(",")+"]")):n.push(e[i]?i.concat(URL.query.delimiter()).concat(e[i]):i);return n.length?t.question?"?"+n.join(URL.query.separator()):n.join(URL.query.separator()):""})),e(URL.query,"parse",(function(e){var t,n={};for(var i in e=e.split(URL.query.separator()))for(var r in t=e[i].split(URL.query.delimiter()))n[t[0]]=t[1];return n})),e(URL,"domain",(function(){})),e(URL.domain,"sub",(function(e){return e&&(URL.domain.sub.value=e),URL.domain.sub.value})),e.value(URL.domain.sub,"value","www"),e(URL.domain,"extension",(function(e){return e&&(URL.domain.extension.value=URL.domain.extension.sort(e)),URL.domain.extension.value})),e.value(URL.domain.extension,"value",[".com",".net",".org"]),e(URL.domain.extension,"sort",(function(e){var t=[],n=[],i=e.sort();for(var r in i)i[r].count(".")>1?n.push(i[r]):t.push(i[r]);return n.concat(t)})),URL.domain.extension([".com",".net",".org",".info",".mobi",".tv",".co",".io",".me",".ninja",".blog",".site",".store",".shop",".live",".life",".cloud",".online",".app",".dev",".club",".id",".co.id",".xyz",".xxx",".local",".host"]),e(URL,"protocol",(function(e,t){if(e){var n=URL.protocol();for(var i in Object.is.string(t)&&n.push(t),Object.is.array(t)&&(n=n.concat(t)),n)if(e.startsWith(URL.protocol.format(n[i])))return!0;return!1}return Object.values(URL.__protocol)})),e(URL.protocol,"scheme",(function(e,t){return"*"===e?URL.protocol.convert(URL.__protocol[e],t):URL.protocol.convert(URL.__protocol["scheme"],e)})),e(URL.protocol.scheme,"secure",(function(e){return URL.protocol.convert(URL.__protocol["scheme:secure"],e)})),e(URL.protocol,"file",(function(e){return URL.protocol.convert(URL.__protocol["file"],e)})),e(URL.protocol.file,"transport",(function(e){return URL.protocol.convert(URL.__protocol["file:transport"],e)})),e(URL.protocol.file.transport,"secure",(function(e){return URL.protocol.convert(URL.__protocol["file-transport:secure"],e)})),e(URL.protocol,"push",(function(e,t){return URL.__protocol[e]=t})),e(URL.protocol,"convert",(function(e,t){return t?URL.protocol.format(e):e})),e(URL.protocol,"format",(function(e){return e?e+"://":null===e?URL.protocol.scheme("*")+"://":(URL.protocol.scheme()||URL.protocol.scheme("*"))+"://"})),e(URL,"host",(function(e){return e?URL.__host[e]:URL.__host})),e(URL.host,"format",(function(e,t){return e})),e(URL,"account",(function(){})),e(URL.account,"format",(function(e,t){var n="";return t=Function.option(t,{format:!0}),e&&(e.user&&(n=e.user),e.user&&e.password&&(n=n+":"+e.password),e.user&&t.format&&(n+="@")),n})),e(URL,"port",(function(){return URL.__port})),e(URL.port,"format",(function(e,t){var n="";return t=Function.option(t,{format:!0}),e&&(e.port&&(n=e.port),e.port&&t.format&&(n=":"+n)),n})),e(URL,"path",(function(){return URL.__path})),e(URL.path,"format",(function(e,t){var n="";if(e){if(e.path&&(n="/"===e.path.substr(0,1)?e.path:"/"+e.path),n)return n;e.query&&(n="/")}return n}));var o=/\((?!\?)/g;e(RegExp,"path",(function(e,t,n){var i={},r=[],o=RegExp.path.parse(t,r,n),s=o.exec(e);if(s)for(var a in r)i[r[a].name]=s[parseInt(a)+1];return{param:i,match:s}})),e(RegExp.path,"parse",(function(e,t,n){n=n||{},t=t||[];var i,r=n.strict,s=!1!==n.end,a=n.sensitive?"":"i",c=0,u=t.length,l=0,h=0;if(e instanceof RegExp){while(i=o.exec(e.source))t.push({name:h++,optional:!1,offset:i.index});return e}if(Array.isArray(e))return e=e.map((function(e){return RegExp.path.parse(e,t,n).source})),new RegExp("(?:"+e.join("|")+")",a);var d=function(e,n,i,r,o,s,a,u){n=n||"",i=i||"",o=o||"([^\\/"+i+"]+?)",a=a||"",t.push({name:r,optional:!!a,offset:u+c});var l=(a?"":n)+"(?:"+i+(a?n:"")+o+(s?"((?:[\\/"+i+"].+?)?)":"")+")"+a;return c+=l.length-e.length,l},f=function(e,n){var i=t.length;while(i-- >u&&t[i].offset>n)t[i].offset+=3;return"(.*)"};e=("^"+e+(r?"":"/"===e[e.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,d).replace(/\*/g,f);while(i=o.exec(e)){var p=0,m=i.index;while("\\"===e.charAt(--m))p++;p%2!==1&&((u+l===t.length||t[u+l].offset>i.index)&&t.splice(u+l,0,{name:h++,optional:!1,offset:i.index}),l++)}return e+=s?"$":"/"===e[e.length-1]?"":"(?=\\/|$)",new RegExp(e,a)})),e(Function,"http",(function(){})),e(Function.http,"request",(function(){})),e.value(Function.http.request,"timeout",30),e.value(Function.http.request,"method",{get:"GET",post:"POST",header:"HEAD",put:"PUT",delete:"DELETE",option:"OPTIONS"}),e(Function.http,"header",(function(){})),e.value(Function.http.header,"status",{OK:200,success:200,error:{request:400,forbidden:403,found:404,timeout:408,legal:451,s:500},message:{},code:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"Connection Closed Without Response",451:"Unavailable For Legal Reasons",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",599:"Network Connect Timeout Error"}}),e(Function,"serialize",(function(){})),e(Function,"xml",(function(){})),e(Function,"json",class{constructor(e,t){(this.file=e)&&(this.data=null,this.inject={},this.option=Function.option(t,{type:"json",log:!0}),this.option.data&&(this.data=this.option.data),this.load())}load(e){!1===Error.native(e=Function.file.read(this.file,this.option))&&!1===Object.is.buffer(e)&&(Object.is.object(e)?this.data=Object.merge(this.option.data,e):this.data=e)}insert(e,t){if(t)this.inject[e]=t;else for(var n in e)this.inject[n]=e[n];return this}delete(e){return"*"===e?(Object.is.object(this.data)&&(this.data={}),Object.is.array(this.data)&&(this.data=[])):delete this.data[e],this.write()}get(e,t){if(e&&Object.is.object(this.data)){var n=Object.merge(this.data,this.inject);return arguments.length>1?n[e]||t:n[e]}return this.data}set(e,t){return Object.is.object(this.data)?t?Object.is.object(t)&&Object.is.object(this.data[e])?this.data[e]=Object.merge(this.data[e],t):this.data[e]=t:Object.is.object(e)&&(this.data=Object.merge(this.data,e)):this.data=arguments.length>1?{[e]:t}:e,this}log(e){return this.option.log?this.set({[Date.now()]:e}):this}write(...e){e=Function.argument(...e);var t=Function.option(e.object,{type:this.option.type,pretty:!0}),n=e.function;return Function.file.write(this.file,this.data,t,n),this}}),e(Object.is,"json",(function(e){return Function.json.is(e)})),e(Function.json,"is",(function(e){try{return JSON.parse(e),!0}catch(t){return!1}})),e(Function.json,"parse",(function(e){return JSON.parse(e)})),e(Function.json,"format",(function(...e){return JSON.stringify(...e)})),e(Function.json,"stringify",(function(...e){return JSON.stringify(...e)})),e(Function.json,"encode",(function(e,...t){try{return Object.is.define(e)?JSON.stringify(e,...t):new Error}catch(n){return new Error}})),e(JSON,"encode",Function.json.encode),e(Function.json,"decode",(function(e){try{return Object.is.string(e)&&e?JSON.parse(e):new Error}catch(t){return new Error}})),e(JSON,"decode",Function.json.decode),e.value(Function.json,"pretty",[null,4]),e.value(JSON,"pretty",Function.json.pretty),e(Function,"store"),e(Function,"storage",class{constructor(){}static clear(){localStorage.clear()}static delete(e){localStorage.removeItem(e)}static set(e,t,n){return n&&e in localStorage?Function.storage.convert(localStorage.getItem(e)||t):(arguments.length>1&&localStorage.setItem(e,Function.storage.convert(t)),t)}static get(e,t){if(e)return Function.storage.convert(localStorage.getItem(e)||t);var n={},i=Object.keys(localStorage);for(var r in i)n[i[r]]=Function.storage.convert(localStorage.getItem(i[r]));return n}static json(e,t,n){var i=localStorage.getItem(e);return n&&i?Function.json.parse(i):(arguments.length>1&&localStorage.setItem(e,i=Function.json.format(t)),i?Function.json.parse(i):void 0)}}),e(Function.storage,"convert",(function(e){return"null"===e?null:"true"===e||"false"!==e&&("undefined"===e?void 0:null===e?"null":!0===e?"true":!1===e?"false":void 0===e?"undefined":e)})),e(Function,"session",class{constructor(){}static clear(){sessionStorage.clear()}static delete(e){sessionStorage.removeItem(e)}static set(e,t){return sessionStorage.setItem(e,t),t}static get(e,t){if(e)return Function.storage.convert(sessionStorage.getItem(e)||t);var n={},i=Object.keys(sessionStorage);for(var r in i)n[i[r]]=Function.storage.convert(sessionStorage.getItem(i[r]));return n}static json(e,t,n){var i=sessionStorage.getItem(e);return n&&i?Function.json.parse(i):(arguments.length>1&&sessionStorage.setItem(e,i=Function.json.format(t)),i?Function.json.parse(i):void 0)}}),e(Function.session,"file",(function(){})),e(Function.session.file,"name",(function(e,t){return e.cross.session&&(t=e.cross.session),t&&e.visitor.ip?e.visitor.ip.concat("-").concat(t):t})),e(Function.session,"json",class extends Function.json{constructor(e,t){super(e,t)}start(e,t){if(!1===Function.file.exist(this.file)){var n={host:{"*":t.host},visitor:{ip:t.ip},stamp:{insert:Date.now(),update:Date.now(),delete:0,reload:Date.now()},cache:{id:Function.hash.shuffle(10)},time:{zone:t.time.zone}};this.set("id",e||Function.session.shuffle()).set(n).write()}return this}reload(e){e&&this.load();var t={stamp:{update:this.get("stamp").reload,reload:Date.now()}};return this.set(t).write()}}),e(Function.session,"manager",class{constructor(e,t,n){this.data={};var i=URL.document;"browser"===e&&null===(e=null)&&window.url&&(i=window.url),(this.proto=e)?this.proto.cookie=new Function.cookie(e.domain,e.link):this.proto={cookie:new Function.cookie(i.host["*"],"browser")},t&&this.start(t,n)}start(e,t){if((this.option=Object.assign({name:Function.session.name,signature:Function.session.signature,secure:!1},e))&&(this.name=this.option.name,this.signature=this.option.signature,this.secure=this.option.secure,this.shuffle=this.option.id||Function.session.shuffle()),this.proto.cookie.start()&&(this.id=this.proto.cookie.get(this.name),this.cache=this.proto.cookie.get("session.cache"),Object.is.empty(this.id)&&(this.id=this.proto.cookie.set(this.name,this.shuffle,this.option),this.cache=this.proto.cookie.set("session.cache",Function.hash.shuffle(10),this.option),this.proto.cookie.set(this.signature,Function.json.format({}).encode(),this.option),this.proto.cookie.write())),(this.session=this.proto.cookie.get(this.signature).decode())&&(this.session=Function.json.parse(this.session)))for(var n in this.session)this.data[n]=this.session[n];return t&&t.call(this,this.id),this}set(e,t,n){return n&&this.data[e]?this.data[e]:(this.data[e]=t,this.proto.cookie.set(this.signature,Function.json.format(this.data).encode(),this.option),this.proto.cookie.write(),t)}get(e,t){return e?e in this.data?this.data[e]||t:"":this.data}delete(e){"*"===e?this.data={}:delete this.data[e],this.proto.cookie.set(this.signature,Function.json.format(this.data).encode()),this.proto.cookie.write()}exist(e){return e in this.data}apply(e){return e&&(this.data=Object.merge(this.data,e)),this.data}}),e(Function.session,"shuffle",(function(){return Date.stamp().toString().concat("-").concat(Function.hash.shuffle(Number.char))})),e.value(Function.session,"name","session"),e.value(Function.session,"signature","session.signature"),e.value(Function.session,"cache","session.cache"),e.value(Function.session,"mode","lax"),e.value(Function.session,"secure",!1),e(Function,"cookie",class{constructor(e,t){this.data={},this.cookie=[],this.domain=e,this.link=t}start(){if(this.link){var e=this.document();if(e)for(var t in e=e.split(";")){var n=e[t].split("="),i=n[0].trim(),r=n[1];r&&(this.data[i]=r)}}else console.log("cookie:link");return this}set(e,t,n){var i=[];n=Object.assign({path:this.path||"/",domain:this.domain,expire:this.expire,mode:this.mode||"lax"},n);return i.push(e+"="+t),n.expire&&i.push("expire="+n.expire),n.domain&&i.push("domain="+n.domain),n.path&&i.push("path="+n.path),"lax"===n.mode&&i.push("samesite=lax"),"none"===n.mode&&i.push("samesite=none"),!0===n.secure&&i.push("secure"),this.cookie.push(i.join(";")),this.data[e]=t}get(e,t){return e?e in this.data?this.data[e]||t:"":this.data}delete(e,t){if(e)this.set(e,"",t);else if("*"===e)for(var n in this.data)delete this.data[n]&&this.set(n,"",t)}write(){if("browser"===this.link)for(var e in this.cookie)document.cookie=this.cookie[e];else this.link&&this.link.response.setHeader("Set-Cookie",this.cookie);this.cookie=[]}document(){return"browser"===this.link?document.cookie:this.link?this.link.request.headers.cookie:void 0}}),e(Function,"web",(function(){return this})),e(Function.web,"socket",class{constructor(e){this.socket=new WebSocket(this.url=e)}send(e){this.socket.send(e)}on(e,t){"open"===e&&(this.socket.onopen=t),"message"===e&&(this.socket.onmessage=t)}emit(e,t){arguments.length>1?this.socket.send(Function.json.format({key:e,value:t})):this.socket.send(e)}}),e(Function.web.socket,"io",class{constructor(e,t,n){this.http={url:URL.format(e,{protocol:"socket:io"})},this.url=URL.format(e,{protocol:"socket"}),this.token=t,this.session=n,this.context={}}on(e,t){this.io.on(e,t.bind({socket:this}))}clear(e){this.io.off(e)}start(e){return this.io=Function.web.socket.io.client(this.url,{extraHeaders:{token:this.token,session:this.session}}),e&&e.call(this),this}emit(e,t){return this.tokenizer?(this.io.emit(e,t={context:{id:Function.hash.shuffle(),session:this.session,tokenizer:this.tokenizer},data:t}),new Function.web.socket.io.emitter(this,e,t)):new Function.emitter("web-socket/io:tokenizer",this)}}),e(Function.web.socket.io,"emitter",class{constructor(e,t,n){this.socket=e,this.key=t,this.value=n}next(e){return this.then(e).catch(),this}then(e){return this.context=e,"error"in this?this.emit(this.error):this}catch(e){return"context"in this?this.emit(e):(this.error=e,this)}emit(e=console.error){return this.socket.on(this.key,Function.web.socket.io.emit(this,e)),this}}),e(Function.web.socket.io,"emit",(function(e,t){return function(n){if(Object.is.object(n)&&n.context&&n.context.id===e.value.context.id&&t)if(Object.is.object(n.data))if(n.data.error){var i=t||e.error||function(e){console.log("web-socket/io:error",e)};i.call(n,n.data.error)}else(e.context||Function.void).call(n,n.data);else(e.context||Function.void).call(n,n.data);var r=e;r.socket.clear(e.key)}})),e.value(Function.web.socket,"open","connect"),e.value(Function.web.socket,"close","disconnect"),e.value(Function.web.socket,"buffer",{size:"maxHttpBufferSize"}),e(Function.web,"browser",class{constructor(){}}),e(Function.web.browser,"cookie",class{constructor(e){this.data={},this.event={},this.cookie=[],this.host=e}on(e,t){return e in this.event===!1&&(this.event[e]=[]),this.event[e].push(t),this}emit(e,...t){for(var n in this.event[e])this.event[e][n].call(this,...t);return this}start(){var e;if(document.cookie)for(var t in e=document.cookie.split(";")){var n=e[t].split("="),i=n[0].trim(),r=n[1];r&&(this.data[i]=r)}return this.emit("start")}set(e,t,n){var i=[];n=Object.assign({path:this.path||"/",host:this.host,expire:this.expire,mode:this.mode||"lax"},n);return i.push(e+"="+t),n.expire&&i.push("expire="+n.expire),n.host&&i.push("domain="+n.host),n.path&&i.push("path="+n.path),"lax"===n.mode&&i.push("samesite=lax"),"none"===n.mode&&i.push("samesite=none"),!0===n.secure&&i.push("secure"),this.cookie.push(i.join(";")),this.emit("set"),this.data[e]=t}get(e,t){return e?e in this.data?this.data[e]:"":this.data}delete(e,t){return e&&("*"===e?this.remove(t):this.set(e,"",t)),this.emit("delete")}remove(e){for(var t in this.data)delete this.data[t]&&this.set(t,"",e);return this.emit("remove")}write(){for(var e in this.cookie)document.cookie=this.cookie[e];return this.cookie=[],this.emit("write")}exist(e){return e in this.data}}),e(Function.web.browser,"session",class{constructor(e){this.data={},this.event={},host instanceof Function.web.browser.cookie?this.cookie=e:this.cookie=new Function.web.browser.cookie(e)}on(e,t){return e in this.event===!1&&(this.event[e]=[]),this.event[e].push(t),this}emit(e,...t){for(var n in this.event[e])this.event[e][n].call(this,...t);return this}start(e,t){if((this.option=Object.assign({name:Function.session.name,signature:Function.session.signature,secure:!1},e))&&(this.name=this.option.name,this.signature=this.option.signature,this.secure=this.option.secure,this.shuffle=this.option.id||Function.session.shuffle()),this.cookie.start()&&(this.id=this.cookie.get(this.name),this.cache=this.cookie.get(Function.session.cache),Object.is.empty(this.id)&&(this.cookie.set(this.name,this.id=this.shuffle,this.option),this.cookie.set(this.signature,Function.json.format({}).encode(),this.option),this.cookie.set(Function.session.cache,this.cache=Function.hash.shuffle(10),this.option),this.cookie.write())),(this.session=this.cookie.get(this.signature).decode())&&(this.session=Function.json.parse(this.session)))for(var n in this.session)this.data[n]=this.session[n];return t&&t.call(this,this.id,this.data),this.emit("start")}set(e,t,n){return n&&this.data[e]||(this.data[e]=t,this.write(),this.emit("set")),this.data[e]}get(e){return e?e in this.data?this.data[e]:"":this.data}delete(e){return e&&("*"===e?this.data={}:delete this.data[e]),this.write(),this.emit("delete")}write(e){return this.cookie.set(this.signature,Function.json.format(e||this.data).encode(),this.option),this.cookie.write(),this.emit("write")}exist(e){return e in this.data}join(e){return e&&(this.data=Object.merge(this.data,e)),this.emit("join"),this.data}}),e(Function,"sql",(function(){})),e(Function.sql,"eol",String.char.eol),e(Function.sql,"delimiter",String.char.separator.delimiter),e(Function.sql,"comment","--"),e(Function.sql,"debug",Function.pro("sql:debug")),e(Function,"db",class{constructor(){this.db=new class{}}start(e){return(this.adapter=(this.option=Object.assign({slot:"tcp"},e)).adapter||Function.db.adapter())&&(this.slot=this.option.slot,this.socket=this.option.socket,this.db.adapter=Function.db.adapter[this.adapter],this.db.slot=this.db.adapter[this.slot],this.link=this.db.adapter.connect(this.option),this.schema=new this.db.adapter.schema.collection(this),this.model=new this.db.adapter.model.collection(this),this.collection=new this.db.slot.collection(this)),this}cache(e){this.db.adapter.cache(this,e)}select(e,t){return new this.db.slot.select(this,e,t)}insert(e,t){return new this.db.slot.insert(this,e,t)}update(e,t){return new this.db.slot.update(this,e,t)}delete(e,t){return new this.db.slot.delete(this,e,t)}remove(e,t){return new this.db.slot.remove(this,e,t)}then(e){return this.promise=this.link.then(e)}catch(e){return this.promise.catch(e)}}),e(Function.db,"adapter",(function(e){return arguments.length&&(Function.db.adapter.value=e),Function.db.adapter.value})),Function.db.adapter("mongo"),e(Function.db,"promise",(function(e){return arguments.length&&(Function.db.promise.value=e),Function.db.promise.value})),e(Function,"mongo",class{constructor(e,t){this.connection=Function.mongo.url(e),this.option=Object.assign({useNewUrlParser:Function.mongo.url.parser,useUnifiedTopology:Function.mongo.url.topology},t),this.client=new Function.MongoClient(this.connection.format,this.option)}then(e){var t=function(e){var t=new Function.mongo.db(e,this.connection);this.context.call(t,t)};return this.promise=this.client.connect().then(t.bind({context:e,connection:this.connection.parse})),this}catch(e=r){return this.promise.catch(e),this}}),e(Function.mongo,"db",class{constructor(e,t){this.mongo=e,this.connection=t}__(e,t){return new Function.mongo.client(this.mongo,this.mongo.db(e),t,this.connection)}use(...e){return this.__(...e)}connect(...e){return this.__(...e)}open(...e){return this.__(...e)}}),e(Function.mongo.db,"bucket",(function(){})),e.value(Function.mongo.db.bucket,"connection","connection"),e(Function.mongo,"client",class{constructor(e,t,n,i,r=!0,o=!0,s=!0){this.client=e,this.connection=i,this.db=t,this.prefix=o,this.option=Function.option(n,{feature:s}),this.collection=new Function.mongo.collection(this),this.view=new Function.mongo.collection.view(this),r&&this.channel(e,n,i)}channel(e,t,n){this.system={admin:e.db("admin"),local:new Function.mongo.client(e,e.db("local"),t,n,null,null,null)}}use(e,t){return arguments.length>1?this.option[e]=t:Object.assign(this.option,e),this}command(e,t){return new Function.mongo.command(this,e,t)}list(e,t){return new Function.mongo.list(this,e,t)}index(e,t){return new Function.mongo.collection.index(this,this.name(e),t)}select(e,t){return new Function.mongo.collection.select(this,this.name(e),t)}insert(e,t){return new Function.mongo.collection.insert(this,this.name(e),t)}update(e,t){return new Function.mongo.collection.update(this,this.name(e),t)}delete(e,t){return new Function.mongo.collection.delete(this,this.name(e),t)}remove(e,t){return new Function.mongo.collection.remove(this,this.name(e),t)}name(e){return this.prefix?Function.mongo.collection.name(e):e}is_collection(e){return e=Function.mongo.collection.name(e),new Function.promise(function(t,n){this.mongo.list("collection").then((function(i){i.data.filter((function(t){return e===t.name})).length?t(!0):n(!1)}))}.bind({mongo:this}))}setup(e,t=function(){}){return Function.mongo.client.setup(this,e,t),this}}),e(Function.mongo.client,"setup",(function(e,t,n){var i={host:e.connection.host,port:e.connection.port,name:e.connection.name,user:e.connection.user,password:Function.hash.password(e.connection.password)},r=function(r,o){if(r.length)t();else{var s=function(e){e.data.find((function(e){return e.name===i.name}));a()},a=function(){o.insert(Function.mongo.db.bucket.connection).set(i).then((function(e){t()})).catch((function(e){n()})),e.insert("tmp").then().catch()};e.list("data:base").then(s).catch((function(){n()}))}};e.system.local.select("connection").find(i).then(r).catch((function(){n()}))})),e(Function.mongo,"list",class{constructor(e,t,n){this.mongo=e,this.key=t}then(e=r){return"data:base"===this.key?this.promise=this.mongo.system.admin.command({listDatabases:1}).then((function(t){var n=[];for(var i in t.databases)n.push({name:t.databases[i].name,size:t.databases[i].sizeOnDisk,empty:t.databases[i].empty});e({length:n.length,size:t.totalSize,data:n})})):"collection"===this.key&&(this.promise=this.mongo.db.command({listCollections:1,nameOnly:!0}).then((function(t){var n=[];for(var i in t.cursor.firstBatch)n.push({name:t.cursor.firstBatch[i].name,type:t.cursor.firstBatch[i].type});e({length:n.length,data:n})}))),this}catch(e=r){return this.promise.catch(e),this}}),e(Function.mongo,"collection",class{constructor(e){this.mongo=e}create(...e){return this.mongo.db.createCollection(...e)}select(...e){return this.mongo.db.collection(...e)}drop(...e){return this.mongo.db.dropCollection(...e)}}),e(Function.mongo.collection,"extend",class{constructor(e,t,n){this.mongo=e,this.context=n,this.query=this.mongo.collection.select(this.collection=t),this.option=Object.assign({upsert:!1}),this.__filter=Object.empty(),this.__flag=Object.empty(),this.__push=Object.empty()}use(e,t){return arguments.length>1?this.option[e]=t:Object.assign(this.option,e),this}distinct(e){return this.__distinct=e,this}count(e){return this.__count=e,this}aggregate(e){return this.__aggregate=e,this}push(e){return this.__push=e,this}set(e={}){return this.__data=e,this}skip(e){return this.__skip=e,this}limit(e){return this.__limit=e,this}offset(e,t){return t?this.__offset=Object.assign({skip:e,limit:t}):this.__limit=e,this}condition(...e){return this.filter(...e)}where(...e){return this.filter(...e)}find(...e){return this.filter(...e)}filter(e,t){return Object.is.string(e)?Object.assign(this.__filter,Function.mongo.object.id(e)):Object.assign(this.__filter,e),Object.assign(this.__flag,t),this}feature(e,t,n){if(this.mongo.option.feature&&("select"===e&&(!0===this.__flag.delete?Object.assign(this.__filter,{"$:delete":{">>":0}}):null===this.__flag.delete||"append"===this.__flag.delete?delete this.__filter["$:delete"]:Object.assign(this.__filter,{"$:delete":0})),"insert"===e&&(Object.is.array(this.__data)&&this.__data.map((function(e){Object.assign(e,Function.mongo.object.stamp())})),Object.is.object(this.__data)&&Object.assign(this.__data,Function.mongo.object.stamp())),"update"===e&&("$:push"in this.__data&&this.push(this.__data["$:push"])&&delete this.__data["$:push"],this.__data=Function.mongo.object.format(Object.assign(this.__data,Function.mongo.object.stamp.update()))),"remove"===e&&(this.__data=Function.mongo.object.format(Function.mongo.object.stamp.remove())),this.__count&&(this.__count=Function.mongo.object.format(this.__count)),this.__filter=Function.mongo.object.format(this.__filter)),"select"===e&&this.__aggregate&&(this.__aggregate=Function.mongo.object.aggregate.format(this.__aggregate)),"insert"===e&&(Object.is.object(this.__data)&&(this.__data=[this.__data]),Object.un.define(this.__data)&&(this.__data=[Function.mongo.object.id()])),"delete"===e)return!0===t?n>0:null===t||"append"===t||0===n;if("index"===e)for(var i in this.__field)"ascending"===this.__field[i]&&(this.__field[i]=1),"descending"===this.__field[i]&&(this.__field[i]=-1);return this}next(e,t,n){return e.then(Function.mongo.query(this,t,n))}catch(e=r){return this.promise.catch(e),this}}),e(Function.mongo.collection,"index",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}create(e,t){return this.syntax="create",this.__field=e,this.__option=t,this}drop(e){return this.syntax="drop",this.__field=e,this}then(e=r){return this.feature("index"),"create"===this.syntax&&(this.promise=this.query.createIndex(this.__field,this.__option).then(e)),"drop"===this.syntax&&(this.promise=this.query.dropIndex(this.__field).then(e)),this}}),e(Function.mongo.collection,"view",class{constructor(e){this.mongo=e}create(e,t){return new Function.mongo.collection.view.create(this.mongo,Function.mongo.collection.view.name(e),t)}select(e,t){return new Function.mongo.collection.view.select(this.mongo,Function.mongo.collection.view.name(e),t)}}),e(Function.mongo.collection.view,"extend",class{constructor(e,t,n){this.mongo=e,this.context=n,this.collection=t,this.__pipe=[]}select(e){return this.__collection=Function.mongo.collection.name(e),this}pipe(e){return this.__pipe.push(e),this}catch(e=r){return this.promise.catch(e),this}}),e(Function.mongo.collection.view,"create",class extends Function.mongo.collection.view.extend{constructor(e,t,n){super(e,t,n)}then(e=r){this.__pipe.map((function(e){e["$:lookup"]&&(e["$:lookup"]["$:from"]&&(e["$:lookup"]["$:from"]=Function.mongo.collection.name(e["$:lookup"]["$:from"])),e["$:lookup"]["$:on"]&&(e["$:lookup"]["$:on"]=Function.mongo.collection.name(e["$:lookup"]["$:on"])))}));var t=Function.mongo.object.key.format(this.__pipe),n=Function.mongo.object.format({"$:view":this.__collection,"$:pipe":t});return this.promise=new Function.promise(function(e,t){this.mongo.is_collection(this.view.__collection).then((function(){t("exist")})).catch(function(){this.mongo.collection.create(this.view.collection,n).then(e).catch((function(e){t({name:"exist",code:e.code})}))}.bind({mongo:this.mongo,view:this.view}))}.bind({mongo:this.mongo,view:this})).then(e),this}}),e(Function.mongo.collection.view,"select",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){var t;return this.feature("select"),t||(t=this.__distinct?this.query.distinct(this.__distinct):this.__count?this.query.count(this.__count):this.__aggregate?this.query.aggregate(this.__aggregate).toArray():this.query.find(this.__filter).toArray()),this.__sort&&(t=t.sort(this.__sort)),this.__limit&&(t=t.limit(this.__limit)),this.promise=this.next(t,"view",e,this.__offset),this}}),e(Function.mongo.collection,"select",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){var t;return this.feature("select"),t||(t=this.__distinct?this.query.distinct(this.__distinct):this.__count?this.query.count(this.__count):this.__aggregate?this.query.aggregate(this.__aggregate).toArray():this.query.find(this.__filter).toArray()),this.__sort&&(t=t.sort(this.__sort)),this.__limit&&(t=t.limit(this.__limit)),this.promise=this.next(t,"select",e,this.__offset),this}}),e(Function.mongo.collection,"insert",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){this.feature("insert");var t=this.query.insertMany(this.__data);return this.promise=this.next(t,"insert",e),this}}),e(Function.mongo.collection,"update",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){this.feature("update");var t=this.query.updateMany(this.__filter,{$set:this.__data,$push:this.__push},this.option);return this.promise=this.next(t,"update",e),this}}),e(Function.mongo.collection,"delete",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){this.feature("delete");var t=this.query.deleteMany(this.__filter);return this.promise=this.next(t,"delete",e),this}}),e(Function.mongo.collection,"remove",class extends Function.mongo.collection.extend{constructor(e,t,n){super(e,t,n)}then(e=r){this.feature("remove");var t=this.query.updateMany(this.__filter,{$set:this.__data});return this.promise=this.next(t,"remove",e),this}}),e(Function.mongo,"query",(function(e,t,n,i){return function(r){if(["select","view"].includes(t))if(e.__distinct)n.call(e,{length:r.length,data:r});else if(e.__count)n.call(e,r);else{var o=r;e.mongo.option.feature&&(o=Function.mongo.object.structure(r));var s=o.length;if(i&&(o=o.slice(i.skip,i.skip+i.limit)),e.mongo.option.feature)for(var a in o)for(var c in o[a])Object.is.array(o[a][c])&&(o[a][c]=o[a][c].filter((function(t){return!t._id||!t._stamp||e.feature("delete",e.__flag.delete,t._stamp.delete)})));n.call(e,{length:s,data:o},e.mongo)}if(["insert"].includes(t)){o=e.__data;e.mongo.option.feature&&(o=Function.mongo.object.structure(o));s=o.length;var u=Object.assign({success:r.insertedCount,error:0});n.call(e,{length:s,status:u,data:o},e.mongo)}if(["update","remove"].includes(t)){s=r.matchedCount,u=Object.assign({success:r.modifiedCount,error:r.matchedCount-r.modifiedCount});n.call(e,{length:s,status:u},e.mongo)}if(["delete"].includes(t)){s=r.deletedCount,u=Object.assign({success:r.deletedCount,error:0});n.call(e,{length:s,status:u},e.mongo)}}})),e(Function.mongo.collection,"prefix",(function(e){return arguments.length&&(Function.mongo.collection.prefix.__=""===e?"":e.concat("_")),Function.mongo.collection.prefix.__})),Function.mongo.collection.prefix("table"),e(Function.mongo.collection,"name",(function(e){return Function.mongo.collection.prefix().concat(e).replace(".","_")})),e(Function.mongo.collection.view,"prefix",(function(e){return arguments.length&&(Function.mongo.collection.view.prefix.__=""===e?"":e.concat("_")),Function.mongo.collection.view.prefix.__})),Function.mongo.collection.view.prefix("view"),e(Function.mongo.collection.view,"name",(function(e){return Function.mongo.collection.view.prefix().concat(e)})),e(Function.mongo,"object",(function(){})),e(Function.mongo.object,"id",(function(...e){return Object.assign({_id:Object.id(...e)})})),e(Function.mongo.object,"stamp",(function(){return Object.assign({_stamp:{serial:Function.mongo.object.stamp.serial(),insert:Date.now(),update:Date.now(),delete:0}})})),e(Function.mongo.object.stamp,"update",(function(){return Object.assign({"$:update":Date.now()})})),e(Function.mongo.object.stamp,"remove",(function(){return Object.assign({"$:delete":Date.now()})})),e(Function.mongo.object.stamp,"serial",(function(e){e&&(Function.mongo.object.stamp.serial.rand=e);var t=(new Date).getStamp(),n=Function.performance.now(),i=Function.hash.shuffle(Number.char,Function.mongo.object.stamp.serial.rand||5);return Object.to.string(t).concat(":").concat(n).concat(":").concat(i)})),e(Function.mongo.object,"aggregate",(function(){})),e(Function.mongo.object.aggregate,"format",(function(e){var t=[];for(var n in e)t.push(Object.keys.format(e[n],Function.mongo.object.key()));return t})),e(Function.mongo.object,"key",(function(){return{"$:id":"_id","$:serial":"_stamp.serial","$:insert":"_stamp.insert","$:update":"_stamp.update","$:delete":"_stamp.delete","$:lookup":"$lookup","$:from":"from","$:on":"from","$:field":"localField","$:foreign":"foreignField","$:output":"as","$:view":"viewOn","$:pipe":"pipeline","$:var":"let","$:set":"$set","$:match":"$match","$:group":"$group","$:in":"$in","$:sort":"$sort","$:count":"$sum","$:push":"$push","$:expression":"$expr","&":"$and","||":"$or",">>":"$gt","<<":"$lt"}})),e(Function.mongo.object.key,"format",(function(e){var t=[];for(var n in e){var i=Function.mongo.object.format(e[n]);for(var r in i)i[r]=Function.mongo.object.format(i[r]);t.push(i)}return t})),e(Function.mongo.object,"format",(function(e){return Function.mongo.object.fix(e)})),e(Function.mongo.object,"fix",(function(e){var t=Function.mongo.object.key();for(var n in e)n in t&&(e[t[n]]=e[n],delete e[n],Function.ObjectID_Instance(e[t[n]])||Object.is.object(e[t[n]])&&(e[t[n]]=Function.mongo.object.fix(e[t[n]])));return e})),e(Function.mongo.object,"structure",(function(e){var t;if(Object.is.array(e)&&(t=[]))for(var n in e){var i=Object.empty();for(var r in"_id"in e[n]&&Object.assign(i,{_id:e[n]._id}),"_stamp"in e[n]&&Object.assign(i,{_stamp:e[n]._stamp}),"_id"in e[n]&&Object.assign(i,{id:e[n]._id}),"_stamp"in e[n]&&Object.assign(i,{stamp:e[n]._stamp}),e[n])["_id","_stamp"].includes(r)||(i[r]=e[n][r]);t.push(i)}if(Object.is.object(e)&&(t={$:{id:e._id,stamp:e._stamp}}))for(var n in e)["_id","_stamp"].includes(n)||(t[n]=e[n]);return t})),e(Function.mongo,"url",(function(e){return Object.is.string(e)&&(e=URL.parse(e)),e=Object.assign({protocol:Function.mongo.url.protocol,host:Function.mongo.url.host,port:Function.mongo.url.port,query:Function.mongo.url.param},e),e.param&&(e.query=e.param),Object.assign({format:URL.format(Object.merge(e,{path:e.name})),parse:e})})),e(Function.mongo.url,"protocol","mongodb"),e(Function.mongo.url,"host","127.0.0.1"),e(Function.mongo.url,"port",27017),e(Function.mongo.url,"name","mongo"),e(Function.mongo.url,"parser",!0),e(Function.mongo.url,"topology",!0),e(Function.mongo.url,"param",{retryWrites:"true",w:"majority"}),e(Function.mongo.url,"data",{protocol:Function.mongo.url.protocol,host:Function.mongo.url.host,port:Function.mongo.url.port,query:Function.mongo.url.param}),e(Function,"dom",(function(e){return new Function.dom.document(e)})),e(Function.dom,"doc",class{constructor(e){this.client=new Function.dom.doc.client(this.dom=e)}attribute(e,t){return arguments.length>1?Function.dom.attribute.set(e,t,this.dom):Function.dom.attribute.get.value(e,this.dom)}}),e(Function.dom.doc,"client",class{constructor(e){this.width=e.clientWidth,this.height=e.clientHeight}}),e(Function.dom,"document",class{constructor(e){Object.is.string(e)?e.includes("=")?this.dom=Function.dom.query.selector(e):this.dom=Function.dom.query.selector("[id="+e+"]"):this.dom=e,this.class=new Function.dom.class(this.dom)}value(e){if(this.dom){if(!arguments.length)return this.dom.value;Object.is.set(e)?this.dom.value=e:this.dom.value=""}return this}content(e){if(this.dom){if(!arguments.length)return this.dom.innerHTML;Object.is.set(e)?this.dom.innerHTML=e:this.dom.innerHTML=""}return this}text(e){if(this.dom){if(!arguments.length)return this.dom.innerHTML;Object.is.set(e)?this.dom.innerHTML=e:this.dom.innerHTML=""}return this}enable(e){return this.dom&&(this.dom.disabled=!e),this}focus(){return this.dom&&this.dom.focus(),this}play(){return this.dom&&this.dom.play(),this}attribute(e,t){if(this.dom)if(arguments.length>1)Object.is.set(t)?Function.dom.attribute.set(e,t,this.dom):Function.dom.attribute.delete(e,this.dom);else if(e)return Function.dom.attribute.get(e,this.dom);return this}delete(){return this.dom&&this.dom.remove(),this}}),e(Function.dom,"class",class{constructor(e){this.dom=e}list(){return this.get()}get(){return this.dom?this.dom.className.split(String.char.space):[]}set(e){return this.dom&&(this.dom.className=e),this}insert(e){return this.dom&&(this.delete(e),this.dom.className=this.dom.className.concat(String.char.space,e)),this}update(e,t){return this.dom&&(this.delete(e),this.dom.className=this.dom.className.concat(String.char.space,t)),this}delete(e){if(this.dom){var t=[],n=this.list();for(var i in n)e===n[i]===!1&&t.push(n[i]);this.dom.className=t.join(String.char.space)}return this}toggle(e){return this.get().includes(e)?this.delete(e):this.insert(e),this}}),e(Function.dom,"parse",(function(e,t,n){var i=n||{component:[],element:[]};e=e.toString((t=Object.assign({depth:!1},t)).encoding);if(null===n){var r=e.match(Function.dom.pattern.element);for(var o in r){var s=new RegExp(Function.dom.pattern.element).exec(r[o]),a=s[0],c=s[1],u={},l=s[2].match(Function.dom.pattern.attribute);for(var h in l){var d=new RegExp(Function.dom.pattern.attribute).exec(l[h]);u[d[1].trim()]=d[2]}i.element.push({tag:c,attribute:u,source:a})}}var f=e.match(Function.dom.pattern.component);for(var o in f){s=new RegExp(Function.dom.pattern.component).exec(f[o]),a=s[0],c=s[1],u={};var p=s[3];l=s[2].match(Function.dom.pattern.attribute);for(var h in l){d=new RegExp(Function.dom.pattern.attribute).exec(l[h]);u[d[1].trim()]=d[2]}i.component.push({tag:c,attribute:u,content:p,source:a}),!0===t.depth&&Function.dom.parse(p,t,i)}return i})),e(Function.dom,"component",(function(e,t,n){var i=[],r=Function.dom.pattern.tag.component(t),o=(e=e.toString((n=Object.assign({attribute:!1},n)).encoding)).match(new RegExp(r,"sig"));for(var s in o){var a=new RegExp(r,"sig").exec(o[s]),c=a[0],u=a[2],l={},h=a[1].match(Function.dom.pattern.attribute);for(var d in h){var f,p=new RegExp(Function.dom.pattern.attribute).exec(h[d]),m=p[1].trim(),g=p[2];n.attribute&&m.includes(":")?(f=m.split(":"),l[f[0]]||(l[f[0]]={}),l[f[0]][f[1]]=g):l[m]=g}i.push({attribute:l,content:u,source:c})}return i})),e(Function.dom,"element",(function(e,t,n,i="element"){var r=[],o=Function.dom.pattern.tag[i](t),s=(e=e.toString((n=Object.assign({attribute:!1},n)).encoding)).match(new RegExp(o,"g"));for(var a in s){var c=new RegExp(o,"g").exec(s[a]),u=c[0],l={},h=c[1].match(Function.dom.pattern.attribute);for(var d in h){var f,p=new RegExp(Function.dom.pattern.attribute).exec(h[d]),m=p[1].trim(),g=p[2];n.attribute&&m.includes(":")?(f=m.split(":"),l[f[0]]||(l[f[0]]={}),l[f[0]][f[1]]=g):l[m]=g}r.push({attribute:l,source:u})}return r})),e(Function.dom.element,"get",(function(e){if(Object.is.string(e))return document.getElementById(e)})),e(Function.dom,"attribute",(function(e,t,n){return arguments.length>2?Function.dom.attribute.set(t,n,Function.dom.query.selector(e)):Function.dom.attribute.get(t,Function.dom.query.selector(e))})),e(Function.dom.attribute,"get",(function(e,t){if(t)return t.getAttribute(e)||""})),e(Function.dom.attribute.get,"value",(function(e,t){if(t){var n=t.getAttribute(e)||"";if(n.includes(":")&&n.includes(";")){var i={},r=n.split(";");for(var o in r)if(r[o]){var s=r[o].split(":"),a=(e=s[0].trim(),s[1].trim());i[e]=a}return i}return n}})),e(Function.dom.attribute.get,"static",(function(e,t,n,i){var r='<%s %s %s="'.format(t,Function.dom.attribute.format(n),i),o='">';return e.after(r).before(o)})),e(Function.dom.attribute,"set",(function(e,t,n){if(n)return n.setAttribute(e,Function.dom.attribute.set.value(t))})),e(Function.dom.attribute.set,"value",(function(e){if(Object.is.object(e)){var t=[];for(var n in e)t.push(n+": "+e[n]+";");return t.join(" ")}return e})),e(Function.dom.attribute,"delete",(function(e,t){if(t)return t.removeAttribute(e)})),e(Function.dom.attribute,"format",(function(e,t='"'){var n=[],i=[];for(var r in e)i=[],null===e[r]?i.push(r):n.push(r+"="+t+e[r]+t);return i.length&&n.push(i.join(String.char.space)),n.join(String.char.space)})),e(Function.dom.attribute,"struct",class{constructor(e){this.dom=e}get(e){return Function.dom.attribute.get(e,this.dom)}set(e,t){return Object.is.set(t)&&Function.dom.attribute.set(e,t,this.dom),this}delete(e){return Function.dom.attribute.delete(e,this.dom),this}}),e(Function.dom,"query",(function(e){return"#"!==e.substr(0,1)&&(e="#"+e),Function.dom.query.selector(e)})),e(Function.dom.query,"selector",(function(e){return document.querySelector(e.split(":").join("\\:"))})),e(Function.dom.query.selector,"all",(function(e,t){return t?document.querySelectorAll(e).forEach(t):document.querySelectorAll(e)})),e(Function.dom.query,"format",(function(...e){var t=[];for(var n in e)if("string"===typeof e[n]&&t.push("["+e[n]+"]"),"object"===typeof e[n]){var i=[];for(var r in e[n])null===e[n][r]?i.push("["+r+"]"):i.push("["+r+"='"+e[n][r]+"']");t.push(i.join(", "))}return t.join(" > ")})),e(Function.dom,"for",(function(e,t){e.forEach(t)})),e(Function.dom,"css",(function(){})),e(Function.dom.css,"list",(function(e){return e.classList})),e(Function.dom,"format",(function(e,t,n,i,r){if(i=Object.is.string(n)?Object.assign({block:!0},i):Object.assign({block:!1},n,i),i.block){var o=[e];for(var s in(t=Function.dom.attribute.format(t))&&o.push(t),r)o.push(r[s]);return"<"+o.join(String.char.space)+">"+Object.to.string(n)+"</"+e+">"}o=[e];for(var s in(t=Function.dom.attribute.format(t))&&o.push(t),r)o.push(r[s]);return i.close&&o.push("/"),"<"+o.join(String.char.space)+">"})),e.value(Function.dom,"pattern",{attribute:/(.*?)="(.*?)"/gis,component:/<([a-z:0-9]+)\s*(.*?)>\s*(.*?)\s*<\/\1>/gis,element:/<([a-z:0-9]+)\s*(.*?)\/>/g,single:/<([a-z:0-9]+)\s*(.*?)>/g,tag:{component:function(e){return"<"+e+"s*(.*?)>s*(.*?)s*</"+e+">"},element:function(e){return"<"+e+"+s*(.*?)/>"},single:function(e){return"<"+e+"+s*(.*?)>"}}}),e.property(Function.dom,"markup",(function(e){return e=e.replace('http-equiv="x-edge"','http-equiv="x-ua-compatible"'),e=e.replace('name="view:port"','name="viewport"'),e})),e(Function,"audio",(function(e,t){return URL.begin(e=e||"audio")?new Function.audio.player(e):(e in Function.audio.play.list&&(e=Function.audio.play.list[e]),"web-view"===Function.visitor.browser.model?Function.mobile[Function.visitor.device.model].audio(e):(t&&(e=t(e)),new Function.audio.player(e)))})),e(Function.audio,"player",class{constructor(e){this.audio=new Audio(e)}play(){this.audio.play()}}),e(Function.audio,"play",(function(){})),e(Function.audio.play,"list",(function(e,t){return Function.audio.play.list.value[e]=t})),e.value(Function.audio.play.list,"value",{}),e(Function,"browser",(function(){})),e(Function.browser,"session",class{constructor(){}}),e(Function,"mobile",(function(){})),e(Function.mobile,"i",(function(){})),e(Function.mobile,"a",(function(){})),e(Function.mobile.a,"exit",(function(){Android.exit()})),e(Function.mobile.a,"toast",(function(e){Android.toast(e)})),e(Function.mobile.a,"notification",(function(e,t,n,i,r){Android.notification(e,t,n,i,r)})),e(Function.mobile.a,"audio",(function(e){Android.audio(e)})),e(Function.mobile.a,"thermal",(function(){})),e(Function.mobile.a.thermal,"print",(function(e){Android.print(e)})),e(Function,"visitor",(function(e){var t=!1,n="",i="",r="",o=!1;e||(window.navigator.userAgentData&&window.navigator.userAgentData.brands.length&&(t=!0)&&(n=window.navigator.userAgentData.platform,i=n+" "+window.navigator.userAgentData.brands[0].brand+"/"+window.navigator.userAgentData.brands[0].version,r=window.navigator.userAgentData.brands[0].version,o=window.navigator.userAgentData.mobile),!1===t&&(i=window.navigator.userAgent));var s={ip:URL.host("*"),browser:{name:e||i,version:r},device:{type:"computer",system:n,mobile:o}};e=s.browser.name.toLowerCase();return e.includes("windows")&&(s.device.system="win"),e.includes("android")&&(s.device.system="android",e.includes("wv")&&(s.browser.model="web-view"),e.includes("mobile")?s.device.type="phone":s.device.type="tablet",e.includes("android")&&(s.device.model="a")),e.includes("mac")&&(s.device.system="mac",e.includes("iphone")?s.device.type="phone":e.includes("ipad")?s.device.type="tablet":s.device.type="computer",e.includes("iphone")&&(s.device.model="i")),e.includes("firefox")?s.browser.platform="mozilla":e.includes("chrome")?s.browser.platform="chrome":e.includes("safari")?s.browser.platform="safari":s.browser.platform="*",s})),e(Function.visitor,"__",(function(e){var t=Function.visitor(e);for(var n in t)Function.visitor[n]=t[n];return t})),e(Function,"scroll",(function(e,t){e=e||0,t=t||0,window.scrollTo(e,t)})),e(Function.scroll,"on",(function(e){window.onscroll=e})),e(Function.scroll.on,"top",(function(){return 0===window.scrollY})),e(Function.scroll,"top",(function(){return window.scrollY})),e(Function,"cross",(function(){})),e(Function.cross,"origin",(function(){})),e.value(Function.cross.origin,"method",{methods:"GET,HEAD,PUT,PATCH,POST,DELETE"}),e.value(Function.cross.origin,"status",{optionsSuccessStatus:200}),e(Function,"seo",(function(e,t){return Function.seo.header(e,t)})),e(Function.seo,"header",(function(e,t){t=Function.option(t,{separator:"",tab:2});e=Function.seo.tag.convert(e);var n,i,r=[];for(var o in i=["title","description"])e[n=i[o]]&&r.push(Function.seo.tag[n].replace("%".concat(n),e[n]));for(var o in i=["title","description","type","site_name","url","image","image_type"])e[n=i[o]]&&r.push(Function.seo.tag.og[n].replace("%".concat(n),e[n]));for(var o in i=["title","description","url","image","card"])(n=i[o])in e&&r.push(Function.seo.tag.tweet[n].replace("%".concat(n),e[n]));return r.join(t.separator+String.char.ln.tab().repeat(t.tab))})),e.property(Function.seo,"tag",{title:Function.dom.format("meta",{name:"title",content:"%title"}),description:Function.dom.format("meta",{name:"description",content:"%description"}),og:{title:Function.dom.format("meta",{name:"og:title",property:"og:title",content:"%title"}),description:Function.dom.format("meta",{name:"og:description",property:"og:description",content:"%description"}),type:Function.dom.format("meta",{name:"og:type",property:"og:type",content:"%type"}),site_name:Function.dom.format("meta",{name:"og:site_name",property:"og:site_name",content:"%site_name"}),url:Function.dom.format("meta",{name:"og:url",property:"og:url",content:"%url"}),image:Function.dom.format("meta",{name:"og:image",property:"og:image",content:"%image"}),image_type:Function.dom.format("meta",{name:"og:image:type",property:"og:image:type",content:"%image_type"})},tweet:{title:Function.dom.format("meta",{name:"twitter:title",property:"twitter:title",content:"%title"}),description:Function.dom.format("meta",{name:"twitter:description",property:"twitter:description",content:"%description"}),url:Function.dom.format("meta",{name:"twitter:url",property:"twitter:url",content:"%url"}),image:Function.dom.format("meta",{name:"twitter:image",property:"twitter:image",content:"%image"}),card:Function.dom.format("meta",{name:"twitter:card",property:"twitter:card",content:"%card"})},convert:function(e){var t={};for(var n in e)if(Object.is.object(e[n]))for(var i in e[n])"site"===n&&"name"===i&&(t.site_name=e[n][i]),"image"===n&&("src"===i&&(t.image=e[n][i]),"type"===i&&(t.image_type=e[n][i]));else t[n]=e[n];return t}}),e(Function,"sitemap",(function(){return this})),e(Function.sitemap,"generate",(function(e){for(var t in e)if("archive"===t);})),e(Function.sitemap,"index",(function(){return this})),e(Function.sitemap.index,"generate",(function(){return this})),e(Function,"geo",(function(){return this})),e(Function.geo,"location",class{constructor(){}start(e,t){return(this.navigator=window.navigator.geolocation)&&e?e.call():t?t.call():void 0}watch(e,t,n){if(this.navigator)return this.id=this.navigator.watchPosition((function(t){e.call(null,t.coords)}),t,n)}clear(e){this.navigator&&(e||this.id)&&this.navigator.clearWatch(e||this.id)}}),e(Function.geo.location,"coordinate",(function(...e){return e.length>1?{latitude:e[0],longitude:e[1]}:e.length?{latitude:e[0].latitude,longitude:e[0].longitude}:{latitude:0,longitude:0}})),e(Function.geo.location,"navigator",(function(){return"navigator"in window&&"geolocation"in navigator})),e(Function,"map",class{constructor(e,t,n){this.instance=Function[this.provider=n].map(e,t),this.icon=Function[this.provider].map.icon}marker(e){var t={};return e=Function.option(e),e.title&&(t.title=e.title),e.position&&(t.position=Function[this.provider].map.coordinate(e.position.latitude,e.position.longitude)),new Function.map.marker(this,t)}center(...e){return this.instance.setCenter(Function[this.provider].map.coordinate(...e)),this}coordinate(...e){return Function[this.provider].map.coordinate(...e)}}),e(Function.map,"marker",class{constructor(e,t){this.marker=Function[(this.map=e).provider].map.marker(this.map.instance,t)}coordinate(...e){return this.marker.setPosition(this.map.coordinate(...e)),this}info_window(e){Function[this.map.provider].map.marker.info_window(this.map.instance,this.marker,Function[this.map.provider].map.info_window(e))}icon(e){this.marker.setIcon(e)}}),e(Function.map,"listener",(function(e,t,n){e&&e.addListener(t,(function({latLng:{lat:e,lng:t}}){n({latitude:e(),longitude:t()})}))})),e(Function,"validation",class{constructor(){this.data={}}check(e,t){return this.data[e]=new Function.validation.check(e,t)}}),e(Function.validation,"check",class{constructor(e,t){this.key=e,this.value=t,this.data=[]}require(e,t){return this.data.push({key:"require",value:e,option:t}),this}length(e,t){return this.data.push({key:"length",value:e,option:t}),this}trim(e,t){return this.data.push({key:"trim",value:e,option:t}),this}string(e,t){return this.data.push({key:"string",value:e,option:t}),this}number(e,t){return this.data.push({key:"number",value:e,option:t}),this}url(e,t){return this.data.push({key:"url",value:e,option:t}),this}name(e,t){return this.data.push({key:"name",value:e,option:t}),this}user(e,t){return this.data.push({key:"user",value:e,option:t}),this}password(e,t){return this.data.push({key:"password",value:e,option:t}),this}email(e,t){return this.data.push({key:"email",value:e,option:t}),this}phone(e,t){return this.data.push({key:"phone",value:e,option:t}),this}}),e(Function.validation.check,"context",{trim:function(e,t,n,i){!0===n.value&&(t=Object.to.string(t).trim())},string:function(e,t,n,i){!0===n.value&&(t=Object.to.string(t))},number:function(e,t,n,i){!0===n.value||Object.is.number(t)?t=Object.to.number(t):i[e][n.key]=!0},url:function(e,t,n,i){if(Object.is.url(t))return!0;i[e][n.key]=!0},length:function(e,t,n,i){var r=Object.to.string(t).length;return"="===n.option&&r===n.value||("=>"===n.option&&r>=n.value||("<="===n.option&&r<=n.value||(r>=n.value||void(i[e][n.key]=!0))))},require:function(e,t,n,i){if(Object.is.integer(n.value)){if(Object.to.string(t).length>n.value-1)return!0;i[e].length=!0}if(Object.is.string(n.value)){if(t.includes(n.value))return!0;i[e][n.key]=!0}if(!1===Object.is.empty(t))return!0;i[e][n.key]=!0},name:function(e,t,n,i){var r=Function.option(n.value);if(Object.is.profile.name(t,r))return!0;i[e][n.key]=!0},user:function(e,t,n,i){var r=Function.option(n.value);if(Object.is.user.name(t,r))return!0;i[e][n.key]=!0},password:function(e,t,n,i){var r=Function.option(n.value);if(Object.is.password(t,r))return!0;i[e][n.key]=!0},email:function(e,t,n,i){var r=Function.option(n.value);if(Object.is.email(t,r))return!0;i[e][n.key]=!0},phone:function(e,t,n,i){if(Object.is.phone(t))return!0;i[e][n.key]=!0}}),e(Function,"validate",(function(e,t){return new Function.promise((function(n,i){if(e instanceof Function.validation){t=Function.option(t);var r={},o={},s=0;for(var a in e.data){var c=e.data[a].key,u=e.data[a].value;for(var l in!1===c in o&&(o[c]={}),t.trim&&(u=Object.to.string(u).trim()),t.string&&(u=Object.to.string(u)),t.number&&(u=Object.to.number(u)),e.data[a].data){var h=e.data[a].data[l];h.key in Function.validation.check.context?Function.validation.check.context[h.key].call(null,c,u,h,o):h.key in Function.validate.check.context?Function.validate.check.context[h.key].call(null,c,u,h,o):o[c][h.key]=!0}r[c]=u}for(var a in o)if(Object.length(o[a]))for(var l in o[a])s++;else delete o[a];s?i({name:"validation",data:o}):n(r)}else i()}))})),e(Function.validate,"check",(function(e,t){return Function.validate.check.context[e]=t})),e(Function.validate.check,"context",{}),e(Function,"password",(function(){})),e.value(Function.password,"length",8),e.value(Function.password,"char",["~","!","@","#"]),e(Object.to,"password",(function(e){return Function.hash.password(Object.to.string(e))})),e(Object.is,"password",(function(e,t){t=Function.option(t,{length:Function.password.length});var n=t.length-1;if(e=Object.to.string(e).trim()){var i=e.explode();if(String.char.alpha.small.explode().have(i)&&String.char.alpha.big.explode().have(i)&&String.char.alpha.number.explode().have(i)&&Function.password.char.have(i)&&e.length>n)return!0}return!1})),e(Function,"profile",(function(){})),e(Function.profile,"name",(function(){})),e.value(Function.profile.name,"length",6),e(Object.is,"profile",(function(){})),e(Object.is.profile,"name",(function(e,t){t=Function.option(t,{length:Function.profile.name.length});t.length;if(e=Object.to.string(e).toLowerCase().trim()){e.explode();if(String.char.alpha.small.explode().includes(e.begin())){if(e.includes(" ".repeat(2)))return!1;if(e.includes("'".repeat(2)))return!1;var n=e.split(" ");for(var i in n){if(!1===String.char.alpha.small.explode().include(n[i].delete("'").explode()))return!1;if(!1===String.char.alpha.small.explode().includes(n[i].begin()))return!1}return!0}}return!1})),e(Function,"user",(function(){})),e(Function.user,"name",(function(){})),e.value(Function.user.name,"length",6),e(Object.is,"user",(function(){})),e(Object.is.user,"name",(function(e,t){t=Function.option(t,{length:Function.user.name.length});var n=t.length-1;if((e=Object.to.string(e).toLowerCase().trim())&&String.char.alpha.small.explode().includes(e.begin())&&String.char.alpha.numeric.explode().includes(e.end())&&String.char.alpha.numeric.explode().concat(String.char.special).include(e.explode())){for(var i in String.char.special)if(e.includes(String.char.special[i].repeat(2)))return!1;if(e.length>n)return!0}return!1})),e(Function,"email",(function(){})),e(Function.email,"format",(function(e,t){return e.concat("@",t)})),e(Object.is,"email",(function(e,t){if(t=Function.option(t),e=Object.to.string(e).toLowerCase().trim()){var n=e.before("@").trim(),i=e.after("@").trim();if(Object.is.user.name(n,t.length)&&Object.is.url.host(URL.parse(i)))return!0}return!1})),e(Function,"phone",(function(){})),e(Object.is,"phone",(function(e){return!(!(e=Object.to.string(e).toLowerCase().trim())||!["+","0"].includes(e.substr(0,1)))&&Object.is.number(e.substr(1).delete("-").trim(String.space))})),e(Function,"bot",(function(){})),e(Function,"google",(function(){})),e(Function.google,"fire",(function(){})),e(Function.google.fire,"base",(function(){})),e(Function.google,"tag",(function(){return"GTM-MSBVQZ5"})),e(Function.google.tag,"manager",(function(e,t,n,i,r,o){o=o||"",e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=t.getElementsByTagName(n)[0],a=t.createElement(n),c="dataLayer"!=i?"&l="+i:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+c+o,s.parentNode.insertBefore(a,s)})),e(Function.google,"map",(function(e,t){return new google.maps.Map(e,t)})),e(Function.google.map,"marker",(function(e,t){return new google.maps.Marker(Object.assign({map:e},t))})),e(Function.google.map.marker,"info_window",(function(e,t,n){t.addListener("click",(function(){n.open(e,t)}))})),e(Function.google.map,"info_window",(function(e){return new google.maps.InfoWindow({content:e})})),e(Function.google.map,"coordinate",(function(...e){return new google.maps.LatLng(Number((e=Function.geo.location.coordinate(...e)).latitude),Number(e.longitude))})),e.value(Function.google.map,"icon",{base:{url:"https://maps.google.com/mapfiles/kml/shapes/"}}),Function.google.map.icon.base.src={library:Function.google.map.icon.base.url+"library_maps.png",parking:Function.google.map.icon.base.url+"parking_lot_maps.png",info:Function.google.map.icon.base.url+"info-i_maps.png"},Function.google.map.icon.src={"flag-beach":"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"},e(Function,"fire",class{constructor(){this.base=new Function.fire.base,this.store=new Function.fire.store(this.base)}}),e(Function.fire,"base",class{constructor(e){e&&this.start(e)}start(e){this.app=Function.google.fire.base.app(Function.fire.base.config(this.config=e)),this.auth=new Function.fire.base.auth(this)}__connect(e){return"reference"===e?this.connection:arguments.length?this.connection.value=e:this.connection.value}}),e(Function.fire.base,"config",(function(e){return e?{appId:e.id,apiKey:e.key,messagingSenderId:e.messaging,projectId:e.project,authDomain:e.domain,storageBucket:e.bucket}:{}})),e(Function.fire.base,"fetch",(function(e,t){for(var n in e)t(new Function.fire.base.fetch.data(e[n]))})),e(Function.fire.base.fetch,"data",class{constructor(e){this.data=e}get(e){return e?("$:id"===e&&(e="_id"),"$:identity"===e&&(e="_identity"),"$:doc"===e&&(e="_doc"),"$:reference"===e&&(e="_reference"),"$:stamp"===e&&(e="_stamp"),this.data[e]):this.data}}),e(Function.fire.base,"data",(function(){if(1===Object.length(this.__data)){if(this.__data.__)for(var e in this.__data)for(var t in this.__data[e]){for(var n in this.__data[e][t])"$:id"===n&&(this.__data[e][t]._id=Function.fire.base.data.format(this.__data[e][t][n])),"$:identity"===n&&(this.__data[e][t]._identity=Function.fire.base.data.format(this.__data[e][t][n])),"$:doc"===n&&(this.__data[e][t]._doc=Function.fire.base.data.format(this.__data[e][t][n])),"$:reference"===n&&(this.__data[e][t]._reference=Function.fire.base.data.format(this.__data[e][t][n])),"$:stamp"===n&&(this.__data[e][t]._stamp=Function.fire.base.data.format(this.__data[e][t][n]));delete this.__data[e][t]["$:id"],delete this.__data[e][t]["$:identity"],delete this.__data[e][t]["$:doc"],delete this.__data[e][t]["$:reference"],delete this.__data[e][t]["$:stamp"]}}else{for(var e in this.__data)"$:id"===e&&(this.__data._id=Function.fire.base.data.format(this.__data[e])),"$:identity"===e&&(this.__data._identity=Function.fire.base.data.format(this.__data[e])),"$:doc"===e&&(this.__data._doc=Function.fire.base.data.format(this.__data[e])),"$:reference"===e&&(this.__data._reference=Function.fire.base.data.format(this.__data[e])),"$:stamp"===e&&(this.__data._stamp=Function.fire.base.data.format(this.__data[e]));delete this.__data["$:id"],delete this.__data["$:identity"],delete this.__data["$:doc"],delete this.__data["$:reference"],delete this.__data["$:stamp"],this.__id&&(this.__data._id=this.__id),this.__identity&&(this.__data._identity=this.__identity),this.__doc&&(this.__data._doc=this.__doc),this.__reference&&(this.__data._reference=this.__reference),this.__stamp&&(this.__data._stamp=this.__stamp)}for(var e in this.__data)this.__data[e]=Function.fire.base.data.format(this.__data[e]);return this.__data})),e(Function.fire.base.data,"format",(function(e){return Object.un.define(e)?"":e})),e(Function.fire.base,"auth",class{constructor(e){this.fire={base:e}}start(e){this.connection=Function.google.fire.base.auth(this.fire.base.app),e&&e.call(this)}state(){}}),e(Function.fire,"store",class{constructor(e){this.fire={base:e}}start(e){this.connection=Function.google.fire.store(this.fire.base.app),e&&e.call(this)}state(e,t){return new Function.fire.store.state(this.fire.base,this,e,t)}select(e,t){return new Function.fire.store.select(this.fire.base,this,e,t)}insert(e,t){return new Function.fire.store.insert(this.fire.base,this,e,t)}update(e,t){return new Function.fire.store.update(this.fire.base,this,e,t)}delete(e,t){return new Function.fire.store.delete(this.fire.base,this,e,t)}to_cache(e,t,n,i){Function.fire.store.to_cache(e,t,n,i)}}),e(Function.fire.store,"to_cache",(function(e,t,n,i){e.length&&e.fetch((function(e){t.cache.id=e.get("$:doc"),t.cache.size[e.get("$:doc")]=e.get("__").length||0,e.get("__")&&(i&&i.call(t,e),(t.cache.size[e.get("$:doc")]=e.get("__").length)<(n||100)?(t.cache.id=e.get("$:doc"),t.cache.data=e.get("__")):delete t.cache.id)}))})),e(Function.fire.store,"extend",class{constructor(e,t,n,i,r){this.fire={base:e,store:t},this.collection=n,this.context=i,this.action=r,this.__option={},this.__where=[]}option(e){for(var t in e)this.__option[t]=e[t];return this}id(e){return arguments.length?(this.__id=!0===e?Function.fire.store.id():e,this):this.__id}doc(e){return"query"===e?Function.google.fire.store.doc(this.fire.store.connection,this.collection,this.__doc):arguments.length?(this.__doc=e,this):this.__doc}data(e,t){if(t)this.__data={__:e};else{if(!arguments.length)return Function.fire.base.data.call(this);this.__data?Object.assign(this.__data,e):this.__data=e}return this}stamp(e){return arguments.length?(this.__stamp=Date.stamp("serial"),this):this.__stamp}current(e){return arguments.length?(this.__current=e,this):this.__current}where(...e){if(!arguments.length)return this.__where;for(var t in e)this.__where.push(e[t]);return this}query(e,...t){var n=Function.google.fire.store.collection(this.fire.store.connection,e||this.collection),i=this.where();return t.length&&(i=t),i&&i.length&&(n=Function.google.fire.base.query(n,Function.google.fire.base.query.where(...i))),n}snapshot(e){return arguments.length?(this.__snapshot=e,this):this.__snapshot}to_array(e,t,n,i){return function(n){var r=[];n.forEach((function(t){var n={_id:t.data()._id,_doc:t.id,_stamp:{insert:0,update:0,delete:0}},o=t.data();for(var s in o)n[s]=o[s];r.push(n),i&&e&&e([n])})),i||t(r)}}}),e(Function.fire.store,"select",class extends Function.fire.store.extend{constructor(e,t,n,i){super(e,t,n,i,"select")}then(e){e=e||this.context||function(){};var t=function(t,n){if(this.db.snapshot())return this.db.doc()?Function.google.fire.store.snapshot(this.db.doc("query"),this.db.to_array(e,t,n,!0)):Function.google.fire.store.snapshot(this.db.query(),this.db.to_array(e,t,n,!0)),this;this.db.doc()?Function.google.fire.store.doc.get(this.db.doc("query")).then(this.db.to_array(e,t,n)).catch(n):Function.google.fire.store.select(this.db.query()).then(this.db.to_array(e,t,n)).catch(n)};return this.error?this.promise=new Promise(t.bind({db:this})).then(e).catch(this.error):this.promise=new Promise(t.bind({db:this})).then(e),this}catch(e){return this.error=e||function(){},this.promise?this.promise.catch(this.error):this}}),e(Function.fire.store,"insert",class extends Function.fire.store.extend{constructor(e,t,n,i){super(e,t,n,i,"insert")}then(e){e=e||this.context||function(){};var t=function(t,n){this.db.doc()?Function.google.fire.store.doc.set(this.db.doc("query"),this.db.data()).then(e).catch(n):Function.google.fire.store.insert(this.db.query(),this.db.data()).then(e).catch(n)};return this.error?this.promise=new Promise(t.bind({db:this})).then(e).catch(this.error):this.promise=new Promise(t.bind({db:this})).then(e),this}catch(e){return this.error=e||function(){},this.promise?this.promise.catch(this.error):this}}),e(Function.fire.store,"update",class extends Function.fire.store.extend{constructor(e,t,n,i){super(e,t,n,i,"update")}then(e){e=e||this.context||function(){};var t=function(t,n){var i;i=this.db.current()?Object.merge(this.db.current(),this.db.data()):this.db.data(),Function.google.fire.store.update(this.db.doc("query"),i).then(e).catch(n)};return this.error?this.promise=new Promise(t.bind({db:this})).then(e).catch(this.error):this.promise=new Promise(t.bind({db:this})).then(e),this}catch(e){return this.error=e||function(){},this.promise?this.promise.catch(this.error):this}}),e(Function.fire.store,"delete",class extends Function.fire.store.extend{constructor(e,t,n,i){super(e,t,n,i,"delete")}then(e){e=e||this.context||function(){};var t=function(t,n){Function.google.fire.store.delete(this.db.doc("query")).then(e).catch(n)};return this.error?this.promise=new Promise(t.bind({db:this})).then(e).catch(this.error):this.promise=new Promise(t.bind({db:this})).then(e),this}catch(e){return this.error=e||function(){},this.promise?this.promise.catch(this.error):this}}),e(Function.fire.store,"id",(function(){return Function.hash.shuffle().sha()})),e(Function,"module",(function(e){return e+"/node_modules"})),e.value(Function.module,"name",(function(){return"node_modules"})),e(Function,"package",(function(e){return e+"/node_packages"})),e.value(Function.package,"name",(function(){return"node_packages"})),e(Function.package,"lock",(function(e){return e+URL["package-lock"]})),e(Function.package,"json",(function(){})),e(Function,"application",class{}),e(Function,"app",class{constructor(){this.router=[],this.try=[],this.socket=new Function.app.socket}pipe(e,t){return this.router.push({method:"pipe",url:e,context:t}),this}all(e,t){return this.router.push({method:"all",url:e,context:t}),this}header(e,t){return this.router.push({method:"head",url:e,context:t}),this}get(e,t){return this.router.push({method:"get",url:e,context:t}),this}post(e,t){return this.router.push({method:"post",url:e,context:t}),this}insert(e,t){return this.router.push({method:"post",url:e,context:t}),this}put(e,t){return this.router.push({method:"put",url:e,context:t}),this}update(e,t){return this.router.push({method:"put",url:e,context:t}),this}delete(e,t){return this.router.push({method:"delete",url:e,context:t}),this}catch(e,t){return this.try.push({url:e,context:t}),this}on(e,t){return this.socket.on.push({key:e,value:t}),this}}),e(Function.app,"socket",class{constructor(){this.router=[],this.on=[]}pipe(e,t){return this.router.push({method:"pipe",url:e,context:t}),this}all(e,t){return this.router.push({method:"all",url:e,context:t}),this}header(e,t){return this.router.push({method:"head",url:e,context:t}),this}get(e,t){return this.router.push({method:"get",url:e,context:t}),this}post(e,t){return this.router.push({method:"post",url:e,context:t}),this}insert(e,t){return this.router.push({method:"post",url:e,context:t}),this}put(e,t){return this.router.push({method:"put",url:e,context:t}),this}update(e,t){return this.router.push({method:"put",url:e,context:t}),this}delete(e,t){return this.router.push({method:"delete",url:e,context:t}),this}}),e(Function,"console",(function(){}))},314:()=>{Function.define(Function,"open_ai",(function(){}))},972:()=>{Function.define(Function,"file",(function(){})),Function.define(Function.file,"name",(function(){})),Function.define(Function.file,"extension",(function(e){var t=e.split(".");return t.length>1&&(t=t[t.length-1])?"."+t:""}))},744:(e,t)=>{"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n}},882:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>vL,lib:()=>mL,vI:()=>gL,Zl:()=>yL});var i={};n.r(i),n.d(i,{Decoder:()=>Io,Encoder:()=>_o,PacketType:()=>wo,protocol:()=>bo});var r={};n.r(r),n.d(r,{FirebaseError:()=>$c,SDK_VERSION:()=>Rl,_DEFAULT_ENTRY_NAME:()=>wl,_addComponent:()=>El,_addOrOverwriteComponent:()=>Tl,_apps:()=>Il,_clearComponents:()=>Ol,_components:()=>kl,_getProvider:()=>Pl,_registerComponent:()=>Sl,_removeServiceInstance:()=>Cl,deleteApp:()=>Ll,getApp:()=>Dl,getApps:()=>jl,initializeApp:()=>Nl,onLog:()=>Ul,registerVersion:()=>Ml,setLogLevel:()=>ql});var o=n(252),s=n(262),a=n(963);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const c="undefined"!==typeof window;function u(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const l=Object.assign;function h(e,t){const n={};for(const i in t){const r=t[i];n[i]=f(r)?r.map(e):e(r)}return n}const d=()=>{},f=Array.isArray;const p=/\/$/,m=e=>e.replace(p,"");function g(e,t,n="/"){let i,r={},o="",s="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(i=t.slice(0,c),o=t.slice(c+1,a>-1?a:t.length),r=e(o)),a>-1&&(i=i||t.slice(0,a),s=t.slice(a,t.length)),i=E(null!=i?i:t,n),{fullPath:i+(o&&"?")+o+s,path:i,query:r,hash:s}}function y(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function v(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function b(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&w(t.matched[i],n.matched[r])&&_(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function w(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!I(e[n],t[n]))return!1;return!0}function I(e,t){return f(e)?k(e,t):f(t)?k(t,e):e===t}function k(e,t){return f(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function E(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r,o,s=n.length-1;for(r=0;r<i.length;r++)if(o=i[r],"."!==o){if(".."!==o)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var T,S;(function(e){e["pop"]="pop",e["push"]="push"})(T||(T={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(S||(S={}));function P(e){if(!e)if(c){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),m(e)}const C=/^[^#]+#/;function O(e,t){return e.replace(C,"#")+t}function x(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function F(e){let t;if("el"in e){const n=e.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=x(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function R(e,t){const n=history.state?history.state.position-t:-1;return n+e}const N=new Map;function D(e,t){N.set(e,t)}function j(e){const t=N.get(e);return N.delete(e),t}let L=()=>location.protocol+"//"+location.host;function M(e,t){const{pathname:n,search:i,hash:r}=t,o=e.indexOf("#");if(o>-1){let t=r.includes(e.slice(o))?e.slice(o).length:1,n=r.slice(t);return"/"!==n[0]&&(n="/"+n),v(n,"")}const s=v(n,e);return s+i+r}function U(e,t,n,i){let r=[],o=[],s=null;const a=({state:o})=>{const a=M(e,location),c=n.value,u=t.value;let l=0;if(o){if(n.value=a,t.value=o,s&&s===c)return void(s=null);l=u?o.position-u.position:0}else i(a);r.forEach((e=>{e(n.value,c,{delta:l,type:T.pop,direction:l?l>0?S.forward:S.back:S.unknown})}))};function c(){s=n.value}function u(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return o.push(t),t}function h(){const{history:e}=window;e.state&&e.replaceState(l({},e.state,{scroll:A()}),"")}function d(){for(const e of o)e();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:c,listen:u,destroy:d}}function q(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?A():null}}function V(e){const{history:t,location:n}=window,i={value:M(e,n)},r={value:t.state};function o(i,o,s){const a=e.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+i:L()+e+i;try{t[s?"replaceState":"pushState"](o,"",c),r.value=o}catch(u){console.error(u),n[s?"replace":"assign"](c)}}function s(e,n){const s=l({},t.state,q(r.value.back,e,r.value.forward,!0),n,{position:r.value.position});o(e,s,!0),i.value=e}function a(e,n){const s=l({},r.value,t.state,{forward:e,scroll:A()});o(s.current,s,!0);const a=l({},q(i.value,e,null),{position:s.position+1},n);o(e,a,!1),i.value=e}return r.value||o(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:a,replace:s}}function B(e){e=P(e);const t=V(e),n=U(e,t.state,t.location,t.replace);function i(e,t=!0){t||n.pauseListeners(),history.go(e)}const r=l({location:"",base:e,go:i,createHref:O.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Z(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),B(e)}function $(e){return"string"===typeof e||e&&"object"===typeof e}function z(e){return"string"===typeof e||"symbol"===typeof e}const H={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},K=Symbol("");var G;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(G||(G={}));function W(e,t){return l(new Error,{type:e,[K]:!0},t)}function Q(e,t){return e instanceof Error&&K in e&&(null==t||!!(e.type&t))}const J="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function ee(e,t){const n=l({},Y,t),i=[];let r=n.start?"^":"";const o=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let t=0;t<l.length;t++){const i=l[t];let s=40+(n.sensitive?.25:0);if(0===i.type)t||(r+="/"),r+=i.value.replace(X,"\\$&"),s+=40;else if(1===i.type){const{value:e,repeatable:n,optional:a,regexp:c}=i;o.push({name:e,repeatable:n,optional:a});const h=c||J;if(h!==J){s+=10;try{new RegExp(`(${h})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+u.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(d=a&&l.length<2?`(?:/${d})`:"/"+d),a&&(d+="?"),r+=d,s+=20,a&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}e.push(s)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(e){const t=e.match(s),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",r=o[i-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n}function c(t){let n="",i=!1;for(const r of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:s,optional:a}=e,c=o in t?t[o]:"";if(f(c)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=f(c)?c.join("/"):c;if(!u){if(!a)throw new Error(`Missing required param "${o}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=u}}return n||"/"}return{re:s,score:i,keys:o,parse:a,stringify:c}}function te(e,t){let n=0;while(n<e.length&&n<t.length){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function ne(e,t){let n=0;const i=e.score,r=t.score;while(n<i.length&&n<r.length){const e=te(i[n],r[n]);if(e)return e;n++}if(1===Math.abs(r.length-i.length)){if(ie(i))return 1;if(ie(r))return-1}return r.length-i.length}function ie(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const re={type:0,value:""},oe=/[a-zA-Z0-9_]/;function se(e){if(!e)return[[]];if("/"===e)return[[re]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,i=n;const r=[];let o;function s(){o&&r.push(o),o=[]}let a,c=0,u="",l="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),u="")}function d(){u+=a}while(c<e.length)if(a=e[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(u&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:oe.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,l="";break;default:t("Unknown state");break}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),h(),s(),r}function ae(e,t,n){const i=ee(se(e.path),n);const r=l(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf===!t.record.aliasOf&&t.children.push(r),r}function ce(e,t){const n=[],i=new Map;function r(e){return i.get(e)}function o(e,n,i){const r=!i,a=le(e);a.aliasOf=i&&i.record;const u=pe(t,e),h=[a];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(l({},a,{components:i?i.record.components:a.components,path:e,aliasOf:i?i.record:a}))}let f,p;for(const t of h){const{path:l}=t;if(n&&"/"!==l[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(l&&i+l)}if(f=ae(t,n,u),i?i.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),r&&e.name&&!de(f)&&s(e.name)),a.children){const e=a.children;for(let t=0;t<e.length;t++)o(e[t],f,i&&i.children[t])}i=i||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&c(f)}return p?()=>{s(p)}:d}function s(e){if(z(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function a(){return n}function c(e){let t=0;while(t<n.length&&ne(e,n[t])>=0&&(e.record.path!==n[t].record.path||!me(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!de(e)&&i.set(e.record.name,e)}function u(e,t){let r,o,s,a={};if("name"in e&&e.name){if(r=i.get(e.name),!r)throw W(1,{location:e});0,s=r.record.name,a=l(ue(t.params,r.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&ue(e.params,r.keys.map((e=>e.name)))),o=r.stringify(a)}else if("path"in e)o=e.path,r=n.find((e=>e.re.test(o))),r&&(a=r.parse(o),s=r.record.name);else{if(r=t.name?i.get(t.name):n.find((e=>e.re.test(t.path))),!r)throw W(1,{location:e,currentLocation:t});s=r.record.name,a=l({},t.params,e.params),o=r.stringify(a)}const c=[];let u=r;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:o,params:a,matched:c,meta:fe(c)}}return t=pe({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:r}}function ue(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function le(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:he(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function he(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="boolean"===typeof n?n:n[i];return t}function de(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function fe(e){return e.reduce(((e,t)=>l(e,t.meta)),{})}function pe(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function me(e,t){return t.children.some((t=>t===e||me(e,t)))}const ge=/#/g,ye=/&/g,ve=/\//g,be=/=/g,we=/\?/g,_e=/\+/g,Ie=/%5B/g,ke=/%5D/g,Ee=/%5E/g,Te=/%60/g,Se=/%7B/g,Pe=/%7C/g,Ce=/%7D/g,Oe=/%20/g;function xe(e){return encodeURI(""+e).replace(Pe,"|").replace(Ie,"[").replace(ke,"]")}function Ae(e){return xe(e).replace(Se,"{").replace(Ce,"}").replace(Ee,"^")}function Fe(e){return xe(e).replace(_e,"%2B").replace(Oe,"+").replace(ge,"%23").replace(ye,"%26").replace(Te,"`").replace(Se,"{").replace(Ce,"}").replace(Ee,"^")}function Re(e){return Fe(e).replace(be,"%3D")}function Ne(e){return xe(e).replace(ge,"%23").replace(we,"%3F")}function De(e){return null==e?"":Ne(e).replace(ve,"%2F")}function je(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Le(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],i=(n?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const e=i[r].replace(_e," "),n=e.indexOf("="),o=je(n<0?e:e.slice(0,n)),s=n<0?null:je(e.slice(n+1));if(o in t){let e=t[o];f(e)||(e=t[o]=[e]),e.push(s)}else t[o]=s}return t}function Me(e){let t="";for(let n in e){const i=e[n];if(n=Re(n),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}const r=f(i)?i.map((e=>e&&Fe(e))):[i&&Fe(i)];r.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Ue(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=f(i)?i.map((e=>null==e?null:""+e)):null==i?i:""+i)}return t}const qe=Symbol(""),Ve=Symbol(""),Be=Symbol(""),Ze=Symbol(""),$e=Symbol("");function ze(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function He(e,t,n,i,r){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((s,a)=>{const c=e=>{!1===e?a(W(4,{from:n,to:t})):e instanceof Error?a(e):$(e)?a(W(2,{from:t,to:e})):(o&&i.enterCallbacks[r]===o&&"function"===typeof e&&o.push(e),s())},u=e.call(i&&i.instances[r],t,n,c);let l=Promise.resolve(u);e.length<3&&(l=l.then(c)),l.catch((e=>a(e)))}))}function Ke(e,t,n,i){const r=[];for(const o of e){0;for(const e in o.components){let s=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(Ge(s)){const a=s.__vccOpts||s,c=a[t];c&&r.push(He(c,n,i,o,e))}else{let a=s();0,r.push((()=>a.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const s=u(r)?r.default:r;o.components[e]=s;const a=s.__vccOpts||s,c=a[t];return c&&He(c,n,i,o,e)()}))))}}}return r}function Ge(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function We(e){const t=(0,o.f3)(Be),n=(0,o.f3)(Ze),i=(0,o.Fl)((()=>t.resolve((0,s.SU)(e.to)))),r=(0,o.Fl)((()=>{const{matched:e}=i.value,{length:t}=e,r=e[t-1],o=n.matched;if(!r||!o.length)return-1;const s=o.findIndex(w.bind(null,r));if(s>-1)return s;const a=et(e[t-2]);return t>1&&et(r)===a&&o[o.length-1].path!==a?o.findIndex(w.bind(null,e[t-2])):s})),a=(0,o.Fl)((()=>r.value>-1&&Xe(n.params,i.value.params))),c=(0,o.Fl)((()=>r.value>-1&&r.value===n.matched.length-1&&_(n.params,i.value.params)));function u(n={}){return Ye(n)?t[(0,s.SU)(e.replace)?"replace":"push"]((0,s.SU)(e.to)).catch(d):Promise.resolve()}return{route:i,href:(0,o.Fl)((()=>i.value.href)),isActive:a,isExactActive:c,navigate:u}}const Qe=(0,o.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:We,setup(e,{slots:t}){const n=(0,s.qj)(We(e)),{options:i}=(0,o.f3)(Be),r=(0,o.Fl)((()=>({[tt(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[tt(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:(0,o.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Je=Qe;function Ye(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Xe(e,t){for(const n in t){const i=t[n],r=e[n];if("string"===typeof i){if(i!==r)return!1}else if(!f(r)||r.length!==i.length||i.some(((e,t)=>e!==r[t])))return!1}return!0}function et(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const tt=(e,t,n)=>null!=e?e:null!=t?t:n,nt=(0,o.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=(0,o.f3)($e),r=(0,o.Fl)((()=>e.route||i.value)),a=(0,o.f3)(Ve,0),c=(0,o.Fl)((()=>{let e=(0,s.SU)(a);const{matched:t}=r.value;let n;while((n=t[e])&&!n.components)e++;return e})),u=(0,o.Fl)((()=>r.value.matched[c.value]));(0,o.JJ)(Ve,(0,o.Fl)((()=>c.value+1))),(0,o.JJ)(qe,u),(0,o.JJ)($e,r);const h=(0,s.iH)();return(0,o.YP)((()=>[h.value,u.value,e.name]),(([e,t,n],[i,r,o])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&w(t,r)&&i||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=r.value,s=e.name,a=u.value,c=a&&a.components[s];if(!c)return it(n.default,{Component:c,route:i});const d=a.props[s],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=e=>{e.component.isUnmounted&&(a.instances[s]=null)},m=(0,o.h)(c,l({},f,t,{onVnodeUnmounted:p,ref:h}));return it(n.default,{Component:m,route:i})||m}}});function it(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const rt=nt;function ot(e){const t=ce(e.routes,e),n=e.parseQuery||Le,i=e.stringifyQuery||Me,r=e.history;const a=ze(),u=ze(),p=ze(),m=(0,s.XI)(H);let v=H;c&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=h.bind(null,(e=>""+e)),_=h.bind(null,De),I=h.bind(null,je);function k(e,n){let i,r;return z(e)?(i=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,i)}function E(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function S(){return t.getRoutes().map((e=>e.record))}function P(e){return!!t.getRecordMatcher(e)}function C(e,o){if(o=l({},o||m.value),"string"===typeof e){const i=g(n,e,o.path),s=t.resolve({path:i.path},o),a=r.createHref(i.fullPath);return l(i,s,{params:I(s.params),hash:je(i.hash),redirectedFrom:void 0,href:a})}let s;if("path"in e)s=l({},e,{path:g(n,e.path,o.path).path});else{const t=l({},e.params);for(const e in t)null==t[e]&&delete t[e];s=l({},e,{params:_(e.params)}),o.params=_(o.params)}const a=t.resolve(s,o),c=e.hash||"";a.params=w(I(a.params));const u=y(i,l({},e,{hash:Ae(c),path:a.path})),h=r.createHref(u);return l({fullPath:u,hash:c,query:i===Me?Ue(e.query):e.query||{}},a,{redirectedFrom:void 0,href:h})}function O(e){return"string"===typeof e?g(n,e,m.value.path):l({},e)}function x(e,t){if(v!==e)return W(8,{from:t,to:e})}function N(e){return U(e)}function L(e){return N(l(O(e),{replace:!0}))}function M(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"===typeof n?n(e):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=O(i):{path:i},i.params={}),l({query:e.query,hash:e.hash,params:"path"in i?{}:e.params},i)}}function U(e,t){const n=v=C(e),r=m.value,o=e.state,s=e.force,a=!0===e.replace,c=M(n);if(c)return U(l(O(c),{state:"object"===typeof c?l({},o,c.state):o,force:s,replace:a}),t||n);const u=n;let h;return u.redirectedFrom=t,!s&&b(i,r,n)&&(h=W(16,{to:u,from:r}),ne(r,r,!0,!1)),(h?Promise.resolve(h):V(u,r)).catch((e=>Q(e)?Q(e,2)?e:te(e):X(e,u,r))).then((e=>{if(e){if(Q(e,2))return U(l({replace:a},O(e.to),{state:"object"===typeof e.to?l({},o,e.to.state):o,force:s}),t||u)}else e=Z(u,r,!0,a,o);return B(u,r,e),e}))}function q(e,t){const n=x(e,t);return n?Promise.reject(n):Promise.resolve()}function V(e,t){let n;const[i,r,o]=at(e,t);n=Ke(i.reverse(),"beforeRouteLeave",e,t);for(const a of i)a.leaveGuards.forEach((i=>{n.push(He(i,e,t))}));const s=q.bind(null,e,t);return n.push(s),st(n).then((()=>{n=[];for(const i of a.list())n.push(He(i,e,t));return n.push(s),st(n)})).then((()=>{n=Ke(r,"beforeRouteUpdate",e,t);for(const i of r)i.updateGuards.forEach((i=>{n.push(He(i,e,t))}));return n.push(s),st(n)})).then((()=>{n=[];for(const i of e.matched)if(i.beforeEnter&&!t.matched.includes(i))if(f(i.beforeEnter))for(const r of i.beforeEnter)n.push(He(r,e,t));else n.push(He(i.beforeEnter,e,t));return n.push(s),st(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=Ke(o,"beforeRouteEnter",e,t),n.push(s),st(n)))).then((()=>{n=[];for(const i of u.list())n.push(He(i,e,t));return n.push(s),st(n)})).catch((e=>Q(e,8)?e:Promise.reject(e)))}function B(e,t,n){for(const i of p.list())i(e,t,n)}function Z(e,t,n,i,o){const s=x(e,t);if(s)return s;const a=t===H,u=c?history.state:{};n&&(i||a?r.replace(e.fullPath,l({scroll:a&&u&&u.scroll},o)):r.push(e.fullPath,o)),m.value=e,ne(e,t,n,a),te()}let $;function K(){$||($=r.listen(((e,t,n)=>{if(!se.listening)return;const i=C(e),o=M(i);if(o)return void U(l(o,{replace:!0}),i).catch(d);v=i;const s=m.value;c&&D(R(s.fullPath,n.delta),A()),V(i,s).catch((e=>Q(e,12)?e:Q(e,2)?(U(e.to,i).then((e=>{Q(e,20)&&!n.delta&&n.type===T.pop&&r.go(-1,!1)})).catch(d),Promise.reject()):(n.delta&&r.go(-n.delta,!1),X(e,i,s)))).then((e=>{e=e||Z(i,s,!1),e&&(n.delta&&!Q(e,8)?r.go(-n.delta,!1):n.type===T.pop&&Q(e,20)&&r.go(-1,!1)),B(i,s,e)})).catch(d)})))}let G,J=ze(),Y=ze();function X(e,t,n){te(e);const i=Y.list();return i.length?i.forEach((i=>i(e,t,n))):console.error(e),Promise.reject(e)}function ee(){return G&&m.value!==H?Promise.resolve():new Promise(((e,t)=>{J.add([e,t])}))}function te(e){return G||(G=!e,K(),J.list().forEach((([t,n])=>e?n(e):t())),J.reset()),e}function ne(t,n,i,r){const{scrollBehavior:s}=e;if(!c||!s)return Promise.resolve();const a=!i&&j(R(t.fullPath,0))||(r||!i)&&history.state&&history.state.scroll||null;return(0,o.Y3)().then((()=>s(t,n,a))).then((e=>e&&F(e))).catch((e=>X(e,t,n)))}const ie=e=>r.go(e);let re;const oe=new Set,se={currentRoute:m,listening:!0,addRoute:k,removeRoute:E,hasRoute:P,getRoutes:S,resolve:C,options:e,push:N,replace:L,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:a.add,beforeResolve:u.add,afterEach:p.add,onError:Y.add,isReady:ee,install(e){const t=this;e.component("RouterLink",Je),e.component("RouterView",rt),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,s.SU)(m)}),c&&!re&&m.value===H&&(re=!0,N(r.location).catch((e=>{0})));const n={};for(const r in H)n[r]=(0,o.Fl)((()=>m.value[r]));e.provide(Be,t),e.provide(Ze,(0,s.qj)(n)),e.provide($e,m);const i=e.unmount;oe.add(e),e.unmount=function(){oe.delete(e),oe.size<1&&(v=H,$&&$(),$=null,m.value=H,re=!1,G=!1),i()}}};return se}function st(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function at(e,t){const n=[],i=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const o=t.matched[s];o&&(e.matched.find((e=>w(e,o)))?i.push(o):n.push(o));const a=e.matched[s];a&&(t.matched.find((e=>w(e,a)))||r.push(a))}return[n,i,r]}function ct(){return(0,o.f3)(Be)}function ut(){return(0,o.f3)(Ze)}function lt(){return ht().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ht(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const dt="function"===typeof Proxy,ft="devtools-plugin:setup",pt="plugin:settings:set";let mt,gt;function yt(){var e;return void 0!==mt||("undefined"!==typeof window&&window.performance?(mt=!0,gt=window.performance):"undefined"!==typeof n.g&&(null===(e=n.g.perf_hooks)||void 0===e?void 0:e.performance)?(mt=!0,gt=n.g.perf_hooks.performance):mt=!1),mt}function vt(){return yt()?gt.now():Date.now()}class bt{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const s in e.settings){const t=e.settings[s];n[s]=t.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},n);try{const e=localStorage.getItem(i),t=JSON.parse(e);Object.assign(r,t)}catch(o){}this.fallbacks={getSettings(){return r},setSettings(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(o){}r=e},now(){return vt()}},t&&t.on(pt,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function wt(e,t){const n=e,i=ht(),r=lt(),o=dt&&n.enableEarlyProxy;if(!r||!i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&o){const e=o?new bt(n,r):null,s=i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[];s.push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else r.emit(ft,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var _t="store";function It(e){return void 0===e&&(e=null),(0,o.f3)(null!==e?e:_t)}function kt(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function Et(e){return null!==e&&"object"===typeof e}function Tt(e){return e&&"function"===typeof e.then}function St(e,t){return function(){return e(t)}}function Pt(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Ct(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;xt(e,n,[],e._modules.root,!0),Ot(e,n,t)}function Ot(e,t,n){var i=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var a=e._wrappedGetters,c={},u={},l=(0,s.B)(!0);l.run((function(){kt(a,(function(t,n){c[n]=St(t,e),u[n]=(0,o.Fl)((function(){return c[n]()})),Object.defineProperty(e.getters,n,{get:function(){return u[n].value},enumerable:!0})}))})),e._state=(0,s.qj)({data:t}),e._scope=l,e.strict&&jt(e),i&&n&&e._withCommit((function(){i.data=null})),r&&r.stop()}function xt(e,t,n,i,r){var o=!n.length,s=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=i),!o&&!r){var a=Lt(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){a[c]=i.state}))}var u=i.context=At(e,s,n);i.forEachMutation((function(t,n){var i=s+n;Rt(e,i,t,u)})),i.forEachAction((function(t,n){var i=t.root?n:s+n,r=t.handler||t;Nt(e,i,r,u)})),i.forEachGetter((function(t,n){var i=s+n;Dt(e,i,t,u)})),i.forEachChild((function(i,o){xt(e,t,n.concat(o),i,r)}))}function At(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var o=Mt(n,i,r),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=t+c),e.dispatch(c,s)},commit:i?e.commit:function(n,i,r){var o=Mt(n,i,r),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=t+c),e.commit(c,s,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return Ft(e,t)}},state:{get:function(){return Lt(e.state,n)}}}),r}function Ft(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,i)===t){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Rt(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push((function(t){n.call(e,i.state,t)}))}function Nt(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push((function(t){var r=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return Tt(r)||(r=Promise.resolve(r)),e._devtoolHook?r.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):r}))}function Dt(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function jt(e){(0,o.YP)((function(){return e._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function Lt(e,t){return t.reduce((function(e,t){return e[t]}),e)}function Mt(e,t,n){return Et(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Ut="vuex bindings",qt="vuex:mutations",Vt="vuex:actions",Bt="vuex",Zt=0;function $t(e,t){wt({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ut]},(function(n){n.addTimelineLayer({id:qt,label:"Vuex Mutations",color:zt}),n.addTimelineLayer({id:Vt,label:"Vuex Actions",color:zt}),n.addInspector({id:Bt,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===Bt)if(n.filter){var i=[];Jt(i,t._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[Qt(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===Bt){var i=n.nodeId;Ft(t,i),n.state=Yt(en(t._modules,i),"root"===i?t.getters:t._makeLocalGettersCache,i)}})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===Bt){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit((function(){n.set(t._state.data,r,n.state.value)}))}})),t.subscribe((function(e,t){var i={};e.payload&&(i.payload=e.payload),i.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(Bt),n.sendInspectorState(Bt),n.addTimelineEvent({layerId:qt,event:{time:Date.now(),title:e.type,data:i}})})),t.subscribeAction({before:function(e,t){var i={};e.payload&&(i.payload=e.payload),e._id=Zt++,e._time=Date.now(),i.state=t,n.addTimelineEvent({layerId:Vt,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:i}})},after:function(e,t){var i={},r=Date.now()-e._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},e.payload&&(i.payload=e.payload),i.state=t,n.addTimelineEvent({layerId:Vt,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:i}})}})}))}var zt=8702998,Ht=6710886,Kt=16777215,Gt={label:"namespaced",textColor:Kt,backgroundColor:Ht};function Wt(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function Qt(e,t){return{id:t||"root",label:Wt(t),tags:e.namespaced?[Gt]:[],children:Object.keys(e._children).map((function(n){return Qt(e._children[n],t+n+"/")}))}}function Jt(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[Gt]:[]}),Object.keys(t._children).forEach((function(r){Jt(e,t._children[r],n,i+r+"/")}))}function Yt(e,t,n){t="root"===n?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(i.length){var o=Xt(t);r.getters=Object.keys(o).map((function(e){return{key:e.endsWith("/")?Wt(e):e,editable:!1,value:tn((function(){return o[e]}))}}))}return r}function Xt(e){var t={};return Object.keys(e).forEach((function(n){var i=n.split("/");if(i.length>1){var r=t,o=i.pop();i.forEach((function(e){r[e]||(r[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),r=r[e]._custom.value})),r[o]=tn((function(){return e[n]}))}else t[n]=tn((function(){return e[n]}))})),t}function en(e,t){var n=t.split("/").filter((function(e){return e}));return n.reduce((function(e,i,r){var o=e[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?o:o._children}),"root"===t?e:e.root._children)}function tn(e){try{return e()}catch(t){return t}}var nn=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},rn={namespaced:{configurable:!0}};rn.namespaced.get=function(){return!!this._rawModule.namespaced},nn.prototype.addChild=function(e,t){this._children[e]=t},nn.prototype.removeChild=function(e){delete this._children[e]},nn.prototype.getChild=function(e){return this._children[e]},nn.prototype.hasChild=function(e){return e in this._children},nn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},nn.prototype.forEachChild=function(e){kt(this._children,e)},nn.prototype.forEachGetter=function(e){this._rawModule.getters&&kt(this._rawModule.getters,e)},nn.prototype.forEachAction=function(e){this._rawModule.actions&&kt(this._rawModule.actions,e)},nn.prototype.forEachMutation=function(e){this._rawModule.mutations&&kt(this._rawModule.mutations,e)},Object.defineProperties(nn.prototype,rn);var on=function(e){this.register([],e,!1)};function sn(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;sn(e.concat(i),t.getChild(i),n.modules[i])}}on.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},on.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},on.prototype.update=function(e){sn([],this.root,e)},on.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var r=new nn(t,n);if(0===e.length)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}t.modules&&kt(t.modules,(function(t,r){i.register(e.concat(r),t,n)}))},on.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},on.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};function an(e){return new cn(e)}var cn=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new on(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var o=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(e,t){return a.call(o,e,t)},this.commit=function(e,t,n){return c.call(o,e,t,n)},this.strict=i;var u=this._modules.root.state;xt(this,u,[],this._modules.root),Ot(this,u),n.forEach((function(e){return e(t)}))},un={state:{configurable:!0}};cn.prototype.install=function(e,t){e.provide(t||_t,this),e.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&$t(e,this)},un.state.get=function(){return this._state.data},un.state.set=function(e){0},cn.prototype.commit=function(e,t,n){var i=this,r=Mt(e,t,n),o=r.type,s=r.payload,a=(r.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,i.state)})))},cn.prototype.dispatch=function(e,t){var n=this,i=Mt(e,t),r=i.type,o=i.payload,s={type:r,payload:o},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(u){0}var c=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(u){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(u){0}t(e)}))}))}},cn.prototype.subscribe=function(e,t){return Pt(e,this._subscribers,t)},cn.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return Pt(n,this._actionSubscribers,t)},cn.prototype.watch=function(e,t,n){var i=this;return(0,o.YP)((function(){return e(i.state,i.getters)}),t,Object.assign({},n))},cn.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},cn.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),xt(this,this.state,e,this._modules.get(e),n.preserveState),Ot(this,this.state)},cn.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=Lt(t.state,e.slice(0,-1));delete n[e[e.length-1]]})),Ct(this)},cn.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},cn.prototype.hotUpdate=function(e){this._modules.update(e),Ct(this,!0)},cn.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(cn.prototype,un);dn((function(e,t){var n={};return ln(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=fn(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,t,n):t[r]},n[i].vuex=!0})),n})),dn((function(e,t){var n={};return ln(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var o=fn(this.$store,"mapMutations",e);if(!o)return;i=o.context.commit}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n})),dn((function(e,t){var n={};return ln(t).forEach((function(t){var i=t.key,r=t.val;r=e+r,n[i]=function(){if(!e||fn(this.$store,"mapGetters",e))return this.$store.getters[r]},n[i].vuex=!0})),n})),dn((function(e,t){var n={};return ln(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var o=fn(this.$store,"mapActions",e);if(!o)return;i=o.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n}));function ln(e){return hn(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function hn(e){return Array.isArray(e)||Et(e)}function dn(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function fn(e,t,n){var i=e._modulesNamespaceMap[n];return i}var pn=!1;function mn(e,t,n){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,n),n):(e[t]=n,n)}
/*!
  * pinia v2.0.36
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
let gn;const yn=e=>gn=e,vn=Symbol();function bn(e){return e&&"object"===typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!==typeof e.toJSON}var wn;(function(e){e["direct"]="direct",e["patchObject"]="patch object",e["patchFunction"]="patch function"})(wn||(wn={}));const _n="undefined"!==typeof window,In=!1,kn=(()=>"object"===typeof window&&window.window===window?window:"object"===typeof self&&self.self===self?self:"object"===typeof global&&global.global===global?global:"object"===typeof globalThis?globalThis:{HTMLElement:null})();function En(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function Tn(e,t,n){const i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){xn(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function Sn(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function Pn(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}const Cn="object"===typeof navigator?navigator:{userAgent:""},On=(()=>/Macintosh/.test(Cn.userAgent)&&/AppleWebKit/.test(Cn.userAgent)&&!/Safari/.test(Cn.userAgent))(),xn=_n?"undefined"!==typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!On?An:"msSaveOrOpenBlob"in Cn?Fn:Rn:()=>{};function An(e,t="download",n){const i=document.createElement("a");i.download=t,i.rel="noopener","string"===typeof e?(i.href=e,i.origin!==location.origin?Sn(i.href)?Tn(e,t,n):(i.target="_blank",Pn(i)):Pn(i)):(i.href=URL.createObjectURL(e),setTimeout((function(){URL.revokeObjectURL(i.href)}),4e4),setTimeout((function(){Pn(i)}),0))}function Fn(e,t="download",n){if("string"===typeof e)if(Sn(e))Tn(e,t,n);else{const t=document.createElement("a");t.href=e,t.target="_blank",setTimeout((function(){Pn(t)}))}else navigator.msSaveOrOpenBlob(En(e,n),t)}function Rn(e,t,n,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"===typeof e)return Tn(e,t,n);const r="application/octet-stream"===e.type,o=/constructor/i.test(String(kn.HTMLElement))||"safari"in kn,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&o||On)&&"undefined"!==typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if("string"!==typeof e)throw i=null,new Error("Wrong reader.result type");e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location.assign(e),i=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);i?i.location.assign(t):location.href=t,i=null,setTimeout((function(){URL.revokeObjectURL(t)}),4e4)}}function Nn(e,t){const n=" "+e;"function"===typeof __VUE_DEVTOOLS_TOAST__?__VUE_DEVTOOLS_TOAST__(n,t):"error"===t?console.error(n):"warn"===t?console.warn(n):console.log(n)}function Dn(e){return"_a"in e&&"install"in e}function jn(){if(!("clipboard"in navigator))return Nn("Your browser doesn't support the Clipboard API","error"),!0}function Ln(e){return!!(e instanceof Error&&e.message.toLowerCase().includes("document is not focused"))&&(Nn('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0)}async function Mn(e){if(!jn())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),Nn("Global state copied to clipboard.")}catch(t){if(Ln(t))return;Nn("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function Un(e){if(!jn())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),Nn("Global state pasted from clipboard.")}catch(t){if(Ln(t))return;Nn("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function qn(e){try{xn(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){Nn("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Vn;function Bn(){function e(){return new Promise(((e,t)=>{Vn.onchange=async()=>{const t=Vn.files;if(!t)return e(null);const n=t.item(0);return e(n?{text:await n.text(),file:n}:null)},Vn.oncancel=()=>e(null),Vn.onerror=t,Vn.click()}))}return Vn||(Vn=document.createElement("input"),Vn.type="file",Vn.accept=".json"),e}async function Zn(e){try{const t=await Bn(),n=await t();if(!n)return;const{text:i,file:r}=n;e.state.value=JSON.parse(i),Nn(`Global state imported from "${r.name}".`)}catch(t){Nn("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function $n(e){return{_custom:{display:e}}}const zn=" Pinia (root)",Hn="_root";function Kn(e){return Dn(e)?{id:Hn,label:zn}:{id:e.$id,label:e.$id}}function Gn(e){if(Dn(e)){const t=Array.from(e._s.keys()),n=e._s,i={state:t.map((t=>({editable:!0,key:t,value:e.state.value[t]}))),getters:t.filter((e=>n.get(e)._getters)).map((e=>{const t=n.get(e);return{editable:!1,key:e,value:t._getters.reduce(((e,n)=>(e[n]=t[n],e)),{})}}))};return i}const t={state:Object.keys(e.$state).map((t=>({editable:!0,key:t,value:e.$state[t]})))};return e._getters&&e._getters.length&&(t.getters=e._getters.map((t=>({editable:!1,key:t,value:e[t]})))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map((t=>({editable:!0,key:t,value:e[t]})))),t}function Wn(e){return e?Array.isArray(e)?e.reduce(((e,t)=>(e.keys.push(t.key),e.operations.push(t.type),e.oldValue[t.key]=t.oldValue,e.newValue[t.key]=t.newValue,e)),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:$n(e.type),key:$n(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function Qn(e){switch(e){case wn.direct:return"mutation";case wn.patchFunction:return"$patch";case wn.patchObject:return"$patch";default:return"unknown"}}let Jn=!0;const Yn=[],Xn="pinia:mutations",ei="pinia",{assign:ti}=Object,ni=e=>" "+e;function ii(e,t){wt({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yn,app:e},(n=>{"function"!==typeof n.now&&Nn("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:Xn,label:"Pinia ",color:15064968}),n.addInspector({id:ei,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Mn(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Un(t),n.sendInspectorTree(ei),n.sendInspectorState(ei)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{qn(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Zn(t),n.sendInspectorTree(ei),n.sendInspectorState(ei)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:e=>{const n=t._s.get(e);n?n._isOptionsAPI?(n.$reset(),Nn(`Store "${e}" reset.`)):Nn(`Cannot reset "${e}" store because it's a setup store.`,"warn"):Nn(`Cannot reset "${e}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent(((e,t)=>{const n=e.componentInstance&&e.componentInstance.proxy;if(n&&n._pStores){const t=e.componentInstance.proxy._pStores;Object.values(t).forEach((t=>{e.instanceData.state.push({type:ni(t.$id),key:"state",editable:!0,value:t._isOptionsAPI?{_custom:{value:(0,s.IU)(t.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>t.$reset()}]}}:Object.keys(t.$state).reduce(((e,n)=>(e[n]=t.$state[n],e)),{})}),t._getters&&t._getters.length&&e.instanceData.state.push({type:ni(t.$id),key:"getters",editable:!1,value:t._getters.reduce(((e,n)=>{try{e[n]=t[n]}catch(i){e[n]=i}return e}),{})})}))}})),n.on.getInspectorTree((n=>{if(n.app===e&&n.inspectorId===ei){let e=[t];e=e.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?e.filter((e=>"$id"in e?e.$id.toLowerCase().includes(n.filter.toLowerCase()):zn.toLowerCase().includes(n.filter.toLowerCase()))):e).map(Kn)}})),n.on.getInspectorState((n=>{if(n.app===e&&n.inspectorId===ei){const e=n.nodeId===Hn?t:t._s.get(n.nodeId);if(!e)return;e&&(n.state=Gn(e))}})),n.on.editInspectorState(((n,i)=>{if(n.app===e&&n.inspectorId===ei){const e=n.nodeId===Hn?t:t._s.get(n.nodeId);if(!e)return Nn(`store "${n.nodeId}" not found`,"error");const{path:i}=n;Dn(e)?i.unshift("state"):1===i.length&&e._customProperties.has(i[0])&&!(i[0]in e.$state)||i.unshift("$state"),Jn=!1,n.set(e,i,n.state.value),Jn=!0}})),n.on.editComponentState((e=>{if(e.type.startsWith("")){const n=e.type.replace(/^\s*/,""),i=t._s.get(n);if(!i)return Nn(`store "${n}" not found`,"error");const{path:r}=e;if("state"!==r[0])return Nn(`Invalid path for store "${n}":\n${r}\nOnly state can be modified.`);r[0]="$state",Jn=!1,e.set(i,r,e.state.value),Jn=!0}}))}))}function ri(e,t){Yn.includes(ni(t.$id))||Yn.push(ni(t.$id)),wt({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yn,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},(e=>{const n="function"===typeof e.now?e.now.bind(e):Date.now;t.$onAction((({after:i,onError:r,name:o,args:s})=>{const a=si++;e.addTimelineEvent({layerId:Xn,event:{time:n(),title:" "+o,subtitle:"start",data:{store:$n(t.$id),action:$n(o),args:s},groupId:a}}),i((i=>{oi=void 0,e.addTimelineEvent({layerId:Xn,event:{time:n(),title:" "+o,subtitle:"end",data:{store:$n(t.$id),action:$n(o),args:s,result:i},groupId:a}})})),r((i=>{oi=void 0,e.addTimelineEvent({layerId:Xn,event:{time:n(),logType:"error",title:" "+o,subtitle:"end",data:{store:$n(t.$id),action:$n(o),args:s,error:i},groupId:a}})}))}),!0),t._customProperties.forEach((i=>{(0,o.YP)((()=>(0,s.SU)(t[i])),((t,r)=>{e.notifyComponentUpdate(),e.sendInspectorState(ei),Jn&&e.addTimelineEvent({layerId:Xn,event:{time:n(),title:"Change",subtitle:i,data:{newValue:t,oldValue:r},groupId:oi}})}),{deep:!0})})),t.$subscribe((({events:i,type:r},o)=>{if(e.notifyComponentUpdate(),e.sendInspectorState(ei),!Jn)return;const s={time:n(),title:Qn(r),data:ti({store:$n(t.$id)},Wn(i)),groupId:oi};oi=void 0,r===wn.patchFunction?s.subtitle="":r===wn.patchObject?s.subtitle="":i&&!Array.isArray(i)&&(s.subtitle=i.type),i&&(s.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:i}}),e.addTimelineEvent({layerId:Xn,event:s})}),{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=(0,s.Xl)((r=>{i(r),e.addTimelineEvent({layerId:Xn,event:{time:n(),title:" "+t.$id,subtitle:"HMR update",data:{store:$n(t.$id),info:$n("HMR update")}}}),e.notifyComponentUpdate(),e.sendInspectorTree(ei),e.sendInspectorState(ei)}));const{$dispose:r}=t;t.$dispose=()=>{r(),e.notifyComponentUpdate(),e.sendInspectorTree(ei),e.sendInspectorState(ei),e.getSettings().logStoreChanges&&Nn(`Disposed "${t.$id}" store `)},e.notifyComponentUpdate(),e.sendInspectorTree(ei),e.sendInspectorState(ei),e.getSettings().logStoreChanges&&Nn(`"${t.$id}" store installed `)}))}let oi,si=0;function ai(e,t){const n=t.reduce(((t,n)=>(t[n]=(0,s.IU)(e)[n],t)),{});for(const i in n)e[i]=function(){const t=si,r=new Proxy(e,{get(...e){return oi=t,Reflect.get(...e)},set(...e){return oi=t,Reflect.set(...e)}});return n[i].apply(r,arguments)}}function ci({app:e,store:t,options:n}){if(!t.$id.startsWith("__hot:")){if(n.state&&(t._isOptionsAPI=!0),"function"===typeof n.state){ai(t,Object.keys(n.actions));const e=t._hotUpdate;(0,s.IU)(t)._hotUpdate=function(n){e.apply(this,arguments),ai(t,Object.keys(n._hmrPayload.actions))}}ri(e,t)}}function ui(){const e=(0,s.B)(!0),t=e.run((()=>(0,s.iH)({})));let n=[],i=[];const r=(0,s.Xl)({install(e){yn(r),pn||(r._a=e,e.provide(vn,r),e.config.globalProperties.$pinia=r,In&&ii(e,r),i.forEach((e=>n.push(e))),i=[])},use(e){return this._a||pn?n.push(e):i.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return In&&"undefined"!==typeof Proxy&&r.use(ci),r}const li=()=>{};function hi(e,t,n,i=li){e.push(t);const r=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i())};return!n&&(0,s.nZ)()&&(0,s.EB)(r),r}function di(e,...t){e.slice().forEach((e=>{e(...t)}))}function fi(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,n)=>e.set(n,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],r=e[n];bn(r)&&bn(i)&&e.hasOwnProperty(n)&&!(0,s.dq)(i)&&!(0,s.PG)(i)?e[n]=fi(r,i):e[n]=i}return e}const pi=Symbol(),mi=new WeakMap;function gi(e){return pn?!mi.has(e):!bn(e)||!e.hasOwnProperty(pi)}const{assign:yi}=Object;function vi(e){return!(!(0,s.dq)(e)||!e.effect)}function bi(e,t,n,i){const{state:r,actions:a,getters:c}=t,u=n.state.value[e];let l;function h(){u||(pn?mn(n.state.value,e,r?r():{}):n.state.value[e]=r?r():{});const t=(0,s.BK)(n.state.value[e]);return yi(t,a,Object.keys(c||{}).reduce(((t,i)=>(t[i]=(0,s.Xl)((0,o.Fl)((()=>{yn(n);const t=n._s.get(e);if(!pn||t._r)return c[i].call(t,t)}))),t)),{}))}return l=wi(e,h,t,n,i,!0),l}function wi(e,t,n={},i,r,a){let c;const u=yi({actions:{}},n);const l={deep:!0};let h,d;let f,p=(0,s.Xl)([]),m=(0,s.Xl)([]);const g=i.state.value[e];a||g||(pn?mn(i.state.value,e,{}):i.state.value[e]={});const y=(0,s.iH)({});let v;function b(t){let n;h=d=!1,"function"===typeof t?(t(i.state.value[e]),n={type:wn.patchFunction,storeId:e,events:f}):(fi(i.state.value[e],t),n={type:wn.patchObject,payload:t,storeId:e,events:f});const r=v=Symbol();(0,o.Y3)().then((()=>{v===r&&(h=!0)})),d=!0,di(p,n,i.state.value[e])}const w=a?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{yi(e,t)}))}:li;function _(){c.stop(),p=[],m=[],i._s.delete(e)}function I(t,n){return function(){yn(i);const r=Array.from(arguments),o=[],s=[];function a(e){o.push(e)}function c(e){s.push(e)}let u;di(m,{args:r,name:t,store:T,after:a,onError:c});try{u=n.apply(this&&this.$id===e?this:T,r)}catch(l){throw di(s,l),l}return u instanceof Promise?u.then((e=>(di(o,e),e))).catch((e=>(di(s,e),Promise.reject(e)))):(di(o,u),u)}}const k=(0,s.Xl)({actions:{},getters:{},state:[],hotState:y}),E={_p:i,$id:e,$onAction:hi.bind(null,m),$patch:b,$reset:w,$subscribe(t,n={}){const r=hi(p,t,n.detached,(()=>s())),s=c.run((()=>(0,o.YP)((()=>i.state.value[e]),(i=>{("sync"===n.flush?d:h)&&t({storeId:e,type:wn.direct,events:f},i)}),yi({},l,n))));return r},$dispose:_};pn&&(E._r=!1);const T=(0,s.qj)(In?yi({_hmrPayload:k,_customProperties:(0,s.Xl)(new Set)},E):E);i._s.set(e,T);const S=i._e.run((()=>(c=(0,s.B)(),c.run((()=>t())))));for(const o in S){const t=S[o];if((0,s.dq)(t)&&!vi(t)||(0,s.PG)(t))a||(g&&gi(t)&&((0,s.dq)(t)?t.value=g[o]:fi(t,g[o])),pn?mn(i.state.value[e],o,t):i.state.value[e][o]=t);else if("function"===typeof t){const e=I(o,t);pn?mn(S,o,e):S[o]=e,u.actions[o]=t}else 0}if(pn?Object.keys(S).forEach((e=>{mn(T,e,S[e])})):(yi(T,S),yi((0,s.IU)(T),S)),Object.defineProperty(T,"$state",{get:()=>i.state.value[e],set:e=>{b((t=>{yi(t,e)}))}}),In){const e={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach((t=>{Object.defineProperty(T,t,yi({value:T[t]},e))}))}return pn&&(T._r=!0),i._p.forEach((e=>{if(In){const t=c.run((()=>e({store:T,app:i._a,pinia:i,options:u})));Object.keys(t||{}).forEach((e=>T._customProperties.add(e))),yi(T,t)}else yi(T,c.run((()=>e({store:T,app:i._a,pinia:i,options:u}))))})),g&&a&&n.hydrate&&n.hydrate(T.$state,g),h=!0,d=!0,T}function _i(e,t,n){let i,r;const s="function"===typeof t;function a(e,n){const a=(0,o.FN)();e=e||a&&(0,o.f3)(vn,null),e&&yn(e),e=gn,e._s.has(i)||(s?wi(i,t,r,e):bi(i,r,e));const c=e._s.get(i);return c}return"string"===typeof e?(i=e,r=s?n:t):(r=e,i=e.id),a.$id=i,a}function Ii(){}function ki(){return ut()}function Ei(){return ct()}function Ti(){}function Si(e,...t){if("list"in Function.event&&Function.event.list[e])for(var n in Function.event.list[e])Function.event.list[e][n].call(null,...t)}function Pi(e,t){return"mount"===e?(0,o.bv)(t):"un:mount"===e?(0,o.Ah)(t):"update"===e?(0,o.ic)(t):void("list"in Function.event&&(e in Function.event.list===!1&&(Function.event.list[e]=[]),Function.event.list[e].push(t)))}function Ci(e,t,n){e.config.globalProperties[t]=n}function Oi(e){return e.$slots}function xi(...e){return Vi.layout(...e)}function Ai(...e){return Vi.component(...e)}function Fi(...e){return Vi.element(...e)}function Ri(){}function Ni(){}function Di(){}function ji(e=null){return(0,s.iH)(e)}function Li(e,t){for(var n in t)e[n]=t[n];return e}function Mi(e,...t){return t.length?Mi.data[Mi.format(e)]=t[0]:(e=Mi.data[Mi.format(e)])?e:""}function Ui(...e){return Ui.state(...e)}function qi(e){Di.url=e.BASE_URL,qi.mode=e.MODE}function Vi(e,t){return e.router&&(e.id="__router__"+e.router),e.layout&&(e.id="__layout__"+e.layout),e.component&&(e.id="__component__"+e.component),e.element&&(e.id="__element__"+e.element),{name:e.id||e.name||Math.random().toString(),props:e.prop||e.properties||e.param||e.parameter||e.attribute||[],setup(t){return e.setup?e.setup.call(this,t):{}},mounted(){e.mount&&e.mount.call(this),t&&t.mount&&t.mount.call(this)},unmounted(){e.eject&&e.eject.call(this),t&&t.eject&&t.eject.call(this)},created(){e.create&&e.create.call(this),t&&t.create&&t.create.call(this)},updated(){e.update&&e.update.call(this),t&&t.update&&t.update.call(this)},watch:e.watch,methods:e.method}}function Bi(e,t){var n=Function.argument(...arguments);(0,o.YP)(e,n.function,n.object)}Ei.slot=function(...e){return Vi.router(...e)},Ei.create=ot,Ei.history=B,Ei.hash={tag:Z},Ei.try={catch:"/:catchAll(.*)"},Pi.line=function(e){return"reference"===e?Pi.line.data:arguments.length?Pi.line.data.value=e:Pi.line.data.value},Pi.line.data=(0,s.iH)(!0),Pi.progress=function(e){return"reference"===e?Pi.progress.data:Pi.progress.data.value.length},Pi.progress.insert=function(e,t){Pi.progress.data.value.push(e),t&&t()},Pi.progress.delete=function(e){Pi.progress.data.value=Pi.progress.data.value.delete("progress"),Pi.progress.data.value=Pi.progress.data.value.delete(e)},Pi.progress.data=(0,s.iH)(["progress"]),Pi.loading=function(e){return"reference"===e?Pi.loading.data:Pi.loading.data.value.length},Pi.loading.insert=function(e,t){Pi.loading.data.value.push(e),t&&t()},Pi.loading.delete=function(e){Pi.loading.data.value=Pi.loading.data.value.delete(e)},Pi.loading.data=(0,s.iH)([]),Oi.value=function(e){return e.$slots.default},Di.get=function(...e){return Ti.axios.get(...e)},Di.post=function(...e){return Ti.axios.post(...e)},Li.clear=function(e){for(var t in e)delete e[t]},Mi.format=function(e){var t="vue.model.";return(e=e||"*").toString().startsWith(t)?e.substr(t.length):e},Mi.delete=function(e){return delete Mi.data[Mi.format(e)]},Mi.clear=function(e){if(e)if(Array.isArray(e))for(var t in e)Mi.delete(e[t]);else Mi.delete(e);else for(var t in Mi.data)delete Mi.data[t]},Mi.get=function(e){return Mi.data[Mi.format(e)]},Mi.data=(0,s.qj)({}),Ui.data=function(e){return"pinia"===e?ui():an({strict:!0,state:{dummy:[]},mutations:{mutation(e,t){t.call(null,e)}}})},Ui.use=function(e){return"pinia"===e?_i("pinia",{state:function(){return{dummy:[]}},actions:{mutation(e){e.call(null,this)}}})():It()},Bi.effect=function(){(0,o.m0)(...arguments)},Bi.on=function(e,t,n,i){e&&n.call(),(0,o.YP)(t,n,{deep:i})},Vi.router=function(e){return e.router=e.id||e.name||e.router,Vi(e)},Vi.layout=function(e){return e.layout=e.id||e.name||e.layout,Vi(e)},Vi.component=function(e){return e.component=e.id||e.name||e.component,Vi(e)},Vi.element=function(e){return e.element=e.id||e.name||e.element,Vi(e)};const Zi={proto:Ii,application:a.ri,properties:Ci,to:{reference:s.BK},reference:ji,react:Li,reactive:function(e={}){return(0,s.qj)(e)},compute:o.Fl,watch:Bi,inject:o.f3,store:Ui,model:Mi,route:ki,router:Ei,library:Ti,on:Pi,emit:Si,process:qi,request:Di,response:Ni,respond:Ri,slot:Oi,layout:xi,component:Ai,element:Fi,directive:function(e,t,n){Object.is.function(n)?e.directive(t,{beforeMount:n,updated:n}):e.directive(t,{beforeMount:n.mount,updated:n.update})},next:Vi};n(972);var $i=n(106),zi=n.n($i),Hi=n(389),Ki=n.n(Hi),Gi=n(872),Wi=n.n(Gi);Function.define(Function,"hash",(function(){})),Function.define(Function.hash,"md",(function(e){return zi()((e||String.empty).toString()).toString()})),Function.define(Function.hash,"sha",(function(e){return Wi()((e||String.empty).toString()).toString()})),Function.define(Function.hash.sha,"shuffle",(function(e){return Function.hash.sha(Math.random()).substr(0,e||64)})),Function.define(Function.hash.sha,"one",(function(e){return Ki()((e||String.empty).toString()).toString()})),Function.define(Function.hash,"password",(function(e){return Function.hash.md(e)+Function.hash.sha(e)+Function.hash.sha.one(e)})),Function.define(Function.hash,"s",(function(e,t){t=t||{separator:"-"};var n=Function.hash.md(e),i=Function.hash.sha(e),r=Function.hash.sha.one(e);return[n,i,r].join(t.separator).substr(t.offset,t.length)})),Function.define(Function.hash,"shuffle",(function(...e){var t=[],n=String.char.alpha.numeric,i=Function.hash.shuffle.length;for(var r in e)Object.is.string(e[r])?n=e[r]:Object.is.integer(e[r])&&(i=e[r]);for(r=0;r<i;r++)t.push(n.rand());return t.implode()})),Function.define(Function.hash.shuffle,"length",24,{configurable:!0,enumerable:!0,writable:!0});const Qi=Object.create(null);Qi["open"]="0",Qi["close"]="1",Qi["ping"]="2",Qi["pong"]="3",Qi["message"]="4",Qi["upgrade"]="5",Qi["noop"]="6";const Ji=Object.create(null);Object.keys(Qi).forEach((e=>{Ji[Qi[e]]=e}));const Yi={type:"error",data:"parser error"},Xi="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),er="function"===typeof ArrayBuffer,tr=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,nr=({type:e,data:t},n,i)=>Xi&&t instanceof Blob?n?i(t):ir(t,i):er&&(t instanceof ArrayBuffer||tr(t))?n?i(t):ir(new Blob([t]),i):i(Qi[e]+(t||"")),ir=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},rr=nr,or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sr="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let wL=0;wL<or.length;wL++)sr[or.charCodeAt(wL)]=wL;const ar=e=>{let t,n,i,r,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const u=new ArrayBuffer(s),l=new Uint8Array(u);for(t=0;t<a;t+=4)n=sr[e.charCodeAt(t)],i=sr[e.charCodeAt(t+1)],r=sr[e.charCodeAt(t+2)],o=sr[e.charCodeAt(t+3)],l[c++]=n<<2|i>>4,l[c++]=(15&i)<<4|r>>2,l[c++]=(3&r)<<6|63&o;return u},cr="function"===typeof ArrayBuffer,ur=(e,t)=>{if("string"!==typeof e)return{type:"message",data:hr(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:lr(e.substring(1),t)};const i=Ji[n];return i?e.length>1?{type:Ji[n],data:e.substring(1)}:{type:Ji[n]}:Yi},lr=(e,t)=>{if(cr){const n=ar(e);return hr(n,t)}return{base64:!0,data:e}},hr=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},dr=ur,fr=String.fromCharCode(30),pr=(e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,o)=>{rr(e,!1,(e=>{i[o]=e,++r===n&&t(i.join(fr))}))}))},mr=(e,t)=>{const n=e.split(fr),i=[];for(let r=0;r<n.length;r++){const e=dr(n[r],t);if(i.push(e),"error"===e.type)break}return i},gr=4;function yr(e){if(e)return vr(e)}function vr(e){for(var t in yr.prototype)e[t]=yr.prototype[t];return e}yr.prototype.on=yr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},yr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},yr.prototype.off=yr.prototype.removeListener=yr.prototype.removeAllListeners=yr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if(n=i[r],n===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},yr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){n=n.slice(0);i=0;for(var r=n.length;i<r;++i)n[i].apply(this,t)}return this},yr.prototype.emitReserved=yr.prototype.emit,yr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},yr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const br=(()=>"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")())();function wr(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const _r=br.setTimeout,Ir=br.clearTimeout;function kr(e,t){t.useNativeTimers?(e.setTimeoutFn=_r.bind(br),e.clearTimeoutFn=Ir.bind(br)):(e.setTimeoutFn=br.setTimeout.bind(br),e.clearTimeoutFn=br.clearTimeout.bind(br))}const Er=1.33;function Tr(e){return"string"===typeof e?Sr(e):Math.ceil((e.byteLength||e.size)*Er)}function Sr(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}class Pr extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Cr extends yr{constructor(e){super(),this.writable=!1,kr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new Pr(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=dr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const Or="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),xr=64,Ar={};let Fr,Rr=0,Nr=0;function Dr(e){let t="";do{t=Or[e%xr]+t,e=Math.floor(e/xr)}while(e>0);return t}function jr(){const e=Dr(+new Date);return e!==Fr?(Rr=0,Fr=e):e+"."+Dr(Rr++)}for(;Nr<xr;Nr++)Ar[Or[Nr]]=Nr;function Lr(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Mr(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}let Ur=!1;try{Ur="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(bL){}const qr=Ur;function Vr(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||qr))return new XMLHttpRequest}catch(n){}if(!t)try{return new(br[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function Br(){}const Zr=function(){const e=new Vr({xdomain:!1});return null!=e.responseType}();class $r extends Cr{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=Zr&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};mr(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,pr(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=jr()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const i=Lr(e),r=-1!==this.opts.hostname.indexOf(":");return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new zr(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class zr extends yr{constructor(e,t){super(),kr(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=wr(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new Vr(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(n){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{t.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(n){return void this.setTimeoutFn((()=>{this.onError(n)}),0)}"undefined"!==typeof document&&(this.index=zr.requestsCount++,zr.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Br,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete zr.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(zr.requestsCount=0,zr.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Hr);else if("function"===typeof addEventListener){const e="onpagehide"in br?"pagehide":"unload";addEventListener(e,Hr,!1)}function Hr(){for(let e in zr.requests)zr.requests.hasOwnProperty(e)&&zr.requests[e].abort()}const Kr=(()=>{const e="function"===typeof Promise&&"function"===typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),Gr=br.WebSocket||br.MozWebSocket,Wr=!0,Qr="arraybuffer",Jr="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Yr extends Cr{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=Jr?{}:wr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Wr&&!Jr?t?new Gr(e,t):new Gr(e):new Gr(e,t,n)}catch(bL){return this.emitReserved("error",bL)}this.ws.binaryType=this.socket.binaryType||Qr,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;rr(n,this.supportsBinary,(e=>{const t={};if(!Wr&&(n.options&&(t.compress=n.options.compress),this.opts.perMessageDeflate)){const n="string"===typeof e?Buffer.byteLength(e):e.length;n<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{Wr?this.ws.send(e):this.ws.send(e,t)}catch(r){}i&&Kr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=jr()),this.supportsBinary||(e.b64=1);const i=Lr(e),r=-1!==this.opts.hostname.indexOf(":");return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}check(){return!!Gr}}const Xr={websocket:Yr,polling:$r},eo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,to=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function no(e){const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=eo.exec(e||""),o={},s=14;while(s--)o[to[s]]=r[s]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=io(o,o["path"]),o.queryKey=ro(o,o["query"]),o}function io(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1),"/"==t.slice(-1)&&i.splice(i.length-1,1),i}function ro(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}class oo extends yr{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=no(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=no(t.host).host),kr(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=Mr(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=gr,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Xr[e](n)}open(){let e;if(this.opts.rememberUpgrade&&oo.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;oo.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;oo.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,u(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function c(e){t&&e.name!==t.name&&r()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",oo.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){const e=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const e=this.writeBuffer[n].data;if(e&&(t+=Tr(e)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;n=n||{},n.compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){oo.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}oo.protocol=gr;oo.protocol;function so(e,t="",n){let i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=no(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":"),o=r?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}const ao="function"===typeof ArrayBuffer,co=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,uo=Object.prototype.toString,lo="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===uo.call(Blob),ho="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===uo.call(File);function fo(e){return ao&&(e instanceof ArrayBuffer||co(e))||lo&&e instanceof Blob||ho&&e instanceof File}function po(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(po(e[t]))return!0;return!1}if(fo(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return po(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&po(e[n]))return!0;return!1}function mo(e){const t=[],n=e.data,i=e;return i.data=go(n,t),i.attachments=t.length,{packet:i,buffers:t}}function go(e,t){if(!e)return e;if(fo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=go(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=go(e[i],t));return n}return e}function yo(e,t){return e.data=vo(e.data,t),delete e.attachments,e}function vo(e,t){if(!e)return e;if(e&&!0===e._placeholder){const n="number"===typeof e.num&&e.num>=0&&e.num<t.length;if(n)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=vo(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=vo(e[n],t));return e}const bo=5;var wo;(function(e){e[e["CONNECT"]=0]="CONNECT",e[e["DISCONNECT"]=1]="DISCONNECT",e[e["EVENT"]=2]="EVENT",e[e["ACK"]=3]="ACK",e[e["CONNECT_ERROR"]=4]="CONNECT_ERROR",e[e["BINARY_EVENT"]=5]="BINARY_EVENT",e[e["BINARY_ACK"]=6]="BINARY_ACK"})(wo||(wo={}));class _o{constructor(e){this.replacer=e}encode(e){return e.type!==wo.EVENT&&e.type!==wo.ACK||!po(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===wo.EVENT?wo.BINARY_EVENT:wo.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==wo.BINARY_EVENT&&e.type!==wo.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=mo(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}class Io extends yr{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===wo.BINARY_EVENT;n||t.type===wo.BINARY_ACK?(t.type=n?wo.EVENT:wo.ACK,this.reconstructor=new ko(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!fo(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===wo[n.type])throw new Error("unknown packet type "+n.type);if(n.type===wo.BINARY_EVENT||n.type===wo.BINARY_ACK){const i=t+1;while("-"!==e.charAt(++t)&&t!=e.length);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;while(++t){const n=e.charAt(t);if(","===n)break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;while(++t){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!Io.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case wo.CONNECT:return"object"===typeof t;case wo.DISCONNECT:return void 0===t;case wo.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case wo.EVENT:case wo.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case wo.ACK:case wo.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ko{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=yo(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Eo(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const To=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class So extends yr{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Eo(e,"open",this.onopen.bind(this)),Eo(e,"packet",this.onpacket.bind(this)),Eo(e,"error",this.onerror.bind(this)),Eo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(To.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:wo.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"===typeof t[t.length-1]){const e=this.ids++,i=t.pop();this._registerAckCallback(e,i),n.id=e}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,r=this.flags.volatile&&(!i||!this.connected);return r||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var n;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),i);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...e])}}emitWithAck(e,...t){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((i,r)=>{t.push(((e,t)=>n?e?r(e):i(t):i(e))),this.emit(e,...t)}))}_addToQueue(e){let t;"function"===typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...i)=>{if(n!==this._queue[0])return;const r=null!==e;return r?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:wo.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){const t=e.nsp===this.nsp;if(t)switch(e.type){case wo.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wo.EVENT:case wo.BINARY_EVENT:this.onevent(e);break;case wo.ACK:case wo.BINARY_ACK:this.onack(e);break;case wo.DISCONNECT:this.ondisconnect();break;case wo.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t);break}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:wo.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:wo.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Po(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Po.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Po.prototype.reset=function(){this.attempts=0},Po.prototype.setMin=function(e){this.ms=e},Po.prototype.setMax=function(e){this.max=e},Po.prototype.setJitter=function(e){this.jitter=e};class Co extends yr{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,kr(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Po({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new oo(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Eo(t,"open",(function(){n.onopen(),e&&e()})),r=Eo(t,"error",(t=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&i();const n=this.setTimeoutFn((()=>{i(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(i),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Eo(e,"ping",this.onping.bind(this)),Eo(e,"data",this.ondata.bind(this)),Eo(e,"error",this.onerror.bind(this)),Eo(e,"close",this.onclose.bind(this)),Eo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Kr((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new So(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){const e=this.nsps[n];if(e.active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oo={};function xo(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};const n=so(e,t.path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=Oo[r]&&o in Oo[r]["nsps"],a=t.forceNew||t["force new connection"]||!1===t.multiplex||s;let c;return a?c=new Co(i,t):(Oo[r]||(Oo[r]=new Co(i,t)),c=Oo[r]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}function Ao(e,t){return function(){return e.apply(t,arguments)}}Object.assign(xo,{Manager:Co,Socket:So,io:xo,connect:xo}),Function.define(Function.web.socket.io,"client",xo,{configurable:!0,enumerable:!0,writable:!0});const{toString:Fo}=Object.prototype,{getPrototypeOf:Ro}=Object,No=(e=>t=>{const n=Fo.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Do=e=>(e=e.toLowerCase(),t=>No(t)===e),jo=e=>t=>typeof t===e,{isArray:Lo}=Array,Mo=jo("undefined");function Uo(e){return null!==e&&!Mo(e)&&null!==e.constructor&&!Mo(e.constructor)&&Zo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qo=Do("ArrayBuffer");function Vo(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&qo(e.buffer),t}const Bo=jo("string"),Zo=jo("function"),$o=jo("number"),zo=e=>null!==e&&"object"===typeof e,Ho=e=>!0===e||!1===e,Ko=e=>{if("object"!==No(e))return!1;const t=Ro(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Go=Do("Date"),Wo=Do("File"),Qo=Do("Blob"),Jo=Do("FileList"),Yo=e=>zo(e)&&Zo(e.pipe),Xo=e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Zo(e.append)&&("formdata"===(t=No(e))||"object"===t&&Zo(e.toString)&&"[object FormData]"===e.toString()))},es=Do("URLSearchParams"),ts=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ns(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let i,r;if("object"!==typeof e&&(e=[e]),Lo(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(i=0;i<o;i++)s=r[i],t.call(null,e[s],s,e)}}function is(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;while(r-- >0)if(i=n[r],t===i.toLowerCase())return i;return null}const rs=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),os=e=>!Mo(e)&&e!==rs;function ss(){const{caseless:e}=os(this)&&this||{},t={},n=(n,i)=>{const r=e&&is(t,i)||i;Ko(t[r])&&Ko(n)?t[r]=ss(t[r],n):Ko(n)?t[r]=ss({},n):Lo(n)?t[r]=n.slice():t[r]=n};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&ns(arguments[i],n);return t}const as=(e,t,n,{allOwnKeys:i}={})=>(ns(t,((t,i)=>{n&&Zo(t)?e[i]=Ao(t,n):e[i]=t}),{allOwnKeys:i}),e),cs=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),us=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ls=(e,t,n,i)=>{let r,o,s;const a={};if(t=t||{},null==e)return t;do{r=Object.getOwnPropertyNames(e),o=r.length;while(o-- >0)s=r[o],i&&!i(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Ro(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},hs=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},ds=e=>{if(!e)return null;if(Lo(e))return e;let t=e.length;if(!$o(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n},fs=(e=>t=>e&&t instanceof e)("undefined"!==typeof Uint8Array&&Ro(Uint8Array)),ps=(e,t)=>{const n=e&&e[Symbol.iterator],i=n.call(e);let r;while((r=i.next())&&!r.done){const n=r.value;t.call(e,n[0],n[1])}},ms=(e,t)=>{let n;const i=[];while(null!==(n=e.exec(t)))i.push(n);return i},gs=Do("HTMLFormElement"),ys=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),vs=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),bs=Do("RegExp"),ws=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};ns(n,((n,r)=>{!1!==t(n,r,e)&&(i[r]=n)})),Object.defineProperties(e,i)},_s=e=>{ws(e,((t,n)=>{if(Zo(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];Zo(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},Is=(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return Lo(e)?i(e):i(String(e).split(t)),n},ks=()=>{},Es=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ts="abcdefghijklmnopqrstuvwxyz",Ss="0123456789",Ps={DIGIT:Ss,ALPHA:Ts,ALPHA_DIGIT:Ts+Ts.toUpperCase()+Ss},Cs=(e=16,t=Ps.ALPHA_DIGIT)=>{let n="";const{length:i}=t;while(e--)n+=t[Math.random()*i|0];return n};function Os(e){return!!(e&&Zo(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}const xs=e=>{const t=new Array(10),n=(e,i)=>{if(zo(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=Lo(e)?[]:{};return ns(e,((e,t)=>{const o=n(e,i+1);!Mo(o)&&(r[t]=o)})),t[i]=void 0,r}}return e};return n(e,0)},As=Do("AsyncFunction"),Fs=e=>e&&(zo(e)||Zo(e))&&Zo(e.then)&&Zo(e.catch),Rs={isArray:Lo,isArrayBuffer:qo,isBuffer:Uo,isFormData:Xo,isArrayBufferView:Vo,isString:Bo,isNumber:$o,isBoolean:Ho,isObject:zo,isPlainObject:Ko,isUndefined:Mo,isDate:Go,isFile:Wo,isBlob:Qo,isRegExp:bs,isFunction:Zo,isStream:Yo,isURLSearchParams:es,isTypedArray:fs,isFileList:Jo,forEach:ns,merge:ss,extend:as,trim:ts,stripBOM:cs,inherits:us,toFlatObject:ls,kindOf:No,kindOfTest:Do,endsWith:hs,toArray:ds,forEachEntry:ps,matchAll:ms,isHTMLForm:gs,hasOwnProperty:vs,hasOwnProp:vs,reduceDescriptors:ws,freezeMethods:_s,toObjectSet:Is,toCamelCase:ys,noop:ks,toFiniteNumber:Es,findKey:is,global:rs,isContextDefined:os,ALPHABET:Ps,generateString:Cs,isSpecCompliantForm:Os,toJSONObject:xs,isAsyncFn:As,isThenable:Fs};function Ns(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}Rs.inherits(Ns,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rs.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ds=Ns.prototype,js={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{js[e]={value:e}})),Object.defineProperties(Ns,js),Object.defineProperty(Ds,"isAxiosError",{value:!0}),Ns.from=(e,t,n,i,r,o)=>{const s=Object.create(Ds);return Rs.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ns.call(s,e.message,t,n,i,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Ls=Ns,Ms=null;function Us(e){return Rs.isPlainObject(e)||Rs.isArray(e)}function qs(e){return Rs.endsWith(e,"[]")?e.slice(0,-2):e}function Vs(e,t,n){return e?e.concat(t).map((function(e,t){return e=qs(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}function Bs(e){return Rs.isArray(e)&&!e.some(Us)}const Zs=Rs.toFlatObject(Rs,{},null,(function(e){return/^is[A-Z]/.test(e)}));function $s(e,t,n){if(!Rs.isObject(e))throw new TypeError("target must be an object");t=t||new(Ms||FormData),n=Rs.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Rs.isUndefined(t[e])}));const i=n.metaTokens,r=n.visitor||l,o=n.dots,s=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,c=a&&Rs.isSpecCompliantForm(t);if(!Rs.isFunction(r))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(Rs.isDate(e))return e.toISOString();if(!c&&Rs.isBlob(e))throw new Ls("Blob is not supported. Use a Buffer instead.");return Rs.isArrayBuffer(e)||Rs.isTypedArray(e)?c&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(Rs.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Rs.isArray(e)&&Bs(e)||(Rs.isFileList(e)||Rs.endsWith(n,"[]"))&&(a=Rs.toArray(e)))return n=qs(n),a.forEach((function(e,i){!Rs.isUndefined(e)&&null!==e&&t.append(!0===s?Vs([n],i,o):null===s?n:n+"[]",u(e))})),!1;return!!Us(e)||(t.append(Vs(r,n,o),u(e)),!1)}const h=[],d=Object.assign(Zs,{defaultVisitor:l,convertValue:u,isVisitable:Us});function f(e,n){if(!Rs.isUndefined(e)){if(-1!==h.indexOf(e))throw Error("Circular reference detected in "+n.join("."));h.push(e),Rs.forEach(e,(function(e,i){const o=!(Rs.isUndefined(e)||null===e)&&r.call(t,e,Rs.isString(i)?i.trim():i,n,d);!0===o&&f(e,n?n.concat(i):[i])})),h.pop()}}if(!Rs.isObject(e))throw new TypeError("data must be an object");return f(e),t}const zs=$s;function Hs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ks(e,t){this._pairs=[],e&&zs(e,this,t)}const Gs=Ks.prototype;Gs.append=function(e,t){this._pairs.push([e,t])},Gs.toString=function(e){const t=e?function(t){return e.call(this,t,Hs)}:Hs;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ws=Ks;function Qs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Js(e,t,n){if(!t)return e;const i=n&&n.encode||Qs,r=n&&n.serialize;let o;if(o=r?r(t,n):Rs.isURLSearchParams(t)?t.toString():new Ws(t,n).toString(i),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}class Ys{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Rs.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Xs=Ys,ea={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ta="undefined"!==typeof URLSearchParams?URLSearchParams:Ws,na="undefined"!==typeof FormData?FormData:null,ia="undefined"!==typeof Blob?Blob:null,ra=(()=>{let e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)})(),oa=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),sa={isBrowser:!0,classes:{URLSearchParams:ta,FormData:na,Blob:ia},isStandardBrowserEnv:ra,isStandardBrowserWebWorkerEnv:oa,protocols:["http","https","file","blob","url","data"]};function aa(e,t){return zs(e,new sa.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return sa.isNode&&Rs.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function ca(e){return Rs.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}function ua(e){const t={},n=Object.keys(e);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],t[o]=e[o];return t}function la(e){function t(e,n,i,r){let o=e[r++];const s=Number.isFinite(+o),a=r>=e.length;if(o=!o&&Rs.isArray(i)?i.length:o,a)return Rs.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s;i[o]&&Rs.isObject(i[o])||(i[o]=[]);const c=t(e,n,i[o],r);return c&&Rs.isArray(i[o])&&(i[o]=ua(i[o])),!s}if(Rs.isFormData(e)&&Rs.isFunction(e.entries)){const n={};return Rs.forEachEntry(e,((e,i)=>{t(ca(e),i,n,0)})),n}return null}const ha=la,da={"Content-Type":void 0};function fa(e,t,n){if(Rs.isString(e))try{return(t||JSON.parse)(e),Rs.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}const pa={transitional:ea,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Rs.isObject(e);r&&Rs.isHTMLForm(e)&&(e=new FormData(e));const o=Rs.isFormData(e);if(o)return i&&i?JSON.stringify(ha(e)):e;if(Rs.isArrayBuffer(e)||Rs.isBuffer(e)||Rs.isStream(e)||Rs.isFile(e)||Rs.isBlob(e))return e;if(Rs.isArrayBufferView(e))return e.buffer;if(Rs.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return aa(e,this.formSerializer).toString();if((s=Rs.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return zs(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),fa(e)):e}],transformResponse:[function(e){const t=this.transitional||pa.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&Rs.isString(e)&&(n&&!this.responseType||i)){const n=t&&t.silentJSONParsing,o=!n&&i;try{return JSON.parse(e)}catch(r){if(o){if("SyntaxError"===r.name)throw Ls.from(r,Ls.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sa.classes.FormData,Blob:sa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Rs.forEach(["delete","get","head"],(function(e){pa.headers[e]={}})),Rs.forEach(["post","put","patch"],(function(e){pa.headers[e]=Rs.merge(da)}));const ma=pa,ga=Rs.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ya=e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&ga[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t},va=Symbol("internals");function ba(e){return e&&String(e).trim().toLowerCase()}function wa(e){return!1===e||null==e?e:Rs.isArray(e)?e.map(wa):String(e)}function _a(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;while(i=n.exec(e))t[i[1]]=i[2];return t}const Ia=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ka(e,t,n,i,r){return Rs.isFunction(i)?i.call(this,t,n):(r&&(t=n),Rs.isString(t)?Rs.isString(i)?-1!==t.indexOf(i):Rs.isRegExp(i)?i.test(t):void 0:void 0)}function Ea(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}function Ta(e,t){const n=Rs.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}class Sa{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=ba(t);if(!r)throw new Error("header name must be a non-empty string");const o=Rs.findKey(i,r);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||t]=wa(e))}const o=(e,t)=>Rs.forEach(e,((e,n)=>r(e,n,t)));return Rs.isPlainObject(e)||e instanceof this.constructor?o(e,t):Rs.isString(e)&&(e=e.trim())&&!Ia(e)?o(ya(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=ba(e),e){const n=Rs.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return _a(e);if(Rs.isFunction(t))return t.call(this,e,n);if(Rs.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ba(e),e){const n=Rs.findKey(this,e);return!(!n||void 0===this[n]||t&&!ka(this,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=ba(e),e){const r=Rs.findKey(n,e);!r||t&&!ka(n,n[r],r,t)||(delete n[r],i=!0)}}return Rs.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;while(n--){const r=t[n];e&&!ka(this,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Rs.forEach(this,((i,r)=>{const o=Rs.findKey(n,r);if(o)return t[o]=wa(i),void delete t[r];const s=e?Ea(r):String(r).trim();s!==r&&delete t[r],t[s]=wa(i),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Rs.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Rs.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=this[va]=this[va]={accessors:{}},n=t.accessors,i=this.prototype;function r(e){const t=ba(e);n[t]||(Ta(i,e),n[t]=!0)}return Rs.isArray(e)?e.forEach(r):r(e),this}}Sa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Rs.freezeMethods(Sa.prototype),Rs.freezeMethods(Sa);const Pa=Sa;function Ca(e,t){const n=this||ma,i=t||n,r=Pa.from(i.headers);let o=i.data;return Rs.forEach(e,(function(e){o=e.call(n,o,r.normalize(),t?t.status:void 0)})),r.normalize(),o}function Oa(e){return!(!e||!e.__CANCEL__)}function xa(e,t,n){Ls.call(this,null==e?"canceled":e,Ls.ERR_CANCELED,t,n),this.name="CanceledError"}Rs.inherits(xa,Ls,{__CANCEL__:!0});const Aa=xa;function Fa(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Ls("Request failed with status code "+n.status,[Ls.ERR_BAD_REQUEST,Ls.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ra=sa.isStandardBrowserEnv?function(){return{write:function(e,t,n,i,r,o){const s=[];s.push(e+"="+encodeURIComponent(t)),Rs.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Rs.isString(i)&&s.push("path="+i),Rs.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Na(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Da(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function ja(e,t){return e&&!Na(t)?Da(e,t):t}const La=sa.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=Rs.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return function(){return!0}}();function Ma(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ua(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=i[s];r||(r=c),n[o]=a,i[o]=c;let l=s,h=0;while(l!==o)h+=n[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-r<t)return;const d=u&&c-u;return d?Math.round(1e3*h/d):void 0}}const qa=Ua;function Va(e,t){let n=0;const i=qa(50,250);return r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,c=i(a),u=o<=s;n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:r};l[t?"download":"upload"]=!0,e(l)}}const Ba="undefined"!==typeof XMLHttpRequest,Za=Ba&&function(e){return new Promise((function(t,n){let i=e.data;const r=Pa.from(e.headers).normalize(),o=e.responseType;let s;function a(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}Rs.isFormData(i)&&(sa.isStandardBrowserEnv||sa.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const u=ja(e.baseURL,e.url);function l(){if(!c)return;const i=Pa.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),r=o&&"text"!==o&&"json"!==o?c.response:c.responseText,s={data:r,status:c.status,statusText:c.statusText,headers:i,config:e,request:c};Fa((function(e){t(e),a()}),(function(e){n(e),a()}),s),c=null}if(c.open(e.method.toUpperCase(),Js(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=l:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(l)},c.onabort=function(){c&&(n(new Ls("Request aborted",Ls.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Ls("Network Error",Ls.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||ea;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Ls(t,i.clarifyTimeoutError?Ls.ETIMEDOUT:Ls.ECONNABORTED,e,c)),c=null},sa.isStandardBrowserEnv){const t=(e.withCredentials||La(u))&&e.xsrfCookieName&&Ra.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===i&&r.setContentType(null),"setRequestHeader"in c&&Rs.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Rs.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&"json"!==o&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",Va(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Va(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{c&&(n(!t||t.type?new Aa(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=Ma(u);h&&-1===sa.protocols.indexOf(h)?n(new Ls("Unsupported protocol "+h+":",Ls.ERR_BAD_REQUEST,e)):c.send(i||null)}))},$a={http:Ms,xhr:Za};Rs.forEach($a,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const za={getAdapter:e=>{e=Rs.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let r=0;r<t;r++)if(n=e[r],i=Rs.isString(n)?$a[n.toLowerCase()]:n)break;if(!i){if(!1===i)throw new Ls(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(Rs.hasOwnProp($a,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!Rs.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:$a};function Ha(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Aa(null,e)}function Ka(e){Ha(e),e.headers=Pa.from(e.headers),e.data=Ca.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);const t=za.getAdapter(e.adapter||ma.adapter);return t(e).then((function(t){return Ha(e),t.data=Ca.call(e,e.transformResponse,t),t.headers=Pa.from(t.headers),t}),(function(t){return Oa(t)||(Ha(e),t&&t.response&&(t.response.data=Ca.call(e,e.transformResponse,t.response),t.response.headers=Pa.from(t.response.headers))),Promise.reject(t)}))}const Ga=e=>e instanceof Pa?e.toJSON():e;function Wa(e,t){t=t||{};const n={};function i(e,t,n){return Rs.isPlainObject(e)&&Rs.isPlainObject(t)?Rs.merge.call({caseless:n},e,t):Rs.isPlainObject(t)?Rs.merge({},t):Rs.isArray(t)?t.slice():t}function r(e,t,n){return Rs.isUndefined(t)?Rs.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function o(e,t){if(!Rs.isUndefined(t))return i(void 0,t)}function s(e,t){return Rs.isUndefined(t)?Rs.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,o){return o in t?i(n,r):o in e?i(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>r(Ga(e),Ga(t),!0)};return Rs.forEach(Object.keys(Object.assign({},e,t)),(function(i){const o=c[i]||r,s=o(e[i],t[i],i);Rs.isUndefined(s)&&o!==a||(n[i]=s)})),n}const Qa="1.4.0",Ja={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ja[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ya={};function Xa(e,t,n){if("object"!==typeof e)throw new Ls("options must be an object",Ls.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;while(r-- >0){const o=i[r],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new Ls("option "+o+" must be "+n,Ls.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ls("Unknown option "+o,Ls.ERR_BAD_OPTION)}}Ja.transitional=function(e,t,n){function i(e,t){return"[Axios v"+Qa+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new Ls(i(r," has been removed"+(t?" in "+t:"")),Ls.ERR_DEPRECATED);return t&&!Ya[r]&&(Ya[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}};const ec={assertOptions:Xa,validators:Ja},tc=ec.validators;class nc{constructor(e){this.defaults=e,this.interceptors={request:new Xs,response:new Xs}}request(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=Wa(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;let o;void 0!==n&&ec.assertOptions(n,{silentJSONParsing:tc.transitional(tc.boolean),forcedJSONParsing:tc.transitional(tc.boolean),clarifyTimeoutError:tc.transitional(tc.boolean)},!1),null!=i&&(Rs.isFunction(i)?t.paramsSerializer={serialize:i}:ec.assertOptions(i,{encode:tc.function,serialize:tc.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),o=r&&Rs.merge(r.common,r[t.method]),o&&Rs.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Pa.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[Ka.bind(this),void 0];e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);while(h<l)u=u.then(e[h++],e[h++]);return u}l=s.length;let d=t;h=0;while(h<l){const e=s[h++],t=s[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{u=Ka.call(this,d)}catch(f){return Promise.reject(f)}h=0,l=c.length;while(h<l)u=u.then(c[h++],c[h++]);return u}getUri(e){e=Wa(this.defaults,e);const t=ja(e.baseURL,e.url);return Js(t,e.params,e.paramsSerializer)}}Rs.forEach(["delete","get","head","options"],(function(e){nc.prototype[e]=function(t,n){return this.request(Wa(n||{},{method:e,url:t,data:(n||{}).data}))}})),Rs.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Wa(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}nc.prototype[e]=t(),nc.prototype[e+"Form"]=t(!0)}));const ic=nc;class rc{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new Aa(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new rc((function(t){e=t}));return{token:t,cancel:e}}}const oc=rc;function sc(e){return function(t){return e.apply(null,t)}}function ac(e){return Rs.isObject(e)&&!0===e.isAxiosError}const cc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cc).forEach((([e,t])=>{cc[t]=e}));const uc=cc;function lc(e){const t=new ic(e),n=Ao(ic.prototype.request,t);return Rs.extend(n,ic.prototype,t,{allOwnKeys:!0}),Rs.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return lc(Wa(e,t))},n}const hc=lc(ma);hc.Axios=ic,hc.CanceledError=Aa,hc.CancelToken=oc,hc.isCancel=Oa,hc.VERSION=Qa,hc.toFormData=zs,hc.AxiosError=Ls,hc.Cancel=hc.CanceledError,hc.all=function(e){return Promise.all(e)},hc.spread=sc,hc.isAxiosError=ac,hc.mergeConfig=Wa,hc.AxiosHeaders=Pa,hc.formToJSON=e=>ha(Rs.isHTMLForm(e)?new FormData(e):e),hc.HttpStatusCode=uc,hc.default=hc;const dc=hc;Function.define(Function,"axios",dc);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fc=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},pc=function(e){const t=[];let n=0,i=0;while(n<e.length){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=e[n++],s=e[n++],a=e[n++],c=((7&r)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(1023&c))}else{const o=e[n++],s=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return t.join("")},mc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],o=r+1<e.length,s=o?e[r+1]:0,a=r+2<e.length,c=a?e[r+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),i.push(n[u],n[l],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fc(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):pc(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],o=r<e.length,s=o?n[e.charAt(r)]:0;++r;const a=r<e.length,c=a?n[e.charAt(r)]:64;++r;const u=r<e.length,l=u?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==c||null==l)throw new gc;const h=t<<2|s>>4;if(i.push(h),64!==c){const e=s<<4&240|c>>2;if(i.push(e),64!==l){const e=c<<6&192|l;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yc=function(e){const t=fc(e);return mc.encodeByteArray(t,!0)},vc=function(e){return yc(e).replace(/\./g,"")},bc=function(e){try{return mc.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wc(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&_c(n)&&(e[n]=wc(e[n],t[n]));return e}function _c(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=()=>Ic().__FIREBASE_DEFAULTS__,Ec=()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0},Tc=()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&bc(e[1]);return t&&JSON.parse(t)},Sc=()=>{try{return kc()||Ec()||Tc()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Pc=e=>{var t,n;return null===(n=null===(t=Sc())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Cc=e=>{const t=Pc(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Oc=()=>{var e;return null===(e=Sc())||void 0===e?void 0:e.config},xc=e=>{var t;return null===(t=Sc())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ac{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[vc(JSON.stringify(n)),vc(JSON.stringify(s)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function Nc(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rc())}function Dc(){var e;const t=null===(e=Sc())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function jc(){return"object"===typeof self&&self.self===self}function Lc(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Mc(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function Uc(){const e=Rc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qc(){return!Dc()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vc(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Bc(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zc="FirebaseError";class $c extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Zc,Object.setPrototypeOf(this,$c.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?Hc(r,n):"Error",s=`${this.serviceName}: ${o} (${i}).`,a=new $c(i,s,n);return a}}function Hc(e,t){return e.replace(Kc,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}const Kc=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Gc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qc(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if(Jc(n)&&Jc(o)){if(!Qc(n,o))return!1}else if(n!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Jc(e){return null!==e&&"object"===typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yc(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Xc(e){const t={},n=e.replace(/^\?/,"").split("&");return n.forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function eu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e,t){const n=new nu(e,t);return n.subscribe.bind(n)}class nu{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=iu(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=ru),void 0===i.error&&(i.error=ru),void 0===i.complete&&(i.complete=ru);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function iu(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}function ru(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ou(e){return e&&e._delegate?e._delegate:e}class su{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ac;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(lu(e))try{this.getOrInitializeService({instanceIdentifier:au})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e=au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=au){return this.instances.has(e)}getOptions(e=au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,o]of this.instancesDeferred.entries()){const e=this.normalizeInstanceIdentifier(r);n===e&&o.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(wR){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uu(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(wR){}return n||null}normalizeInstanceIdentifier(e=au){return this.component?this.component.multipleInstances?e:au:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function uu(e){return e===au?void 0:e}function lu(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){const t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const du=[];var fu;(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(fu||(fu={}));const pu={debug:fu.DEBUG,verbose:fu.VERBOSE,info:fu.INFO,warn:fu.WARN,error:fu.ERROR,silent:fu.SILENT},mu=fu.INFO,gu={[fu.DEBUG]:"log",[fu.VERBOSE]:"log",[fu.INFO]:"info",[fu.WARN]:"warn",[fu.ERROR]:"error"},yu=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=gu[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class vu{constructor(e){this.name=e,this._logLevel=mu,this._logHandler=yu,this._userLogHandler=null,du.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fu))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fu.DEBUG,...e),this._logHandler(this,fu.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fu.VERBOSE,...e),this._logHandler(this,fu.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fu.INFO,...e),this._logHandler(this,fu.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fu.WARN,...e),this._logHandler(this,fu.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fu.ERROR,...e),this._logHandler(this,fu.ERROR,...e)}}function bu(e){du.forEach((t=>{t.setLogLevel(e)}))}function wu(e,t){for(const n of du){let i=null;t&&t.level&&(i=pu[t.level]),n.userLogHandler=null===e?null:(t,n,...r)=>{const o=r.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:fu[n].toLowerCase(),message:o,args:r,type:t.name})}}}const _u=(e,t)=>t.some((t=>e instanceof t));let Iu,ku;function Eu(){return Iu||(Iu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tu(){return ku||(ku=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Su=new WeakMap,Pu=new WeakMap,Cu=new WeakMap,Ou=new WeakMap,xu=new WeakMap;function Au(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(Lu(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Su.set(t,e)})).catch((()=>{})),xu.set(t,e),t}function Fu(e){if(Pu.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));Pu.set(e,t)}let Ru={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pu.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cu.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lu(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Nu(e){Ru=e(Ru)}function Du(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?Tu().includes(e)?function(...t){return e.apply(Mu(this),t),Lu(Su.get(this))}:function(...t){return Lu(e.apply(Mu(this),t))}:function(t,...n){const i=e.call(Mu(this),t,...n);return Cu.set(i,t.sort?t.sort():[t]),Lu(i)}}function ju(e){return"function"===typeof e?Du(e):(e instanceof IDBTransaction&&Fu(e),_u(e,Eu())?new Proxy(e,Ru):e)}function Lu(e){if(e instanceof IDBRequest)return Au(e);if(Ou.has(e))return Ou.get(e);const t=ju(e);return t!==e&&(Ou.set(e,t),xu.set(t,e)),t}const Mu=e=>xu.get(e);function Uu(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(e,t),a=Lu(s);return i&&s.addEventListener("upgradeneeded",(e=>{i(Lu(s.result),e.oldVersion,e.newVersion,Lu(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const qu=["get","getKey","getAll","getAllKeys","count"],Vu=["put","add","delete","clear"],Bu=new Map;function Zu(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Bu.get(t))return Bu.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Vu.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!qu.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let s=o.store;return i&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&o.done]))[0]};return Bu.set(t,o),o}Nu((e=>({...e,get:(t,n,i)=>Zu(t,n)||e.get(t,n,i),has:(t,n)=>!!Zu(t,n)||e.has(t,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $u{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map((e=>{if(zu(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}function zu(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}const Hu="@firebase/app",Ku="0.9.9",Gu=new vu("@firebase/app"),Wu="@firebase/app-compat",Qu="@firebase/analytics-compat",Ju="@firebase/analytics",Yu="@firebase/app-check-compat",Xu="@firebase/app-check",el="@firebase/auth",tl="@firebase/auth-compat",nl="@firebase/database",il="@firebase/database-compat",rl="@firebase/functions",ol="@firebase/functions-compat",sl="@firebase/installations",al="@firebase/installations-compat",cl="@firebase/messaging",ul="@firebase/messaging-compat",ll="@firebase/performance",hl="@firebase/performance-compat",dl="@firebase/remote-config",fl="@firebase/remote-config-compat",pl="@firebase/storage",ml="@firebase/storage-compat",gl="@firebase/firestore",yl="@firebase/firestore-compat",vl="firebase",bl="9.21.0",wl="[DEFAULT]",_l={[Hu]:"fire-core",[Wu]:"fire-core-compat",[Ju]:"fire-analytics",[Qu]:"fire-analytics-compat",[Xu]:"fire-app-check",[Yu]:"fire-app-check-compat",[el]:"fire-auth",[tl]:"fire-auth-compat",[nl]:"fire-rtdb",[il]:"fire-rtdb-compat",[rl]:"fire-fn",[ol]:"fire-fn-compat",[sl]:"fire-iid",[al]:"fire-iid-compat",[cl]:"fire-fcm",[ul]:"fire-fcm-compat",[ll]:"fire-perf",[hl]:"fire-perf-compat",[dl]:"fire-rc",[fl]:"fire-rc-compat",[pl]:"fire-gcs",[ml]:"fire-gcs-compat",[gl]:"fire-fst",[yl]:"fire-fst-compat","fire-js":"fire-js",[vl]:"fire-js-all"},Il=new Map,kl=new Map;function El(e,t){try{e.container.addComponent(t)}catch(n){Gu.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Tl(e,t){e.container.addOrOverwriteComponent(t)}function Sl(e){const t=e.name;if(kl.has(t))return Gu.debug(`There were multiple attempts to register component ${t}.`),!1;kl.set(t,e);for(const n of Il.values())El(n,e);return!0}function Pl(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cl(e,t,n=wl){Pl(e,t).clearInstance(n)}function Ol(){kl.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Al=new zc("app","Firebase",xl);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fl{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new su("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Al.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=bl;function Nl(e,t={}){let n=e;if("object"!==typeof t){const e=t;t={name:e}}const i=Object.assign({name:wl,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Al.create("bad-app-name",{appName:String(r)});if(n||(n=Oc()),!n)throw Al.create("no-options");const o=Il.get(r);if(o){if(Qc(n,o.options)&&Qc(i,o.config))return o;throw Al.create("duplicate-app",{appName:r})}const s=new hu(r);for(const c of kl.values())s.addComponent(c);const a=new Fl(n,i,s);return Il.set(r,a),a}function Dl(e=wl){const t=Il.get(e);if(!t&&e===wl)return Nl();if(!t)throw Al.create("no-app",{appName:e});return t}function jl(){return Array.from(Il.values())}async function Ll(e){const t=e.name;Il.has(t)&&(Il.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ml(e,t,n){var i;let r=null!==(i=_l[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=[`Unable to register library "${r}" with version "${t}":`];return o&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Gu.warn(e.join(" "))}Sl(new su(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}function Ul(e,t){if(null!==e&&"function"!==typeof e)throw Al.create("invalid-log-argument");wu(e,t)}function ql(e){bu(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="firebase-heartbeat-database",Bl=1,Zl="firebase-heartbeat-store";let $l=null;function zl(){return $l||($l=Uu(Vl,Bl,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Zl)}}}).catch((e=>{throw Al.create("idb-open",{originalErrorMessage:e.message})}))),$l}async function Hl(e){try{const t=await zl();return t.transaction(Zl).objectStore(Zl).get(Gl(e))}catch(t){if(t instanceof $c)Gu.warn(t.message);else{const e=Al.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Gu.warn(e.message)}}}async function Kl(e,t){try{const n=await zl(),i=n.transaction(Zl,"readwrite"),r=i.objectStore(Zl);return await r.put(t,Gl(e)),i.done}catch(n){if(n instanceof $c)Gu.warn(n.message);else{const e=Al.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Gu.warn(e.message)}}}function Gl(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=1024,Ql=2592e6;class Jl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eh(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=Yl();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf(),n=Date.now();return n-t<=Ql})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Yl(),{heartbeatsToSend:t,unsentEntries:n}=Xl(this._heartbeatsCache.heartbeats),i=vc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Yl(){const e=new Date;return e.toISOString().substring(0,10)}function Xl(e,t=Wl){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),th(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),th(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Vc()&&Bc().then((()=>!0)).catch((()=>!1))}async read(){const e=await this._canUseIndexedDBPromise;if(e){const e=await Hl(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Kl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Kl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function th(e){return vc(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(e){Sl(new su("platform-logger",(e=>new $u(e)),"PRIVATE")),Sl(new su("heartbeat",(e=>new Jl(e)),"PRIVATE")),Ml(Hu,Ku,e),Ml(Hu,Ku,"esm2017"),Ml("fire-js","")}nh("");var ih="firebase",rh="9.21.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ml(ih,rh,"app");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oh{constructor(e,t){this._delegate=e,this.firebase=t,El(e,new su("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ll(this._delegate))))}_getService(e,t=wl){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=wl){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){El(this._delegate,e)}_addOrOverwriteComponent(e){Tl(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},ah=new zc("app-compat","Firebase",sh);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ch(e){const t={},n={__esModule:!0,initializeApp:s,app:o,registerVersion:Ml,setLogLevel:ql,onLog:Ul,apps:null,SDK_VERSION:Rl,INTERNAL:{registerComponent:c,removeApp:i,useAsService:u,modularAPIs:r}};function i(e){delete t[e]}function o(e){if(e=e||wl,!Gc(t,e))throw ah.create("no-app",{appName:e});return t[e]}function s(i,r={}){const o=Nl(i,r);if(Gc(t,o.name))return t[o.name];const s=new e(o,n);return t[o.name]=s,s}function a(){return Object.keys(t).map((e=>t[e]))}function c(t){const i=t.name,r=i.replace("-compat","");if(Sl(t)&&"PUBLIC"===t.type){const s=(e=o())=>{if("function"!==typeof e[r])throw ah.create("invalid-app-argument",{appName:i});return e[r]()};void 0!==t.serviceProps&&wc(s,t.serviceProps),n[r]=s,e.prototype[r]=function(...e){const n=this._getService.bind(this,i);return n.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[r]:null}function u(e,t){if("serverAuth"===t)return null;const n=t;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:a}),o["App"]=e,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(){const e=ch(oh);function t(t){wc(e,t)}return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:uh,extendNamespace:t,createSubscribe:tu,ErrorFactory:zc,deepExtend:wc}),e}const lh=uh(),hh=new vu("@firebase/app-compat"),dh="@firebase/app-compat",fh="0.2.9";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ph(e){Ml(dh,fh,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(jc()&&void 0!==self.firebase){hh.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&hh.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const mh=lh;ph();var gh="firebase",yh="9.21.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
mh.registerVersion(gh,yh,"app-compat");function vh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},wh={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _h(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function Ih(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kh=_h,Eh=Ih,Th=new zc("auth","Firebase",Ih()),Sh=new vu("@firebase/auth");function Ph(e,...t){Sh.logLevel<=fu.WARN&&Sh.warn(`Auth (${Rl}): ${e}`,...t)}function Ch(e,...t){Sh.logLevel<=fu.ERROR&&Sh.error(`Auth (${Rl}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e,...t){throw Rh(e,...t)}function xh(e,...t){return Rh(e,...t)}function Ah(e,t,n){const i=Object.assign(Object.assign({},Eh()),{[t]:n}),r=new zc("auth","Firebase",i);return r.create(t,{appName:e.name})}function Fh(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&Oh(e,"argument-error"),Ah(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rh(e,...t){if("string"!==typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Th.create(e,...t)}function Nh(e,t,...n){if(!e)throw Rh(t,...n)}function Dh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ch(t),new Error(t)}function jh(e,t){e||Dh(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mh(){return"http:"===Uh()||"https:"===Uh()}function Uh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mh()||Lc()||"connection"in navigator))||navigator.onLine}function Vh(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.shortDelay=e,this.longDelay=t,jh(t>e,"Short delay should be less than long delay!"),this.isMobile=Nc()||Mc()}get(){return qh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(e,t){jh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Dh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Dh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Dh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},Hh=new Bh(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gh(e,t,n,i,r={}){return Wh(e,r,(async()=>{let r={},o={};i&&("GET"===t?o=i:r={body:JSON.stringify(i)});const s=Yc(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),$h.fetch()(Jh(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Wh(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},zh),t);try{const t=new Yh(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Xh(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xh(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Xh(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Xh(e,"user-disabled",o);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ah(e,a,s);Oh(e,a)}}catch(r){if(r instanceof $c)throw r;Oh(e,"network-request-failed",{message:String(r)})}}async function Qh(e,t,n,i,r={}){const o=await Gh(e,t,n,i,r);return"mfaPendingCredential"in o&&Oh(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Jh(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Zh(e.config,r):`${e.config.apiScheme}://${r}`}class Yh{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(xh(this.auth,"network-request-failed"))),Hh.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xh(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=xh(e,t,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(e,t){return Gh(e,"POST","/v1/accounts:delete",t)}async function td(e,t){return Gh(e,"POST","/v1/accounts:update",t)}async function nd(e,t){return Gh(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(e,t=!1){const n=ou(e),i=await n.getIdToken(t),r=sd(i);Nh(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"===typeof r.firebase?r.firebase:void 0,s=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:r,token:i,authTime:id(od(r.auth_time)),issuedAtTime:id(od(r.iat)),expirationTime:id(od(r.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function od(e){return 1e3*Number(e)}function sd(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const e=bc(n);return e?JSON.parse(e):(Ch("Failed to decode base64 JWT payload"),null)}catch(r){return Ch("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function ad(e){const t=sd(e);return Nh(t,"internal-error"),Nh("undefined"!==typeof t.exp,"internal-error"),Nh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof $c&&ud(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function ud({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(e){var t;const n=e.auth,i=await e.getIdToken(),r=await cd(e,nd(n,{idToken:i}));Nh(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const o=r.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?md(o.providerUserInfo):[],a=pd(e.providerData,s),c=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),l=!!c&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hd(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,h)}async function fd(e){const t=ou(e);await dd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function pd(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}function md(e){return e.map((e=>{var{providerId:t}=e,n=vh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(e,t){const n=await Wh(e,{},(async()=>{const n=Yc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=Jh(e,i,"/v1/token",`key=${r}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",$h.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Nh(e.idToken,"internal-error"),Nh("undefined"!==typeof e.idToken,"internal-error"),Nh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ad(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Nh(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await gd(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,o=new yd;return n&&(Nh("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),i&&(Nh("string"===typeof i,"internal-error",{appName:e}),o.accessToken=i),r&&(Nh("number"===typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yd,this.toJSON())}_performRefresh(){return Dh("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(e,t){Nh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class bd{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=vh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ld(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new hd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await cd(this,this.stsTokenManager.getToken(this.auth,e));return Nh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rd(this,e)}reload(){return fd(this)}_assign(e){this!==e&&(Nh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Nh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await cd(this,ed(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,o,s,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:I}=t;Nh(v&&I,e,"internal-error");const k=yd.fromJSON(this.name,I);Nh("string"===typeof v,e,"internal-error"),vd(l,e.name),vd(h,e.name),Nh("boolean"===typeof b,e,"internal-error"),Nh("boolean"===typeof w,e,"internal-error"),vd(d,e.name),vd(f,e.name),vd(p,e.name),vd(m,e.name),vd(g,e.name),vd(y,e.name);const E=new bd({uid:v,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const i=new yd;i.updateFromServerResponse(t);const r=new bd({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await dd(r),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map;function _d(e){jh(e instanceof Function,"Expected a class definition");let t=wd.get(e);return t?(jh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wd.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Id.type="NONE";const kd=Id;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e,t,n){return`firebase:${e}:${t}:${n}`}class Td{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Ed(this.userKey,i.apiKey,r),this.fullPersistenceKey=Ed("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Td(_d(kd),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||_d(kd);const o=Ed(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=bd._fromJSON(e,t);c!==r&&(s=n),r=c;break}}catch(wR){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],s&&await r._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(o)}catch(wR){}}))),new Td(r,e,n)):new Td(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fd(t))return"Blackberry";if(Rd(t))return"Webos";if(Cd(t))return"Safari";if((t.includes("chrome/")||Od(t))&&!t.includes("edge/"))return"Chrome";if(Ad(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pd(e=Rc()){return/firefox\//i.test(e)}function Cd(e=Rc()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Od(e=Rc()){return/crios\//i.test(e)}function xd(e=Rc()){return/iemobile/i.test(e)}function Ad(e=Rc()){return/android/i.test(e)}function Fd(e=Rc()){return/blackberry/i.test(e)}function Rd(e=Rc()){return/webos/i.test(e)}function Nd(e=Rc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Dd(e=Rc()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function jd(e=Rc()){var t;return Nd(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function Ld(){return Uc()&&10===document.documentMode}function Md(e=Rc()){return Nd(e)||Ad(e)||Rd(e)||Fd(e)||/windows phone/i.test(e)||xd(e)}function Ud(){try{return!(!window||window===window.top)}catch(e){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(e,t=[]){let n;switch(e){case"Browser":n=Sd(Rc());break;case"Worker":n=`${Sd(Rc())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rl}/${i}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(e){return(await Gh(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Bd(e,t){return Gh(e,"GET","/v2/recaptchaConfig",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(e){return void 0!==e&&void 0!==e.getResponse}function $d(e){return void 0!==e&&void 0!==e.enterprise}class zd{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}function Kd(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=xh("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",Hd().appendChild(i)}))}function Gd(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Wd="https://www.google.com/recaptcha/enterprise.js?render=",Qd="recaptcha-enterprise",Jd="NO_RECAPTCHA";class Yd{constructor(e){this.type=Qd,this.auth=nf(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new zd(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))}function i(t,n,i){const r=window.grecaptcha;$d(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Jd)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{n(this.auth).then((n=>{if(!t&&$d(window.grecaptcha))i(n,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Kd(Wd+n).then((()=>{i(n,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Xd(e,t,n,i=!1){const r=new Yd(e);let o;try{o=await r.verify(n)}catch(a){o=await r.verify(n,!0)}const s=Object.assign({},t);return i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{const i=e(t);n(i)}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rf(this),this.idTokenSubscription=new rf(this),this.beforeStateQueue=new ef(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Th,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_d(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Td.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===i||void 0===i?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dd(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vh()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ou(e):null;return t&&Nh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Nh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_d(e))}))}async initializeRecaptchaConfig(){const e=await Bd(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new zd(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){const e=new Yd(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_d(e)||this._popupRedirectResolver;Nh(t,this,"argument-error"),this.redirectPersistenceManager=await Td.create(this,[_d(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Nh(o,this,"internal-error"),o.then((()=>r(this.currentUser))),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Nh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&Ph(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function nf(e){return ou(e)}class rf{constructor(e){this.auth=e,this.observer=null,this.addObserver=tu((e=>this.observer=e))}get next(){return Nh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(e,t){const n=Pl(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if(Qc(i,null!==t&&void 0!==t?t:{}))return e;Oh(e,"already-initialized")}const i=n.initialize({options:t});return i}function sf(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_d);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}function af(e,t,n){const i=nf(e);Nh(i._canInitEmulator,i,"emulator-config-failed"),Nh(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),o=cf(t),{host:s,port:a}=uf(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${o}//${s}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||hf()}function cf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uf(e){const t=cf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:lf(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:lf(t)}}}function lf(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function hf(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dh("not implemented")}_getIdTokenResponse(e){return Dh("not implemented")}_linkToIdToken(e,t){return Dh("not implemented")}_getReauthenticationResolver(e){return Dh("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(e,t){return Gh(e,"POST","/v1/accounts:resetPassword",Kh(e,t))}async function pf(e,t){return Gh(e,"POST","/v1/accounts:update",t)}async function mf(e,t){return Gh(e,"POST","/v1/accounts:update",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(e,t){return Qh(e,"POST","/v1/accounts:signInWithPassword",Kh(e,t))}async function yf(e,t){return Gh(e,"POST","/v1/accounts:sendOobCode",Kh(e,t))}async function vf(e,t){return yf(e,t)}async function bf(e,t){return yf(e,t)}async function wf(e,t){return yf(e,t)}async function _f(e,t){return yf(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(e,t){return Qh(e,"POST","/v1/accounts:signInWithEmailLink",Kh(e,t))}async function kf(e,t){return Qh(e,"POST","/v1/accounts:signInWithEmailLink",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends df{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ef(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ef(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Xd(e,n,"signInWithPassword");return gf(e,t)}return gf(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Xd(e,n,"signInWithPassword");return gf(e,t)}return Promise.reject(t)}));case"emailLink":return If(e,{email:this._email,oobCode:this._password});default:Oh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return pf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return kf(e,{idToken:t,email:this._email,oobCode:this._password});default:Oh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tf(e,t){return Qh(e,"POST","/v1/accounts:signInWithIdp",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="http://localhost";class Pf extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Oh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=vh(t,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Pf(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Tf(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tf(e,t)}buildRequest(){const e={requestUri:Sf,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t["id_token"]=this.idToken),this.accessToken&&(t["access_token"]=this.accessToken),this.secret&&(t["oauth_token_secret"]=this.secret),t["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(t["nonce"]=this.nonce),e.postBody=Yc(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(e,t){return Gh(e,"POST","/v1/accounts:sendVerificationCode",Kh(e,t))}async function Of(e,t){return Qh(e,"POST","/v1/accounts:signInWithPhoneNumber",Kh(e,t))}async function xf(e,t){const n=await Qh(e,"POST","/v1/accounts:signInWithPhoneNumber",Kh(e,t));if(n.temporaryProof)throw Xh(e,"account-exists-with-different-credential",n);return n}const Af={["USER_NOT_FOUND"]:"user-not-found"};async function Ff(e,t){const n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return Qh(e,"POST","/v1/accounts:signInWithPhoneNumber",Kh(e,n),Af)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends df{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Rf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Rf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Of(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return xf(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Ff(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Rf({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Df(e){const t=Xc(eu(e))["link"],n=t?Xc(eu(t))["deep_link_id"]:null,i=Xc(eu(e))["deep_link_id"],r=i?Xc(eu(i))["link"]:null;return r||i||n||t||e}class jf{constructor(e){var t,n,i,r,o,s;const a=Xc(eu(e)),c=null!==(t=a["apiKey"])&&void 0!==t?t:null,u=null!==(n=a["oobCode"])&&void 0!==n?n:null,l=Nf(null!==(i=a["mode"])&&void 0!==i?i:null);Nh(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(r=a["continueUrl"])&&void 0!==r?r:null,this.languageCode=null!==(o=a["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(s=a["tenantId"])&&void 0!==s?s:null}static parseLink(e){const t=Df(e);try{return new jf(t)}catch(wR){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lf{constructor(){this.providerId=Lf.PROVIDER_ID}static credential(e,t){return Ef._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=jf.parseLink(t);return Nh(n,"argument-error"),Ef._fromEmailAndCode(e,n.code,n.tenantId)}}Lf.PROVIDER_ID="password",Lf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Mf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qf extends Uf{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Nh("providerId"in t&&"signInMethod"in t,"argument-error"),Pf._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Nh(e.idToken||e.accessToken,"argument-error"),Pf._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:o,providerId:s}=e;if(!n&&!i&&!t&&!r)return null;if(!s)return null;try{return new qf(s)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:r})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Uf{constructor(){super("facebook.com")}static credential(e){return Pf._fromParams({providerId:Vf.PROVIDER_ID,signInMethod:Vf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vf.credentialFromTaggedObject(e)}static credentialFromError(e){return Vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Vf.credential(e.oauthAccessToken)}catch(wR){return null}}}Vf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Vf.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bf extends Uf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pf._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Bf.credential(t,n)}catch(wR){return null}}}Bf.GOOGLE_SIGN_IN_METHOD="google.com",Bf.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zf extends Uf{constructor(){super("github.com")}static credential(e){return Pf._fromParams({providerId:Zf.PROVIDER_ID,signInMethod:Zf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zf.credentialFromTaggedObject(e)}static credentialFromError(e){return Zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Zf.credential(e.oauthAccessToken)}catch(wR){return null}}}Zf.GITHUB_SIGN_IN_METHOD="github.com",Zf.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $f="http://localhost";class zf extends df{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Tf(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tf(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new zf(n,r):null}static _create(e,t){return new zf(e,t)}buildRequest(){return{requestUri:$f,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="saml.";class Kf extends Mf{constructor(e){Nh(e.startsWith(Hf),"argument-error"),super(e)}static credentialFromResult(e){return Kf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Kf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=zf.fromJSON(e);return Nh(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return zf._create(n,t)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends Uf{constructor(){super("twitter.com")}static credential(e,t){return Pf._fromParams({providerId:Gf.PROVIDER_ID,signInMethod:Gf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gf.credentialFromTaggedObject(e)}static credentialFromError(e){return Gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Gf.credential(t,n)}catch(wR){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Wf(e,t){return Qh(e,"POST","/v1/accounts:signUp",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gf.TWITTER_SIGN_IN_METHOD="twitter.com",Gf.PROVIDER_ID="twitter.com";class Qf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await bd._fromIdTokenResponse(e,n,i),o=Jf(n),s=new Qf({user:r,providerId:o,_tokenResponse:n,operationType:t});return s}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Jf(n);return new Qf({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Jf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(e){var t;const n=nf(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Qf({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Wf(n,{returnSecureToken:!0}),r=await Qf._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends $c{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Xf.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Xf(e,t,n,i)}}function ep(e,t,n,i){const r="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return r.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Xf._fromErrorAndOperation(e,n,t,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(e,t){const n=ou(e);await rp(!0,n,t);const{providerUserInfo:i}=await td(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=tp(i||[]);return n.providerData=n.providerData.filter((e=>r.has(e.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ip(e,t,n=!1){const i=await cd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qf._forOperation(e,"link",i)}async function rp(e,t,n){await dd(t);const i=tp(t.providerData),r=!1===e?"provider-already-linked":"no-such-provider";Nh(i.has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const o=await cd(e,ep(i,r,t,e),n);Nh(o.idToken,i,"internal-error");const s=sd(o.idToken);Nh(s,i,"internal-error");const{sub:a}=s;return Nh(e.uid===a,i,"user-mismatch"),Qf._forOperation(e,r,o)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&Oh(i,"user-mismatch"),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(e,t,n=!1){const i="signIn",r=await ep(e,i,t),o=await Qf._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(o.user),o}async function ap(e,t){return sp(nf(e),t)}async function cp(e,t){const n=ou(e);return await rp(!1,n,t.providerId),ip(n,t)}async function up(e,t){return op(ou(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(e,t){return Qh(e,"POST","/v1/accounts:signInWithCustomToken",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(e,t){const n=nf(e),i=await lp(n,{token:t,returnSecureToken:!0}),r=await Qf._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?fp._fromServerResponse(e,t):"totpInfo"in t?pp._fromServerResponse(e,t):Oh(e,"internal-error")}}class fp extends dp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new fp(t)}}class pp extends dp{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new pp(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(e,t,n){var i;Nh((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),Nh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Nh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Nh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(e,t,n){var i;const r=nf(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xd(r,o,"getOobCode",!0);n&&mp(r,e,n),await bf(r,e)}else n&&mp(r,o,n),await bf(r,o).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Xd(r,o,"getOobCode",!0);n&&mp(r,e,n),await bf(r,e)}}))}async function yp(e,t,n){await ff(ou(e),{oobCode:t,newPassword:n})}async function vp(e,t){await mf(ou(e),{oobCode:t})}async function bp(e,t){const n=ou(e),i=await ff(n,{oobCode:t}),r=i.requestType;switch(Nh(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Nh(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Nh(i.mfaInfo,n,"internal-error");default:Nh(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=dp._fromServerResponse(nf(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}async function wp(e,t){const{data:n}=await bp(ou(e),t);return n.email}async function _p(e,t,n){var i;const r=nf(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let s;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xd(r,o,"signUpPassword");s=Wf(r,e)}else s=Wf(r,o).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Xd(r,o,"signUpPassword");return Wf(r,e)}return Promise.reject(e)}));const a=await s.catch((e=>Promise.reject(e))),c=await Qf._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Ip(e,t,n){return ap(ou(e),Lf.credential(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(e,t,n){var i;const r=nf(e),o={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function s(e,t){Nh(t.handleCodeInApp,r,"argument-error"),t&&mp(r,e,t)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xd(r,o,"getOobCode",!0);s(e,n),await wf(r,e)}else s(o,n),await wf(r,o).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Xd(r,o,"getOobCode",!0);s(e,n),await wf(r,e)}}))}function Ep(e,t){const n=jf.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function Tp(e,t,n){const i=ou(e),r=Lf.credentialWithLink(t,n||Lh());return Nh(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ap(i,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(e,t){return Gh(e,"POST","/v1/accounts:createAuthUri",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(e,t){const n=Mh()?Lh():"http://localhost",i={identifier:t,continueUri:n},{signinMethods:r}=await Sp(ou(e),i);return r||[]}async function Cp(e,t){const n=ou(e),i=await e.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:i};t&&mp(n.auth,r,t);const{email:o}=await vf(n.auth,r);o!==e.email&&await e.reload()}async function Op(e,t,n){const i=ou(e),r=await e.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:t};n&&mp(i.auth,o,n);const{email:s}=await _f(i.auth,o);s!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xp(e,t){return Gh(e,"POST","/v1/accounts:update",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ap(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=ou(e),r=await i.getIdToken(),o={idToken:r,displayName:t,photoUrl:n,returnSecureToken:!0},s=await cd(i,xp(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function Fp(e,t){return Np(ou(e),t,null)}function Rp(e,t){return Np(ou(e),null,t)}async function Np(e,t,n){const{auth:i}=e,r=await e.getIdToken(),o={idToken:r,returnSecureToken:!0};t&&(o.email=t),n&&(o.password=n);const s=await cd(e,pf(i,o));await e._updateTokensIfNecessary(s,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null===e||void 0===e?void 0:e.idToken)){const i=null===(n=null===(t=sd(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const e="anonymous"!==i&&"custom"!==i?i:null;return new jp(o,e)}}if(!i)return null;switch(i){case"facebook.com":return new Mp(o,r);case"github.com":return new Up(o,r);case"google.com":return new qp(o,r);case"twitter.com":return new Vp(o,r,e.screenName||null);case"custom":case"anonymous":return new jp(o,null);default:return new jp(o,i,r)}}class jp{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Lp extends jp{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Mp extends jp{constructor(e,t){super(e,"facebook.com",t)}}class Up extends Lp{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class qp extends jp{constructor(e,t){super(e,"google.com",t)}}class Vp extends Lp{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Bp(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Dp(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(e,t,n,i){return ou(e).onIdTokenChanged(t,n,i)}function $p(e,t,n){return ou(e).beforeAuthStateChanged(t,n)}function zp(e,t,n,i){return ou(e).onAuthStateChanged(t,n,i)}class Hp{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new Hp("enroll",e,t)}static _fromMfaPendingCredential(e){return new Hp("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Hp._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Hp._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=nf(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map((e=>dp._fromServerResponse(n,e)));Nh(i.mfaPendingCredential,n,"internal-error");const o=Hp._fromMfaPendingCredential(i.mfaPendingCredential);return new Kp(o,r,(async e=>{const r=await e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await Qf._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Nh(t.user,n,"internal-error"),Qf._forOperation(t.user,t.operationType,s);default:Oh(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Gp(e,t){var n;const i=ou(e),r=t;return Nh(t.customData.operationType,i,"argument-error"),Nh(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Kp._fromError(i,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(e,t){return Gh(e,"POST","/v2/accounts/mfaEnrollment:start",Kh(e,t))}function Qp(e,t){return Gh(e,"POST","/v2/accounts/mfaEnrollment:finalize",Kh(e,t))}function Jp(e,t){return Gh(e,"POST","/v2/accounts/mfaEnrollment:start",Kh(e,t))}function Yp(e,t){return Gh(e,"POST","/v2/accounts/mfaEnrollment:finalize",Kh(e,t))}function Xp(e,t){return Gh(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Kh(e,t))}class em{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>dp._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new em(e)}async getSession(){return Hp._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,i=await this.getSession(),r=await cd(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await cd(this.user,Xp(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(i){throw i}}}const tm=new WeakMap;function nm(e){const t=ou(e);return tm.has(t)||tm.set(t,em._fromUser(t)),tm.get(t)}const im="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch(wR){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){const e=Rc();return Cd(e)||Nd(e)}const sm=1e3,am=10;class cm extends rm{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=om()&&Ud(),this.fallbackToPolling=Md(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Ld()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,am):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),sm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cm.type="LOCAL";const um=cm;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends rm{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lm.type="SESSION";const hm=lm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(e){return Promise.all(e.map((async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new fm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map((async e=>e(t.origin,r))),a=await dm(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pm(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fm.receivers=[];class mm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise(((s,a)=>{const c=pm("",20);i.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),s(t.data.response);break;default:clearTimeout(u),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){return window}function ym(e){gm().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){return"undefined"!==typeof gm()["WorkerGlobalScope"]&&"function"===typeof gm()["importScripts"]}async function bm(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const e=await navigator.serviceWorker.ready;return e.active}catch(wR){return null}}function wm(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function _m(){return vm()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="firebaseLocalStorageDb",km=1,Em="firebaseLocalStorage",Tm="fbase_key";class Sm{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Pm(e,t){return e.transaction([Em],t?"readwrite":"readonly").objectStore(Em)}function Cm(){const e=indexedDB.deleteDatabase(Im);return new Sm(e).toPromise()}function Om(){const e=indexedDB.open(Im,km);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Em,{keyPath:Tm})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Em)?t(n):(n.close(),await Cm(),t(await Om()))}))}))}async function xm(e,t,n){const i=Pm(e,!0).put({[Tm]:t,value:n});return new Sm(i).toPromise()}async function Am(e,t){const n=Pm(e,!1).get(t),i=await new Sm(n).toPromise();return void 0===i?null:i.value}function Fm(e,t){const n=Pm(e,!0).delete(t);return new Sm(n).toPromise()}const Rm=800,Nm=3;class Dm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Om()),this.db}async _withRetries(e){let t=0;while(1)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>Nm)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(_m()),this.receiver._subscribe("keyChanged",(async(e,t)=>{const n=await this._poll();return{keyProcessed:n.includes(t.key)}})),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await bm(),!this.activeServiceWorker)return;this.sender=new mm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&wm()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(wR){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await xm(e,im,"1"),await Fm(e,im),!0}catch(wR){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>xm(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>Am(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Fm(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Pm(e,!1).getAll();return new Sm(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Rm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Dm.type="LOCAL";const jm=Dm;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e,t){return Gh(e,"POST","/v2/accounts/mfaSignIn:start",Kh(e,t))}function Mm(e,t){return Gh(e,"POST","/v2/accounts/mfaSignIn:finalize",Kh(e,t))}function Um(e,t){return Gh(e,"POST","/v2/accounts/mfaSignIn:finalize",Kh(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=500,Vm=6e4,Bm=1e12;class Zm{constructor(e){this.auth=e,this.counter=Bm,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new $m(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Bm;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Bm;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Bm;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class $m{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof e?document.getElementById(e):e;Nh(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=zm(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),Vm)}),qm))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function zm(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=Gd("rcb"),Km=new Bh(3e4,6e4),Gm="https://www.google.com/recaptcha/api.js?";class Wm{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=gm().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return Nh(Qm(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Zd(gm().grecaptcha)?Promise.resolve(gm().grecaptcha):new Promise(((n,i)=>{const r=gm().setTimeout((()=>{i(xh(e,"network-request-failed"))}),Km.get());gm()[Hm]=()=>{gm().clearTimeout(r),delete gm()[Hm];const o=gm().grecaptcha;if(!o||!Zd(o))return void i(xh(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};const o=`${Gm}?${Yc({onload:Hm,render:"explicit",hl:t})}`;Kd(o).catch((()=>{clearTimeout(r),i(xh(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=gm().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Qm(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class Jm{async load(e){return new Zm(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="recaptcha",Xm={theme:"light",type:"image"};class eg{constructor(e,t=Object.assign({},Xm),n){this.parameters=t,this.type=Ym,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nf(n),this.isInvisible="invisible"===this.parameters.size,Nh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof e?document.getElementById(e):e;Nh(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jm:new Wm,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Nh(!this.parameters.sitekey,this.auth,"argument-error"),Nh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=gm()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Nh(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Nh(Mh()&&!vm(),this.auth,"internal-error"),await tg(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Vd(this.auth);Nh(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Nh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function tg(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Rf._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ig(e,t,n){const i=nf(e),r=await sg(i,t,ou(n));return new ng(r,(e=>ap(i,e)))}async function rg(e,t,n){const i=ou(e);await rp(!1,i,"phone");const r=await sg(i.auth,t,ou(n));return new ng(r,(e=>cp(i,e)))}async function og(e,t,n){const i=ou(e),r=await sg(i.auth,t,ou(n));return new ng(r,(e=>up(i,e)))}async function sg(e,t,n){var i;const r=await n.verify();try{let o;if(Nh("string"===typeof r,e,"argument-error"),Nh(n.type===Ym,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Nh("enroll"===t.type,e,"internal-error");const n=await Wp(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Nh("signin"===t.type,e,"internal-error");const n=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid;Nh(n,e,"missing-multi-factor-info");const s=await Lm(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await Cf(e,{phoneNumber:o.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}async function ag(e,t){await ip(ou(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.providerId=cg.PROVIDER_ID,this.auth=nf(e)}verifyPhoneNumber(e,t){return sg(this.auth,e,ou(t))}static credential(e,t){return Rf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return cg.credentialFromTaggedObject(t)}static credentialFromError(e){return cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Rf._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ug(e,t){return t?_d(t):(Nh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cg.PROVIDER_ID="phone",cg.PHONE_SIGN_IN_METHOD="phone";class lg extends df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hg(e){return sp(e.auth,new lg(e),e.bypassAuthState)}function dg(e){const{auth:t,user:n}=e;return Nh(n,t,"internal-error"),op(n,new lg(e),e.bypassAuthState)}async function fg(e){const{auth:t,user:n}=e;return Nh(n,t,"internal-error"),ip(n,new lg(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hg;case"linkViaPopup":case"linkViaRedirect":return fg;case"reauthViaPopup":case"reauthViaRedirect":return dg;default:Oh(this.auth,"internal-error")}}resolve(e){jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Bh(2e3,1e4);async function gg(e,t,n){const i=nf(e);Fh(e,t,Mf);const r=ug(i,n),o=new bg(i,"signInViaPopup",t,r);return o.executeNotNull()}async function yg(e,t,n){const i=ou(e);Fh(i.auth,t,Mf);const r=ug(i.auth,n),o=new bg(i.auth,"reauthViaPopup",t,r,i);return o.executeNotNull()}async function vg(e,t,n){const i=ou(e);Fh(i.auth,t,Mf);const r=ug(i.auth,n),o=new bg(i.auth,"linkViaPopup",t,r,i);return o.executeNotNull()}class bg extends pg{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,bg.currentPopupAction&&bg.currentPopupAction.cancel(),bg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Nh(e,this.auth,"internal-error"),e}async onExecution(){jh(1===this.filter.length,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(xh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(xh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(xh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,mg.get())};e()}}bg.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wg="pendingRedirect",_g=new Map;class Ig extends pg{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_g.get(this.auth._key());if(!e){try{const t=await kg(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_g.set(this.auth._key(),e)}return this.bypassAuthState||_g.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function kg(e,t){const n=Cg(t),i=Pg(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function Eg(e,t){return Pg(e)._set(Cg(t),"true")}function Tg(){_g.clear()}function Sg(e,t){_g.set(e._key(),t)}function Pg(e){return _d(e._redirectPersistence)}function Cg(e){return Ed(wg,e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e,t,n){return xg(e,t,n)}async function xg(e,t,n){const i=nf(e);Fh(e,t,Mf),await i._initializationPromise;const r=ug(i,n);return await Eg(r,i),r._openRedirect(i,t,"signInViaRedirect")}function Ag(e,t,n){return Fg(e,t,n)}async function Fg(e,t,n){const i=ou(e);Fh(i.auth,t,Mf),await i.auth._initializationPromise;const r=ug(i.auth,n);await Eg(r,i.auth);const o=await Lg(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",o)}function Rg(e,t,n){return Ng(e,t,n)}async function Ng(e,t,n){const i=ou(e);Fh(i.auth,t,Mf),await i.auth._initializationPromise;const r=ug(i.auth,n);await rp(!1,i,t.providerId),await Eg(r,i.auth);const o=await Lg(i);return r._openRedirect(i.auth,t,"linkViaRedirect",o)}async function Dg(e,t){return await nf(e)._initializationPromise,jg(e,t,!1)}async function jg(e,t,n=!1){const i=nf(e),r=ug(i,t),o=new Ig(i,r,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,t)),s}async function Lg(e){const t=pm(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=6e5;class Ug{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!Bg(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Vg(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(xh(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mg&&this.cachedEventUids.clear(),this.cachedEventUids.has(qg(e))}saveEventToCache(e){this.cachedEventUids.add(qg(e)),this.lastProcessedEventTime=Date.now()}}function qg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Vg({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}function Bg(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vg(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zg(e,t={}){return Gh(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zg=/^https?/;async function Hg(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Zg(e);for(const n of t)try{if(Kg(n))return}catch(wR){}Oh(e,"unauthorized-domain")}function Kg(e){const t=Lh(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!zg.test(n))return!1;if($g.test(e))return i===e;const r=e.replace(/\./g,"\\."),o=new RegExp("^(.+\\."+r+"|"+r+")$","i");return o.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Bh(3e4,6e4);function Wg(){const e=gm().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Qg(e){return new Promise(((t,n)=>{var i,r,o;function s(){Wg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wg(),n(xh(e,"network-request-failed"))},timeout:Gg.get()})}if(null===(r=null===(i=gm().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=gm().gapi)||void 0===o?void 0:o.load)){const t=Gd("iframefcb");return gm()[t]=()=>{gapi.load?s():n(xh(e,"network-request-failed"))},Kd(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}s()}})).catch((e=>{throw Jg=null,e}))}let Jg=null;function Yg(e){return Jg=Jg||Qg(e),Jg}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Bh(5e3,15e3),ey="__/auth/iframe",ty="emulator/auth/iframe",ny={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ry(e){const t=e.config;Nh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zh(t,ty):`https://${e.config.authDomain}/${ey}`,i={apiKey:t.apiKey,appName:e.name,v:Rl},r=iy.get(e.config.apiHost);r&&(i.eid=r);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Yc(i).slice(1)}`}async function oy(e){const t=await Yg(e),n=gm().gapi;return Nh(n,e,"internal-error"),t.open({where:document.body,url:ry(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ny,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=xh(e,"network-request-failed"),o=gm().setTimeout((()=>{i(r)}),Xg.get());function s(){gm().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{i(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ay=500,cy=600,uy="_blank",ly="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function dy(e,t,n,i=ay,r=cy){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},sy),{width:i.toString(),height:r.toString(),top:o,left:s}),u=Rc().toLowerCase();n&&(a=Od(u)?uy:n),Pd(u)&&(t=t||ly,c.scrollbars="yes");const l=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(jd(u)&&"_self"!==a)return fy(t||"",a),new hy(null);const h=window.open(t||"",a,l);Nh(h,e,"popup-blocked");try{h.focus()}catch(d){}return new hy(h)}function fy(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__/auth/handler",my="emulator/auth/handler",gy=encodeURIComponent("fac");async function yy(e,t,n,i,r,o){Nh(e.config.authDomain,e,"auth-domain-config-required"),Nh(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Rl,eventId:r};if(t instanceof Mf){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Wc(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Uf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?`#${gy}=${encodeURIComponent(c)}`:"";return`${vy(e)}?${Yc(a).slice(1)}${u}`}function vy({config:e}){return e.emulator?Zh(e,my):`https://${e.authDomain}/${py}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="webStorageSupport";class wy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hm,this._completeRedirectFn=jg,this._overrideRedirectResult=Sg}async _openPopup(e,t,n,i){var r;jh(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await yy(e,t,n,Lh(),i);return dy(e,o,pm())}async _openRedirect(e,t,n,i){await this._originValidation(e);const r=await yy(e,t,n,Lh(),i);return ym(r),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(jh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await oy(e),n=new Ug(e);return t.register("authEvent",(t=>{Nh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");const i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){const n=this.iframes[e._key()];n.send(by,{type:by},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[by];void 0!==r&&t(!!r),Oh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Md()||Cd()||Nd()}}const _y=wy;class Iy{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Dh("unexpected MultiFactorSessionType")}}}class ky extends Iy{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ky(e)}_finalizeEnroll(e,t,n){return Qp(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Mm(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ey{constructor(){}static assertion(e){return ky._fromCredential(e)}}Ey.FACTOR_ID="phone";class Ty{static assertionForEnrollment(e,t){return Sy._fromSecret(e,t)}static assertionForSignIn(e,t){return Sy._fromEnrollmentId(e,t)}static async generateSecret(e){const t=e;Nh("undefined"!==typeof t.auth,"internal-error");const n=await Jp(t.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Py._fromStartTotpMfaEnrollmentResponse(n,t.auth)}}Ty.FACTOR_ID="totp";class Sy extends Iy{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new Sy(t,void 0,e)}static _fromEnrollmentId(e,t){return new Sy(t,e)}async _finalizeEnroll(e,t,n){return Nh("undefined"!==typeof this.secret,e,"argument-error"),Yp(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Nh(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return Um(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Py{constructor(e,t,n,i,r,o,s){this.sessionInfo=o,this.auth=s,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Py(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(Cy(e)||Cy(t))&&(i=!0),i&&(Cy(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Cy(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Cy(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Oy="@firebase/auth",xy="0.23.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ay{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Nh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ry(e){Sl(new su("auth",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=i.options;Nh(s&&!s.includes(":"),"invalid-api-key",{appName:i.name}),Nh(!(null===a||void 0===a?void 0:a.includes(":")),"argument-error",{appName:i.name});const c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qd(e)},u=new tf(i,r,o,c);return sf(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{const i=e.getProvider("auth-internal");i.initialize()}))),Sl(new su("auth-internal",(e=>{const t=nf(e.getProvider("auth").getImmediate());return(e=>new Ay(e))(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ml(Oy,xy,Fy(e)),Ml(Oy,xy,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=300,Dy=xc("authIdTokenMaxAge")||Ny;let jy=null;const Ly=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Dy)return;const r=null===n||void 0===n?void 0:n.token;jy!==r&&(jy=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function My(e=Dl()){const t=Pl(e,"auth");if(t.isInitialized())return t.getImmediate();const n=of(e,{popupRedirectResolver:_y,persistence:[jm,um,hm]}),i=xc("authTokenSyncURL");if(i){const e=Ly(i);$p(n,e,(()=>e(n.currentUser))),Zp(n,(t=>e(t)))}const r=Pc("auth");return r&&af(n,`http://${r}`),n}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uy(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ry("Browser");const qy=2e3;async function Vy(e,t,n){var i;const{BuildInfo:r}=Uy();jh(t.sessionId,"AuthEvent did not contain a session ID");const o=await Hy(t.sessionId),s={};return Nd()?s["ibi"]=r.packageName:Ad()?s["apn"]=r.packageName:Oh(e,"operation-not-supported-in-this-environment"),r.displayName&&(s["appDisplayName"]=r.displayName),s["sessionId"]=o,yy(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,s)}async function By(e){const{BuildInfo:t}=Uy(),n={};Nd()?n.iosBundleId=t.packageName:Ad()?n.androidPackageName=t.packageName:Oh(e,"operation-not-supported-in-this-environment"),await Zg(e,n)}function Zy(e){const{cordova:t}=Uy();return new Promise((n=>{t.plugins.browsertab.isAvailable((i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,Dd()?"_blank":"_system","location=yes"),n(r)}))}))}async function $y(e,t,n){const{cordova:i}=Uy();let r=()=>{};try{await new Promise(((o,s)=>{let a=null;function c(){var e;o();const t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{s(xh(e,"redirect-cancelled-by-user"))}),qy))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),Ad()&&document.addEventListener("visibilitychange",l,!1),r=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{r()}}function zy(e){var t,n,i,r,o,s,a,c,u,l;const h=Uy();Nh("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Nh("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Nh("function"===typeof(null===(o=null===(r=null===(i=null===h||void 0===h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nh("function"===typeof(null===(c=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nh("function"===typeof(null===(l=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Hy(e){const t=Ky(e),n=await crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(n));return i.map((e=>e.toString(16).padStart(2,"0"))).join("")}function Ky(e){if(jh(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=20;class Wy extends Ug{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}function Qy(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:ev(),postBody:null,tenantId:e.tenantId,error:xh(e,"no-auth-event")}}function Jy(e,t){return tv()._set(nv(e),t)}async function Yy(e){const t=await tv()._get(nv(e));return t&&await tv()._remove(nv(e)),t}function Xy(e,t){var n,i;const r=rv(t);if(r.includes("/__/auth/callback")){const t=ov(r),o=t["firebaseError"]?iv(decodeURIComponent(t["firebaseError"])):null,s=null===(i=null===(n=null===o||void 0===o?void 0:o["code"])||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=s?xh(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function ev(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Gy;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function tv(){return _d(um)}function nv(e){return Ed("authEvent",e.config.apiKey,e.name)}function iv(e){try{return JSON.parse(e)}catch(t){return null}}function rv(e){const t=ov(e),n=t["link"]?decodeURIComponent(t["link"]):void 0,i=ov(n)["link"],r=t["deep_link_id"]?decodeURIComponent(t["deep_link_id"]):void 0,o=ov(r)["link"];return o||r||i||n||e}function ov(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Xc(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=500;class av{constructor(){this._redirectPersistence=hm,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jg,this._overrideRedirectResult=Sg}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Wy(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Oh(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){zy(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),Tg(),await this._originValidation(e);const o=Qy(e,n,i);await Jy(e,o);const s=await Vy(e,o,t),a=await Zy(s);return $y(e,r,a)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=By(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=Uy(),o=setTimeout((async()=>{await Yy(e),t.onEvent(uv())}),sv),s=async n=>{clearTimeout(o);const i=await Yy(e);let r=null;i&&(null===n||void 0===n?void 0:n["url"])&&(r=Xy(i,n["url"])),t.onEvent(r||uv())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=i,c=`${r.packageName.toLowerCase()}://`;Uy().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}}const cv=av;function uv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xh("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(e,t){nf(e)._logFramework(t)}var hv="@firebase/auth-compat",dv="0.4.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fv=1e3;function pv(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mv(){return"http:"===pv()||"https:"===pv()}function gv(e=Rc()){return!("file:"!==pv()&&"ionic:"!==pv()&&"capacitor:"!==pv()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yv(){return Mc()||Dc()}function vv(){return Uc()&&11===(null===document||void 0===document?void 0:document.documentMode)}function bv(e=Rc()){return/Edge\/\d+/.test(e)}function wv(e=Rc()){return vv()||bv(e)}function _v(){try{const e=self.localStorage,t=pm();if(e)return e["setItem"](t,"1"),e["removeItem"](t),!wv()||Vc()}catch(e){return Iv()&&Vc()}return!1}function Iv(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function kv(){return(mv()||Lc()||gv())&&!yv()&&_v()&&!Iv()}function Ev(){return gv()&&"undefined"!==typeof document}async function Tv(){return!!Ev()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),fv);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}function Sv(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={LOCAL:"local",NONE:"none",SESSION:"session"},Cv=Nh,Ov="persistence";function xv(e,t){Cv(Object.values(Pv).includes(t),e,"invalid-persistence-type"),Mc()?Cv(t!==Pv.SESSION,e,"unsupported-persistence-type"):Dc()?Cv(t===Pv.NONE,e,"unsupported-persistence-type"):Iv()?Cv(t===Pv.NONE||t===Pv.LOCAL&&Vc(),e,"unsupported-persistence-type"):Cv(t===Pv.NONE||_v(),e,"unsupported-persistence-type")}async function Av(e){await e._initializationPromise;const t=Rv(),n=Ed(Ov,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Fv(e,t){const n=Rv();if(!n)return[];const i=Ed(Ov,e,t),r=n.getItem(i);switch(r){case Pv.NONE:return[kd];case Pv.LOCAL:return[jm,hm];case Pv.SESSION:return[hm];default:return[]}}function Rv(){var e;try{return(null===(e=Sv())||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=Nh;class Dv{constructor(){this.browserResolver=_d(_y),this.cordovaResolver=_d(cv),this.underlyingResolver=null,this._redirectPersistence=hm,this._completeRedirectFn=jg,this._overrideRedirectResult=Sg}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ev()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nv(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Tv();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(e){return e.unwrap()}function Lv(e){return e.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(e){return qv(e)}function Uv(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){const n=t;n.resolver=new Zv(e,Gp(e,t))}else if(i){const e=qv(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}function qv(e){const{_tokenResponse:t}=e instanceof $c?e.customData:e;if(!t)return null;if(!(e instanceof $c)&&"temporaryProof"in t&&"phoneNumber"in t)return cg.credentialFromResult(e);const n=t.providerId;if(!n||n===bh.PASSWORD)return null;let i;switch(n){case bh.GOOGLE:i=Bf;break;case bh.FACEBOOK:i=Vf;break;case bh.GITHUB:i=Zf;break;case bh.TWITTER:i=Gf;break;default:const{oauthIdToken:e,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return r||o||e||s?s?n.startsWith("saml.")?zf._create(n,s):Pf._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:r}):new qf(n).credential({idToken:e,accessToken:r,rawNonce:a}):null}return e instanceof $c?i.credentialFromError(e):i.credentialFromResult(e)}function Vv(e,t){return t.catch((t=>{throw t instanceof $c&&Uv(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:Mv(e),additionalUserInfo:Bp(e),user:$v.getOrCreate(n)}}))}async function Bv(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Vv(e,n.confirm(t))}}class Zv{constructor(e,t){this.resolver=t,this.auth=Lv(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vv(jv(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this._delegate=e,this.multiFactor=nm(e)}static getOrCreate(e){return $v.USER_MAP.has(e)||$v.USER_MAP.set(e,new $v(e)),$v.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vv(this.auth,cp(this._delegate,e))}async linkWithPhoneNumber(e,t){return Bv(this.auth,rg(this._delegate,e,t))}async linkWithPopup(e){return Vv(this.auth,vg(this._delegate,e,Dv))}async linkWithRedirect(e){return await Av(nf(this.auth)),Rg(this._delegate,e,Dv)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vv(this.auth,up(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Bv(this.auth,og(this._delegate,e,t))}reauthenticateWithPopup(e){return Vv(this.auth,yg(this._delegate,e,Dv))}async reauthenticateWithRedirect(e){return await Av(nf(this.auth)),Ag(this._delegate,e,Dv)}sendEmailVerification(e){return Cp(this._delegate,e)}async unlink(e){return await np(this._delegate,e),this}updateEmail(e){return Fp(this._delegate,e)}updatePassword(e){return Rp(this._delegate,e)}updatePhoneNumber(e){return ag(this._delegate,e)}updateProfile(e){return Ap(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Op(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$v.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zv=Nh;class Hv{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;zv(n,"invalid-api-key",{appName:e.name}),zv(n,"invalid-api-key",{appName:e.name});const i="undefined"!==typeof window?Dv:void 0;this._delegate=t.initialize({options:{persistence:Gv(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(kh),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$v.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){af(this._delegate,e,t)}applyActionCode(e){return vp(this._delegate,e)}checkActionCode(e){return bp(this._delegate,e)}confirmPasswordReset(e,t){return yp(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Vv(this._delegate,_p(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Pp(this._delegate,e)}isSignInWithEmailLink(e){return Ep(this._delegate,e)}async getRedirectResult(){zv(kv(),this._delegate,"operation-not-supported-in-this-environment");const e=await Dg(this._delegate,Dv);return e?Vv(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){lv(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:r,complete:o}=Kv(e,t,n);return this._delegate.onAuthStateChanged(i,r,o)}onIdTokenChanged(e,t,n){const{next:i,error:r,complete:o}=Kv(e,t,n);return this._delegate.onIdTokenChanged(i,r,o)}sendSignInLinkToEmail(e,t){return kp(this._delegate,e,t)}sendPasswordResetEmail(e,t){return gp(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(xv(this._delegate,e),e){case Pv.SESSION:t=hm;break;case Pv.LOCAL:const e=await _d(jm)._isAvailable();t=e?jm:um;break;case Pv.NONE:t=kd;break;default:return Oh("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vv(this._delegate,Yf(this._delegate))}signInWithCredential(e){return Vv(this._delegate,ap(this._delegate,e))}signInWithCustomToken(e){return Vv(this._delegate,hp(this._delegate,e))}signInWithEmailAndPassword(e,t){return Vv(this._delegate,Ip(this._delegate,e,t))}signInWithEmailLink(e,t){return Vv(this._delegate,Tp(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Bv(this._delegate,ig(this._delegate,e,t))}async signInWithPopup(e){return zv(kv(),this._delegate,"operation-not-supported-in-this-environment"),Vv(this._delegate,gg(this._delegate,e,Dv))}async signInWithRedirect(e){return zv(kv(),this._delegate,"operation-not-supported-in-this-environment"),await Av(this._delegate),Og(this._delegate,e,Dv)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return wp(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Kv(e,t,n){let i=e;"function"!==typeof e&&({next:i,error:t,complete:n}=e);const r=i,o=e=>r(e&&$v.getOrCreate(e));return{next:o,error:t,complete:n}}function Gv(e,t){const n=Fv(e,t);if("undefined"===typeof self||n.includes(jm)||n.push(jm),"undefined"!==typeof window)for(const i of[um,hm])n.includes(i)||n.push(i);return n.includes(kd)||n.push(kd),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hv.Persistence=Pv;class Wv{constructor(){this.providerId="phone",this._delegate=new cg(jv(mh.auth()))}static credential(e,t){return cg.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Wv.PHONE_SIGN_IN_METHOD=cg.PHONE_SIGN_IN_METHOD,Wv.PROVIDER_ID=cg.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qv=Nh;class Jv{constructor(e,t,n=mh.app()){var i;Qv(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new eg(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="auth-compat";function Xv(e){e.INTERNAL.registerComponent(new su(Yv,(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Hv(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wh.EMAIL_SIGNIN,PASSWORD_RESET:wh.PASSWORD_RESET,RECOVER_EMAIL:wh.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:wh.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:wh.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:wh.VERIFY_EMAIL}},EmailAuthProvider:Lf,FacebookAuthProvider:Vf,GithubAuthProvider:Zf,GoogleAuthProvider:Bf,OAuthProvider:qf,SAMLAuthProvider:Kf,PhoneAuthProvider:Wv,PhoneMultiFactorGenerator:Ey,RecaptchaVerifier:Jv,TwitterAuthProvider:Gf,Auth:Hv,AuthCredential:df,Error:$c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion(hv,dv)}Xv(mh);var eb,tb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},nb={},ib=ib||{},rb=tb||self;function ob(){}function sb(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function ab(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function cb(e){return Object.prototype.hasOwnProperty.call(e,ub)&&e[ub]||(e[ub]=++lb)}var ub="closure_uid_"+(1e9*Math.random()>>>0),lb=0;function hb(e,t,n){return e.call.apply(e.bind,arguments)}function db(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fb(e,t,n){return fb=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hb:db,fb.apply(null,arguments)}function pb(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mb(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function gb(){this.s=this.s,this.o=this.o}var yb=0;gb.prototype.s=!1,gb.prototype.ra=function(){this.s||(this.s=!0,this.N(),0==yb)||cb(this)},gb.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function bb(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function wb(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(sb(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function _b(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_b.prototype.h=function(){this.defaultPrevented=!0};var Ib=function(){if(!rb.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{rb.addEventListener("test",ob,t),rb.removeEventListener("test",ob,t)}catch(n){}return e}();function kb(e){return/^[\s\xa0]*$/.test(e)}var Eb=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Tb(e,t){return e<t?-1:e>t?1:0}function Sb(){var e=rb.navigator;return e&&(e=e.userAgent)?e:""}function Pb(e){return-1!=Sb().indexOf(e)}function Cb(e){return Cb[" "](e),e}function Ob(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Cb[" "]=ob;var xb,Ab=Pb("Opera"),Fb=Pb("Trident")||Pb("MSIE"),Rb=Pb("Edge"),Nb=Rb||Fb,Db=Pb("Gecko")&&!(-1!=Sb().toLowerCase().indexOf("webkit")&&!Pb("Edge"))&&!(Pb("Trident")||Pb("MSIE"))&&!Pb("Edge"),jb=-1!=Sb().toLowerCase().indexOf("webkit")&&!Pb("Edge");function Lb(){var e=rb.document;return e?e.documentMode:void 0}e:{var Mb="",Ub=function(){var e=Sb();return Db?/rv:([^\);]+)(\)|;)/.exec(e):Rb?/Edge\/([\d\.]+)/.exec(e):Fb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):jb?/WebKit\/(\S+)/.exec(e):Ab?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ub&&(Mb=Ub?Ub[1]:""),Fb){var qb=Lb();if(null!=qb&&qb>parseFloat(Mb)){xb=String(qb);break e}}xb=Mb}var Vb,Bb={};function Zb(){return Ob(Bb,9,(function(){let e=0;const t=Eb(String(xb)).split("."),n=Eb("9").split("."),i=Math.max(t.length,n.length);for(let s=0;0==e&&s<i;s++){var r=t[s]||"",o=n[s]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;e=Tb(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||Tb(0==r[2].length,0==o[2].length)||Tb(r[2],o[2]),r=r[3],o=o[3]}while(0==e)}return 0<=e}))}if(rb.document&&Fb){var $b=Lb();Vb=$b||(parseInt(xb,10)||void 0)}else Vb=void 0;var zb=Vb;function Hb(e,t){if(_b.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Db){e:{try{Cb(t.nodeName);var r=!0;break e}catch(o){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Kb[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hb.$.h.call(this)}}mb(Hb,_b);var Kb={2:"touch",3:"pen",4:"mouse"};Hb.prototype.h=function(){Hb.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gb="closure_listenable_"+(1e6*Math.random()|0),Wb=0;function Qb(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Wb,this.fa=this.ia=!1}function Jb(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Yb(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Xb(e){const t={};for(const n in e)t[n]=e[n];return t}const ew="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tw(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<ew.length;t++)n=ew[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function nw(e){this.src=e,this.g={},this.h=0}function iw(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],o=vb(r,t);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(Jb(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rw(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==i)return r}return-1}nw.prototype.add=function(e,t,n,i,r){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=rw(e,t,i,r);return-1<s?(t=e[s],n||(t.ia=!1)):(t=new Qb(t,this.src,o,!!i,r),t.ia=n,e.push(t)),t};var ow="closure_lm_"+(1e6*Math.random()|0),sw={};function aw(e,t,n,i,r){if(i&&i.once)return lw(e,t,n,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)aw(e,t[o],n,i,r);return null}return n=yw(n),e&&e[Gb]?e.O(t,n,ab(i)?!!i.capture:!!i,r):cw(e,t,n,!1,i,r)}function cw(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var s=ab(r)?!!r.capture:!!r,a=mw(e);if(a||(e[ow]=a=new nw(e)),n=a.add(t,n,i,s,o),n.proxy)return n;if(i=uw(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Ib||(r=s),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(fw(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function uw(){function e(n){return t.call(e.src,e.listener,n)}const t=pw;return e}function lw(e,t,n,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)lw(e,t[o],n,i,r);return null}return n=yw(n),e&&e[Gb]?e.P(t,n,ab(i)?!!i.capture:!!i,r):cw(e,t,n,!0,i,r)}function hw(e,t,n,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)hw(e,t[o],n,i,r);else i=ab(i)?!!i.capture:!!i,n=yw(n),e&&e[Gb]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=rw(o,n,i,r),-1<n&&(Jb(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=mw(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rw(t,n,i,r)),(n=-1<e?t[e]:null)&&dw(n))}function dw(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Gb])iw(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(fw(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=mw(t))?(iw(n,e),0==n.h&&(n.src=null,t[ow]=null)):Jb(e)}}}function fw(e){return e in sw?sw[e]:sw[e]="on"+e}function pw(e,t){if(e.fa)e=!0;else{t=new Hb(t,this);var n=e.listener,i=e.la||e.src;e.ia&&dw(e),e=n.call(i,t)}return e}function mw(e){return e=e[ow],e instanceof nw?e:null}var gw="__closure_events_fn_"+(1e9*Math.random()>>>0);function yw(e){return"function"===typeof e?e:(e[gw]||(e[gw]=function(t){return e.handleEvent(t)}),e[gw])}function vw(){gb.call(this),this.i=new nw(this),this.S=this,this.J=null}function bw(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new _b(t,e);else if(t instanceof _b)t.target=t.target||e;else{var r=t;t=new _b(i,e),tw(t,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];r=ww(s,i,!0,t)&&r}if(s=t.g=e,r=ww(s,i,!0,t)&&r,r=ww(s,i,!1,t)&&r,n)for(o=0;o<n.length;o++)s=t.g=n[o],r=ww(s,i,!1,t)&&r}function ww(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&iw(e.i,s),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}mb(vw,gb),vw.prototype[Gb]=!0,vw.prototype.removeEventListener=function(e,t,n,i){hw(this,e,t,n,i)},vw.prototype.N=function(){if(vw.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Jb(n[i]);delete t.g[e],t.h--}}this.J=null},vw.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},vw.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var _w=rb.JSON.stringify;function Iw(){var e=Aw;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class kw{constructor(){this.h=this.g=null}add(e,t){const n=Tw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var Ew,Tw=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Sw),(e=>e.reset()));class Sw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Pw(e){rb.setTimeout((()=>{throw e}),0)}function Cw(e,t){Ew||Ow(),xw||(Ew(),xw=!0),Aw.add(e,t)}function Ow(){var e=rb.Promise.resolve(void 0);Ew=function(){e.then(Fw)}}var xw=!1,Aw=new kw;function Fw(){for(var e;e=Iw();){try{e.h.call(e.g)}catch(n){Pw(n)}var t=Tw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xw=!1}function Rw(e,t){vw.call(this),this.h=e||1,this.g=t||rb,this.j=fb(this.qb,this),this.l=Date.now()}function Nw(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Dw(e,t,n){if("function"===typeof e)n&&(e=fb(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fb(e.handleEvent,e)}return 2147483647<Number(t)?-1:rb.setTimeout(e,t||0)}function jw(e){e.g=Dw((()=>{e.g=null,e.i&&(e.i=!1,jw(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}mb(Rw,vw),eb=Rw.prototype,eb.ga=!1,eb.T=null,eb.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bw(this,"tick"),this.ga&&(Nw(this),this.start()))}},eb.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},eb.N=function(){Rw.$.N.call(this),Nw(this),delete this.g};class Lw extends gb{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jw(this)}N(){super.N(),this.g&&(rb.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mw(e){gb.call(this),this.h=e,this.g={}}mb(Mw,gb);var Uw=[];function qw(e,t,n,i){Array.isArray(n)||(n&&(Uw[0]=n.toString()),n=Uw);for(var r=0;r<n.length;r++){var o=aw(t,n[r],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Vw(e){Yb(e.g,(function(e,t){this.g.hasOwnProperty(t)&&dw(e)}),e),e.g={}}function Bw(){this.g=!0}function Zw(e,t,n,i,r,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+s}))}function $w(e,t,n,i,r,o,s){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+o+" "+s}))}function zw(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+Kw(e,n)+(i?" "+i:"")}))}function Hw(e,t){e.info((function(){return"TIMEOUT: "+t}))}function Kw(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return _w(n)}catch(a){return t}}Mw.prototype.N=function(){Mw.$.N.call(this),Vw(this)},Mw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bw.prototype.Ea=function(){this.g=!1},Bw.prototype.info=function(){};var Gw={},Ww=null;function Qw(){return Ww=Ww||new vw}function Jw(e){_b.call(this,Gw.Ta,e)}function Yw(e){const t=Qw();bw(t,new Jw(t))}function Xw(e,t){_b.call(this,Gw.STAT_EVENT,e),this.stat=t}function e_(e){const t=Qw();bw(t,new Xw(t,e))}function t_(e,t){_b.call(this,Gw.Ua,e),this.size=t}function n_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return rb.setTimeout((function(){e()}),t)}Gw.Ta="serverreachability",mb(Jw,_b),Gw.STAT_EVENT="statevent",mb(Xw,_b),Gw.Ua="timingevent",mb(t_,_b);var i_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},r_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function o_(){}function s_(e){return e.h||(e.h=e.i())}function a_(){}o_.prototype.h=null;var c_,u_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function l_(){_b.call(this,"d")}function h_(){_b.call(this,"c")}function d_(){}function f_(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Mw(this),this.P=m_,e=Nb?125:void 0,this.V=new Rw(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new p_}function p_(){this.i=null,this.g="",this.h=!1}mb(l_,_b),mb(h_,_b),mb(d_,o_),d_.prototype.g=function(){return new XMLHttpRequest},d_.prototype.i=function(){return{}},c_=new d_;var m_=45e3,g_={},y_={};function v_(e,t,n){e.L=1,e.v=q_(D_(t)),e.s=n,e.S=!0,b_(e,null)}function b_(e,t){e.G=Date.now(),k_(e),e.A=D_(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),X_(n.i,"t",i),e.C=0,n=e.l.I,e.h=new p_,e.g=ik(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Lw(fb(e.Pa,e,e.g),e.O)),qw(e.U,e.g,"readystatechange",e.nb),t=e.I?Xb(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Yw(),Zw(e.j,e.u,e.A,e.m,e.W,e.s)}function w_(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function __(e,t,n){let i,r=!0;for(;!e.J&&e.C<n.length;){if(i=I_(e,n),i==y_){4==t&&(e.o=4,e_(14),r=!1),zw(e.j,e.m,null,"[Incomplete Response]");break}if(i==g_){e.o=4,e_(15),zw(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}zw(e.j,e.m,i,null),C_(e,i)}w_(e)&&i!=y_&&i!=g_&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,e_(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ca&&(e.ca=!0,t=e.l,t.g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),WI(t),t.L=!0,e_(11))):(zw(e.j,e.m,n,"[Invalid Chunked Response]"),P_(e),S_(e))}function I_(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?y_:(n=Number(t.substring(n,i)),isNaN(n)?g_:(i+=1,i+n>t.length?y_:(t=t.substr(i,n),e.C=i+n,t)))}function k_(e){e.Y=Date.now()+e.P,E_(e,e.P)}function E_(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=n_(fb(e.lb,e),t)}function T_(e){e.B&&(rb.clearTimeout(e.B),e.B=null)}function S_(e){0==e.l.H||e.J||YI(e.l,e)}function P_(e){T_(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Nw(e.V),Vw(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function C_(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||aI(n.h,e)))if(!e.K&&aI(n.h,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;JI(n),qI(n)}GI(n),e_(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&0==n.A&&!n.v&&(n.v=n_(fb(n.ib,n),6e3));if(1>=sI(n.h)&&n.na){try{n.na()}catch(u){}n.na=void 0}}else ek(n,11)}else if((e.K||n.g==e)&&JI(n),!kb(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let u=r[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.J=u[1],n.oa=u[2];const t=u[3];null!=t&&(n.qa=t,n.j.info("VER="+n.qa));const r=u[4];null!=r&&(n.Ga=r,n.j.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(i=1.5*l,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=i.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(cI(o,o.h),o.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,U_(i.G,i.F,e))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var s=e;if(i.wa=nk(i,i.I?i.oa:null,i.Y),s.K){uI(i.h,s);var a=s,c=i.K;c&&a.setTimeout(c),a.B&&(T_(a),k_(a)),i.g=s}else KI(i);0<n.i.length&&BI(n)}else"stop"!=u[0]&&"close"!=u[0]||ek(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ek(n,7):UI(n):"noop"!=u[0]&&n.l&&n.l.Aa(u),n.A=0)}Yw(4)}catch(u){}}function O_(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(sb(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function x_(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(sb(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}function A_(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sb(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=x_(e),i=O_(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}eb=f_.prototype,eb.setTimeout=function(e){this.P=e},eb.nb=function(e){e=e.target;const t=this.M;t&&3==RI(e)?t.l():this.Pa(e)},eb.Pa=function(e){try{if(e==this.g)e:{const l=RI(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>l)&&(3!=l||Nb||this.g&&(this.h.h||this.g.ja()||NI(this.g)))){this.J||4!=l||7==t||Yw(8==t||0>=h?3:2),T_(this);var n=this.g.da();this.aa=n;t:if(w_(this)){var i=NI(this.g);e="";var r=i.length,o=4==RI(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){P_(this),S_(this);var s="";break t}this.h.i=new rb.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,$w(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kb(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,e_(12),P_(this),S_(this);break e}zw(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,C_(this,n)}this.S?(__(this,l,s),Nb&&this.i&&3==l&&(qw(this.U,this.V,"tick",this.mb),this.V.start())):(zw(this.j,this.m,s,null),C_(this,s)),4==l&&P_(this),this.i&&!this.J&&(4==l?YI(this.l,this):(this.i=!1,k_(this)))}else 400==n&&0<s.indexOf("Unknown SID")?(this.o=3,e_(12)):(this.o=0,e_(13)),P_(this),S_(this)}}}catch(l){}},eb.mb=function(){if(this.g){var e=RI(this.g),t=this.g.ja();this.C<t.length&&(T_(this),__(this,e,t),this.i&&4!=e&&k_(this))}},eb.cancel=function(){this.J=!0,P_(this)},eb.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(Hw(this.j,this.A),2!=this.L&&(Yw(),e_(17)),P_(this),this.o=2,S_(this)):E_(this,this.Y-e)};var F_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function R_(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function N_(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof N_){this.h=void 0!==t?t:e.h,j_(this,e.j),this.s=e.s,this.g=e.g,L_(this,e.m),this.l=e.l,t=e.i;var n=new W_;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),M_(this,n),this.o=e.o}else e&&(n=String(e).match(F_))?(this.h=!!t,j_(this,n[1]||"",!0),this.s=V_(n[2]||""),this.g=V_(n[3]||"",!0),L_(this,n[4]),this.l=V_(n[5]||"",!0),M_(this,n[6]||"",!0),this.o=V_(n[7]||"")):(this.h=!!t,this.i=new W_(null,this.h))}function D_(e){return new N_(e)}function j_(e,t,n){e.j=n?V_(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function L_(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function M_(e,t,n){t instanceof W_?(e.i=t,tI(e.i,e.h)):(n||(t=B_(t,K_)),e.i=new W_(t,e.h))}function U_(e,t,n){e.i.set(t,n)}function q_(e){return U_(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function V_(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function B_(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Z_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Z_(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}N_.prototype.toString=function(){var e=[],t=this.j;t&&e.push(B_(t,$_,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(B_(t,$_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(B_(n,"/"==n.charAt(0)?H_:z_,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",B_(n,G_)),e.join("")};var $_=/[#\/\?@]/g,z_=/[#\?:]/g,H_=/[#\?]/g,K_=/[#\?@]/g,G_=/#/g;function W_(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Q_(e){e.g||(e.g=new Map,e.h=0,e.i&&R_(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function J_(e,t){Q_(e),t=eI(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Y_(e,t){return Q_(e),t=eI(e,t),e.g.has(t)}function X_(e,t,n){J_(e,t),0<n.length&&(e.i=null,e.g.set(eI(e,t),bb(n)),e.h+=n.length)}function eI(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tI(e,t){t&&!e.j&&(Q_(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(J_(this,t),X_(this,n,e))}),e)),e.j=t}eb=W_.prototype,eb.add=function(e,t){Q_(this),this.i=null,e=eI(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},eb.forEach=function(e,t){Q_(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},eb.sa=function(){Q_(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},eb.Z=function(e){Q_(this);let t=[];if("string"===typeof e)Y_(this,e)&&(t=t.concat(this.g.get(eI(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},eb.set=function(e,t){return Q_(this),this.i=null,e=eI(this,e),Y_(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},eb.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t},eb.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),e.push(r)}}return this.i=e.join("&")};var nI=class{constructor(e,t){this.h=e,this.g=t}};function iI(e){this.l=e||rI,rb.PerformanceNavigationTiming?(e=rb.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(rb.g&&rb.g.Ka&&rb.g.Ka()&&rb.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rI=10;function oI(e){return!!e.h||!!e.g&&e.g.size>=e.j}function sI(e){return e.h?1:e.g?e.g.size:0}function aI(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function cI(e,t){e.g?e.g.add(t):e.h=t}function uI(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lI(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return bb(e.i)}function hI(){}function dI(){this.g=new hI}function fI(e,t,n){const i=n||"";try{A_(e,(function(e,n){let r=e;ab(e)&&(r=_w(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function pI(e,t){const n=new Bw;if(rb.Image){const i=new Image;i.onload=pb(mI,n,i,"TestLoadImage: loaded",!0,t),i.onerror=pb(mI,n,i,"TestLoadImage: error",!1,t),i.onabort=pb(mI,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=pb(mI,n,i,"TestLoadImage: timeout",!1,t),rb.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}function mI(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(o){}}function gI(e){this.l=e.fc||null,this.j=e.ob||!1}function yI(e,t){vw.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=vI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iI.prototype.cancel=function(){if(this.i=lI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},hI.prototype.stringify=function(e){return rb.JSON.stringify(e,void 0)},hI.prototype.parse=function(e){return rb.JSON.parse(e,void 0)},mb(gI,o_),gI.prototype.g=function(){return new yI(this.l,this.j)},gI.prototype.i=function(e){return function(){return e}}({}),mb(yI,vw);var vI=0;function bI(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function wI(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_I(e)}function _I(e){e.onreadystatechange&&e.onreadystatechange.call(e)}eb=yI.prototype,eb.open=function(e,t){if(this.readyState!=vI)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_I(this)},eb.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||rb).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},eb.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wI(this)),this.readyState=vI},eb.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_I(this)),this.g&&(this.readyState=3,_I(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof rb.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bI(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},eb.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?wI(this):_I(this),3==this.readyState&&bI(this)}},eb.Za=function(e){this.g&&(this.response=this.responseText=e,wI(this))},eb.Ya=function(e){this.g&&(this.response=e,wI(this))},eb.ka=function(){this.g&&wI(this)},eb.setRequestHeader=function(e,t){this.v.append(e,t)},eb.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},eb.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(yI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var II=rb.JSON.parse;function kI(e){vw.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=EI,this.L=this.M=!1}mb(kI,vw);var EI="",TI=/^https?$/i,SI=["POST","PUT"];function PI(e){return Fb&&Zb()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function CI(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,OI(e),AI(e)}function OI(e){e.F||(e.F=!0,bw(e,"complete"),bw(e,"error"))}function xI(e){if(e.h&&"undefined"!=typeof ib&&(!e.C[1]||4!=RI(e)||2!=e.da()))if(e.v&&4==RI(e))Dw(e.La,0,e);else if(bw(e,"readystatechange"),4==RI(e)){e.h=!1;try{const c=e.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===c){var r=String(e.I).match(F_)[1]||null;if(!r&&rb.self&&rb.self.location){var o=rb.self.location.protocol;r=o.substr(0,o.length-1)}i=!TI.test(r?r.toLowerCase():"")}n=i}if(n)bw(e,"complete"),bw(e,"success");else{e.m=6;try{var s=2<RI(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",OI(e)}}finally{AI(e)}}}function AI(e,t){if(e.g){FI(e);const i=e.g,r=e.C[0]?ob:null;e.g=null,e.C=null,t||bw(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function FI(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(rb.clearTimeout(e.A),e.A=null)}function RI(e){return e.g?e.g.readyState:0}function NI(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case EI:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bk){return null}}function DI(e){let t="";return Yb(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jI(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=DI(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):U_(e,t,n))}function LI(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function MI(e){this.Ga=0,this.i=[],this.j=new Bw,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=LI("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=LI("baseRetryDelayMs",5e3,e),this.hb=LI("retryDelaySeedMs",1e4,e),this.eb=LI("forwardChannelMaxRetries",2,e),this.xa=LI("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new iI(e&&e.concurrentRequestLimit),this.Ja=new dI,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function UI(e){if(VI(e),3==e.H){var t=e.W++,n=D_(e.G);U_(n,"SID",e.J),U_(n,"RID",t),U_(n,"TYPE","terminate"),zI(e,n),t=new f_(e,e.j,t,void 0),t.L=2,t.v=q_(D_(n)),n=!1,rb.navigator&&rb.navigator.sendBeacon&&(n=rb.navigator.sendBeacon(t.v.toString(),"")),!n&&rb.Image&&((new Image).src=t.v,n=!0),n||(t.g=ik(t.l,null),t.g.ha(t.v)),t.G=Date.now(),k_(t)}tk(e)}function qI(e){e.g&&(WI(e),e.g.cancel(),e.g=null)}function VI(e){qI(e),e.u&&(rb.clearTimeout(e.u),e.u=null),JI(e),e.h.cancel(),e.m&&("number"===typeof e.m&&rb.clearTimeout(e.m),e.m=null)}function BI(e){oI(e.h)||e.m||(e.m=!0,Cw(e.Na,e),e.C=0)}function ZI(e,t){return!(sI(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=n_(fb(e.Na,e,t),XI(e,e.C)),e.C++,!0))}function $I(e,t){var n;n=t?t.m:e.W++;const i=D_(e.G);U_(i,"SID",e.J),U_(i,"RID",n),U_(i,"AID",e.V),zI(e,i),e.o&&e.s&&jI(i,e.o,e.s),n=new f_(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=HI(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),cI(e.h,n),v_(n,i,t)}function zI(e,t){e.ma&&Yb(e.ma,(function(e,n){U_(t,n,e)})),e.l&&A_({},(function(e,n){U_(t,n,e)}))}function HI(e,t,n){n=Math.min(e.i.length,n);var i=e.l?fb(e.l.Va,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=r[s].h;const a=r[s].g;if(n-=t,0>n)t=Math.max(0,r[s].h-100),o=!1;else try{fI(a,e,"req"+n+"_")}catch(tE){i&&i(a)}}if(o){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.F=e,i}function KI(e){e.g||e.u||(e.ba=1,Cw(e.Ma,e),e.A=0)}function GI(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=n_(fb(e.Ma,e),XI(e,e.A)),e.A++,!0)}function WI(e){null!=e.B&&(rb.clearTimeout(e.B),e.B=null)}function QI(e){e.g=new f_(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=D_(e.wa);U_(t,"RID","rpc"),U_(t,"SID",e.J),U_(t,"CI",e.M?"0":"1"),U_(t,"AID",e.V),U_(t,"TYPE","xmlhttp"),zI(e,t),e.o&&e.s&&jI(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=q_(D_(t)),n.s=null,n.S=!0,b_(n,e)}function JI(e){null!=e.v&&(rb.clearTimeout(e.v),e.v=null)}function YI(e,t){var n=null;if(e.g==t){JI(e),WI(e),e.g=null;var i=2}else{if(!aI(e.h,t))return;n=t.F,uI(e.h,t),i=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;i=Qw(),bw(i,new t_(i,n)),BI(e)}else KI(e);else if(r=t.o,3==r||0==r&&0<e.ta||!(1==i&&ZI(e,t)||2==i&&GI(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:ek(e,5);break;case 4:ek(e,10);break;case 3:ek(e,6);break;default:ek(e,2)}}function XI(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function ek(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var i=fb(e.pb,e);n||(n=new N_("//www.google.com/images/cleardot.gif"),rb.location&&"http"==rb.location.protocol||j_(n,"https"),q_(n)),pI(n.toString(),i)}else e_(2);e.H=0,e.l&&e.l.za(t),tk(e),VI(e)}function tk(e){if(e.H=0,e.pa=[],e.l){const t=lI(e.h);0==t.length&&0==e.i.length||(wb(e.pa,t),wb(e.pa,e.i),e.h.i.length=0,bb(e.i),e.i.length=0),e.l.ya()}}function nk(e,t,n){var i=n instanceof N_?D_(n):new N_(n,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),L_(i,i.m);else{var r=rb.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new N_(null,void 0);i&&j_(o,i),t&&(o.g=t),r&&L_(o,r),n&&(o.l=n),i=o}return n=e.F,t=e.Da,n&&t&&U_(i,n,t),U_(i,"VER",e.qa),zI(e,i),i}function ik(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new kI(new gI({ob:!0})):new kI(e.va),t.Oa(e.I),t}function rk(){}function ok(){if(Fb&&!(10<=Number(zb)))throw Error("Environmental error: no available transport.")}function sk(e,t){vw.call(this),this.g=new MI(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!kb(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kb(t)&&(this.g.F=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new uk(this)}function ak(e){l_.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ck(){h_.call(this),this.status=1}function uk(e){this.g=e}function lk(){this.blockSize=-1}function hk(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function dk(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var o=e.g[3],s=t+(o^n&(r^o))+i[0]+3614090360&4294967295;t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[3]+3250441966&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[4]+4118548399&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[7]+4249261313&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[8]+1770035416&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[11]+2304563134&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[12]+1804603682&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[15]+1236535329&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(r^o&(n^r))+i[1]+4129170786&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[0]+3921069994&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[5]+3593408605&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[4]+3889429448&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[9]+568446438&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[8]+1163531501&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[13]+2850285829&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[12]+2368359562&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(n^r^o)+i[5]+4294588738&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[14]+4259657740&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[1]+2763975236&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[10]+3200236656&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[13]+681279174&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[6]+76029189&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[9]+3654602809&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[2]+3299628645&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(r^(n|~o))+i[0]+4096336452&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[5]+4237533241&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[12]+1700485571&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[1]+2240044497&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[8]+1873313359&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[13]+1309151649&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[4]+4149444226&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}function fk(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var o=0|e[r];i&&o==t||(n[r]=o,i=!1)}this.g=n}eb=kI.prototype,eb.Oa=function(e){this.M=e},eb.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():c_.g(),this.C=this.u?s_(this.u):s_(c_),this.g.onreadystatechange=fb(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void CI(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=rb.FormData&&e instanceof rb.FormData,!(0<=vb(SI,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{FI(this),0<this.B&&((this.L=PI(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fb(this.ua,this)):this.A=Dw(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){CI(this,o)}},eb.ua=function(){"undefined"!=typeof ib&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bw(this,"timeout"),this.abort(8))},eb.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,bw(this,"complete"),bw(this,"abort"),AI(this))},eb.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),AI(this,!0)),kI.$.N.call(this)},eb.La=function(){this.s||(this.G||this.v||this.l?xI(this):this.kb())},eb.kb=function(){xI(this)},eb.da=function(){try{return 2<RI(this)?this.g.status:-1}catch(e){return-1}},eb.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},eb.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),II(t)}},eb.Ia=function(){return this.m},eb.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},eb=MI.prototype,eb.qa=8,eb.H=1,eb.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new f_(this,this.j,e,void 0);let o=this.s;if(this.U&&(o?(o=Xb(o),tw(o,this.U)):o=this.U),null!==this.o||this.O||(r.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(i="__data__"in i.g&&(i=i.g.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(t+=i,4096<t){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=HI(this,r,t),n=D_(this.G),U_(n,"RID",e),U_(n,"CVER",22),this.F&&U_(n,"X-HTTP-Session-Id",this.F),zI(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(DI(o)))+"&"+t:this.o&&jI(n,this.o,o)),cI(this.h,r),this.bb&&U_(n,"TYPE","init"),this.P?(U_(n,"$req",t),U_(n,"SID","null"),r.ba=!0,v_(r,n,null)):v_(r,n,t),this.H=2}}else 3==this.H&&(e?$I(this,e):0==this.i.length||oI(this.h)||$I(this))},eb.Ma=function(){if(this.u=null,QI(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=n_(fb(this.jb,this),e)}},eb.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,e_(10),qI(this),QI(this))},eb.ib=function(){null!=this.v&&(this.v=null,qI(this),GI(this),e_(19))},eb.pb=function(e){e?(this.j.info("Successfully pinged google.com"),e_(2)):(this.j.info("Failed to ping google.com"),e_(1))},eb=rk.prototype,eb.Ba=function(){},eb.Aa=function(){},eb.za=function(){},eb.ya=function(){},eb.Va=function(){},ok.prototype.g=function(e,t){return new sk(e,t)},mb(sk,vw),sk.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;e_(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=nk(e,null,e.Y),BI(e)},sk.prototype.close=function(){UI(this.g)},sk.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=_w(e),e=n);t.i.push(new nI(t.fb++,e)),3==t.H&&BI(t)},sk.prototype.N=function(){this.g.l=null,delete this.j,UI(this.g),delete this.g,sk.$.N.call(this)},mb(ak,l_),mb(ck,h_),mb(uk,rk),uk.prototype.Ba=function(){bw(this.g,"a")},uk.prototype.Aa=function(e){bw(this.g,new ak(e))},uk.prototype.za=function(e){bw(this.g,new ck)},uk.prototype.ya=function(){bw(this.g,"b")},mb(hk,lk),hk.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hk.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,o=0;o<t;){if(0==r)for(;o<=n;)dk(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[r++]=e.charCodeAt(o++),r==this.blockSize){dk(this,i),r=0;break}}else for(;o<t;)if(i[r++]=e[o++],r==this.blockSize){dk(this,i),r=0;break}}this.h=r,this.i+=t},hk.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var pk={};function mk(e){return-128<=e&&128>e?Ob(pk,e,(function(e){return new fk([0|e],0>e?-1:0)})):new fk([0|e],0>e?-1:0)}function gk(e){if(isNaN(e)||!isFinite(e))return bk;if(0>e)return Ek(gk(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=vk;return new fk(t,0)}function yk(e,t){if(0==e.length)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return Ek(yk(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=gk(Math.pow(t,8)),i=bk,r=0;r<e.length;r+=8){var o=Math.min(8,e.length-r),s=parseInt(e.substring(r,r+o),t);8>o?(o=gk(Math.pow(t,o)),i=i.R(o).add(gk(s))):(i=i.R(n),i=i.add(gk(s)))}return i}var vk=4294967296,bk=mk(0),wk=mk(1),_k=mk(16777216);function Ik(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function kk(e){return-1==e.h}function Ek(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new fk(n,~e.h).add(wk)}function Tk(e,t){return e.add(Ek(t))}function Sk(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Pk(e,t){this.g=e,this.h=t}function Ck(e,t){if(Ik(t))throw Error("division by zero");if(Ik(e))return new Pk(bk,bk);if(kk(e))return t=Ck(Ek(e),t),new Pk(Ek(t.g),Ek(t.h));if(kk(t))return t=Ck(e,Ek(t)),new Pk(Ek(t.g),t.h);if(30<e.g.length){if(kk(e)||kk(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wk,i=t;0>=i.X(e);)n=Ok(n),i=Ok(i);var r=xk(n,1),o=xk(i,1);for(i=xk(i,2),n=xk(n,2);!Ik(i);){var s=o.add(i);0>=s.X(e)&&(r=r.add(n),o=s),i=xk(i,1),n=xk(n,1)}return t=Tk(e,r.R(t)),new Pk(r,t)}for(r=bk;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=gk(n),s=o.R(t);kk(s)||0<s.X(e);)n-=i,o=gk(n),s=o.R(t);Ik(o)&&(o=wk),r=r.add(o),e=Tk(e,s)}return new Pk(r,e)}function Ok(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new fk(n,e.h)}function xk(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],o=0;o<i;o++)r[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new fk(r,e.h)}eb=fk.prototype,eb.ea=function(){if(kk(this))return-Ek(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:vk+i)*t,t*=vk}return e},eb.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ik(this))return"0";if(kk(this))return"-"+Ek(this).toString(e);for(var t=gk(Math.pow(e,6)),n=this,i="";;){var r=Ck(n,t).g;n=Tk(n,r.R(t));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=r,Ik(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},eb.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},eb.X=function(e){return e=Tk(this,e),kk(e)?-1:Ik(e)?0:1},eb.abs=function(){return kk(this)?Ek(this):this},eb.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var o=i+(65535&this.D(r))+(65535&e.D(r)),s=(o>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new fk(n,-2147483648&n[n.length-1]?-1:0)},eb.R=function(e){if(Ik(this)||Ik(e))return bk;if(kk(this))return kk(e)?Ek(this).R(Ek(e)):Ek(Ek(this).R(e));if(kk(e))return Ek(this.R(Ek(e)));if(0>this.X(_k)&&0>e.X(_k))return gk(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var o=this.D(i)>>>16,s=65535&this.D(i),a=e.D(r)>>>16,c=65535&e.D(r);n[2*i+2*r]+=s*c,Sk(n,2*i+2*r),n[2*i+2*r+1]+=o*c,Sk(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,Sk(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,Sk(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new fk(n,0)},eb.gb=function(e){return Ck(this,e).h},eb.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new fk(n,this.h&e.h)},eb.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new fk(n,this.h|e.h)},eb.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new fk(n,this.h^e.h)},ok.prototype.createWebChannel=ok.prototype.g,sk.prototype.send=sk.prototype.u,sk.prototype.open=sk.prototype.m,sk.prototype.close=sk.prototype.close,i_.NO_ERROR=0,i_.TIMEOUT=8,i_.HTTP_ERROR=6,r_.COMPLETE="complete",a_.EventType=u_,u_.OPEN="a",u_.CLOSE="b",u_.ERROR="c",u_.MESSAGE="d",vw.prototype.listen=vw.prototype.O,kI.prototype.listenOnce=kI.prototype.P,kI.prototype.getLastError=kI.prototype.Sa,kI.prototype.getLastErrorCode=kI.prototype.Ia,kI.prototype.getStatus=kI.prototype.da,kI.prototype.getResponseJson=kI.prototype.Wa,kI.prototype.getResponseText=kI.prototype.ja,kI.prototype.send=kI.prototype.ha,kI.prototype.setWithCredentials=kI.prototype.Oa,hk.prototype.digest=hk.prototype.l,hk.prototype.reset=hk.prototype.reset,hk.prototype.update=hk.prototype.j,fk.prototype.add=fk.prototype.add,fk.prototype.multiply=fk.prototype.R,fk.prototype.modulo=fk.prototype.gb,fk.prototype.compare=fk.prototype.X,fk.prototype.toNumber=fk.prototype.ea,fk.prototype.toString=fk.prototype.toString,fk.prototype.getBits=fk.prototype.D,fk.fromNumber=gk,fk.fromString=yk;var Ak=nb.createWebChannelTransport=function(){return new ok},Fk=nb.getStatEventTarget=function(){return Qw()},Rk=nb.ErrorCode=i_,Nk=nb.EventType=r_,Dk=nb.Event=Gw,jk=nb.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Lk=nb.FetchXmlHttpFactory=gI,Mk=nb.WebChannel=a_,Uk=nb.XhrIo=kI,qk=nb.Md5=hk,Vk=nb.Integer=fk;const Bk="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zk.UNAUTHENTICATED=new Zk(null),Zk.GOOGLE_CREDENTIALS=new Zk("google-credentials-uid"),Zk.FIRST_PARTY=new Zk("first-party-uid"),Zk.MOCK_USER=new Zk("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let $k="9.21.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new vu("@firebase/firestore");function Hk(){return zk.logLevel}function Kk(e){zk.setLogLevel(e)}function Gk(e,...t){if(zk.logLevel<=fu.DEBUG){const n=t.map(Jk);zk.debug(`Firestore (${$k}): ${e}`,...n)}}function Wk(e,...t){if(zk.logLevel<=fu.ERROR){const n=t.map(Jk);zk.error(`Firestore (${$k}): ${e}`,...n)}}function Qk(e,...t){if(zk.logLevel<=fu.WARN){const n=t.map(Jk);zk.warn(`Firestore (${$k}): ${e}`,...n)}}function Jk(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(e="Unexpected state"){const t=`FIRESTORE (${$k}) INTERNAL ASSERTION FAILED: `+e;throw Wk(t),new Error(t)}function Xk(e,t){e||Yk()}function eE(e,t){e||Yk()}function tE(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class iE extends $c{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zk.UNAUTHENTICATED)))}shutdown(){}}class aE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cE{constructor(e){this.t=e,this.currentUser=Zk.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new rE;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new rE,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},s=e=>{Gk("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Gk("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new rE)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Gk("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Xk("string"==typeof t.accessToken),new oE(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xk(null===e||"string"==typeof e),new Zk(e)}}class uE{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Zk.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class lE{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new uE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Zk.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dE{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Gk("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Gk("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Gk("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?i(e):Gk("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Xk("string"==typeof e.token),this.T=e.token,new hE(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fE(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=fE(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}function mE(e,t){return e<t?-1:e>t?1:0}function gE(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}function yE(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new iE(nE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new iE(nE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new iE(nE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new iE(nE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vE.fromMillis(Date.now())}static fromDate(e){return vE.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new vE(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mE(this.nanoseconds,e.nanoseconds):mE(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bE(e)}static min(){return new bE(new vE(0,0))}static max(){return new bE(new vE(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,n){void 0===t?t=0:t>e.length&&Yk(),void 0===n?n=e.length-t:n>e.length-t&&Yk(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wE?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _E extends wE{construct(e,t,n){return new _E(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new iE(nE.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new _E(t)}static emptyPath(){return new _E([])}}const IE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kE extends wE{construct(e,t,n){return new kE(e,t,n)}static isValidIdentifier(e){return IE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kE.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kE(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new iE(nE.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new iE(nE.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new iE(nE.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(o=!o,i++):"."!==t||o?(n+=t,i++):(r(),i++)}if(r(),o)throw new iE(nE.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kE(t)}static emptyPath(){return new kE([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.path=e}static fromPath(e){return new EE(_E.fromString(e))}static fromName(e){return new EE(_E.fromString(e).popFirst(5))}static empty(){return new EE(_E.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_E.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _E.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new EE(new _E(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function SE(e){return e.fields.find((e=>2===e.kind))}function PE(e){return e.fields.filter((e=>2!==e.kind))}TE.UNKNOWN_ID=-1;class CE{constructor(e,t){this.fieldPath=e,this.kind=t}}class OE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new OE(0,FE.min())}}function xE(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=bE.fromTimestamp(1e9===i?new vE(n+1,0):new vE(n,i));return new FE(r,EE.empty(),t)}function AE(e){return new FE(e.readTime,e.key,-1)}class FE{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new FE(bE.min(),EE.empty(),-1)}static max(){return new FE(bE.max(),EE.empty(),-1)}}function RE(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=EE.comparator(e.documentKey,t.documentKey),0!==n?n:mE(e.largestBatchId,t.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(e){if(e.code!==nE.FAILED_PRECONDITION||e.message!==NE)throw e;Gk("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new LE(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof LE?t:LE.resolve(t)}catch(e){return LE.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):LE.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):LE.reject(t)}static resolve(e){return new LE(((t,n)=>{t(e)}))}static reject(e){return new LE(((t,n)=>{n(e)}))}static waitFor(e){return new LE(((t,n)=>{let i=0,r=0,o=!1;e.forEach((e=>{++i,e.next((()=>{++r,o&&r===i&&t()}),(e=>n(e)))})),o=!0,r===i&&t()}))}static or(e){let t=LE.resolve(!1);for(const n of e)t=t.next((e=>e?LE.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new LE(((n,i)=>{const r=e.length,o=new Array(r);let s=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next((e=>{o[c]=e,++s,s===r&&n(o)}),(e=>i(e)))}}))}static doWhile(e,t){return new LE(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new rE,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new VE(e,t.error)):this.R.resolve()},this.transaction.onerror=t=>{const n=HE(t.target.error);this.R.reject(new VE(e,n))}}static open(e,t,n,i){try{return new ME(t,e.transaction(i,n))}catch(e){throw new VE(t,e)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Gk("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZE(t)}}class UE{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===UE.S(Rc())&&Wk("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Gk("SimpleDb","Removing database:",e),$E(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vc())return!1;if(UE.C())return!0;const e=Rc(),t=UE.S(e),n=0<t&&t<10,i=UE.N(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||r)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",BASE_URL:"/"})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Gk("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{const n=e.target.result;t(n)},i.onblocked=()=>{n(new VE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const i=t.target.error;"VersionError"===i.name?n(new iE(nE.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new iE(nE.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new VE(e,i))},i.onupgradeneeded=e=>{Gk("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.$(t,i.transaction,e.oldVersion,this.version).next((()=>{Gk("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const r="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=ME.open(this.db,e,r?"readonly":"readwrite",n),o=i(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),LE.reject(e)))).toPromise();return o.catch((()=>{})),await t.v,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Gk("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class qE{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $E(this.L.delete())}}class VE extends iE{constructor(e,t){super(nE.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function BE(e){return"IndexedDbTransactionError"===e.name}class ZE{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Gk("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Gk("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$E(n)}add(e){return Gk("SimpleDb","ADD",this.store.name,e,e),$E(this.store.add(e))}get(e){return $E(this.store.get(e)).next((t=>(void 0===t&&(t=null),Gk("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Gk("SimpleDb","DELETE",this.store.name,e),$E(this.store.delete(e))}count(){return Gk("SimpleDb","COUNT",this.store.name),$E(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new LE(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new LE(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Gk("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.W(i,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.W(i,t)}Z(e){const t=this.cursor({});return new LE(((n,i)=>{t.onerror=e=>{const t=HE(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next((e=>{e?i.continue():n()})):n()}}))}W(e,t){const n=[];return new LE(((i,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void i();const o=new qE(r),s=t(r.primaryKey,r.value,o);if(s instanceof LE){const e=s.catch((e=>(o.done(),LE.reject(e))));n.push(e)}o.isDone?i():null===o.K?r.continue():r.continue(o.K)}})).next((()=>LE.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $E(e){return new LE(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=HE(e.target.error);n(t)}}))}let zE=!1;function HE(e){const t=UE.S(Rc());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new iE("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zE||(zE=!0,setTimeout((()=>{throw e}),0)),e}}return e}class KE{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Gk("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Gk("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(e){BE(e)?Gk("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await jE(e)}await this.et(6e4)}))}}class GE{constructor(e,t){this.localStore=e,this.persistence=t}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let i=t,r=!0;return LE.doWhile((()=>!0===r&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Gk("IndexBackiller",`Processing collection: ${t}`),this.it(e,t,i).next((e=>{i-=e,n.add(t)}));r=!1})))).next((()=>t-i))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(e,r).next((()=>this.rt(i,n))).next((n=>(Gk("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>r.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const i=AE(t);RE(i,n)>0&&(n=i)})),new FE(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function QE(e){return null==e}function JE(e){return 0===e&&1/e==-1/0}function YE(e){return"number"==typeof e&&Number.isInteger(e)&&!JE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=tT(t)),t=eT(e.get(n),t);return tT(t)}function eT(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const t=e.charAt(r);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function tT(e){return e+""}function nT(e){const t=e.length;if(Xk(t>=2),2===t)return Xk(""===e.charAt(0)&&""===e.charAt(1)),_E.emptyPath();const n=t-2,i=[];let r="";for(let o=0;o<t;){const t=e.indexOf("",o);switch((t<0||t>n)&&Yk(),e.charAt(t+1)){case"":const n=e.substring(o,t);let s;0===r.length?s=n:(r+=n,s=r,r=""),i.push(s);break;case"":r+=e.substring(o,t),r+="\0";break;case"":r+=e.substring(o,t+1);break;default:Yk()}o=t+2}return new _E(i)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */WE.ct=-1;const iT=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(e,t){return[e,XE(t)]}function oT(e,t,n){return[e,XE(t),n]}const sT={},aT=["prefixPath","collectionGroup","readTime","documentId"],cT=["prefixPath","collectionGroup","documentId"],uT=["collectionGroup","readTime","prefixPath","documentId"],lT=["canonicalId","targetId"],hT=["targetId","path"],dT=["path","targetId"],fT=["collectionId","parent"],pT=["indexId","uid"],mT=["uid","sequenceNumber"],gT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yT=["indexId","uid","orderedDocumentKey"],vT=["userId","collectionPath","documentId"],bT=["userId","collectionPath","largestBatchId"],wT=["userId","collectionGroup","largestBatchId"],_T=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IT=[..._T,"documentOverlays"],kT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ET=kT,TT=[...ET,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends DE{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function PT(e,t){const n=tE(e);return UE.M(n.at,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function OT(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xT(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.comparator=e,this.root=t||RT.EMPTY}insert(e,t){return new AT(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,RT.BLACK,null,null))}remove(e){return new AT(this.comparator,this.root.remove(e,this.comparator).copy(null,null,RT.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new FT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new FT(this.root,e,this.comparator,!1)}getReverseIterator(){return new FT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new FT(this.root,e,this.comparator,!0)}}class FT{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class RT{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:RT.RED,this.left=null!=i?i:RT.EMPTY,this.right=null!=r?r:RT.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new RT(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return RT.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return RT.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,RT.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,RT.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yk();if(this.right.isRed())throw Yk();const e=this.left.check();if(e!==this.right.check())throw Yk();return e+(this.isRed()?0:1)}}RT.EMPTY=null,RT.RED=!0,RT.BLACK=!1,RT.EMPTY=new class{constructor(){this.size=0}get key(){throw Yk()}get value(){throw Yk()}get color(){throw Yk()}get left(){throw Yk()}get right(){throw Yk()}copy(e,t,n,i,r){return this}insert(e,t,n){return new RT(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class NT{constructor(e){this.comparator=e,this.data=new AT(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(e){return new DT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof NT))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new NT(this.comparator);return t.data=e,t}}class DT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jT(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.fields=e,e.sort(kE.comparator)}static empty(){return new LT([])}unionWith(e){let t=new NT(kE.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new LT(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gE(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new MT("Invalid base64 string: "+e):e}}(e);return new qT(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new qT(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mE(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qT.EMPTY_BYTE_STRING=new qT("");const VT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function BT(e){if(Xk(!!e),"string"==typeof e){let t=0;const n=VT.exec(e);if(Xk(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ZT(e.seconds),nanos:ZT(e.nanos)}}function ZT(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $T(e){return"string"==typeof e?qT.fromBase64String(e):qT.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function HT(e){const t=e.mapValue.fields.__previous_value__;return zT(t)?HT(t):t}function KT(e){const t=BT(e.mapValue.fields.__local_write_time__.timestampValue);return new vE(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t,n,i,r,o,s,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a}}class WT{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new WT("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof WT&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},JT={nullValue:"NULL_VALUE"};function YT(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zT(e)?4:dS(e)?9007199254740991:10:Yk()}function XT(e,t){if(e===t)return!0;const n=YT(e);if(n!==YT(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return KT(e).isEqual(KT(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=BT(e.timestampValue),i=BT(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $T(e.bytesValue).isEqual($T(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ZT(e.geoPointValue.latitude)===ZT(t.geoPointValue.latitude)&&ZT(e.geoPointValue.longitude)===ZT(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ZT(e.integerValue)===ZT(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ZT(e.doubleValue),i=ZT(t.doubleValue);return n===i?JE(n)===JE(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return gE(e.arrayValue.values||[],t.arrayValue.values||[],XT);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(CT(n)!==CT(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!XT(n[r],i[r])))return!1;return!0}(e,t);default:return Yk()}}function eS(e,t){return void 0!==(e.values||[]).find((e=>XT(e,t)))}function tS(e,t){if(e===t)return 0;const n=YT(e),i=YT(t);if(n!==i)return mE(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return mE(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ZT(e.integerValue||e.doubleValue),i=ZT(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return nS(e.timestampValue,t.timestampValue);case 4:return nS(KT(e),KT(t));case 5:return mE(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$T(e),i=$T(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=mE(n[r],i[r]);if(0!==e)return e}return mE(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=mE(ZT(e.latitude),ZT(t.latitude));return 0!==n?n:mE(ZT(e.longitude),ZT(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=tS(n[r],i[r]);if(e)return e}return mE(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===QT.mapValue&&t===QT.mapValue)return 0;if(e===QT.mapValue)return 1;if(t===QT.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let s=0;s<i.length&&s<o.length;++s){const e=mE(i[s],o[s]);if(0!==e)return e;const t=tS(n[i[s]],r[o[s]]);if(0!==t)return t}return mE(i.length,o.length)}(e.mapValue,t.mapValue);default:throw Yk()}}function nS(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return mE(e,t);const n=BT(e),i=BT(t),r=mE(n.seconds,i.seconds);return 0!==r?r:mE(n.nanos,i.nanos)}function iS(e){return rS(e)}function rS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=BT(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$T(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,EE.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=rS(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${rS(e.fields[r])}`;return n+"}"}(e.mapValue):Yk();var t,n}function oS(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sS(e){return!!e&&"integerValue"in e}function aS(e){return!!e&&"arrayValue"in e}function cS(e){return!!e&&"nullValue"in e}function uS(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lS(e){return!!e&&"mapValue"in e}function hS(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return OT(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=hS(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=hS(e.arrayValue.values[n]);return t}return Object.assign({},e)}function dS(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function fS(e){return"nullValue"in e?JT:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?oS(WT.empty(),EE.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Yk()}function pS(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?oS(WT.empty(),EE.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?QT:Yk()}function mS(e,t){const n=tS(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gS(e,t){const n=tS(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.value=e}static empty(){return new yS({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hS(t)}setAll(e){let t=kE.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=hS(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());lS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return XT(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];lS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){OT(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new yS(hS(this.value))}}function vS(e){const t=[];return OT(e.fields,((e,n)=>{const i=new kE([e]);if(lS(n)){const e=vS(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new LT(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class bS{constructor(e,t,n,i,r,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=s}static newInvalidDocument(e){return new bS(e,0,bE.min(),bE.min(),bE.min(),yS.empty(),0)}static newFoundDocument(e,t,n,i){return new bS(e,1,t,bE.min(),n,i,0)}static newNoDocument(e,t){return new bS(e,2,t,bE.min(),bE.min(),yS.empty(),0)}static newUnknownDocument(e,t){return new bS(e,3,t,bE.min(),bE.min(),yS.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bE.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yS.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yS.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bE.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bS&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bS(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t){this.position=e,this.inclusive=t}}function _S(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const o=t[r],s=e.position[r];if(i=o.field.isKeyField()?EE.comparator(EE.fromName(s.referenceValue),n.key):tS(s,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function IS(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!XT(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t="asc"){this.field=e,this.dir=t}}function ES(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{}class SS extends TS{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new jS(e,t,n):"array-contains"===t?new qS(e,n):"in"===t?new VS(e,n):"not-in"===t?new BS(e,n):"array-contains-any"===t?new ZS(e,n):new SS(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new LS(e,n):new MS(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tS(t,this.value)):null!==t&&YT(this.value)===YT(t)&&this.matchesComparison(tS(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yk()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class PS extends TS{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new PS(e,t)}matches(e){return CS(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt((e=>e.isInequality()));return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function CS(e){return"and"===e.op}function OS(e){return"or"===e.op}function xS(e){return AS(e)&&CS(e)}function AS(e){for(const t of e.filters)if(t instanceof PS)return!1;return!0}function FS(e){if(e instanceof SS)return e.field.canonicalString()+e.op.toString()+iS(e.value);if(xS(e))return e.filters.map((e=>FS(e))).join(",");{const t=e.filters.map((e=>FS(e))).join(",");return`${e.op}(${t})`}}function RS(e,t){return e instanceof SS?function(e,t){return t instanceof SS&&e.op===t.op&&e.field.isEqual(t.field)&&XT(e.value,t.value)}(e,t):e instanceof PS?function(e,t){return t instanceof PS&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&RS(n,t.filters[i])),!0)}(e,t):void Yk()}function NS(e,t){const n=e.filters.concat(t);return PS.create(n,e.op)}function DS(e){return e instanceof SS?function(e){return`${e.field.canonicalString()} ${e.op} ${iS(e.value)}`}(e):e instanceof PS?function(e){return e.op.toString()+" {"+e.getFilters().map(DS).join(" ,")+"}"}(e):"Filter"}class jS extends SS{constructor(e,t,n){super(e,t,n),this.key=EE.fromName(n.referenceValue)}matches(e){const t=EE.comparator(e.key,this.key);return this.matchesComparison(t)}}class LS extends SS{constructor(e,t){super(e,"in",t),this.keys=US("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class MS extends SS{constructor(e,t){super(e,"not-in",t),this.keys=US("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function US(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>EE.fromName(e.referenceValue)))}class qS extends SS{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return aS(t)&&eS(t.arrayValue,this.value)}}class VS extends SS{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eS(this.value.arrayValue,t)}}class BS extends SS{constructor(e,t){super(e,"not-in",t)}matches(e){if(eS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eS(this.value.arrayValue,t)}}class ZS extends SS{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!aS(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>eS(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t=null,n=[],i=[],r=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.ft=null}}function zS(e,t=null,n=[],i=[],r=null,o=null,s=null){return new $S(e,t,n,i,r,o,s)}function HS(e){const t=tE(e);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>FS(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),QE(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>iS(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>iS(e))).join(",")),t.ft=e}return t.ft}function KS(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ES(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!RS(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!IS(e.startAt,t.startAt)&&IS(e.endAt,t.endAt)}function GS(e){return EE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function WS(e,t){return e.filters.filter((e=>e instanceof SS&&e.field.isEqual(t)))}function QS(e,t,n){let i=JT,r=!0;for(const o of WS(e,t)){let e=JT,t=!0;switch(o.op){case"<":case"<=":e=fS(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=JT}mS({value:i,inclusive:r},{value:e,inclusive:t})<0&&(i=e,r=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];mS({value:i,inclusive:r},{value:e,inclusive:n.inclusive})<0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}function JS(e,t,n){let i=QT,r=!0;for(const o of WS(e,t)){let e=QT,t=!0;switch(o.op){case">=":case">":e=pS(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=QT}gS({value:i,inclusive:r},{value:e,inclusive:t})>0&&(i=e,r=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];gS({value:i,inclusive:r},{value:e,inclusive:n.inclusive})>0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t=null,n=[],i=[],r=null,o="F",s=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=s,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function XS(e,t,n,i,r,o,s,a){return new YS(e,t,n,i,r,o,s,a)}function eP(e){return new YS(e)}function tP(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nP(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iP(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function rP(e){return null!==e.collectionGroup}function oP(e){const t=tE(e);if(null===t.dt){t.dt=[];const e=iP(t),n=nP(t);if(null!==e&&null===n)e.isKeyField()||t.dt.push(new kS(e)),t.dt.push(new kS(kE.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.dt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new kS(kE.keyField(),e))}}}return t.dt}function sP(e){const t=tE(e);if(!t._t)if("F"===t.limitType)t._t=zS(t.path,t.collectionGroup,oP(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of oP(t)){const t="desc"===r.dir?"asc":"desc";e.push(new kS(r.field,t))}const n=t.endAt?new wS(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new wS(t.startAt.position,t.startAt.inclusive):null;t._t=zS(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t._t}function aP(e,t){t.getFirstInequalityField(),iP(e);const n=e.filters.concat([t]);return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cP(e,t,n){return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uP(e,t){return KS(sP(e),sP(t))&&e.limitType===t.limitType}function lP(e){return`${HS(sP(e))}|lt:${e.limitType}`}function hP(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>DS(e))).join(", ")}]`),QE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>iS(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>iS(e))).join(",")),`Target(${t})`}(sP(e))}; limitType=${e.limitType})`}function dP(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):EE.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of oP(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=_S(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,oP(e),t))&&!(e.endAt&&!function(e,t,n){const i=_S(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,oP(e),t))}(e,t)}function fP(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pP(e){return(t,n)=>{let i=!1;for(const r of oP(e)){const e=mP(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function mP(e,t,n){const i=e.field.isKeyField()?EE.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?tS(i,r):Yk()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Yk()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){OT(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return xT(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new AT(EE.comparator);function vP(){return yP}const bP=new AT(EE.comparator);function wP(...e){let t=bP;for(const n of e)t=t.insert(n.key,n);return t}function _P(e){let t=bP;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function IP(){return EP()}function kP(){return EP()}function EP(){return new gP((e=>e.toString()),((e,t)=>e.isEqual(t)))}const TP=new AT(EE.comparator),SP=new NT(EE.comparator);function PP(...e){let t=SP;for(const n of e)t=t.add(n);return t}const CP=new NT(mE);function OP(){return CP}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:JE(t)?"-0":t}}function AP(e){return{integerValue:""+e}}function FP(e,t){return YE(t)?AP(t):xP(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this._=void 0}}function NP(e,t,n){return e instanceof LP?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zT(t)&&(t=HT(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof MP?UP(e,t):e instanceof qP?VP(e,t):function(e,t){const n=jP(e,t),i=ZP(n)+ZP(e.wt);return sS(n)&&sS(e.wt)?AP(i):xP(e.serializer,i)}(e,t)}function DP(e,t,n){return e instanceof MP?UP(e,t):e instanceof qP?VP(e,t):n}function jP(e,t){return e instanceof BP?sS(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class LP extends RP{}class MP extends RP{constructor(e){super(),this.elements=e}}function UP(e,t){const n=$P(t);for(const i of e.elements)n.some((e=>XT(e,i)))||n.push(i);return{arrayValue:{values:n}}}class qP extends RP{constructor(e){super(),this.elements=e}}function VP(e,t){let n=$P(t);for(const i of e.elements)n=n.filter((e=>!XT(e,i)));return{arrayValue:{values:n}}}class BP extends RP{constructor(e,t){super(),this.serializer=e,this.wt=t}}function ZP(e){return ZT(e.integerValue||e.doubleValue)}function $P(e){return aS(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t){this.field=e,this.transform=t}}function HP(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof MP&&t instanceof MP||e instanceof qP&&t instanceof qP?gE(e.elements,t.elements,XT):e instanceof BP&&t instanceof BP?XT(e.wt,t.wt):e instanceof LP&&t instanceof LP}(e.transform,t.transform)}class KP{constructor(e,t){this.version=e,this.transformResults=t}}class GP{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new GP}static exists(e){return new GP(void 0,e)}static updateTime(e){return new GP(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WP(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class QP{}function JP(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new aC(e.key,GP.none()):new nC(e.key,e.data,GP.none());{const n=e.data,i=yS.empty();let r=new NT(kE.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new iC(e.key,i,new LT(r.toArray()),GP.none())}}function YP(e,t,n){e instanceof nC?function(e,t,n){const i=e.value.clone(),r=oC(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof iC?function(e,t,n){if(!WP(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=oC(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(rC(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function XP(e,t,n,i){return e instanceof nC?function(e,t,n,i){if(!WP(e.precondition,t))return n;const r=e.value.clone(),o=sC(e.fieldTransforms,i,t);return r.setAll(o),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof iC?function(e,t,n,i){if(!WP(e.precondition,t))return n;const r=sC(e.fieldTransforms,i,t),o=t.data;return o.setAll(rC(e)),o.setAll(r),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return WP(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function eC(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=jP(i.transform,e||null);null!=r&&(null===n&&(n=yS.empty()),n.set(i.field,r))}return n||null}function tC(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gE(e,t,((e,t)=>HP(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nC extends QP{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class iC extends QP{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function rC(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function oC(e,t,n){const i=new Map;Xk(e.length===n.length);for(let r=0;r<n.length;r++){const o=e[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,DP(s,a,n[r]))}return i}function sC(e,t,n){const i=new Map;for(const r of e){const e=r.transform,o=n.data.field(r.field);i.set(r.field,NP(e,o,t))}return i}class aC extends QP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cC extends QP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&YP(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=XP(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=XP(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=kP();return this.mutations.forEach((i=>{const r=e.get(i.key),o=r.overlayedDocument;let s=this.applyToLocalView(o,r.mutatedFields);s=t.has(i.key)?null:s;const a=JP(o,s);null!==a&&n.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(bE.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),PP())}isEqual(e){return this.batchId===e.batchId&&gE(this.mutations,e.mutations,((e,t)=>tC(e,t)))&&gE(this.baseMutations,e.baseMutations,((e,t)=>tC(e,t)))}}class lC{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Xk(e.mutations.length===n.length);let i=TP;const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,n[o].version);return new lC(e,t,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dC{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fC,pC;function mC(e){switch(e){default:return Yk();case nE.CANCELLED:case nE.UNKNOWN:case nE.DEADLINE_EXCEEDED:case nE.RESOURCE_EXHAUSTED:case nE.INTERNAL:case nE.UNAVAILABLE:case nE.UNAUTHENTICATED:return!1;case nE.INVALID_ARGUMENT:case nE.NOT_FOUND:case nE.ALREADY_EXISTS:case nE.PERMISSION_DENIED:case nE.FAILED_PRECONDITION:case nE.ABORTED:case nE.OUT_OF_RANGE:case nE.UNIMPLEMENTED:case nE.DATA_LOSS:return!0}}function gC(e){if(void 0===e)return Wk("GRPC error has no .code"),nE.UNKNOWN;switch(e){case fC.OK:return nE.OK;case fC.CANCELLED:return nE.CANCELLED;case fC.UNKNOWN:return nE.UNKNOWN;case fC.DEADLINE_EXCEEDED:return nE.DEADLINE_EXCEEDED;case fC.RESOURCE_EXHAUSTED:return nE.RESOURCE_EXHAUSTED;case fC.INTERNAL:return nE.INTERNAL;case fC.UNAVAILABLE:return nE.UNAVAILABLE;case fC.UNAUTHENTICATED:return nE.UNAUTHENTICATED;case fC.INVALID_ARGUMENT:return nE.INVALID_ARGUMENT;case fC.NOT_FOUND:return nE.NOT_FOUND;case fC.ALREADY_EXISTS:return nE.ALREADY_EXISTS;case fC.PERMISSION_DENIED:return nE.PERMISSION_DENIED;case fC.FAILED_PRECONDITION:return nE.FAILED_PRECONDITION;case fC.ABORTED:return nE.ABORTED;case fC.OUT_OF_RANGE:return nE.OUT_OF_RANGE;case fC.UNIMPLEMENTED:return nE.UNIMPLEMENTED;case fC.DATA_LOSS:return nE.DATA_LOSS;default:return Yk()}}(pC=fC||(fC={}))[pC.OK=0]="OK",pC[pC.CANCELLED=1]="CANCELLED",pC[pC.UNKNOWN=2]="UNKNOWN",pC[pC.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pC[pC.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pC[pC.NOT_FOUND=5]="NOT_FOUND",pC[pC.ALREADY_EXISTS=6]="ALREADY_EXISTS",pC[pC.PERMISSION_DENIED=7]="PERMISSION_DENIED",pC[pC.UNAUTHENTICATED=16]="UNAUTHENTICATED",pC[pC.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pC[pC.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pC[pC.ABORTED=10]="ABORTED",pC[pC.OUT_OF_RANGE=11]="OUT_OF_RANGE",pC[pC.UNIMPLEMENTED=12]="UNIMPLEMENTED",pC[pC.INTERNAL=13]="INTERNAL",pC[pC.UNAVAILABLE=14]="UNAVAILABLE",pC[pC.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yC{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vC}static getOrCreateInstance(){return null===vC&&(vC=new yC),vC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let vC=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Vk([4294967295,4294967295],0);function _C(e){const t=bC().encode(e),n=new qk;return n.update(t),new Uint8Array(n.digest())}function IC(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Vk([n,i],0),new Vk([r,o],0)]}class kC{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new EC(`Invalid padding: ${t}`);if(n<0)throw new EC(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new EC(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new EC(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Vk.fromNumber(this.yt)}Tt(e,t,n){let i=e.add(t.multiply(Vk.fromNumber(n)));return 1===i.compare(wC)&&(i=new Vk([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=_C(e),[n,i]=IC(t);for(let r=0;r<this.hashCount;r++){const e=this.Tt(n,i,r);if(!this.Et(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new kC(r,i,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.yt)return;const t=_C(e),[n,i]=IC(t);for(let r=0;r<this.hashCount;r++){const e=this.Tt(n,i,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class EC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,SC.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new TC(bE.min(),i,new AT(mE),vP(),PP())}}class SC{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new SC(n,t,PP(),PP(),PP())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,n,i){this.vt=e,this.removedTargetIds=t,this.key=n,this.Pt=i}}class CC{constructor(e,t){this.targetId=e,this.bt=t}}class OC{constructor(e,t,n=qT.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class xC{constructor(){this.Vt=0,this.St=RC(),this.Dt=qT.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=PP(),t=PP(),n=PP();return this.St.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Yk()}})),new SC(this.Dt,this.Ct,e,t,n)}$t(){this.xt=!1,this.St=RC()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class AC{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=vP(),this.jt=FC(),this.zt=new AT(mE)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,(t=>{const n=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&n.Mt(e.resumeToken);break;case 1:n.qt(),n.Nt||n.$t(),n.Mt(e.resumeToken);break;case 2:n.qt(),n.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(n.Ut(),n.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),n.Mt(e.resumeToken));break;default:Yk()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach(((e,n)=>{this.Zt(n)&&t(n)}))}ee(e){var t;const n=e.targetId,i=e.bt.count,r=this.ne(n);if(r){const o=r.target;if(GS(o))if(0===i){const e=new EE(o.path);this.Jt(n,e,bS.newNoDocument(e,bE.min()))}else Xk(1===i);else{const r=this.se(n);if(r!==i){const i=this.ie(e,r);if(0!==i){this.te(n);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,e)}null===(t=yC.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var i,r,o,s,a,c;const u={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(u.bloomFilter={applied:0===e,hashCount:null!==(i=null==l?void 0:l.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===(o=null===(r=null==l?void 0:l.bits)||void 0===r?void 0:r.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(c=null===(a=null==l?void 0:l.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i,r,e.bt))}}}}ie(e,t){const{unchangedNames:n,count:i}=e.bt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:s=0}=n;let a,c;try{a=$T(r).toUint8Array()}catch(e){if(e instanceof MT)return Qk("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new kC(a,o,s)}catch(e){return Qk(e instanceof EC?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.yt?1:i!==t-this.re(e.targetId,c)?2:0}re(e,t){const n=this.Kt.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Kt.oe(),o=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.At(o)||(this.Jt(e,n,null),i++)})),i}ue(e){const t=new Map;this.Gt.forEach(((n,i)=>{const r=this.ne(i);if(r){if(n.current&&GS(r.target)){const t=new EE(r.target.path);null!==this.Qt.get(t)||this.ce(i,t)||this.Jt(i,t,bS.newNoDocument(t,e))}n.kt&&(t.set(i,n.Ot()),n.$t())}}));let n=PP();this.jt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.ne(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.Qt.forEach(((t,n)=>n.setReadTime(e)));const i=new TC(e,t,this.zt,this.Qt,n);return this.Qt=vP(),this.jt=FC(),this.zt=new AT(mE),i}Ht(e,t){if(!this.Zt(e))return;const n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,n){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new xC,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new NT(mE),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Gk("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new xC),this.Kt.getRemoteKeysForTarget(e).forEach((t=>{this.Jt(e,t,null)}))}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function FC(){return new AT(EE.comparator)}function RC(){return new AT(EE.comparator)}const NC=(()=>{const e={asc:"ASCENDING",desc:"DESCENDING"};return e})(),DC=(()=>{const e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return e})(),jC=(()=>{const e={and:"AND",or:"OR"};return e})();class LC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MC(e,t){return e.useProto3Json||QE(t)?t:{value:t}}function UC(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function VC(e,t){return UC(e,t.toTimestamp())}function BC(e){return Xk(!!e),bE.fromTimestamp(function(e){const t=BT(e);return new vE(t.seconds,t.nanos)}(e))}function ZC(e,t){return function(e){return new _E(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function $C(e){const t=_E.fromString(e);return Xk(gO(t)),t}function zC(e,t){return ZC(e.databaseId,t.path)}function HC(e,t){const n=$C(t);if(n.get(1)!==e.databaseId.projectId)throw new iE(nE.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new iE(nE.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new EE(QC(n))}function KC(e,t){return ZC(e.databaseId,t)}function GC(e){const t=$C(e);return 4===t.length?_E.emptyPath():QC(t)}function WC(e){return new _E(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function QC(e){return Xk(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function JC(e,t,n){return{name:zC(e,t),fields:n.value.mapValue.fields}}function YC(e,t,n){const i=HC(e,t.name),r=BC(t.updateTime),o=t.createTime?BC(t.createTime):bE.min(),s=new yS({mapValue:{fields:t.fields}}),a=bS.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function XC(e,t){return"found"in t?function(e,t){Xk(!!t.found),t.found.name,t.found.updateTime;const n=HC(e,t.found.name),i=BC(t.found.updateTime),r=t.found.createTime?BC(t.found.createTime):bE.min(),o=new yS({mapValue:{fields:t.found.fields}});return bS.newFoundDocument(n,i,r,o)}(e,t):"missing"in t?function(e,t){Xk(!!t.missing),Xk(!!t.readTime);const n=HC(e,t.missing),i=BC(t.readTime);return bS.newNoDocument(n,i)}(e,t):Yk()}function eO(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yk()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Xk(void 0===t||"string"==typeof t),qT.fromBase64String(t||"")):(Xk(void 0===t||t instanceof Uint8Array),qT.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?nE.UNKNOWN:gC(e.code);return new iE(t,e.message||"")}(s);n=new OC(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=HC(e,i.document.name),o=BC(i.document.updateTime),s=i.document.createTime?BC(i.document.createTime):bE.min(),a=new yS({mapValue:{fields:i.document.fields}}),c=bS.newFoundDocument(r,o,s,a),u=i.targetIds||[],l=i.removedTargetIds||[];n=new PC(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=HC(e,i.document),o=i.readTime?BC(i.readTime):bE.min(),s=bS.newNoDocument(r,o),a=i.removedTargetIds||[];n=new PC([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=HC(e,i.document),o=i.removedTargetIds||[];n=new PC([],o,r,null)}else{if(!("filter"in t))return Yk();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,o=new dC(i,r),s=e.targetId;n=new CC(s,o)}}return n}function tO(e,t){let n;if(t instanceof nC)n={update:JC(e,t.key,t.value)};else if(t instanceof aC)n={delete:zC(e,t.key)};else if(t instanceof iC)n={update:JC(e,t.key,t.data),updateMask:mO(t.fieldMask)};else{if(!(t instanceof cC))return Yk();n={verify:zC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof LP)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof MP)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qP)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof BP)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw Yk()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:VC(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yk()}(e,t.precondition)),n}function nO(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?GP.updateTime(BC(e.updateTime)):void 0!==e.exists?GP.exists(e.exists):GP.none()}(t.currentDocument):GP.none(),i=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Xk("REQUEST_TIME"===t.setToServerValue),n=new LP;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new MP(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new qP(e)}else"increment"in t?n=new BP(e,t.increment):Yk();const i=kE.fromServerFormat(t.fieldPath);return new zP(i,n)}(e,t))):[];if(t.update){t.update.name;const r=HC(e,t.update.name),o=new yS({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new LT(t.map((e=>kE.fromServerFormat(e))))}(t.updateMask);return new iC(r,o,e,n,i)}return new nC(r,o,n,i)}if(t.delete){const i=HC(e,t.delete);return new aC(i,n)}if(t.verify){const i=HC(e,t.verify);return new cC(i,n)}return Yk()}function iO(e,t){return e&&e.length>0?(Xk(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?BC(e.updateTime):BC(t);return n.isEqual(bE.min())&&(n=BC(t)),new KP(n,e.transformResults||[])}(e,t)))):[]}function rO(e,t){return{documents:[KC(e,t.path)]}}function oO(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=KC(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=KC(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0!==e.length)return pO(PS.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:dO(e.field),direction:uO(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=MC(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function sO(e){let t=GC(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Xk(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=cO(e);return t instanceof PS&&xS(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new kS(fO(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,QE(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new wS(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new wS(n,t)}(n.endAt)),XS(t,r,s,o,a,"F",c,u)}function aO(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yk()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}function cO(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fO(e.unaryFilter.field);return SS.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=fO(e.unaryFilter.field);return SS.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fO(e.unaryFilter.field);return SS.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=fO(e.unaryFilter.field);return SS.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Yk()}}(e):void 0!==e.fieldFilter?function(e){return SS.create(fO(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yk()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return PS.create(e.compositeFilter.filters.map((e=>cO(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Yk()}}(e.compositeFilter.op))}(e):Yk()}function uO(e){return NC[e]}function lO(e){return DC[e]}function hO(e){return jC[e]}function dO(e){return{fieldPath:e.canonicalString()}}function fO(e){return kE.fromServerFormat(e.fieldPath)}function pO(e){return e instanceof SS?function(e){if("=="===e.op){if(uS(e.value))return{unaryFilter:{field:dO(e.field),op:"IS_NAN"}};if(cS(e.value))return{unaryFilter:{field:dO(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uS(e.value))return{unaryFilter:{field:dO(e.field),op:"IS_NOT_NAN"}};if(cS(e.value))return{unaryFilter:{field:dO(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dO(e.field),op:lO(e.op),value:e.value}}}(e):e instanceof PS?function(e){const t=e.getFilters().map((e=>pO(e)));return 1===t.length?t[0]:{compositeFilter:{op:hO(e.op),filters:t}}}(e):Yk()}function mO(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function gO(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,t,n,i,r=bE.min(),o=bE.min(),s=qT.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new yO(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yO(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yO(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yO(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.le=e}}function bO(e,t){let n;if(t.document)n=YC(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=EE.fromSegments(t.noDocument.path),i=kO(t.noDocument.readTime);n=bS.newNoDocument(e,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Yk();{const e=EE.fromSegments(t.unknownDocument.path),i=kO(t.unknownDocument.version);n=bS.newUnknownDocument(e,i)}}return t.readTime&&n.setReadTime(function(e){const t=new vE(e[0],e[1]);return bE.fromTimestamp(t)}(t.readTime)),n}function wO(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:_O(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:zC(e,t.key),fields:t.data.value.mapValue.fields,updateTime:UC(e,t.version.toTimestamp()),createTime:UC(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:IO(t.version)};else{if(!t.isUnknownDocument())return Yk();i.unknownDocument={path:n.path.toArray(),version:IO(t.version)}}return i}function _O(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function IO(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function kO(e){const t=new vE(e.seconds,e.nanoseconds);return bE.fromTimestamp(t)}function EO(e,t){const n=(t.baseMutations||[]).map((t=>nO(e.le,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const i=t.mutations.map((t=>nO(e.le,t))),r=vE.fromMillis(t.localWriteTimeMs);return new uC(t.batchId,r,n,i)}function TO(e){const t=kO(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?kO(e.lastLimboFreeSnapshotVersion):bE.min();let i;var r;return void 0!==e.query.documents?(Xk(1===(r=e.query).documents.length),i=sP(eP(GC(r.documents[0])))):i=function(e){return sP(sO(e))}(e.query),new yO(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,qT.fromBase64String(e.resumeToken))}function SO(e,t){const n=IO(t.snapshotVersion),i=IO(t.lastLimboFreeSnapshotVersion);let r;r=GS(t.target)?rO(e.le,t.target):oO(e.le,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:HS(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function PO(e){const t=sO({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cP(t,t.limit,"L"):t}function CO(e,t){return new hC(t.largestBatchId,nO(e.le,t.overlayMutation))}function OO(e,t){const n=t.path.lastSegment();return[e,XE(t.path.popLast()),n]}function xO(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:IO(i.readTime),documentKey:XE(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{getBundleMetadata(e,t){return FO(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:kO(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return FO(e).put({bundleId:(n=t).id,createTime:IO(BC(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return RO(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:PO(t.bundledQuery),readTime:kO(t.readTime)};var t}))}saveNamedQuery(e,t){return RO(e).put(function(e){return{name:e.name,readTime:IO(BC(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function FO(e){return PT(e,"bundles")}function RO(e){return PT(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){const n=t.uid||"";return new NO(e,n)}getOverlay(e,t){return DO(e).get(OO(this.userId,t)).next((e=>e?CO(this.serializer,e):null))}getOverlays(e,t){const n=IP();return LE.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((n,r)=>{const o=new hC(t,r);i.push(this.de(e,o))})),LE.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((e=>i.add(XE(e.getCollectionPath()))));const r=[];return i.forEach((t=>{const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);r.push(DO(e).J("collectionPathOverlayIndex",i))})),LE.waitFor(r)}getOverlaysForCollection(e,t,n){const i=IP(),r=XE(t),o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return DO(e).j("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=CO(this.serializer,t);i.set(e.getKey(),e)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const r=IP();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return DO(e).X({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=CO(this.serializer,t);r.size()<i||s.largestBatchId===o?(r.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>r))}de(e,t){return DO(e).put(function(e,t,n){const[i,r,o]=OO(t,n.mutation.key);return{userId:t,collectionPath:r,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:tO(e.le,n.mutation)}}(this.serializer,this.userId,t))}}function DO(e){return PT(e,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(ZT(e.integerValue));else if("doubleValue"in e){const n=ZT(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),JE(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ge(t,20),"string"==typeof n?t.pe(n):(t.pe(`${n.seconds||""}`),t.ye(n.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee($T(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ge(t,45),t.ye(n.latitude||0),t.ye(n.longitude||0)}else"mapValue"in e?dS(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Yk()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const n=e.fields||{};this.ge(t,55);for(const i of Object.keys(n))this.Ie(i,t),this.we(n[i],t)}ve(e,t){const n=e.values||[];this.ge(t,50);for(const i of n)this.we(i,t)}Ae(e,t){this.ge(t,37),EE.fromName(e).path.forEach((e=>{this.ge(t,60),this.Pe(e,t)}))}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function LO(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function MO(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const i=LO(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}jO.be=new jO;class UO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Se(n.value),n=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xe(n.value),n=t.next();this.Ne()}ke(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Se(e);else if(e<2048)this.Se(960|e>>>6),this.Se(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Se(480|e>>>12),this.Se(128|63&e>>>6),this.Se(128|63&e);else{const e=t.codePointAt(0);this.Se(240|e>>>18),this.Se(128|63&e>>>12),this.Se(128|63&e>>>6),this.Se(128|63&e)}}this.De()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.xe(e);else if(e<2048)this.xe(960|e>>>6),this.xe(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.xe(480|e>>>12),this.xe(128|63&e>>>6),this.xe(128|63&e);else{const e=t.codePointAt(0);this.xe(240|e>>>18),this.xe(128|63&e>>>12),this.xe(128|63&e>>>6),this.xe(128|63&e)}}this.Ne()}Oe(e){const t=this.$e(e),n=MO(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Be(e){const t=this.$e(e),n=MO(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class qO{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class VO{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class BO{constructor(){this.Qe=new UO,this.je=new qO(this.Qe),this.ze=new VO(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ZO(this.indexId,this.documentKey,this.arrayValue,n)}}function $O(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=zO(e.arrayValue,t.arrayValue),0!==n?n:(n=zO(e.directionalValue,t.directionalValue),0!==n?n:EE.comparator(e.documentKey,t.documentKey)))}function zO(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xe=e:this.Ye.push(e)}}Ze(e){Xk(e.collectionGroup===this.collectionId);const t=SE(e);if(void 0!==t&&!this.tn(t))return!1;const n=PE(e);let i=0,r=0;for(;i<n.length&&this.tn(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Xe){const e=n[i];if(!this.en(this.Xe,e)||!this.nn(this.Je[r++],e))return!1;++i}for(;i<n.length;++i){const e=n[i];if(r>=this.Je.length||!this.nn(this.Je[r++],e))return!1}return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(e){var t,n;if(Xk(e instanceof SS||e instanceof PS),e instanceof SS){if(e instanceof VS){const i=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>SS.create(e.field,"==",t))))||[];return PS.create(i,"or")}return e}const i=e.filters.map((e=>KO(e)));return PS.create(i,e.op)}function GO(e){if(0===e.getFilters().length)return[];const t=YO(KO(e));return Xk(JO(t)),WO(t)||QO(t)?[t]:t.getFilters()}function WO(e){return e instanceof SS}function QO(e){return e instanceof PS&&xS(e)}function JO(e){return WO(e)||QO(e)||function(e){if(e instanceof PS&&OS(e)){for(const t of e.getFilters())if(!WO(t)&&!QO(t))return!1;return!0}return!1}(e)}function YO(e){if(Xk(e instanceof SS||e instanceof PS),e instanceof SS)return e;if(1===e.filters.length)return YO(e.filters[0]);const t=e.filters.map((e=>YO(e)));let n=PS.create(t,e.op);return n=tx(n),JO(n)?n:(Xk(n instanceof PS),Xk(CS(n)),Xk(n.filters.length>1),n.filters.reduce(((e,t)=>XO(e,t))))}function XO(e,t){let n;return Xk(e instanceof SS||e instanceof PS),Xk(t instanceof SS||t instanceof PS),n=e instanceof SS?t instanceof SS?function(e,t){return PS.create([e,t],"and")}(e,t):ex(e,t):t instanceof SS?ex(t,e):function(e,t){if(Xk(e.filters.length>0&&t.filters.length>0),CS(e)&&CS(t))return NS(e,t.getFilters());const n=OS(e)?e:t,i=OS(e)?t:e,r=n.filters.map((e=>XO(e,i)));return PS.create(r,"or")}(e,t),tx(n)}function ex(e,t){if(CS(t))return NS(t,e.getFilters());{const n=t.filters.map((t=>XO(e,t)));return PS.create(n,"or")}}function tx(e){if(Xk(e instanceof SS||e instanceof PS),e instanceof SS)return e;const t=e.getFilters();if(1===t.length)return tx(t[0]);if(AS(e))return e;const n=t.map((e=>tx(e))),i=[];return n.forEach((t=>{t instanceof SS?i.push(t):t instanceof PS&&(t.op===e.op?i.push(...t.filters):i.push(t))})),1===i.length?i[0]:PS.create(i,e.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class nx{constructor(){this.sn=new ix}addToCollectionParentIndex(e,t){return this.sn.add(t),LE.resolve()}getCollectionParents(e,t){return LE.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return LE.resolve()}deleteFieldIndex(e,t){return LE.resolve()}getDocumentsMatchingTarget(e,t){return LE.resolve(null)}getIndexType(e,t){return LE.resolve(0)}getFieldIndexes(e,t){return LE.resolve([])}getNextCollectionGroupToUpdate(e){return LE.resolve(null)}getMinOffset(e,t){return LE.resolve(FE.min())}getMinOffsetFromCollectionGroup(e,t){return LE.resolve(FE.min())}updateCollectionGroup(e,t,n){return LE.resolve()}updateIndexEntries(e,t){return LE.resolve()}}class ix{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new NT(_E.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new NT(_E.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Uint8Array(0);class ox{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new ix,this.on=new gP((e=>HS(e)),((e,t)=>KS(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.rn.add(t)}));const r={collectionId:n,parent:XE(i)};return sx(e).put(r)}return LE.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[yE(t),""],!1,!0);return sx(e).j(i).next((e=>{for(const i of e){if(i.collectionId!==t)break;n.push(nT(i.parent))}return n}))}addFieldIndex(e,t){const n=cx(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete i.indexId;const r=n.add(i);if(t.indexState){const n=ux(e);return r.next((e=>{n.put(xO(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return r.next()}deleteFieldIndex(e,t){const n=cx(e),i=ux(e),r=ax(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=ax(e);let i=!0;const r=new Map;return LE.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{i&&(i=!!e),r.set(t,e)})))).next((()=>{if(i){let e=PP();const i=[];return LE.forEach(r,((r,o)=>{var s;Gk("IndexedDbIndexManager",`Using index ${s=r,`id=${s.indexId}|cg=${s.collectionGroup}|f=${s.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${HS(t)}`);const a=function(e,t){const n=SE(t);if(void 0===n)return null;for(const i of WS(e,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(o,r),c=function(e,t){const n=new Map;for(const i of PE(t))for(const t of WS(e,i.fieldPath))switch(t.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,r),u=function(e,t){const n=[];let i=!0;for(const r of PE(t)){const t=0===r.kind?QS(e,r.fieldPath,e.startAt):JS(e,r.fieldPath,e.startAt);n.push(t.value),i&&(i=t.inclusive)}return new wS(n,i)}(o,r),l=function(e,t){const n=[];let i=!0;for(const r of PE(t)){const t=0===r.kind?JS(e,r.fieldPath,e.endAt):QS(e,r.fieldPath,e.endAt);n.push(t.value),i&&(i=t.inclusive)}return new wS(n,i)}(o,r),h=this.an(r,o,u),d=this.an(r,o,l),f=this.hn(r,o,c),p=this.ln(r.indexId,a,h,u.inclusive,d,l.inclusive,f);return LE.forEach(p,(r=>n.H(r,t.limit).next((t=>{t.forEach((t=>{const n=EE.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),i.push(n))}))}))))})).next((()=>i))}return LE.resolve(null)}))}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:GO(PS.create(e.filters,"and")).map((t=>zS(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.on.set(e,t),t)}ln(e,t,n,i,r,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,r.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.fn(t[l/c]):rx,h=this.dn(e,a,n[l%c],i),d=this._n(e,a,r[l%c],o),f=s.map((t=>this.dn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}dn(e,t,n,i){const r=new ZO(e,EE.empty(),t,n);return i?r:r.He()}_n(e,t,n,i){const r=new ZO(e,EE.empty(),t,n);return i?r.He():r}cn(e,t){const n=new HO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((e=>{let t=null;for(const i of e)n.Ze(i)&&(!t||i.fields.length>t.fields.length)&&(t=i);return t}))}getIndexType(e,t){let n=2;const i=this.un(t);return LE.forEach(i,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new NT(kE.comparator),n=!1;for(const i of e.filters)for(const e of i.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const i of e.orderBy)i.field.isKeyField()||(t=t.add(i.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&i.length>1&&2===n?1:n))}wn(e,t){const n=new BO;for(const i of PE(e)){const e=t.data.field(i.fieldPath);if(null==e)return null;const r=n.We(i.kind);jO.be._e(e,r)}return n.Ge()}fn(e){const t=new BO;return jO.be._e(e,t.We(0)),t.Ge()}mn(e,t){const n=new BO;return jO.be._e(oS(this.databaseId,t),n.We(function(e){const t=PE(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}hn(e,t,n){if(null===n)return[];let i=[];i.push(new BO);let r=0;for(const o of PE(e)){const e=n[r++];for(const n of i)if(this.gn(t,o.fieldPath)&&aS(e))i=this.yn(i,o,e);else{const t=n.We(o.kind);jO.be._e(e,t)}}return this.pn(i)}an(e,t,n){return this.hn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ge();return t}yn(e,t,n){const i=[...e],r=[];for(const o of n.arrayValue.values||[])for(const e of i){const n=new BO;n.seed(e.Ge()),jO.be._e(o,n.We(t.kind)),r.push(n)}return r}gn(e,t){return!!e.filters.find((e=>e instanceof SS&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=cx(e),i=ux(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return LE.forEach(e,(e=>i.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new OE(t.sequenceNumber,new FE(kO(t.readTime),new EE(nT(t.documentKey)),t.largestBatchId)):OE.empty(),i=e.fields.map((([e,t])=>new CE(kE.fromServerFormat(e),t)));return new TE(e.indexId,e.collectionGroup,i,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:mE(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=cx(e),r=ux(e);return this.In(e).next((e=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>LE.forEach(t,(t=>r.put(xO(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return LE.forEach(t,((t,i)=>{const r=n.get(t.collectionGroup);return(r?LE.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next((r=>(n.set(t.collectionGroup,r),LE.forEach(r,(n=>this.Tn(e,t,n).next((t=>{const r=this.En(i,n);return t.isEqual(r)?LE.resolve():this.An(e,i,n,t,r)})))))))}))}Rn(e,t,n,i){return ax(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,i){return ax(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}Tn(e,t,n){const i=ax(e);let r=new NT($O);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},((e,i)=>{r=r.add(new ZO(n.indexId,t,i.arrayValue,i.directionalValue))})).next((()=>r))}En(e,t){let n=new NT($O);const i=this.wn(t,e);if(null==i)return n;const r=SE(t);if(null!=r){const o=e.data.field(r.fieldPath);if(aS(o))for(const r of o.arrayValue.values||[])n=n.add(new ZO(t.indexId,e.key,this.fn(r),i))}else n=n.add(new ZO(t.indexId,e.key,rx,i));return n}An(e,t,n,i,r){Gk("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,i,r){const o=e.getIterator(),s=t.getIterator();let a=jT(o),c=jT(s);for(;a||c;){let e=!1,t=!1;if(a&&c){const i=n(a,c);i<0?t=!0:i>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(i(c),c=jT(s)):t?(r(a),a=jT(o)):(a=jT(o),c=jT(s))}}(i,r,$O,(i=>{o.push(this.Rn(e,t,n,i))}),(i=>{o.push(this.vn(e,t,n,i))})),LE.waitFor(o)}In(e){let t=1;return ux(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,i)=>{i.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>$O(e,t))).filter(((e,t,n)=>!t||0!==$O(e,n[t-1])));const i=[];i.push(e);for(const o of n){const n=$O(o,e),r=$O(o,t);if(0===n)i[0]=e.He();else if(n>0&&r<0)i.push(o),i.push(o.He());else if(r>0)break}i.push(t);const r=[];for(let o=0;o<i.length;o+=2){if(this.Pn(i[o],i[o+1]))return[];const e=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,rx,[]],t=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,rx,[]];r.push(IDBKeyRange.bound(e,t))}return r}Pn(e,t){return $O(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lx)}getMinOffset(e,t){return LE.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Yk())))).next(lx)}}function sx(e){return PT(e,"collectionParents")}function ax(e){return PT(e,"indexEntries")}function cx(e){return PT(e,"indexConfiguration")}function ux(e){return PT(e,"indexState")}function lx(e){Xk(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){const r=e[i].indexState.offset;RE(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new FE(t.readTime,t.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dx{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dx(e,dx.DEFAULT_COLLECTION_PERCENTILE,dx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(e,t,n){const i=e.store("mutations"),r=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const c=i.X({range:s},((e,t,n)=>(a++,n.delete())));o.push(c.next((()=>{Xk(1===a)})));const u=[];for(const l of n.mutations){const e=oT(t,l.key.path,n.batchId);o.push(r.delete(e)),u.push(l.key)}return LE.waitFor(o).next((()=>u))}function px(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Yk();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dx.DEFAULT_COLLECTION_PERCENTILE=10,dx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dx.DEFAULT=new dx(41943040,dx.DEFAULT_COLLECTION_PERCENTILE,dx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dx.DISABLED=new dx(-1,0,0);class mx{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.bn={}}static fe(e,t,n,i){Xk(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new mx(r,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yx(e).X({index:"userMutationsIndex",range:n},((e,n,i)=>{t=!1,i.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const r=vx(e),o=yx(e);return o.add({}).next((s=>{Xk("number"==typeof s);const a=new uC(s,t,n,i),c=function(e,t,n){const i=n.baseMutations.map((t=>tO(e.le,t))),r=n.mutations.map((t=>tO(e.le,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.serializer,this.userId,a),u=[];let l=new NT(((e,t)=>mE(e.canonicalString(),t.canonicalString())));for(const e of i){const t=oT(this.userId,e.key.path,s);l=l.add(e.key.path.popLast()),u.push(o.put(c)),u.push(r.put(t,sT))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.bn[s]=a.keys()})),LE.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return yx(e).get(t).next((e=>e?(Xk(e.userId===this.userId),EO(this.serializer,e)):null))}Vn(e,t){return this.bn[t]?LE.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return yx(e).X({index:"userMutationsIndex",range:i},((e,t,i)=>{t.userId===this.userId&&(Xk(t.batchId>=n),r=EO(this.serializer,t)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return yx(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,i)=>{n=t.batchId,i.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yx(e).j("userMutationsIndex",t).next((e=>e.map((e=>EO(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rT(this.userId,t.path),i=IDBKeyRange.lowerBound(n),r=[];return vx(e).X({range:i},((n,i,o)=>{const[s,a,c]=n,u=nT(a);if(s===this.userId&&t.path.isEqual(u))return yx(e).get(c).next((e=>{if(!e)throw Yk();Xk(e.userId===this.userId),r.push(EO(this.serializer,e))}));o.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new NT(mE);const i=[];return t.forEach((t=>{const r=rT(this.userId,t.path),o=IDBKeyRange.lowerBound(r),s=vx(e).X({range:o},((e,i,r)=>{const[o,s,a]=e,c=nT(s);o===this.userId&&t.path.isEqual(c)?n=n.add(a):r.done()}));i.push(s)})),LE.waitFor(i).next((()=>this.Sn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,r=rT(this.userId,n),o=IDBKeyRange.lowerBound(r);let s=new NT(mE);return vx(e).X({range:o},((e,t,r)=>{const[o,a,c]=e,u=nT(a);o===this.userId&&n.isPrefixOf(u)?u.length===i&&(s=s.add(c)):r.done()})).next((()=>this.Sn(e,s)))}Sn(e,t){const n=[],i=[];return t.forEach((t=>{i.push(yx(e).get(t).next((e=>{if(null===e)throw Yk();Xk(e.userId===this.userId),n.push(EO(this.serializer,e))})))})),LE.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return fx(e.at,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Dn(t.batchId)})),LE.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return LE.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return vx(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=nT(e[1]);i.push(t)}else n.done()})).next((()=>{Xk(0===i.length)}))}))}containsKey(e,t){return gx(e,this.userId,t)}Cn(e){return bx(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function gx(e,t,n){const i=rT(t,n.path),r=i[1],o=IDBKeyRange.lowerBound(i);let s=!1;return vx(e).X({range:o,Y:!0},((e,n,i)=>{const[o,a,c]=e;o===t&&a===r&&(s=!0),i.done()})).next((()=>s))}function yx(e){return PT(e,"mutations")}function vx(e){return PT(e,"documentMutations")}function bx(e){return PT(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new wx(0)}static kn(){return new wx(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next((t=>{const n=new wx(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Mn(e).next((e=>bE.fromTimestamp(new vE(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Mn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Mn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i))))}addTargetData(e,t){return this.$n(e,t).next((()=>this.Mn(e).next((n=>(n.targetCount+=1,this.Fn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ix(e).delete(t.targetId))).next((()=>this.Mn(e))).next((t=>(Xk(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let i=0;const r=[];return Ix(e).X(((o,s)=>{const a=TO(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(e,a)))})).next((()=>LE.waitFor(r))).next((()=>i))}forEachTarget(e,t){return Ix(e).X(((e,n)=>{const i=TO(n);t(i)}))}Mn(e){return kx(e).get("targetGlobalKey").next((e=>(Xk(null!==e),e)))}On(e,t){return kx(e).put("targetGlobalKey",t)}$n(e,t){return Ix(e).put(SO(this.serializer,t))}Fn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Mn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=HS(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return Ix(e).X({range:i,index:"queryTargetsIndex"},((e,n,i)=>{const o=TO(n);KS(t,o.target)&&(r=o,i.done())})).next((()=>r))}addMatchingKeys(e,t,n){const i=[],r=Ex(e);return t.forEach((t=>{const o=XE(t.path);i.push(r.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,t))})),LE.waitFor(i)}removeMatchingKeys(e,t,n){const i=Ex(e);return LE.forEach(t,(t=>{const r=XE(t.path);return LE.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Ex(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ex(e);let r=PP();return i.X({range:n,Y:!0},((e,t,n)=>{const i=nT(e[1]),o=new EE(i);r=r.add(o)})).next((()=>r))}containsKey(e,t){const n=XE(t.path),i=IDBKeyRange.bound([n],[yE(n)],!1,!0);let r=0;return Ex(e).X({index:"documentTargetsIndex",Y:!0,range:i},(([e,t],n,i)=>{0!==e&&(r++,i.done())})).next((()=>r>0))}he(e,t){return Ix(e).get(t).next((e=>e?TO(e):null))}}function Ix(e){return PT(e,"targets")}function kx(e){return PT(e,"targetGlobal")}function Ex(e){return PT(e,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx([e,t],[n,i]){const r=mE(e,n);return 0===r?mE(t,i):r}class Sx{constructor(e){this.Bn=e,this.buffer=new NT(Tx),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Tx(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Px{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){Gk("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Kn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){BE(e)?Gk("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await jE(e)}await this.Gn(3e5)}))}}class Cx{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return LE.resolve(WE.ct);const n=new Sx(t);return this.Qn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.Qn.zn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Qn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Gk("LruGarbageCollector","Garbage collection skipped; disabled"),LE.resolve(hx)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Gk("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hx):this.Wn(e,t)))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let n,i,r,o,s,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Gk("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),i=this.params.maximumSequenceNumbersToCollect):i=t,o=Date.now(),this.nthSequenceNumber(e,i)))).next((i=>(n=i,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Hk()<=fu.DEBUG&&Gk("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(s-o)+"ms\n"+`\tRemoved ${r} targets in `+(a-s)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-u}ms`),LE.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e}))))}}function Ox(e,t){return new Cx(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.db=e,this.garbageCollector=Ox(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Hn(e){let t=0;return this.zn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,((e,n)=>t(n)))}addReference(e,t,n){return Ax(e,n)}removeReference(e,t,n){return Ax(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ax(e,t)}Yn(e,t){return function(e,t){let n=!1;return bx(e).Z((i=>gx(e,i,t).next((e=>(e&&(n=!0),LE.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Jn(e,((o,s)=>{if(s<=t){const t=this.Yn(e,o).next((t=>{if(!t)return r++,n.getEntry(e,o).next((()=>(n.removeEntry(o,bE.min()),Ex(e).delete([0,XE(o.path)]))))}));i.push(t)}})).next((()=>LE.waitFor(i))).next((()=>n.apply(e))).next((()=>r))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ax(e,t)}Jn(e,t){const n=Ex(e);let i,r=WE.ct;return n.X({index:"documentTargetsIndex"},(([e,n],{path:o,sequenceNumber:s})=>{0===e?(r!==WE.ct&&t(new EE(nT(i)),r),r=s,i=o):r=WE.ct})).next((()=>{r!==WE.ct&&t(new EE(nT(i)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ax(e,t){return Ex(e).put(function(e,t){return{targetId:0,path:XE(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.changes=new gP((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bS.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?LE.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Lx(e).put(n)}removeEntry(e,t,n){return Lx(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],_O(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Xn(e,n))))}getEntry(e,t){let n=bS.newInvalidDocument(t);return Lx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Mx(t))},((e,i)=>{n=this.Zn(t,i)})).next((()=>n))}ts(e,t){let n={size:0,document:bS.newInvalidDocument(t)};return Lx(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Mx(t))},((e,i)=>{n={document:this.Zn(t,i),size:px(i)}})).next((()=>n))}getEntries(e,t){let n=vP();return this.es(e,t,((e,t)=>{const i=this.Zn(e,t);n=n.insert(e,i)})).next((()=>n))}ns(e,t){let n=vP(),i=new AT(EE.comparator);return this.es(e,t,((e,t)=>{const r=this.Zn(e,t);n=n.insert(e,r),i=i.insert(e,px(t))})).next((()=>({documents:n,ss:i})))}es(e,t,n){if(t.isEmpty())return LE.resolve();let i=new NT(qx);t.forEach((e=>i=i.add(e)));const r=IDBKeyRange.bound(Mx(i.first()),Mx(i.last())),o=i.getIterator();let s=o.getNext();return Lx(e).X({index:"documentKeyIndex",range:r},((e,t,i)=>{const r=EE.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&qx(s,r)<0;)n(s,null),s=o.getNext();s&&s.isEqual(r)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?i.G(Mx(s)):i.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i){const r=t.path,o=[r.popLast().toArray(),r.lastSegment(),_O(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lx(e).j(IDBKeyRange.bound(o,s,!0)).next((e=>{let n=vP();for(const r of e){const e=this.Zn(EE.fromSegments(r.prefixPath.concat(r.collectionGroup,r.documentId)),r);e.isFoundDocument()&&(dP(t,e)||i.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,i){let r=vP();const o=Ux(t,n),s=Ux(t,FE.max());return Lx(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.Zn(EE.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);r=r.insert(o.key,o),r.size===i&&n.done()})).next((()=>r))}newChangeBuffer(e){return new Dx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return jx(e).get("remoteDocumentGlobalKey").next((e=>(Xk(!!e),e)))}Xn(e,t){return jx(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const e=bO(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(bE.min()))return e}return bS.newInvalidDocument(e)}}function Nx(e){return new Rx(e)}class Dx extends Fx{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new gP((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,i=new NT(((e,t)=>mE(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((r,o)=>{const s=this.os.get(r);if(t.push(this.rs.removeEntry(e,r,s.readTime)),o.isValidDocument()){const a=wO(this.rs.serializer,o);i=i.add(r.path.popLast());const c=px(a);n+=c-s.size,t.push(this.rs.addEntry(e,r,a))}else if(n-=s.size,this.trackRemovals){const n=wO(this.rs.serializer,o.convertToNoDocument(bE.min()));t.push(this.rs.addEntry(e,r,n))}})),i.forEach((n=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.rs.updateMetadata(e,n)),LE.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next((e=>(this.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.rs.ns(e,t).next((({documents:e,ss:t})=>(t.forEach(((t,n)=>{this.os.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function jx(e){return PT(e,"remoteDocumentGlobal")}function Lx(e){return PT(e,"remoteDocumentsV14")}function Mx(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ux(e,t){const n=t.documentKey.path.toArray();return[e,_O(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qx(e,t){const n=e.path.toArray(),i=t.path.toArray();let r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=mE(n[o],i[o]),r)return r;return r=mE(n.length,i.length),r||(r=mE(n[n.length-2],i[i.length-2]),r||mE(n[n.length-1],i[i.length-1]))
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Vx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&XP(n.mutation,e,LT.empty(),vE.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,PP()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=PP()){const i=IP();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=wP();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=IP();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,PP())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=vP();const o=EP(),s=EP();return t.forEach(((e,t)=>{const s=n.get(t.key);i.has(t.key)&&(void 0===s||s.mutation instanceof iC)?r=r.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),XP(s.mutation,t,s.mutation.getFieldMask(),vE.now())):o.set(t.key,LT.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Vx(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=EP();let i=new AT(((e,t)=>e-t)),r=PP();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||LT.empty();s=r.applyToLocalView(o,s),n.set(e,s);const a=(i.get(r.batchId)||PP()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const i=s.getNext(),a=i.key,c=i.value,u=kP();c.forEach((e=>{if(!r.has(e)){const i=JP(t.get(e),n.get(e));null!==i&&u.set(e,i),r=r.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return LE.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return EE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):LE.resolve(IP());let s=-1,a=r;return o.next((t=>LE.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(t)?LE.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,PP()))).next((e=>({batchId:s,changes:_P(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new EE(t)).next((e=>{let t=wP();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let r=wP();return this.indexManager.getCollectionParents(e,i).next((o=>LE.forEach(o,(o=>{const s=function(e,t){return new YS(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i)))).next((e=>{i.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,bS.newInvalidDocument(i)))}));let n=wP();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&XP(o.mutation,r,LT.empty(),vE.now()),dP(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return LE.resolve(this.us.get(t))}saveBundleMetadata(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:BC(n.createTime)}),LE.resolve()}getNamedQuery(e,t){return LE.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:PO(e.bundledQuery),readTime:BC(e.readTime)}}(t)),LE.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.overlays=new AT(EE.comparator),this.hs=new Map}getOverlay(e,t){return LE.resolve(this.overlays.get(t))}getOverlays(e,t){const n=IP();return LE.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.de(e,t,i)})),LE.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hs.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hs.delete(n)),LE.resolve()}getOverlaysForCollection(e,t,n){const i=IP(),r=t.length+1,o=new EE(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return LE.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new AT(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=IP(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=IP(),a=r.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((e,t)=>s.set(e,t))),s.size()>=i)break;return LE.resolve(s)}de(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hs.get(i.largestBatchId).delete(n.key);this.hs.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new hC(t,n));let r=this.hs.get(t);void 0===r&&(r=PP(),this.hs.set(t,r)),this.hs.set(t,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ls=new NT(Hx.fs),this.ds=new NT(Hx._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const n=new Hx(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}ws(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.gs(new Hx(e,t))}ys(e,t){e.forEach((e=>this.removeReference(e,t)))}ps(e){const t=new EE(new _E([])),n=new Hx(t,e),i=new Hx(t,e+1),r=[];return this.ds.forEachInRange([n,i],(e=>{this.gs(e),r.push(e.key)})),r}Is(){this.ls.forEach((e=>this.gs(e)))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new EE(new _E([])),n=new Hx(t,e),i=new Hx(t,e+1);let r=PP();return this.ds.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Hx(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Hx{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return EE.comparator(e.key,t.key)||mE(e.Es,t.Es)}static _s(e,t){return mE(e.Es,t.Es)||EE.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new NT(Hx.fs)}checkEmpty(e){return LE.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uC(r,t,n,i);this.mutationQueue.push(o);for(const s of i)this.Rs=this.Rs.add(new Hx(s.key,r)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return LE.resolve(o)}lookupMutationBatch(e,t){return LE.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Ps(n),r=i<0?0:i;return LE.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return LE.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return LE.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hx(t,0),i=new Hx(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],(e=>{const t=this.vs(e.Es);r.push(t)})),LE.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new NT(mE);return t.forEach((e=>{const t=new Hx(e,0),i=new Hx(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,i],(e=>{n=n.add(e.Es)}))})),LE.resolve(this.bs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;EE.isDocumentKey(r)||(r=r.child(""));const o=new Hx(new EE(r),0);let s=new NT(mE);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(s=s.add(e.Es)),!0)}),o),LE.resolve(this.bs(s))}bs(e){const t=[];return e.forEach((e=>{const n=this.vs(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Xk(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return LE.forEach(t.mutations,(i=>{const r=new Hx(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Rs=n}))}Dn(e){}containsKey(e,t){const n=new Hx(t,0),i=this.Rs.firstAfterOrEqual(n);return LE.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,LE.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.Ss=e,this.docs=new AT(EE.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,o=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return LE.resolve(n?n.document.mutableCopy():bS.newInvalidDocument(t))}getEntries(e,t){let n=vP();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bS.newInvalidDocument(e))})),LE.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=vP();const o=t.path,s=new EE(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||RE(AE(s),n)<=0||(i.has(s.key)||dP(t,s))&&(r=r.insert(s.key,s.mutableCopy()))}return LE.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Yk()}Ds(e,t){return LE.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Wx(this)}getSize(e){return LE.resolve(this.size)}}class Wx extends Fx{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(n)})),LE.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.persistence=e,this.Cs=new gP((e=>HS(e)),KS),this.lastRemoteSnapshotVersion=bE.min(),this.highestTargetId=0,this.xs=0,this.Ns=new zx,this.targetCount=0,this.ks=wx.Nn()}forEachTarget(e,t){return this.Cs.forEach(((e,n)=>t(n))),LE.resolve()}getLastRemoteSnapshotVersion(e){return LE.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return LE.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),LE.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),LE.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new wx(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,LE.resolve()}updateTargetData(e,t){return this.$n(t),LE.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,LE.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Cs.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Cs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),LE.waitFor(r).next((()=>i))}getTargetCount(e){return LE.resolve(this.targetCount)}getTargetData(e,t){const n=this.Cs.get(t)||null;return LE.resolve(n)}addMatchingKeys(e,t,n){return this.Ns.ws(t,n),LE.resolve()}removeMatchingKeys(e,t,n){this.Ns.ys(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),LE.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),LE.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ns.Ts(t);return LE.resolve(n)}containsKey(e,t){return LE.resolve(this.Ns.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t){this.Ms={},this.overlays={},this.Os=new WE(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Qx(this),this.indexManager=new nx,this.remoteDocumentCache=function(e){return new Gx(e)}((e=>this.referenceDelegate.Bs(e))),this.serializer=new vO(t),this.Ls=new Zx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $x,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Ms[e.toKey()];return n||(n=new Kx(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,n){Gk("MemoryPersistence","Starting transaction:",e);const i=new Yx(this.Os.next());return this.referenceDelegate.qs(),n(i).next((e=>this.referenceDelegate.Us(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ks(e,t){return LE.or(Object.values(this.Ms).map((n=>()=>n.containsKey(e,t))))}}class Yx extends DE{constructor(e){super(),this.currentSequenceNumber=e}}class Xx{constructor(e){this.persistence=e,this.Gs=new zx,this.Qs=null}static js(e){return new Xx(e)}get zs(){if(this.Qs)return this.Qs;throw Yk()}addReference(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),LE.resolve()}removeReference(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),LE.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),LE.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach((e=>this.zs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.zs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return LE.forEach(this.zs,(n=>{const i=EE.fromPath(n);return this.Ws(e,i).next((e=>{e||t.removeEntry(i,bE.min())}))})).next((()=>(this.Qs=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ws(e,t).next((e=>{e?this.zs.delete(t.toString()):this.zs.add(t.toString())}))}Bs(e){return 0}Ws(e,t){return LE.or([()=>LE.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.serializer=e}$(e,t,n,i){const r=new ME("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iT,{unique:!0}),e.createObjectStore("documentMutations")}(e),tA(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=LE.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tA(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bE.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(r)))),n<4&&i>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iT,{unique:!0});const i=t.store("mutations"),r=n.map((e=>i.put(e)));return LE.waitFor(r)}))}(e,r)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&i>=5&&(o=o.next((()=>this.Js(r)))),n<6&&i>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(r))))),n<7&&i>=7&&(o=o.next((()=>this.Xs(r)))),n<8&&i>=8&&(o=o.next((()=>this.Zs(e,r)))),n<9&&i>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&i>=10&&(o=o.next((()=>this.ti(r)))),n<11&&i>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&i>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:vT});t.createIndex("collectionPathOverlayIndex",bT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wT,{unique:!1})}(e)}))),n<13&&i>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:aT});t.createIndex("documentKeyIndex",cT),t.createIndex("collectionGroupIndex",uT)}(e))).next((()=>this.ei(e,r))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(o=o.next((()=>this.ni(e,r)))),n<15&&i>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pT}).createIndex("sequenceNumberIndex",mT,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gT}).createIndex("documentKeyIndex",yT,{unique:!1})}(e)))),o}Ys(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=px(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Js(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>LE.forEach(t,(t=>{const i=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",i).next((n=>LE.forEach(n,(n=>{Xk(n.userId===t.userId);const i=EO(this.serializer,n);return fx(e,t.userId,i).next((()=>{}))}))))}))))}Xs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const i=[];return n.X(((n,r)=>{const o=new _E(n),s=function(e){return[0,XE(e)]}(o);i.push(t.get(s).next((n=>n?LE.resolve():(n=>t.put({targetId:0,path:XE(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>LE.waitFor(i)))}))}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:fT});const n=t.store("collectionParents"),i=new ix,r=e=>{if(i.add(e)){const t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:XE(i)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new _E(e);return r(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},(([e,t,n],i)=>{const o=nT(t);return r(o.popLast())}))))}ti(e){const t=e.store("targets");return t.X(((e,n)=>{const i=TO(n),r=SO(this.serializer,i);return t.put(r)}))}ei(e,t){const n=t.store("remoteDocuments"),i=[];return n.X(((e,n)=>{const r=t.store("remoteDocumentsV14"),o=(s=n,s.document?new EE(_E.fromString(s.document.name).popFirst(5)):s.noDocument?EE.fromSegments(s.noDocument.path):s.unknownDocument?EE.fromSegments(s.unknownDocument.path):Yk()).path.toArray();var s;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(a))})).next((()=>LE.waitFor(i)))}ni(e,t){const n=t.store("mutations"),i=Nx(this.serializer),r=new Jx(Xx.js,this.serializer.le);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let i=null!==(t=n.get(e.userId))&&void 0!==t?t:PP();EO(this.serializer,e).keys().forEach((e=>i=i.add(e))),n.set(e.userId,i)})),LE.forEach(n,((e,n)=>{const o=new Zk(n),s=NO.fe(this.serializer,o),a=r.getIndexManager(o),c=mx.fe(o,this.serializer,a,r.referenceDelegate);return new Bx(i,c,s,a).recalculateAndSaveOverlaysForDocumentKeys(new ST(t,WE.ct),e).next()}))}))}}function tA(e){e.createObjectStore("targetDocuments",{keyPath:hT}).createIndex("documentTargetsIndex",dT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lT,{unique:!0}),e.createObjectStore("targetGlobal")}const nA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iA{constructor(e,t,n,i,r,o,s,a,c,u,l=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=r,this.window=o,this.document=s,this.ii=c,this.ri=u,this.oi=l,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=e=>Promise.resolve(),!iA.D())throw new iE(nE.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xx(this,i),this.fi=t+"main",this.serializer=new vO(a),this.di=new UE(this.fi,this.oi,new eA(this.serializer)),this.Fs=new _x(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Nx(this.serializer),this.Ls=new AO,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===u&&Wk("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new iE(nE.FAILED_PRECONDITION,nA);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Fs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new WE(e,this.ii)})).then((()=>{this.$s=!0})).catch((e=>(this.di&&this.di.close(),Promise.reject(e))))}pi(e){return this.li=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>oA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ii(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.li(!1))))}))})).next((()=>this.Ti(e))).next((t=>this.isPrimary&&!t?this.Ei(e).next((()=>!1)):!!t&&this.Ai(e).next((()=>!0)))))).catch((e=>{if(BE(e))return Gk("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Gk("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.li(e))),this.isPrimary=e}))}Ii(e){return rA(e).get("owner").next((e=>LE.resolve(this.Ri(e))))}vi(e){return oA(e).delete(this.clientId)}async Pi(){if(this.isPrimary&&!this.bi(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=PT(e,"clientMetadata");return t.j().next((e=>{const n=this.Vi(e,18e5),i=e.filter((e=>-1===n.indexOf(e)));return LE.forEach(i,(e=>t.delete(e.clientId))).next((()=>i))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Si(t.clientId))}}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Pi())).then((()=>this.yi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?LE.resolve(!0):rA(e).get("owner").next((t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new iE(nE.FAILED_PRECONDITION,nA);return!1}}return!(!this.networkEnabled||!this.inForeground)||oA(e).j().next((e=>void 0===this.Vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,i=this.networkEnabled===e.networkEnabled;if(t||n&&i)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Gk("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),await this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ST(e,WE.ct);return this.Ei(t).next((()=>this.vi(t)))})),this.di.close(),this.ki()}Vi(e,t){return e.filter((e=>this.bi(e.updateTimeMs,t)&&!this.Di(e.clientId)))}Mi(){return this.runTransaction("getActiveClients","readonly",(e=>oA(e).j().next((e=>this.Vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.$s}getMutationQueue(e,t){return mx.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ox(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return NO.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,n){Gk("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",r=15===(o=this.oi)?TT:14===o?ET:13===o?kT:12===o?IT:11===o?_T:void Yk();var o;let s;return this.di.runTransaction(e,i,r,(i=>(s=new ST(i,this.Os?this.Os.next():WE.ct),"readwrite-primary"===t?this.Ii(s).next((e=>!!e||this.Ti(s))).next((t=>{if(!t)throw Wk(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.li(!1))),new iE(nE.FAILED_PRECONDITION,NE);return n(s)})).next((e=>this.Ai(s).next((()=>e)))):this.Oi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Oi(e){return rA(e).get("owner").next((e=>{if(null!==e&&this.bi(e.leaseTimestampMs,5e3)&&!this.Di(e.ownerId)&&!this.Ri(e)&&!(this.ri||this.allowTabSynchronization&&e.allowTabSynchronization))throw new iE(nE.FAILED_PRECONDITION,nA)}))}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rA(e).put("owner",t)}static D(){return UE.D()}Ei(e){const t=rA(e);return t.get("owner").next((e=>this.Ri(e)?(Gk("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):LE.resolve()))}bi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Wk(`Detected an update time that is in the future: ${e} > ${n}`),!1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.wi())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const e=/(?:Version|Mobile)\/1[456]/;qc()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Gk("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Wk("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Wk("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rA(e){return PT(e,"owner")}function oA(e){return PT(e,"clientMetadata")}function sA(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class aA{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Fi=i}static Bi(e,t){let n=PP(),i=PP();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new aA(e,t.fromCache,n,i)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,n,i){return this.Ui(e,t).next((r=>r||this.Ki(e,t,i,n))).next((n=>n||this.Gi(e,t)))}Ui(e,t){if(tP(t))return LE.resolve(null);let n=sP(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=cP(t,null,"F"),n=sP(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=PP(...i);return this.qi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Qi(t,i);return this.ji(t,o,r,n.readTime)?this.Ui(e,cP(t,null,"F")):this.zi(e,o,t,n)}))))})))))}Ki(e,t,n,i){return tP(t)||i.isEqual(bE.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((r=>{const o=this.Qi(t,r);return this.ji(t,o,n,i)?this.Gi(e,t):(Hk()<=fu.DEBUG&&Gk("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hP(t)),this.zi(e,o,t,xE(i,-1)))}))}Qi(e,t){let n=new NT(pP(e));return t.forEach(((t,i)=>{dP(e,i)&&(n=n.add(i))})),n}ji(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Gi(e,t){return Hk()<=fu.DEBUG&&Gk("QueryEngine","Using full collection scan to execute query:",hP(t)),this.qi.getDocumentsMatchingQuery(e,t,FE.min())}zi(e,t,n,i){return this.qi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,n,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new AT(mE),this.Ji=new gP((e=>HS(e)),KS),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(n)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bx(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Hi)))}}function lA(e,t,n,i){return new uA(e,t,n,i)}async function hA(e,t){const n=tE(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.Zi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],o=[];let s=PP();for(const e of i){r.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({tr:e,removedBatchIds:r,addedBatchIds:o})))}))}))}function dA(e,t){const n=tE(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,o=r.keys();let s=LE.resolve();return o.forEach((e=>{s=s.next((()=>i.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Xk(null!==o),t.version.compareTo(o)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=PP();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}function fA(e){const t=tE(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Fs.getLastRemoteSnapshotVersion(e)))}function pA(e,t){const n=tE(e),i=t.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const s=[];t.targetChanges.forEach(((o,a)=>{const c=r.get(a);if(!c)return;s.push(n.Fs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Fs.addMatchingKeys(e,o.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(qT.EMPTY_BYTE_STRING,bE.min()).withLastLimboFreeSnapshotVersion(bE.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,i)),r=r.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,u,o)&&s.push(n.Fs.updateTargetData(e,u))}));let a=vP(),c=PP();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),s.push(mA(e,o,t.documentUpdates).next((e=>{a=e.er,c=e.nr}))),!i.isEqual(bE.min())){const t=n.Fs.getLastRemoteSnapshotVersion(e).next((t=>n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,i)));s.push(t)}return LE.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Hi=r,e)))}function mA(e,t,n){let i=PP(),r=PP();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=vP();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),o.isNoDocument()&&o.version.isEqual(bE.min())?(t.removeEntry(n,o.readTime),i=i.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),i=i.insert(n,o)):Gk("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{er:i,nr:r}}))}function gA(e,t){const n=tE(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function yA(e,t){const n=tE(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Fs.getTargetData(e,t).next((r=>r?(i=r,LE.resolve(i)):n.Fs.allocateTargetId(e).next((r=>(i=new yO(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.Hi.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}async function vA(e,t,n){const i=tE(e),r=i.Hi.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!BE(e))throw e;Gk("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.Hi=i.Hi.remove(t),i.Ji.delete(r.target)}function bA(e,t,n){const i=tE(e);let r=bE.min(),o=PP();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=tE(e),r=i.Ji.get(n);return void 0!==r?LE.resolve(i.Hi.get(r)):i.Fs.getTargetData(t,n)}(i,e,sP(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Fs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>i.Wi.getDocumentsMatchingQuery(e,t,n?r:bE.min(),n?o:PP()))).next((e=>(IA(i,fP(t),e),{documents:e,sr:o})))))}function wA(e,t){const n=tE(e),i=tE(n.Fs),r=n.Hi.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(e=>i.he(e,t).next((e=>e?e.target:null))))}function _A(e,t){const n=tE(e),i=n.Yi.get(t)||bE.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Xi.getAllFromCollectionGroup(e,t,xE(i,-1),Number.MAX_SAFE_INTEGER))).then((e=>(IA(n,t,e),e)))}function IA(e,t,n){let i=e.Yi.get(t)||bE.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Yi.set(t,i)}async function kA(e,t,n,i){const r=tE(e);let o=PP(),s=vP();for(const u of n){const e=t.ir(u.metadata.name);u.document&&(o=o.add(e));const n=t.rr(u);n.setReadTime(t.ur(u.metadata.readTime)),s=s.insert(e,n)}const a=r.Xi.newChangeBuffer({trackRemovals:!0}),c=await yA(r,function(e){return sP(eP(_E.fromString(`__bundle__/docs/${e}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(e=>mA(e,a,s).next((t=>(a.apply(e),t))).next((t=>r.Fs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>r.Fs.addMatchingKeys(e,o,c.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr))).next((()=>t.er))))))}async function EA(e,t,n=PP()){const i=await yA(e,sP(PO(t.bundledQuery))),r=tE(e);return r.persistence.runTransaction("Save named query","readwrite",(e=>{const o=BC(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ls.saveNamedQuery(e,t);const s=i.withResumeToken(qT.EMPTY_BYTE_STRING,o);return r.Hi=r.Hi.insert(s.targetId,s),r.Fs.updateTargetData(e,s).next((()=>r.Fs.removeMatchingKeysForTargetId(e,i.targetId))).next((()=>r.Fs.addMatchingKeys(e,n,i.targetId))).next((()=>r.Ls.saveNamedQuery(e,t)))}))}function TA(e,t){return`firestore_clients_${e}_${t}`}function SA(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function PA(e,t){return`firestore_targets_${e}_${t}`}class CA{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static cr(e,t,n){const i=JSON.parse(n);let r,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new iE(i.error.code,i.error.message))),o?new CA(e,t,i.state,r):(Wk("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class OA{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static cr(e,t){const n=JSON.parse(t);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new iE(n.error.code,n.error.message))),r?new OA(e,n.state,i):(Wk("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=OP();for(let o=0;i&&o<n.activeTargetIds.length;++o)i=YE(n.activeTargetIds[o]),r=r.add(n.activeTargetIds[o]);return i?new xA(e,r):(Wk("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class AA{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new AA(t.clientId,t.onlineState):(Wk("SharedClientState",`Failed to parse online state: ${e}`),null)}}class FA{constructor(){this.activeTargetIds=OP()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RA{constructor(e,t,n,i,r){this.window=e,this.si=t,this.persistenceKey=n,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new AT(mE),this.started=!1,this.gr=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.yr=TA(this.persistenceKey,this.dr),this.pr=function(e){return`firestore_sequence_number_${e}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.mr=this.mr.insert(this.dr,new FA),this.Ir=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ar=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Rr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Mi();for(const n of e){if(n===this.dr)continue;const e=this.getItem(TA(this.persistenceKey,n));if(e){const t=xA.cr(n,e);t&&(this.mr=this.mr.insert(t.clientId,t))}}this.vr();const t=this.storage.getItem(this.Ar);if(t){const e=this.Pr(t);e&&this.br(e)}for(const n of this.gr)this.wr(n);this.gr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,n){this.Sr(e,t,n),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(PA(this.persistenceKey,e));if(n){const i=OA.cr(e,n);i&&(t=i.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PA(this.persistenceKey,e))}updateQueryState(e,t,n){this.Nr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Dr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Gk("SharedClientState","READ",e,t),t}setItem(e,t){Gk("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Gk("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){const t=e;if(t.storageArea===this.storage){if(Gk("SharedClientState","EVENT",t.key,t.newValue),t.key===this.yr)return void Wk("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ir.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.$r(e,null)}{const e=this.Fr(t.key,t.newValue);if(e)return this.$r(e.clientId,e)}}else if(this.Tr.test(t.key)){if(null!==t.newValue){const e=this.Br(t.key,t.newValue);if(e)return this.Lr(e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.qr(t.key,t.newValue);if(e)return this.Ur(e)}}else if(t.key===this.Ar){if(null!==t.newValue){const e=this.Pr(t.newValue);if(e)return this.br(e)}}else if(t.key===this.pr){const e=function(e){let t=WE.ct;if(null!=e)try{const n=JSON.parse(e);Xk("number"==typeof n),t=n}catch(e){Wk("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==WE.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Kr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Gr(e))))}}else this.gr.push(t)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,n){const i=new CA(this.currentUser,e,t,n),r=SA(this.persistenceKey,this.currentUser,e);this.setItem(r,i.ar())}Dr(e){const t=SA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){const t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}Nr(e,t,n){const i=PA(this.persistenceKey,e),r=new OA(e,t,n);this.setItem(i,r.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const n=this.Or(e);return xA.cr(n,t)}Br(e,t){const n=this.Tr.exec(e),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return CA.cr(new Zk(r),i,t)}qr(e,t){const n=this.Er.exec(e),i=Number(n[1]);return OA.cr(i,t)}Pr(e){return AA.cr(e)}Kr(e){return JSON.parse(e)}async Lr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Qr(e.batchId,e.state,e.error);Gk("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const n=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),r=this.Vr(n),o=[],s=[];return r.forEach((e=>{i.has(e)||o.push(e)})),i.forEach((e=>{r.has(e)||s.push(e)})),this.syncEngine.zr(o,s).then((()=>{this.mr=n}))}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=OP();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class NA{constructor(){this.Wr=new FA,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,n){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new FA,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{Jr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Gk("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Gk("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LA=null;function MA(){return null===LA?LA=268435456+Math.round(2147483648*Math.random()):LA++,"0x"+LA.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const UA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="WebChannelConnection";class BA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.wo=t+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,n,i,r){const o=MA(),s=this.Io(e,t);Gk("RestConnection",`Sending RPC '${e}' ${o}:`,s,n);const a={};return this.To(a,i,r),this.Eo(e,s,a,n).then((t=>(Gk("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw Qk("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",s,"request:",n),t}))}Ao(e,t,n,i,r,o){return this.po(e,t,n,i,r)}To(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Io(e,t){const n=UA[e];return`${this.wo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,n,i){const r=MA();return new Promise(((o,s)=>{const a=new Uk;a.setWithCredentials(!0),a.listenOnce(Nk.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Rk.NO_ERROR:const t=a.getResponseJson();Gk(VA,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),o(t);break;case Rk.TIMEOUT:Gk(VA,`RPC '${e}' ${r} timed out`),s(new iE(nE.DEADLINE_EXCEEDED,"Request time out"));break;case Rk.HTTP_ERROR:const n=a.getStatus();if(Gk(VA,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(nE).indexOf(t)>=0?t:nE.UNKNOWN}(t.status);s(new iE(e,t.message))}else s(new iE(nE.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new iE(nE.UNAVAILABLE,"Connection failed."));break;default:Yk()}}finally{Gk(VA,`RPC '${e}' ${r} completed.`)}}));const c=JSON.stringify(i);Gk(VA,`RPC '${e}' ${r} sending request:`,i),a.send(t,"POST",c,n,15)}))}Ro(e,t,n){const i=MA(),r=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ak(),s=Fk(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Lk({})),this.To(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Gk(VA,`Creating RPC '${e}' stream ${i}: ${c}`,a);const u=o.createWebChannel(c,a);let l=!1,h=!1;const d=new qA({io:t=>{h?Gk(VA,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(l||(Gk(VA,`Opening RPC '${e}' stream ${i} transport.`),u.open(),l=!0),Gk(VA,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},ro:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Mk.EventType.OPEN,(()=>{h||Gk(VA,`RPC '${e}' stream ${i} transport opened.`)})),f(u,Mk.EventType.CLOSE,(()=>{h||(h=!0,Gk(VA,`RPC '${e}' stream ${i} transport closed`),d.fo())})),f(u,Mk.EventType.ERROR,(t=>{h||(h=!0,Qk(VA,`RPC '${e}' stream ${i} transport errored:`,t),d.fo(new iE(nE.UNAVAILABLE,"The operation could not be completed")))})),f(u,Mk.EventType.MESSAGE,(t=>{var n;if(!h){const r=t.data[0];Xk(!!r);const o=r,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Gk(VA,`RPC '${e}' stream ${i} received error:`,s);const t=s.status;let n=function(e){const t=fC[e];if(void 0!==t)return gC(t)}(t),r=s.message;void 0===n&&(n=nE.INTERNAL,r="Unknown error status: "+t+" with message "+s.message),h=!0,d.fo(new iE(n,r)),u.close()}else Gk(VA,`RPC '${e}' stream ${i} received:`,r),d._o(r)}})),f(s,Dk.STAT_EVENT,(t=>{t.stat===jk.PROXY?Gk(VA,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===jk.NOPROXY&&Gk(VA,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{d.lo()}),0),d}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){return"undefined"!=typeof window?window:null}function $A(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(e){return new LC(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t,n=1e3,i=1.5,r=6e4){this.si=e,this.timerId=t,this.vo=n,this.Po=i,this.bo=r,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),n=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-n);i>0&&Gk("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Do=Date.now(),e()))),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,n,i,r,o,s,a){this.si=e,this.Mo=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new HA(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(()=>this.jo())))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,t){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==e?this.Lo.reset():t&&t.code===nE.RESOURCE_EXHAUSTED?(Wk(t.toString()),Wk("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):t&&t.code===nE.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(t)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.$o===t&&this.Xo(e,n)}),(t=>{e((()=>{const e=new iE(nE.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Zo(e)}))}))}Xo(e,t){const n=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((()=>{n((()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Uo()&&(this.state=3),Promise.resolve()))),this.listener.oo())))})),this.stream.co((e=>{n((()=>this.Zo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Ko(){this.state=5,this.Lo.xo((async()=>{this.state=0,this.start()}))}Zo(e){return Gk("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget((()=>this.$o===e?t():(Gk("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GA extends KA{constructor(e,t,n,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.serializer=r}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=eO(this.serializer,e),n=function(e){if(!("targetChange"in e))return bE.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?bE.min():t.readTime?BC(t.readTime):bE.min()}(e);return this.listener.eu(t,n)}nu(e){const t={};t.database=WC(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=GS(i)?{documents:rO(e,i)}:{query:oO(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=qC(e,t.resumeToken);const i=MC(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(bE.min())>0){n.readTime=UC(e,t.snapshotVersion.toTimestamp());const i=MC(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=aO(this.serializer,e);n&&(t.labels=n),this.zo(t)}su(e){const t={};t.database=WC(this.serializer),t.removeTarget=e,this.zo(t)}}class WA extends KA{constructor(e,t,n,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.serializer=r,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Xk(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=iO(e.writeResults,e.commitTime),n=BC(e.commitTime);return this.listener.uu(n,t)}return Xk(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=WC(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>tO(this.serializer,e)))};this.zo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new iE(nE.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,n){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.po(e,t,n,i,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===nE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new iE(nE.UNKNOWN,e.toString())}))}Ao(e,t,n,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Ao(e,t,n,r,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===nE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new iE(nE.UNKNOWN,e.toString())}))}terminate(){this.hu=!0}}class JA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve()))))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Wk(t),this.wu=!1):Gk("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=r,this.vu.Jr((e=>{n.enqueueAndForget((async()=>{aF(this)&&(Gk("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=tE(e);t.Au.add(4),await eF(t),t.Pu.set("Unknown"),t.Au.delete(4),await XA(t)}(this))}))})),this.Pu=new JA(n,i)}}async function XA(e){if(aF(e))for(const t of e.Ru)await t(!0)}async function eF(e){for(const t of e.Ru)await t(!1)}function tF(e,t){const n=tE(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),sF(n)?oF(n):TF(n).Uo()&&iF(n,t))}function nF(e,t){const n=tE(e),i=TF(n);n.Eu.delete(t),i.Uo()&&rF(n,t),0===n.Eu.size&&(i.Uo()?i.Qo():aF(n)&&n.Pu.set("Unknown"))}function iF(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bE.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}TF(e).nu(t)}function rF(e,t){e.bu.Lt(t),TF(e).su(t)}function oF(e){e.bu=new AC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),he:t=>e.Eu.get(t)||null,oe:()=>e.datastore.serializer.databaseId}),TF(e).start(),e.Pu.mu()}function sF(e){return aF(e)&&!TF(e).qo()&&e.Eu.size>0}function aF(e){return 0===tE(e).Au.size}function cF(e){e.bu=void 0}async function uF(e){e.Eu.forEach(((t,n)=>{iF(e,t)}))}async function lF(e,t){cF(e),sF(e)?(e.Pu.pu(t),oF(e)):e.Pu.set("Unknown")}async function hF(e,t,n){if(e.Pu.set("Online"),t instanceof OC&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.Eu.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.Eu.delete(i),e.bu.removeTarget(i))}(e,t)}catch(n){Gk("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await dF(e,n)}else if(t instanceof PC?e.bu.Wt(t):t instanceof CC?e.bu.ee(t):e.bu.Yt(t),!n.isEqual(bE.min()))try{const t=await fA(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.bu.ue(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Eu.get(i);r&&e.Eu.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.Eu.get(t);if(!i)return;e.Eu.set(t,i.withResumeToken(qT.EMPTY_BYTE_STRING,i.snapshotVersion)),rF(e,t);const r=new yO(i.target,t,n,i.sequenceNumber);iF(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Gk("RemoteStore","Failed to raise snapshot:",t),await dF(e,t)}}async function dF(e,t,n){if(!BE(t))throw t;e.Au.add(1),await eF(e),e.Pu.set("Offline"),n||(n=()=>fA(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Gk("RemoteStore","Retrying IndexedDB access"),await n(),e.Au.delete(1),await XA(e)}))}function fF(e,t){return t().catch((n=>dF(e,n,t)))}async function pF(e){const t=tE(e),n=SF(t);let i=t.Tu.length>0?t.Tu[t.Tu.length-1].batchId:-1;for(;mF(t);)try{const e=await gA(t.localStore,i);if(null===e){0===t.Tu.length&&n.Qo();break}i=e.batchId,gF(t,e)}catch(e){await dF(t,e)}yF(t)&&vF(t)}function mF(e){return aF(e)&&e.Tu.length<10}function gF(e,t){e.Tu.push(t);const n=SF(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function yF(e){return aF(e)&&!SF(e).qo()&&e.Tu.length>0}function vF(e){SF(e).start()}async function bF(e){SF(e).au()}async function wF(e){const t=SF(e);for(const n of e.Tu)t.ou(n.mutations)}async function _F(e,t,n){const i=e.Tu.shift(),r=lC.from(i,t,n);await fF(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await pF(e)}async function IF(e,t){t&&SF(e).ru&&await async function(e,t){if(n=t.code,mC(n)&&n!==nE.ABORTED){const n=e.Tu.shift();SF(e).Go(),await fF(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await pF(e)}var n}(e,t),yF(e)&&vF(e)}async function kF(e,t){const n=tE(e);n.asyncQueue.verifyOperationInProgress(),Gk("RemoteStore","RemoteStore received new credentials");const i=aF(n);n.Au.add(3),await eF(n),i&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Au.delete(3),await XA(n)}async function EF(e,t){const n=tE(e);t?(n.Au.delete(2),await XA(n)):t||(n.Au.add(2),await eF(n),n.Pu.set("Unknown"))}function TF(e){return e.Vu||(e.Vu=function(e,t,n){const i=tE(e);return i.lu(),new GA(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{oo:uF.bind(null,e),co:lF.bind(null,e),eu:hF.bind(null,e)}),e.Ru.push((async t=>{t?(e.Vu.Go(),sF(e)?oF(e):e.Pu.set("Unknown")):(await e.Vu.stop(),cF(e))}))),e.Vu}function SF(e){return e.Su||(e.Su=function(e,t,n){const i=tE(e);return i.lu(),new WA(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{oo:bF.bind(null,e),co:IF.bind(null,e),cu:wF.bind(null,e),uu:_F.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Go(),await pF(e)):(await e.Su.stop(),e.Tu.length>0&&(Gk("RemoteStore",`Stopping write stream with ${e.Tu.length} pending writes`),e.Tu=[]))}))),e.Su
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class PF{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new rE,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const o=Date.now()+n,s=new PF(e,t,o,i,r);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new iE(nE.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CF(e,t){if(Wk("AsyncQueue",`${t}: ${e}`),BE(e))return new iE(nE.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.comparator=e?(t,n)=>e(t,n)||EE.comparator(t.key,n.key):(e,t)=>EE.comparator(e.key,t.key),this.keyedMap=wP(),this.sortedSet=new AT(this.comparator)}static emptySet(e){return new OF(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof OF))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new OF;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.Du=new AT(EE.comparator)}track(e){const t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Yk():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal(((t,n)=>{e.push(n)})),e}}class AF{constructor(e,t,n,i,r,o,s,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,i,r){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new AF(e,t,OF.emptySet(t),o,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uP(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.xu=void 0,this.listeners=[]}}class RF{constructor(){this.queries=new gP((e=>lP(e)),uP),this.onlineState="Unknown",this.Nu=new Set}}async function NF(e,t){const n=tE(e),i=t.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new FF),r)try{o.xu=await n.onListen(i)}catch(e){const n=CF(e,`Initialization of query '${hP(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.listeners.push(t),t.ku(n.onlineState),o.xu&&t.Mu(o.xu)&&MF(n)}async function DF(e,t){const n=tE(e),i=t.query;let r=!1;const o=n.queries.get(i);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),r=0===o.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function jF(e,t){const n=tE(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.Mu(r)&&(i=!0);t.xu=r}}i&&MF(n)}function LF(e,t,n){const i=tE(e),r=i.queries.get(t);if(r)for(const o of r.listeners)o.onError(n);i.queries.delete(t)}function MF(e){e.Nu.forEach((e=>{e.next()}))}class UF{constructor(e,t,n){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=n||{}}Mu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new AF(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){if(e.docChanges.length>0)return!0;const t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qu(e){e=AF.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.serializer=e}ir(e){return HC(this.serializer,e)}rr(e){return e.metadata.exists?YC(this.serializer,e.document,!1):bS.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return BC(e)}}class BF{constructor(e,t,n){this.Qu=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ZF(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const n=_E.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,n=new VF(this.serializer);for(const i of e)if(i.metadata.queries){const e=n.ir(i.metadata.name);for(const n of i.metadata.queries){const i=(t.get(n)||PP()).add(e);t.set(n,i)}}return t}async complete(){const e=await kA(this.localStore,new VF(this.serializer),this.documents,this.Qu.id),t=this.zu(this.documents);for(const n of this.queries)await EA(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:e}}}function ZF(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.key=e}}class zF{constructor(e){this.key=e}}class HF{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=PP(),this.mutatedKeys=PP(),this.Zu=pP(e),this.tc=new OF(this.Zu)}get ec(){return this.Ju}nc(e,t){const n=t?t.sc:new xF,i=t?t.tc:this.tc;let r=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const u=i.get(e),l=dP(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.ic(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Zu(l,a)>0||c&&this.Zu(l,c)<0)&&(s=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(s=!0)),f&&(l?(o=o.add(l),r=d?r.add(e):r.delete(e)):(o=o.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{tc:o,sc:n,ji:s,mutatedKeys:r}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const r=e.sc.Cu();r.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yk()}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Zu(e.doc,t.doc))),this.rc(n);const o=t?this.oc():[],s=0===this.Xu.size&&this.current?1:0,a=s!==this.Yu;return this.Yu=s,0!==r.length||a?{snapshot:new AF(this.query,e.tc,i,r,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new xF,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach((e=>this.Ju=this.Ju.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ju=this.Ju.delete(e))),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=PP(),this.tc.forEach((e=>{this.cc(e.key)&&(this.Xu=this.Xu.add(e.key))}));const t=[];return e.forEach((e=>{this.Xu.has(e)||t.push(new zF(e))})),this.Xu.forEach((n=>{e.has(n)||t.push(new $F(n))})),t}ac(e){this.Ju=e.sr,this.Xu=PP();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return AF.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class KF{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class GF{constructor(e){this.key=e,this.lc=!1}}class WF{constructor(e,t,n,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new gP((e=>lP(e)),uP),this._c=new Map,this.wc=new Set,this.mc=new AT(EE.comparator),this.gc=new Map,this.yc=new zx,this.Ic={},this.Tc=new Map,this.Ec=wx.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}async function QF(e,t){const n=TR(e);let i,r;const o=n.dc.get(t);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.hc();else{const e=await yA(n.localStore,sP(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await JF(n,t,i,"current"===o,e.resumeToken),n.isPrimaryClient&&tF(n.remoteStore,e)}return r}async function JF(e,t,n,i,r){e.Rc=(t,n,i)=>async function(e,t,n,i){let r=t.view.nc(n);r.ji&&(r=await bA(e.localStore,t.query,!1).then((({documents:e})=>t.view.nc(e,r))));const o=i&&i.targetChanges.get(t.targetId),s=t.view.applyChanges(r,e.isPrimaryClient,o);return lR(e,t.targetId,s.uc),s.snapshot}(e,t,n,i);const o=await bA(e.localStore,t,!0),s=new HF(t,o.sr),a=s.nc(o.documents),c=SC.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),u=s.applyChanges(a,e.isPrimaryClient,c);lR(e,n,u.uc);const l=new KF(t,n,s);return e.dc.set(t,l),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function YF(e,t){const n=tE(e),i=n.dc.get(t),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter((e=>!uP(e,t)))),void n.dc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await vA(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),nF(n.remoteStore,i.targetId),cR(n,i.targetId)})).catch(jE)):(cR(n,i.targetId),await vA(n.localStore,i.targetId,!0))}async function XF(e,t,n){const i=SR(e);try{const e=await function(e,t){const n=tE(e),i=vE.now(),r=t.reduce(((e,t)=>e.add(t.key)),PP());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=vP(),c=PP();return n.Xi.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{o=r;const s=[];for(const e of t){const t=eC(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new iC(e.key,t,vS(t.value.mapValue),GP.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,s,t)})).next((t=>{s=t;const i=t.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:s.batchId,changes:_P(o)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Ic[e.currentUser.toKey()];i||(i=new AT(mE)),i=i.insert(t,n),e.Ic[e.currentUser.toKey()]=i}(i,e.batchId,n),await fR(i,e.changes),await pF(i.remoteStore)}catch(e){const t=CF(e,"Failed to persist write");n.reject(t)}}async function eR(e,t){const n=tE(e);try{const e=await pA(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.gc.get(t);i&&(Xk(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.lc=!0:e.modifiedDocuments.size>0?Xk(i.lc):e.removedDocuments.size>0&&(Xk(i.lc),i.lc=!1))})),await fR(n,e,t)}catch(e){await jE(e)}}function tR(e,t,n){const i=tE(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.dc.forEach(((n,i)=>{const r=i.view.ku(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=tE(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.listeners)r.ku(t)&&(i=!0)})),i&&MF(n)}(i.eventManager,t),e.length&&i.fc.eu(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function nR(e,t,n){const i=tE(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.gc.get(t),o=r&&r.key;if(o){let e=new AT(EE.comparator);e=e.insert(o,bS.newNoDocument(o,bE.min()));const n=PP().add(o),r=new TC(bE.min(),new Map,new AT(mE),e,n);await eR(i,r),i.mc=i.mc.remove(o),i.gc.delete(t),dR(i)}else await vA(i.localStore,t,!1).then((()=>cR(i,t,n))).catch(jE)}async function iR(e,t){const n=tE(e),i=t.batch.batchId;try{const e=await dA(n.localStore,t);aR(n,i,null),sR(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fR(n,e)}catch(e){await jE(e)}}async function rR(e,t,n){const i=tE(e);try{const e=await function(e,t){const n=tE(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Xk(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);aR(i,t,n),sR(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await fR(i,e)}catch(n){await jE(n)}}async function oR(e,t){const n=tE(e);aF(n.remoteStore)||Gk("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=tE(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const i=n.Tc.get(e)||[];i.push(t),n.Tc.set(e,i)}catch(e){const n=CF(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}function sR(e,t){(e.Tc.get(t)||[]).forEach((e=>{e.resolve()})),e.Tc.delete(t)}function aR(e,t,n){const i=tE(e);let r=i.Ic[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Ic[i.currentUser.toKey()]=r}}function cR(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e._c.get(t))e.dc.delete(i),n&&e.fc.vc(i,n);e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((t=>{e.yc.containsKey(t)||uR(e,t)}))}function uR(e,t){e.wc.delete(t.path.canonicalString());const n=e.mc.get(t);null!==n&&(nF(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),dR(e))}function lR(e,t,n){for(const i of n)i instanceof $F?(e.yc.addReference(i.key,t),hR(e,i)):i instanceof zF?(Gk("SyncEngine","Document no longer in limbo: "+i.key),e.yc.removeReference(i.key,t),e.yc.containsKey(i.key)||uR(e,i.key)):Yk()}function hR(e,t){const n=t.key,i=n.path.canonicalString();e.mc.get(n)||e.wc.has(i)||(Gk("SyncEngine","New document in limbo: "+n),e.wc.add(i),dR(e))}function dR(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){const t=e.wc.values().next().value;e.wc.delete(t);const n=new EE(_E.fromString(t)),i=e.Ec.next();e.gc.set(i,new GF(n)),e.mc=e.mc.insert(n,i),tF(e.remoteStore,new yO(sP(eP(n.path)),i,"TargetPurposeLimboResolution",WE.ct))}}async function fR(e,t,n){const i=tE(e),r=[],o=[],s=[];i.dc.isEmpty()||(i.dc.forEach(((e,a)=>{s.push(i.Rc(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=aA.Bi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),i.fc.eu(r),await async function(e,t){const n=tE(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>LE.forEach(t,(t=>LE.forEach(t.$i,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>LE.forEach(t.Fi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!BE(e))throw e;Gk("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Hi.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Hi=n.Hi.insert(e,r)}}}(i.localStore,o))}async function pR(e,t){const n=tE(e);if(!n.currentUser.isEqual(t)){Gk("SyncEngine","User change. New user:",t.toKey());const e=await hA(n.localStore,t);n.currentUser=t,function(e,t){e.Tc.forEach((e=>{e.forEach((e=>{e.reject(new iE(nE.CANCELLED,t))}))})),e.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fR(n,e.tr)}}function mR(e,t){const n=tE(e),i=n.gc.get(t);if(i&&i.lc)return PP().add(i.key);{let e=PP();const i=n._c.get(t);if(!i)return e;for(const t of i){const i=n.dc.get(t);e=e.unionWith(i.view.ec)}return e}}async function gR(e,t){const n=tE(e),i=await bA(n.localStore,t.query,!0),r=t.view.ac(i);return n.isPrimaryClient&&lR(n,t.targetId,r.uc),r}async function yR(e,t){const n=tE(e);return _A(n.localStore,t).then((e=>fR(n,e)))}async function vR(e,t,n,i){const r=tE(e),o=await function(e,t){const n=tE(e),i=tE(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>i.Vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):LE.resolve(null)))))}(r.localStore,t);null!==o?("pending"===n?await pF(r.remoteStore):"acknowledged"===n||"rejected"===n?(aR(r,t,i||null),sR(r,t),function(e,t){tE(tE(e).mutationQueue).Dn(t)}(r.localStore,t)):Yk(),await fR(r,o)):Gk("SyncEngine","Cannot apply mutation batch with id: "+t)}async function bR(e,t){const n=tE(e);if(TR(n),SR(n),!0===t&&!0!==n.Ac){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await wR(n,e.toArray());n.Ac=!0,await EF(n.remoteStore,!0);for(const i of t)tF(n.remoteStore,i)}else if(!1===t&&!1!==n.Ac){const e=[];let t=Promise.resolve();n._c.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then((()=>(cR(n,r),vA(n.localStore,r,!0)))),nF(n.remoteStore,r)})),await t,await wR(n,e),function(e){const t=tE(e);t.gc.forEach(((e,n)=>{nF(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new AT(EE.comparator)}(n),n.Ac=!1,await EF(n.remoteStore,!1)}}async function wR(e,t,n){const i=tE(e),r=[],o=[];for(const s of t){let e;const t=i._c.get(s);if(t&&0!==t.length){e=await yA(i.localStore,sP(t[0]));for(const e of t){const t=i.dc.get(e),n=await gR(i,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await wA(i.localStore,s);e=await yA(i.localStore,t),await JF(i,_R(t),s,!1,e.resumeToken)}r.push(e)}return i.fc.eu(o),r}function _R(e){return XS(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function IR(e){const t=tE(e);return tE(tE(t.localStore).persistence).Mi()}async function kR(e,t,n,i){const r=tE(e);if(r.Ac)return void Gk("SyncEngine","Ignoring unexpected query state notification.");const o=r._c.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await _A(r.localStore,fP(o[0])),i=TC.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,qT.EMPTY_BYTE_STRING);await fR(r,e,i);break}case"rejected":await vA(r.localStore,t,!0),cR(r,t,i);break;default:Yk()}}async function ER(e,t,n){const i=TR(e);if(i.Ac){for(const e of t){if(i._c.has(e)){Gk("SyncEngine","Adding an already active target "+e);continue}const t=await wA(i.localStore,e),n=await yA(i.localStore,t);await JF(i,_R(t),n.targetId,!1,n.resumeToken),tF(i.remoteStore,n)}for(const e of n)i._c.has(e)&&await vA(i.localStore,e,!1).then((()=>{nF(i.remoteStore,e),cR(i,e)})).catch(jE)}}function TR(e){const t=tE(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nR.bind(null,t),t.fc.eu=jF.bind(null,t.eventManager),t.fc.vc=LF.bind(null,t.eventManager),t}function SR(e){const t=tE(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rR.bind(null,t),t}function PR(e,t,n){const i=tE(e);(async function(e,t,n){try{const i=await t.getMetadata();if(await function(e,t){const n=tE(e),i=BC(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ls.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(i)>=0))}(e.localStore,i))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(ZF(i));const r=new BF(i,e.localStore,t.serializer);let o=await t.Pc();for(;o;){const e=await r.ju(o);e&&n._updateProgress(e),o=await t.Pc()}const s=await r.complete();return await fR(e,s.Hu,void 0),await function(e,t){const n=tE(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ls.saveBundleMetadata(e,t)))}(e.localStore,i),n._completeWith(s.progress),Promise.resolve(s.Wu)}catch(e){return Qk("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,t,n).then((e=>{i.sharedClientState.notifyBundleLoaded(e)}))}class CR{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=zA(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lA(this.persistence,new cA,e.initialUser,this.serializer)}createPersistence(e){return new Jx(Xx.js,this.serializer)}createSharedClientState(e){return new NA}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OR extends CR{constructor(e,t,n){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.bc.initialize(this,e),await SR(this.bc.syncEngine),await pF(this.bc.remoteStore),await this.persistence.pi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return lA(this.persistence,new cA,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Px(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new GE(t,this.persistence);return new KE(e.asyncQueue,n)}createPersistence(e){const t=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?dx.withCacheSize(this.cacheSizeBytes):dx.DEFAULT;return new iA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ZA(),$A(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new NA}}class xR extends OR{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.bc.syncEngine;this.sharedClientState instanceof RA&&(this.sharedClientState.syncEngine={Qr:vR.bind(null,t),jr:kR.bind(null,t),zr:ER.bind(null,t),Mi:IR.bind(null,t),Gr:yR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.pi((async e=>{await bR(this.bc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=ZA();if(!RA.D(t))throw new iE(nE.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class AR{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>tR(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pR.bind(null,this.syncEngine),await EF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new RF}createDatastore(e){const t=zA(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new BA(i));var i;return function(e,t,n,i){return new QA(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>tR(this.syncEngine,e,0),o=jA.D()?new jA:new DA,new YA(t,n,i,r,o);var t,n,i,r,o}createSyncEngine(e,t){return function(e,t,n,i,r,o,s){const a=new WF(e,t,n,i,r,o);return s&&(a.Ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=tE(e);Gk("RemoteStore","RemoteStore shutting down."),t.Au.add(5),await eF(t),t.vu.shutdown(),t.Pu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Wk("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new rE,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((e=>{e&&e.Gu()?this.metadata.resolve(e.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.Ku)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Dc.cancel()}async getMetadata(){return this.metadata.promise}async Pc(){return await this.getMetadata(),this.xc()}async xc(){const e=await this.Nc();if(null===e)return null;const t=this.Cc.decode(e),n=Number(t);isNaN(n)&&this.kc(`length string (${t}) is not valid number`);const i=await this.Mc(n);return new qF(JSON.parse(i),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Nc(){for(;this.Oc()<0;)if(await this.$c())break;if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.kc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Mc(e){for(;this.buffer.length<e;)await this.$c()&&this.kc("Reached the end of bundle when more is expected.");const t=this.Cc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Dc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new iE(nE.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=tE(e),i=WC(n.serializer)+"/documents",r={documents:t.map((e=>zC(n.serializer,e)))},o=await n.Ao("BatchGetDocuments",i,r,t.length),s=new Map;o.forEach((e=>{const t=XC(n.serializer,e);s.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=s.get(e.toString());Xk(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new aC(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=EE.fromPath(t);this.mutations.push(new cC(n,this.precondition(n)))})),await async function(e,t){const n=tE(e),i=WC(n.serializer)+"/documents",r={writes:t.map((e=>tO(n.serializer,e)))};await n.po("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yk();t=bE.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new iE(nE.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bE.min())?GP.exists(!1):GP.updateTime(t):GP.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bE.min()))throw new iE(nE.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return GP.updateTime(t)}return GP.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t,n,i,r){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=r,this.Fc=n.maxAttempts,this.Lo=new HA(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){this.Lo.xo((async()=>{const e=new DR(this.datastore),t=this.Lc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.qc(e)}))))})).catch((e=>{this.qc(e)}))}))}Lc(e){try{const t=this.updateFunction(e);return!QE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Bc(),Promise.resolve())))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!mC(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Zk.UNAUTHENTICATED,this.clientId=pE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Gk("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Gk("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new iE(nE.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rE;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=CF(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function MR(e,t){e.asyncQueue.verifyOperationInProgress(),Gk("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await hA(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function UR(e,t){e.asyncQueue.verifyOperationInProgress();const n=await VR(e);Gk("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>kF(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>kF(t.remoteStore,n))),e._onlineComponents=t}function qR(e){return"FirebaseError"===e.name?e.code===nE.FAILED_PRECONDITION||e.code===nE.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function VR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Gk("FirestoreClient","Using user provided OfflineComponentProvider");try{await MR(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!qR(n))throw n;Qk("Error using user provided cache. Falling back to memory cache: "+n),await MR(e,new CR)}}else Gk("FirestoreClient","Using default OfflineComponentProvider"),await MR(e,new CR);return e._offlineComponents}async function BR(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Gk("FirestoreClient","Using user provided OnlineComponentProvider"),await UR(e,e._uninitializedComponentsProvider._online)):(Gk("FirestoreClient","Using default OnlineComponentProvider"),await UR(e,new AR))),e._onlineComponents}function ZR(e){return VR(e).then((e=>e.persistence))}function $R(e){return VR(e).then((e=>e.localStore))}function zR(e){return BR(e).then((e=>e.remoteStore))}function HR(e){return BR(e).then((e=>e.syncEngine))}function KR(e){return BR(e).then((e=>e.datastore))}async function GR(e){const t=await BR(e),n=t.eventManager;return n.onListen=QF.bind(null,t.syncEngine),n.onUnlisten=YF.bind(null,t.syncEngine),n}function WR(e){return e.asyncQueue.enqueue((async()=>{const t=await ZR(e),n=await zR(e);return t.setNetworkEnabled(!0),function(e){const t=tE(e);return t.Au.delete(0),XA(t)}(n)}))}function QR(e){return e.asyncQueue.enqueue((async()=>{const t=await ZR(e),n=await zR(e);return t.setNetworkEnabled(!1),async function(e){const t=tE(e);t.Au.add(0),await eF(t),t.Pu.set("Offline")}(n)}))}function JR(e,t){const n=new rE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await function(e,t){const n=tE(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new iE(nE.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const i=CF(e,`Failed to get document '${t} from cache`);n.reject(i)}}(await $R(e),t,n))),n.promise}function YR(e,t,n={}){const i=new rE;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const o=new RR({next:o=>{t.enqueueAndForget((()=>DF(e,s)));const a=o.docs.has(n);!a&&o.fromCache?r.reject(new iE(nE.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&i&&"server"===i.source?r.reject(new iE(nE.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:e=>r.reject(e)}),s=new UF(eP(n.path),o,{includeMetadataChanges:!0,Uu:!0});return NF(e,s)}(await GR(e),e.asyncQueue,t,n,i))),i.promise}function XR(e,t){const n=new rE;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await bA(e,t,!0),r=new HF(t,i.sr),o=r.nc(i.documents),s=r.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const i=CF(e,`Failed to execute query '${t} against cache`);n.reject(i)}}(await $R(e),t,n))),n.promise}function eN(e,t,n={}){const i=new rE;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const o=new RR({next:n=>{t.enqueueAndForget((()=>DF(e,s))),n.fromCache&&"server"===i.source?r.reject(new iE(nE.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),s=new UF(n,o,{includeMetadataChanges:!0,Uu:!0});return NF(e,s)}(await GR(e),e.asyncQueue,t,n,i))),i.promise}function tN(e,t){const n=new RR(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){tE(e).Nu.add(t),t.next()}(await GR(e),n))),()=>{n.Sc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){tE(e).Nu.delete(t)}(await GR(e),n)))}}function nN(e,t,n,i){const r=function(e,t){let n;return n="string"==typeof e?bC().encode(e):e,function(e,t){return new NR(e,t)}(function(e,t){if(e instanceof Uint8Array)return FR(e,t);if(e instanceof ArrayBuffer)return FR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,zA(t));e.asyncQueue.enqueueAndForget((async()=>{PR(await HR(e),r,i)}))}function iN(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=tE(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ls.getNamedQuery(e,t)))}(await $R(e),t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rN=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(e,t,n){if(!n)throw new iE(nE.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sN(e,t,n,i){if(!0===t&&!0===i)throw new iE(nE.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function aN(e){if(!EE.isDocumentKey(e))throw new iE(nE.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function cN(e){if(EE.isDocumentKey(e))throw new iE(nE.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function uN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Yk()}function lN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new iE(nE.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uN(e);throw new iE(nE.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function hN(e,t){if(t<=0)throw new iE(nE.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new iE(nE.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new iE(nE.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new iE(nE.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new iE(nE.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dN(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sE;switch(e.type){case"firstParty":return new lE(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new iE(nE.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rN.get(e);t&&(Gk("ComponentProvider","Removing Datastore"),rN.delete(e),t.terminate())}(this),Promise.resolve()}}function pN(e,t,n,i={}){var r;const o=(e=lN(e,fN))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Qk("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${n}`,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Zk.MOCK_USER;else{t=Fc(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new iE(nE.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zk(o)}e._authCredentials=new aE(new oE(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yN(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mN(this.firestore,e,this._key)}}class gN{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new gN(this.firestore,e,this._query)}}class yN extends gN{constructor(e,t,n){super(e,t,eP(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mN(this.firestore,null,new EE(e))}withConverter(e){return new yN(this.firestore,e,this._path)}}function vN(e,t,...n){if(e=ou(e),oN("collection","path",t),e instanceof fN){const i=_E.fromString(t,...n);return cN(i),new yN(e,null,i)}{if(!(e instanceof mN||e instanceof yN))throw new iE(nE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_E.fromString(t,...n));return cN(i),new yN(e.firestore,null,i)}}function bN(e,t){if(e=lN(e,fN),oN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new iE(nE.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gN(e,null,function(e){return new YS(_E.emptyPath(),e)}(t))}function wN(e,t,...n){if(e=ou(e),1===arguments.length&&(t=pE.A()),oN("doc","path",t),e instanceof fN){const i=_E.fromString(t,...n);return aN(i),new mN(e,null,new EE(i))}{if(!(e instanceof mN||e instanceof yN))throw new iE(nE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_E.fromString(t,...n));return aN(i),new mN(e.firestore,e instanceof yN?e.converter:null,new EE(i))}}function _N(e,t){return e=ou(e),t=ou(t),(e instanceof mN||e instanceof yN)&&(t instanceof mN||t instanceof yN)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function IN(e,t){return e=ou(e),t=ou(t),e instanceof gN&&t instanceof gN&&e.firestore===t.firestore&&uP(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class kN{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new HA(this,"async_queue_retry"),this.Yc=()=>{const e=$A();e&&Gk("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Lo.ko()};const e=$A();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=$A();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise((()=>{}));const t=new rE;return this.Zc((()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Gc.push(e),this.ta())))}async ta(){if(0!==this.Gc.length){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!BE(e))throw e;Gk("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo((()=>this.ta()))}}Zc(e){const t=this.Kc.then((()=>(this.Wc=!0,e().catch((e=>{this.zc=e,this.Wc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);throw Wk("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Wc=!1,e))))));return this.Kc=t,t}enqueueAfterDelay(e,t,n){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=PF.createAndSchedule(this,e,t,n,(e=>this.ea(e)));return this.jc.push(i),i}Xc(){this.zc&&Yk()}verifyOperationInProgress(){}async na(){let e;do{e=this.Kc,await e}while(e!==this.Kc)}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then((()=>{this.jc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()}))}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function EN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class TN{constructor(){this._progressObserver={},this._taskCompletionResolver=new rE,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=-1;class PN extends fN{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new kN,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xN(this),this._firestoreClient.terminate()}}function CN(e,t){const n="object"==typeof e?e:Dl(),i="string"==typeof e?e:t||"(default)",r=Pl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const e=Cc("firestore");e&&pN(r,...e)}return r}function ON(e){return e._firestoreClient||xN(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xN(e){var t,n,i;const r=e._freezeSettings(),o=function(e,t,n,i){return new GT(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new LR(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function AN(e,t){qN(e=lN(e,PN));const n=ON(e);if(n._uninitializedComponentsProvider)throw new iE(nE.FAILED_PRECONDITION,"SDK cache is already specified.");Qk("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=e._freezeSettings(),r=new AR;return RN(n,r,new OR(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function FN(e){qN(e=lN(e,PN));const t=ON(e);if(t._uninitializedComponentsProvider)throw new iE(nE.FAILED_PRECONDITION,"SDK cache is already specified.");Qk("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),i=new AR;return RN(t,i,new xR(i,n.cacheSizeBytes))}function RN(e,t,n){const i=new rE;return e.asyncQueue.enqueue((async()=>{try{await MR(e,n),await UR(e,t),i.resolve()}catch(e){const n=e;if(!qR(n))throw n;Qk("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function NN(e){if(e._initialized&&!e._terminated)throw new iE(nE.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rE;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!UE.D())return Promise.resolve();const t=e+"main";await UE.delete(t)}(sA(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function DN(e){return function(e){const t=new rE;return e.asyncQueue.enqueueAndForget((async()=>oR(await HR(e),t))),t.promise}(ON(e=lN(e,PN)))}function jN(e){return WR(ON(e=lN(e,PN)))}function LN(e){return QR(ON(e=lN(e,PN)))}function MN(e,t){const n=ON(e=lN(e,PN)),i=new TN;return nN(n,e._databaseId,t,i),i}function UN(e,t){return iN(ON(e=lN(e,PN)),t).then((t=>t?new gN(e,null,t.query):null))}function qN(e){if(e._initialized||e._terminated)throw new iE(nE.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class VN{constructor(e){this._byteString=e}static fromBase64String(e){try{return new VN(qT.fromBase64String(e))}catch(e){throw new iE(nE.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new VN(qT.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new iE(nE.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kE(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ZN{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new iE(nE.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new iE(nE.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mE(this._lat,e._lat)||mE(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/^__.*__$/;class HN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new iC(e,this.data,this.fieldMask,t,this.fieldTransforms):new nC(e,this.data,t,this.fieldTransforms)}}class KN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new iC(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yk()}}class WN{constructor(e,t,n,i,r,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.oa(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new WN(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:n,ha:!1});return i.la(e),i}fa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:n,ha:!1});return i.oa(),i}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return mD(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(GN(this.ua)&&zN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class QN{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zA(e)}ga(e,t,n,i=!1){return new WN({ua:e,methodName:t,ma:n,path:kE.emptyPath(),ha:!1,wa:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JN(e){const t=e._freezeSettings(),n=zA(e._databaseId);return new QN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YN(e,t,n,i,r,o={}){const s=e.ga(o.merge||o.mergeFields?2:0,t,n,r);hD("Data must be an object, but it was:",s,i);const a=uD(i,s);let c,u;if(o.merge)c=new LT(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const i of o.mergeFields){const r=dD(t,i,n);if(!s.contains(r))throw new iE(nE.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);gD(e,r)||e.push(r)}c=new LT(e),u=s.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=s.fieldTransforms;return new HN(new yS(a),c,u)}class XN extends ZN{_toFieldTransform(e){if(2!==e.ua)throw 1===e.ua?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof XN}}function eD(e,t,n){return new WN({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class tD extends ZN{_toFieldTransform(e){return new zP(e.path,new LP)}isEqual(e){return e instanceof tD}}class nD extends ZN{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=eD(this,e,!0),n=this.ya.map((e=>cD(e,t))),i=new MP(n);return new zP(e.path,i)}isEqual(e){return this===e}}class iD extends ZN{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=eD(this,e,!0),n=this.ya.map((e=>cD(e,t))),i=new qP(n);return new zP(e.path,i)}isEqual(e){return this===e}}class rD extends ZN{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new BP(e.serializer,FP(e.serializer,this.pa));return new zP(e.path,t)}isEqual(e){return this===e}}function oD(e,t,n,i){const r=e.ga(1,t,n);hD("Data must be an object, but it was:",r,i);const o=[],s=yS.empty();OT(i,((e,i)=>{const a=pD(t,e,n);i=ou(i);const c=r.fa(a);if(i instanceof XN)o.push(a);else{const e=cD(i,c);null!=e&&(o.push(a),s.set(a,e))}}));const a=new LT(o);return new KN(s,a,r.fieldTransforms)}function sD(e,t,n,i,r,o){const s=e.ga(1,t,n),a=[dD(t,i,n)],c=[r];if(o.length%2!=0)throw new iE(nE.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(dD(t,o[d])),c.push(o[d+1]);const u=[],l=yS.empty();for(let d=a.length-1;d>=0;--d)if(!gD(u,a[d])){const e=a[d];let t=c[d];t=ou(t);const n=s.fa(e);if(t instanceof XN)u.push(e);else{const i=cD(t,n);null!=i&&(u.push(e),l.set(e,i))}}const h=new LT(u);return new KN(l,h,s.fieldTransforms)}function aD(e,t,n,i=!1){return cD(n,e.ga(i?4:3,t))}function cD(e,t){if(lD(e=ou(e)))return hD("Unsupported field value:",t,e),uD(e,t);if(e instanceof ZN)return function(e,t){if(!GN(t.ua))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=cD(r,t.da(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ou(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return FP(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=vE.fromDate(e);return{timestampValue:UC(t.serializer,n)}}if(e instanceof vE){const n=new vE(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:UC(t.serializer,n)}}if(e instanceof $N)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof VN)return{bytesValue:qC(t.serializer,e._byteString)};if(e instanceof mN){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ZC(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${uN(e)}`)}(e,t)}function uD(e,t){const n={};return xT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):OT(e,((e,i)=>{const r=cD(i,t.aa(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function lD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vE||e instanceof $N||e instanceof VN||e instanceof mN||e instanceof ZN)}function hD(e,t,n){if(!lD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=uN(n);throw"an object"===i?t._a(e+" a custom object"):t._a(e+" "+i)}}function dD(e,t,n){if((t=ou(t))instanceof BN)return t._internalPath;if("string"==typeof t)return pD(e,t);throw mD("Field path arguments must be of type string or ",e,!1,void 0,n)}const fD=new RegExp("[~\\*/\\[\\]]");function pD(e,t,n){if(t.search(fD)>=0)throw mD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new BN(...t.split("."))._internalPath}catch(i){throw mD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function mD(e,t,n,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new iE(nE.INVALID_ARGUMENT,a+e+c)}function gD(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new mN(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vD extends yD{data(){return super.data()}}function bD(e,t){return"string"==typeof t?pD(e,t):t instanceof BN?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new iE(nE.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _D{}class ID extends _D{}function kD(e,t,...n){let i=[];t instanceof _D&&i.push(t),i=i.concat(n),function(e){const t=e.filter((e=>e instanceof SD)).length,n=e.filter((e=>e instanceof ED)).length;if(t>1||t>0&&n>0)throw new iE(nE.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);for(const r of i)e=r._apply(e);return e}class ED extends ID{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ED(e,t,n)}_apply(e){const t=this._parse(e);return VD(e._query,t),new gN(e.firestore,e.converter,aP(e._query,t))}_parse(e){const t=JN(e.firestore),n=function(e,t,n,i,r,o,s){let a;if(r.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new iE(nE.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){qD(s,o);const t=[];for(const n of s)t.push(UD(i,e,n));a={arrayValue:{values:t}}}else a=UD(i,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||qD(s,o),a=aD(n,t,s,"in"===o||"not-in"===o);return SS.create(r,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function TD(e,t,n){const i=t,r=bD("where",e);return ED._create(r,i,n)}class SD extends _D{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new SD(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:PS.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)VD(n,r),n=aP(n,r)}(e._query,t),new gN(e.firestore,e.converter,aP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class PD extends ID{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new PD(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new iE(nE.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new iE(nE.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new kS(t,n);return function(e,t){if(null===nP(e)){const n=iP(e);null!==n&&BD(e,n,t.field)}}(e,i),i}(e._query,this._field,this._direction);return new gN(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new YS(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function CD(e,t="asc"){const n=t,i=bD("orderBy",e);return PD._create(i,n)}class OD extends ID{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new OD(e,t,n)}_apply(e){return new gN(e.firestore,e.converter,cP(e._query,this._limit,this._limitType))}}function xD(e){return hN("limit",e),OD._create("limit",e,"F")}function AD(e){return hN("limitToLast",e),OD._create("limitToLast",e,"L")}class FD extends ID{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new FD(e,t,n)}_apply(e){const t=MD(e,this.type,this._docOrFields,this._inclusive);return new gN(e.firestore,e.converter,function(e,t){return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function RD(...e){return FD._create("startAt",e,!0)}function ND(...e){return FD._create("startAfter",e,!1)}class DD extends ID{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new DD(e,t,n)}_apply(e){const t=MD(e,this.type,this._docOrFields,this._inclusive);return new gN(e.firestore,e.converter,function(e,t){return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function jD(...e){return DD._create("endBefore",e,!1)}function LD(...e){return DD._create("endAt",e,!0)}function MD(e,t,n,i){if(n[0]=ou(n[0]),n[0]instanceof yD)return function(e,t,n,i,r){if(!i)throw new iE(nE.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const s of oP(e))if(s.field.isKeyField())o.push(oS(t,i.key));else{const e=i.data.field(s.field);if(zT(e))throw new iE(nE.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new iE(nE.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new wS(o,r)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=JN(e.firestore);return function(e,t,n,i,r,o){const s=e.explicitOrderBy;if(r.length>s.length)throw new iE(nE.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<r.length;c++){const o=r[c];if(s[c].field.isKeyField()){if("string"!=typeof o)throw new iE(nE.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof o}`);if(!rP(e)&&-1!==o.indexOf("/"))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${o}' contains a slash.`);const n=e.path.child(_E.fromString(o));if(!EE.isDocumentKey(n))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new EE(n);a.push(oS(t,r))}else{const e=aD(n,i,o);a.push(e)}}return new wS(a,o)}(e._query,e.firestore._databaseId,r,t,n,i)}}function UD(e,t,n){if("string"==typeof(n=ou(n))){if(""===n)throw new iE(nE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rP(t)&&-1!==n.indexOf("/"))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_E.fromString(n));if(!EE.isDocumentKey(i))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return oS(e,new EE(i))}if(n instanceof mN)return oS(e,n._key);throw new iE(nE.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uN(n)}.`)}function qD(e,t){if(!Array.isArray(e)||0===e.length)throw new iE(nE.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function VD(e,t){if(t.isInequality()){const n=iP(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=nP(e);null!==r&&BD(e,i,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new iE(nE.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new iE(nE.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function BD(e,t,n){if(!n.isEqual(t))throw new iE(nE.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class ZD{convertValue(e,t="none"){switch(YT(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ZT(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($T(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yk()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return OT(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new $N(ZT(e.latitude),ZT(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=HT(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(KT(e));default:return null}}convertTimestamp(e){const t=BT(e);return new vE(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_E.fromString(e);Xk(gO(n));const i=new WT(n.get(1),n.get(3)),r=new EE(n.popFirst(5));return i.isEqual(t)||Wk(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class zD extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new VN(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mN(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class HD{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KD extends yD{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new GD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bD("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class GD extends KD{data(e={}){return super.data(e)}}class WD{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new HD(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new GD(this._firestore,this._userDataWriter,n.key,n,new HD(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new iE(nE.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new GD(e._firestore,e._userDataWriter,n.doc.key,n.doc,new HD(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new GD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,o=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:QD(t.type),doc:i,oldIndex:r,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yk()}}function JD(e,t){return e instanceof KD&&t instanceof KD?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof WD&&t instanceof WD&&e._firestore===t._firestore&&IN(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e){e=lN(e,mN);const t=lN(e.firestore,PN);return YR(ON(t),e._key).then((n=>dj(t,e,n)))}class XD extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new VN(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mN(this.firestore,null,t)}}function ej(e){e=lN(e,mN);const t=lN(e.firestore,PN),n=ON(t),i=new XD(t);return JR(n,e._key).then((n=>new KD(t,i,e._key,n,new HD(null!==n&&n.hasLocalMutations,!0),e.converter)))}function tj(e){e=lN(e,mN);const t=lN(e.firestore,PN);return YR(ON(t),e._key,{source:"server"}).then((n=>dj(t,e,n)))}function nj(e){e=lN(e,gN);const t=lN(e.firestore,PN),n=ON(t),i=new XD(t);return wD(e._query),eN(n,e._query).then((n=>new WD(t,i,e,n)))}function ij(e){e=lN(e,gN);const t=lN(e.firestore,PN),n=ON(t),i=new XD(t);return XR(n,e._query).then((n=>new WD(t,i,e,n)))}function rj(e){e=lN(e,gN);const t=lN(e.firestore,PN),n=ON(t),i=new XD(t);return eN(n,e._query,{source:"server"}).then((n=>new WD(t,i,e,n)))}function oj(e,t,n){e=lN(e,mN);const i=lN(e.firestore,PN),r=$D(e.converter,t,n);return hj(i,[YN(JN(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,GP.none())])}function sj(e,t,n,...i){e=lN(e,mN);const r=lN(e.firestore,PN),o=JN(r);let s;return s="string"==typeof(t=ou(t))||t instanceof BN?sD(o,"updateDoc",e._key,t,n,i):oD(o,"updateDoc",e._key,t),hj(r,[s.toMutation(e._key,GP.exists(!0))])}function aj(e){return hj(lN(e.firestore,PN),[new aC(e._key,GP.none())])}function cj(e,t){const n=lN(e.firestore,PN),i=wN(e),r=$D(e.converter,t);return hj(n,[YN(JN(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,GP.exists(!1))]).then((()=>i))}function uj(e,...t){var n,i,r;e=ou(e);let o={includeMetadataChanges:!1},s=0;"object"!=typeof t[s]||EN(t[s])||(o=t[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(EN(t[s])){const e=t[s];t[s]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[s+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),t[s+2]=null===(r=e.complete)||void 0===r?void 0:r.bind(e)}let c,u,l;if(e instanceof mN)u=lN(e.firestore,PN),l=eP(e._key.path),c={next:n=>{t[s]&&t[s](dj(u,e,n))},error:t[s+1],complete:t[s+2]};else{const n=lN(e,gN);u=lN(n.firestore,PN),l=n._query;const i=new XD(u);c={next:e=>{t[s]&&t[s](new WD(u,i,n,e))},error:t[s+1],complete:t[s+2]},wD(e._query)}return function(e,t,n,i){const r=new RR(i),o=new UF(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>NF(await GR(e),o))),()=>{r.Sc(),e.asyncQueue.enqueueAndForget((async()=>DF(await GR(e),o)))}}(ON(u),l,a,c)}function lj(e,t){return tN(ON(e=lN(e,PN)),EN(t)?t:{next:t})}function hj(e,t){return function(e,t){const n=new rE;return e.asyncQueue.enqueueAndForget((async()=>XF(await HR(e),t,n))),n.promise}(ON(e),t)}function dj(e,t,n){const i=n.docs.get(t._key),r=new XD(e);return new KD(e,r,t._key,i,new HD(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fj={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=JN(e)}set(e,t,n){this._verifyNotCommitted();const i=mj(e,this._firestore),r=$D(i.converter,t,n),o=YN(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(o.toMutation(i._key,GP.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const r=mj(e,this._firestore);let o;return o="string"==typeof(t=ou(t))||t instanceof BN?sD(this._dataReader,"WriteBatch.update",r._key,t,n,i):oD(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,GP.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mj(e,this._firestore);return this._mutations=this._mutations.concat(new aC(t._key,GP.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new iE(nE.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mj(e,t){if((e=ou(e)).firestore!==t)throw new iE(nE.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=JN(e)}get(e){const t=mj(e,this._firestore),n=new zD(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Yk();const i=e[0];if(i.isFoundDocument())return new yD(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new yD(this._firestore,n,t._key,null,t.converter);throw Yk()}))}set(e,t,n){const i=mj(e,this._firestore),r=$D(i.converter,t,n),o=YN(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,o),this}update(e,t,n,...i){const r=mj(e,this._firestore);let o;return o="string"==typeof(t=ou(t))||t instanceof BN?sD(this._dataReader,"Transaction.update",r._key,t,n,i):oD(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=mj(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mj(e,this._firestore),n=new XD(this._firestore);return super.get(e).then((e=>new KD(this._firestore,n,t._key,e._document,new HD(!1,!1),t.converter)))}}function yj(e,t,n){e=lN(e,PN);const i=Object.assign(Object.assign({},fj),n);return function(e){if(e.maxAttempts<1)throw new iE(nE.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){const i=new rE;return e.asyncQueue.enqueueAndForget((async()=>{const r=await KR(e);new jR(e.asyncQueue,r,n,t,i).run()})),i.promise}(ON(e),(n=>t(new gj(e,n))),i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(){return new XN("deleteField")}function bj(){return new tD("serverTimestamp")}function wj(...e){return new nD("arrayUnion",e)}function _j(...e){return new iD("arrayRemove",e)}function Ij(e){return new rD("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e,t=!0){!function(e){$k=e}(Rl),Sl(new su("firestore",((e,{instanceIdentifier:n,options:i})=>{const r=e.getProvider("app").getImmediate(),o=new PN(new cE(e.getProvider("auth-internal")),new dE(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new iE(nE.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WT(e.options.projectId,t)}(r,n),r);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ml(Bk,"3.11.0",e),Ml(Bk,"3.11.0","esm2017")}();const kj="@firebase/firestore-compat",Ej="0.3.8";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Tj(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new iE("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(){if("undefined"===typeof Uint8Array)throw new iE("unimplemented","Uint8Arrays are not available in this environment.")}function Pj(){if(!UT())throw new iE("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Cj{constructor(e){this._delegate=e}static fromBase64String(e){return Pj(),new Cj(VN.fromBase64String(e))}static fromUint8Array(e){return Sj(),new Cj(VN.fromUint8Array(e))}toBase64(){return Pj(),this._delegate.toBase64()}toUint8Array(){return Sj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(e){return xj(e,["next","error","complete"])}function xj(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"===typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{enableIndexedDbPersistence(e,t){return AN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return FN(e._delegate)}clearIndexedDbPersistence(e){return NN(e._delegate)}}class Fj{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof WT||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Qk("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){pN(this._delegate,e,t,n)}enableNetwork(){return jN(this._delegate)}disableNetwork(){return LN(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,sN("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return DN(this._delegate)}onSnapshotsInSync(e){return lj(this._delegate,e)}get app(){if(!this._appCompat)throw new iE("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kj(this,vN(this._delegate,e))}catch(t){throw Uj(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mj(this,wN(this._delegate,e))}catch(t){throw Uj(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $j(this,bN(this._delegate,e))}catch(t){throw Uj(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return yj(this._delegate,(t=>e(new Dj(this,t))))}batch(){return ON(this._delegate),new jj(new pj(this._delegate,(e=>hj(this._delegate,e))))}loadBundle(e){return MN(this._delegate,e)}namedQuery(e){return UN(this._delegate,e).then((e=>e?new $j(this,e):null))}}class Rj extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cj(new VN(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mj.forKey(t,this.firestore,null)}}function Nj(e){Kk(e)}class Dj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rj(e)}get(e){const t=Gj(e);return this._delegate.get(t).then((e=>new Bj(this._firestore,new KD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const i=Gj(e);return n?(Tj("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=Gj(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=Gj(e);return this._delegate.delete(t),this}}class jj{constructor(e){this._delegate=e}set(e,t,n){const i=Gj(e);return n?(Tj("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=Gj(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=Gj(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lj{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new GD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zj(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Lj.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let r=i.get(t);return r||(r=new Lj(e,new Rj(e),t),i.set(t,r)),r}}Lj.INSTANCES=new WeakMap;class Mj{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rj(e)}static forPath(e,t,n){if(e.length%2!==0)throw new iE("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mj(t,new mN(t._delegate,n,new EE(e)))}static forKey(e,t,n){return new Mj(t,new mN(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Kj(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kj(this.firestore,vN(this._delegate,e))}catch(t){throw Uj(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ou(e),e instanceof mN&&_N(this._delegate,e)}set(e,t){t=Tj("DocumentReference.set",t);try{return t?oj(this._delegate,e,t):oj(this._delegate,e)}catch(n){throw Uj(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?sj(this._delegate,e):sj(this._delegate,e,t,...n)}catch(i){throw Uj(i,"updateDoc()","DocumentReference.update()")}}delete(){return aj(this._delegate)}onSnapshot(...e){const t=qj(e),n=Vj(e,(e=>new Bj(this.firestore,new KD(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return uj(this._delegate,t,n)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ej(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?tj(this._delegate):YD(this._delegate),t.then((e=>new Bj(this.firestore,new KD(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Mj(this.firestore,e?this._delegate.withConverter(Lj.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Uj(e,t,n){return e.message=e.message.replace(t,n),e}function qj(e){for(const t of e)if("object"===typeof t&&!Oj(t))return t;return{}}function Vj(e,t){var n,i;let r;return r=Oj(e[0])?e[0]:Oj(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{r.next&&r.next(t(e))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Bj{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mj(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JD(this._delegate,e._delegate)}}class Zj extends Bj{data(e){const t=this._delegate.data(e);return eE(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class $j{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rj(e)}where(e,t,n){try{return new $j(this.firestore,kD(this._delegate,TD(e,t,n)))}catch(i){throw Uj(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $j(this.firestore,kD(this._delegate,CD(e,t)))}catch(n){throw Uj(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $j(this.firestore,kD(this._delegate,xD(e)))}catch(t){throw Uj(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $j(this.firestore,kD(this._delegate,AD(e)))}catch(t){throw Uj(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $j(this.firestore,kD(this._delegate,RD(...e)))}catch(t){throw Uj(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $j(this.firestore,kD(this._delegate,ND(...e)))}catch(t){throw Uj(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $j(this.firestore,kD(this._delegate,jD(...e)))}catch(t){throw Uj(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $j(this.firestore,kD(this._delegate,LD(...e)))}catch(t){throw Uj(t,"endAt()","Query.endAt()")}}isEqual(e){return IN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ij(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?rj(this._delegate):nj(this._delegate),t.then((e=>new Hj(this.firestore,new WD(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=qj(e),n=Vj(e,(e=>new Hj(this.firestore,new WD(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return uj(this._delegate,t,n)}withConverter(e){return new $j(this.firestore,e?this._delegate.withConverter(Lj.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zj(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hj{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $j(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Zj(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new zj(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Zj(this._firestore,n))}))}isEqual(e){return JD(this._delegate,e._delegate)}}class Kj extends $j{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mj(this.firestore,e):null}doc(e){try{return new Mj(this.firestore,void 0===e?wN(this._delegate):wN(this._delegate,e))}catch(t){throw Uj(t,"doc()","CollectionReference.doc()")}}add(e){return cj(this._delegate,e).then((e=>new Mj(this.firestore,e)))}isEqual(e){return _N(this._delegate,e._delegate)}withConverter(e){return new Kj(this.firestore,e?this._delegate.withConverter(Lj.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gj(e){return lN(e,mN)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(...e){this._delegate=new BN(...e)}static documentId(){return new Wj(kE.keyField().canonicalString())}isEqual(e){return e=ou(e),e instanceof BN&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this._delegate=e}static serverTimestamp(){const e=bj();return e._methodName="FieldValue.serverTimestamp",new Qj(e)}static delete(){const e=vj();return e._methodName="FieldValue.delete",new Qj(e)}static arrayUnion(...e){const t=wj(...e);return t._methodName="FieldValue.arrayUnion",new Qj(t)}static arrayRemove(...e){const t=_j(...e);return t._methodName="FieldValue.arrayRemove",new Qj(t)}static increment(e){const t=Ij(e);return t._methodName="FieldValue.increment",new Qj(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj={Firestore:Fj,GeoPoint:$N,Timestamp:vE,Blob:Cj,Transaction:Dj,WriteBatch:jj,DocumentReference:Mj,DocumentSnapshot:Bj,Query:$j,QueryDocumentSnapshot:Zj,QuerySnapshot:Hj,CollectionReference:Kj,FieldPath:Wj,FieldValue:Qj,setLogLevel:Nj,CACHE_SIZE_UNLIMITED:SN};function Yj(e,t){e.INTERNAL.registerComponent(new su("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)}),"PUBLIC").setServiceProps(Object.assign({},Jj)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(e){Yj(e,((e,t)=>new Fj(e,t,new Aj))),e.registerVersion(kj,Ej)}Xj(mh);var eL=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const tL="__googleMapsScriptId";var nL;(function(e){e[e["INITIALIZED"]=0]="INITIALIZED",e[e["LOADING"]=1]="LOADING",e[e["SUCCESS"]=2]="SUCCESS",e[e["FAILURE"]=3]="FAILURE"})(nL||(nL={}));class iL{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:i,id:r=tL,language:o,libraries:s=[],mapIds:a,nonce:c,region:u,retries:l=3,url:h="https://maps.googleapis.com/maps/api/js",version:d}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=i,this.id=r||tL,this.language=o,this.libraries=s,this.mapIds=a,this.nonce=c,this.region=u,this.retries=l,this.url=h,this.version=d,iL.instance){if(!eL(this.options,iL.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(iL.instance.options)}`);return iL.instance}iL.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?nL.FAILURE:this.done?nL.SUCCESS:this.loading?nL.LOADING:nL.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}Function.define(Function.google.fire.base,"app",(function(e){return Nl(e)})),Function.define(Function.google.fire.base,"auth",(function(e){return My(e)})),Function.define(Function.google.fire.base.auth,"state",(function(e,t){return zp(e,(function(e){t.call(this,e)}))})),Function.define(Function.google.fire.base.auth,"email",(function(){})),Function.define(Function.google.fire.base.auth.email,"register",(function(e,t,n){return _p(e,t,n)})),Function.define(Function.google.fire.base.auth.email,"login",(function(e,t,n){return Ip(e,t,n)})),Function.define(Function.google.fire.base.auth.email,"logout",(function(e){return signOut(e)})),Function.define(Function.google.fire,"store",(function(e){return CN(e)})),Function.define(Function.google.fire.store,"collection",(function(e,t){return vN(e,t)})),Function.define(Function.google.fire.store,"snapshot",(function(e,t){return uj(e,t)})),Function.define(Function.google.fire.store,"doc",(function(e,t,n){return wN(e,t,n)})),Function.define(Function.google.fire.store.doc,"get",(function(e,t,n){return YD(e,t,n)})),Function.define(Function.google.fire.store.doc,"set",(function(e,t){return oj(e,t)})),Function.define(Function.google.fire.store,"select",(function(e){return nj(e)})),Function.define(Function.google.fire.store,"insert",(function(e,t){return cj(e,t)})),Function.define(Function.google.fire.store,"update",(function(e,t){return sj(e,t)})),Function.define(Function.google.fire.store,"delete",(function(e){return aj(e)})),Function.define(Function.google.fire.base,"query",(function(e,t){return kD(e,t)})),Function.define(Function.google.fire.base.query,"where",(function(...e){return TD(...e)})),Function.define(Function.map,"loader",(function(e){return new iL({apiKey:e})}));n(19);var rL=n(177);function oL(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}class sL{constructor(e){this.client=e}static flatten(e,t=""){let n={};for(const i in e){let r=e[i],o=t?`${t}[${i}]`:i;Array.isArray(r)?n=Object.assign(n,this.flatten(r,o)):n[o]=r}return n}}sL.CHUNK_SIZE=5242880;class aL{}aL.equal=(e,t)=>aL.addQuery(e,"equal",t),aL.notEqual=(e,t)=>aL.addQuery(e,"notEqual",t),aL.lessThan=(e,t)=>aL.addQuery(e,"lessThan",t),aL.lessThanEqual=(e,t)=>aL.addQuery(e,"lessThanEqual",t),aL.greaterThan=(e,t)=>aL.addQuery(e,"greaterThan",t),aL.greaterThanEqual=(e,t)=>aL.addQuery(e,"greaterThanEqual",t),aL.isNull=e=>`isNull("${e}")`,aL.isNotNull=e=>`isNotNull("${e}")`,aL.between=(e,t,n)=>`between("${e}", [${aL.parseValues(t)},${aL.parseValues(n)}])`,aL.startsWith=(e,t)=>aL.addQuery(e,"startsWith",t),aL.endsWith=(e,t)=>aL.addQuery(e,"endsWith",t),aL.select=e=>`select([${e.map((e=>`"${e}"`)).join(",")}])`,aL.search=(e,t)=>aL.addQuery(e,"search",t),aL.orderDesc=e=>`orderDesc("${e}")`,aL.orderAsc=e=>`orderAsc("${e}")`,aL.cursorAfter=e=>`cursorAfter("${e}")`,aL.cursorBefore=e=>`cursorBefore("${e}")`,aL.limit=e=>`limit(${e})`,aL.offset=e=>`offset(${e})`,aL.addQuery=(e,t,n)=>n instanceof Array?`${t}("${e}", [${n.map((e=>aL.parseValues(e))).join(",")}])`:`${t}("${e}", [${aL.parseValues(n)}])`,aL.parseValues=e=>"string"===typeof e||e instanceof String?`"${e}"`:`${e}`;class cL extends Error{constructor(e,t=0,n="",i=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=n,this.response=i}}class uL{constructor(){this.config={endpoint:"https://HOSTNAME/v1",endpointRealtime:"",project:"",jwt:"",locale:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"11.0.0","X-Appwrite-Response-Format":"1.0.0"},this.realtime={socket:void 0,timeout:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=null===window||void 0===window?void 0:window.setTimeout((()=>{this.realtime.createSocket()}),50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createSocket:()=>{var e,t;if(this.realtime.channels.size<1)return;const n=new URLSearchParams;n.set("project",this.config.project),this.realtime.channels.forEach((e=>{n.append("channels[]",e)}));const i=this.config.endpointRealtime+"/realtime?"+n.toString();(i!==this.realtime.url||!this.realtime.socket||(null===(e=this.realtime.socket)||void 0===e?void 0:e.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&(null===(t=this.realtime.socket)||void 0===t?void 0:t.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=i,this.realtime.socket=new WebSocket(i),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",(e=>{this.realtime.reconnectAttempts=0})),this.realtime.socket.addEventListener("close",(e=>{var t,n,i;if(!this.realtime.reconnect||"error"===(null===(n=null===(t=this.realtime)||void 0===t?void 0:t.lastMessage)||void 0===n?void 0:n.type)&&1008===(null===(i=this.realtime)||void 0===i?void 0:i.lastMessage.data).code)return void(this.realtime.reconnect=!0);const r=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${r/1e3} seconds.`,e.reason),setTimeout((()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()}),r)})))},onMessage:e=>{var t,n;try{const i=JSON.parse(e.data);switch(this.realtime.lastMessage=i,i.type){case"connected":const e=JSON.parse(null!==(t=window.localStorage.getItem("cookieFallback"))&&void 0!==t?t:"{}"),r=null===e||void 0===e?void 0:e[`a_session_${this.config.project}`],o=i.data;r&&!o.user&&(null===(n=this.realtime.socket)||void 0===n||n.send(JSON.stringify({type:"authentication",data:{session:r}})));break;case"event":let s=i.data;if(null===s||void 0===s?void 0:s.channels){const e=s.channels.some((e=>this.realtime.channels.has(e)));if(!e)return;this.realtime.subscriptions.forEach((e=>{s.channels.some((t=>e.channels.includes(t)))&&setTimeout((()=>e.callback(s)))}))}break;case"error":throw i.data;default:break}}catch(i){console.error(i)}},cleanUp:e=>{this.realtime.channels.forEach((t=>{if(e.includes(t)){let e=Array.from(this.realtime.subscriptions).some((([e,n])=>n.channels.includes(t)));e||this.realtime.channels.delete(t)}}))}}}setEndpoint(e){return this.config.endpoint=e,this.config.endpointRealtime=this.config.endpointRealtime||this.config.endpoint.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}subscribe(e,t){let n="string"===typeof e?[e]:e;n.forEach((e=>this.realtime.channels.add(e)));const i=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(i,{channels:n,callback:t}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(i),this.realtime.cleanUp(n),this.realtime.connect()}}call(e,t,n={},i={}){var r,o;return oL(this,void 0,void 0,(function*(){e=e.toUpperCase(),n=Object.assign({},this.headers,n);let s={method:e,headers:n,credentials:"include"};if("undefined"!==typeof window&&window.localStorage&&(n["X-Fallback-Cookies"]=null!==(r=window.localStorage.getItem("cookieFallback"))&&void 0!==r?r:""),"GET"===e)for(const[e,n]of Object.entries(sL.flatten(i)))t.searchParams.append(e,n);else switch(n["content-type"]){case"application/json":s.body=JSON.stringify(i);break;case"multipart/form-data":let e=new FormData;for(const t in i)Array.isArray(i[t])?i[t].forEach((n=>{e.append(t+"[]",n)})):e.append(t,i[t]);s.body=e,delete n["content-type"];break}try{let e=null;const n=yield(0,rL.fetch)(t.toString(),s);if(e=(null===(o=n.headers.get("content-type"))||void 0===o?void 0:o.includes("application/json"))?yield n.json():{message:yield n.text()},400<=n.status)throw new cL(null===e||void 0===e?void 0:e.message,n.status,null===e||void 0===e?void 0:e.type,e);const i=n.headers.get("X-Fallback-Cookies");return"undefined"!==typeof window&&window.localStorage&&i&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",i)),e}catch(a){if(a instanceof cL)throw a;throw new cL(a.message)}}))}}class lL extends sL{constructor(e){super(e)}get(){return oL(this,void 0,void 0,(function*(){let e="/account",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)}))}create(e,t,n,i){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "email"');if("undefined"===typeof n)throw new cL('Missing required parameter: "password"');let r="/account",o={};"undefined"!==typeof e&&(o["userId"]=e),"undefined"!==typeof t&&(o["email"]=t),"undefined"!==typeof n&&(o["password"]=n),"undefined"!==typeof i&&(o["name"]=i);const s=new URL(this.client.config.endpoint+r);return yield this.client.call("post",s,{"content-type":"application/json"},o)}))}updateEmail(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "email"');if("undefined"===typeof t)throw new cL('Missing required parameter: "password"');let n="/account/email",i={};"undefined"!==typeof e&&(i["email"]=e),"undefined"!==typeof t&&(i["password"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)}))}createJWT(){return oL(this,void 0,void 0,(function*(){let e="/account/jwt",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}listLogs(e){return oL(this,void 0,void 0,(function*(){let t="/account/logs",n={};"undefined"!==typeof e&&(n["queries"]=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("get",i,{"content-type":"application/json"},n)}))}updateName(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "name"');let t="/account/name",n={};"undefined"!==typeof e&&(n["name"]=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)}))}updatePassword(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "password"');let n="/account/password",i={};"undefined"!==typeof e&&(i["password"]=e),"undefined"!==typeof t&&(i["oldPassword"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)}))}updatePhone(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "phone"');if("undefined"===typeof t)throw new cL('Missing required parameter: "password"');let n="/account/phone",i={};"undefined"!==typeof e&&(i["phone"]=e),"undefined"!==typeof t&&(i["password"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)}))}getPrefs(){return oL(this,void 0,void 0,(function*(){let e="/account/prefs",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)}))}updatePrefs(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "prefs"');let t="/account/prefs",n={};"undefined"!==typeof e&&(n["prefs"]=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)}))}createRecovery(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "email"');if("undefined"===typeof t)throw new cL('Missing required parameter: "url"');let n="/account/recovery",i={};"undefined"!==typeof e&&(i["email"]=e),"undefined"!==typeof t&&(i["url"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)}))}updateRecovery(e,t,n,i){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "secret"');if("undefined"===typeof n)throw new cL('Missing required parameter: "password"');if("undefined"===typeof i)throw new cL('Missing required parameter: "passwordAgain"');let r="/account/recovery",o={};"undefined"!==typeof e&&(o["userId"]=e),"undefined"!==typeof t&&(o["secret"]=t),"undefined"!==typeof n&&(o["password"]=n),"undefined"!==typeof i&&(o["passwordAgain"]=i);const s=new URL(this.client.config.endpoint+r);return yield this.client.call("put",s,{"content-type":"application/json"},o)}))}listSessions(){return oL(this,void 0,void 0,(function*(){let e="/account/sessions",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)}))}deleteSessions(){return oL(this,void 0,void 0,(function*(){let e="/account/sessions",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("delete",n,{"content-type":"application/json"},t)}))}createAnonymousSession(){return oL(this,void 0,void 0,(function*(){let e="/account/sessions/anonymous",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}createEmailSession(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "email"');if("undefined"===typeof t)throw new cL('Missing required parameter: "password"');let n="/account/sessions/email",i={};"undefined"!==typeof e&&(i["email"]=e),"undefined"!==typeof t&&(i["password"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)}))}createMagicURLSession(e,t,n){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "email"');let i="/account/sessions/magic-url",r={};"undefined"!==typeof e&&(r["userId"]=e),"undefined"!==typeof t&&(r["email"]=t),"undefined"!==typeof n&&(r["url"]=n);const o=new URL(this.client.config.endpoint+i);return yield this.client.call("post",o,{"content-type":"application/json"},r)}))}updateMagicURLSession(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "secret"');let n="/account/sessions/magic-url",i={};"undefined"!==typeof e&&(i["userId"]=e),"undefined"!==typeof t&&(i["secret"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)}))}createOAuth2Session(e,t,n,i){if("undefined"===typeof e)throw new cL('Missing required parameter: "provider"');let r="/account/sessions/oauth2/{provider}".replace("{provider}",e),o={};"undefined"!==typeof t&&(o["success"]=t),"undefined"!==typeof n&&(o["failure"]=n),"undefined"!==typeof i&&(o["scopes"]=i);const s=new URL(this.client.config.endpoint+r);o["project"]=this.client.config.project;for(const[a,c]of Object.entries(sL.flatten(o)))s.searchParams.append(a,c);if("undefined"===typeof window||!(null===window||void 0===window?void 0:window.location))return s;window.location.href=s.toString()}createPhoneSession(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "phone"');let n="/account/sessions/phone",i={};"undefined"!==typeof e&&(i["userId"]=e),"undefined"!==typeof t&&(i["phone"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)}))}updatePhoneSession(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "secret"');let n="/account/sessions/phone",i={};"undefined"!==typeof e&&(i["userId"]=e),"undefined"!==typeof t&&(i["secret"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)}))}getSession(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("get",i,{"content-type":"application/json"},n)}))}updateSession(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)}))}deleteSession(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",i,{"content-type":"application/json"},n)}))}updateStatus(){return oL(this,void 0,void 0,(function*(){let e="/account/status",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",n,{"content-type":"application/json"},t)}))}createVerification(e){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "url"');let t="/account/verification",n={};"undefined"!==typeof e&&(n["url"]=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("post",i,{"content-type":"application/json"},n)}))}updateVerification(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "secret"');let n="/account/verification",i={};"undefined"!==typeof e&&(i["userId"]=e),"undefined"!==typeof t&&(i["secret"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)}))}createPhoneVerification(){return oL(this,void 0,void 0,(function*(){let e="/account/verification/phone",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}updatePhoneVerification(e,t){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "userId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "secret"');let n="/account/verification/phone",i={};"undefined"!==typeof e&&(i["userId"]=e),"undefined"!==typeof t&&(i["secret"]=t);const r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)}))}}class hL extends sL{constructor(e){super(e)}listDocuments(e,t,n){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "databaseId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "collectionId"');let i="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),r={};"undefined"!==typeof n&&(r["queries"]=n);const o=new URL(this.client.config.endpoint+i);return yield this.client.call("get",o,{"content-type":"application/json"},r)}))}createDocument(e,t,n,i,r){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "databaseId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "collectionId"');if("undefined"===typeof n)throw new cL('Missing required parameter: "documentId"');if("undefined"===typeof i)throw new cL('Missing required parameter: "data"');let o="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),s={};"undefined"!==typeof n&&(s["documentId"]=n),"undefined"!==typeof i&&(s["data"]=i),"undefined"!==typeof r&&(s["permissions"]=r);const a=new URL(this.client.config.endpoint+o);return yield this.client.call("post",a,{"content-type":"application/json"},s)}))}getDocument(e,t,n,i){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "databaseId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "collectionId"');if("undefined"===typeof n)throw new cL('Missing required parameter: "documentId"');let r="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",n),o={};"undefined"!==typeof i&&(o["queries"]=i);const s=new URL(this.client.config.endpoint+r);return yield this.client.call("get",s,{"content-type":"application/json"},o)}))}updateDocument(e,t,n,i,r){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "databaseId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "collectionId"');if("undefined"===typeof n)throw new cL('Missing required parameter: "documentId"');let o="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",n),s={};"undefined"!==typeof i&&(s["data"]=i),"undefined"!==typeof r&&(s["permissions"]=r);const a=new URL(this.client.config.endpoint+o);return yield this.client.call("patch",a,{"content-type":"application/json"},s)}))}deleteDocument(e,t,n){return oL(this,void 0,void 0,(function*(){if("undefined"===typeof e)throw new cL('Missing required parameter: "databaseId"');if("undefined"===typeof t)throw new cL('Missing required parameter: "collectionId"');if("undefined"===typeof n)throw new cL('Missing required parameter: "documentId"');let i="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",n),r={};const o=new URL(this.client.config.endpoint+i);return yield this.client.call("delete",o,{"content-type":"application/json"},r)}))}}class dL{}dL.read=e=>`read("${e}")`,dL.write=e=>`write("${e}")`,dL.create=e=>`create("${e}")`,dL.update=e=>`update("${e}")`,dL.delete=e=>`delete("${e}")`;class fL{static custom(e){return e}static unique(){return"unique()"}}Function.define(Function,"open_io",class{constructor(){this.client=new uL,this.api=new Function.open_io.api(this),this.account=new Function.open_io.account(this),this.db=new Function.open_io.db(this)}}),Function.define(Function.open_io,"api",class{constructor(e){this.open_io=e}key(e){return this.open_io.client.setKey(this.__key=e),this}url(e){return this.open_io.client.setEndpoint(this.__url=e),this}project(e){return this.open_io.client.setProject(this.__project=e),this}}),Function.define(Function.open_io,"account",class{constructor(e){this.prop(this.open_io=e)}channel(){return new Function.open_io.account(this.open_io)}prop(){this.client=new lL(this.open_io.client),this.session=new Function.open_io.account.session(this.open_io,this),this.anonymous=new Function.open_io.account.anonymous(this.open_io,this),this.email=new Function.open_io.account.email(this.open_io,this),this.meta=new Function.open_io.account.meta(this.open_io,this)}get(){return Object.to.promise({io:this},(function(e,t){this.io.client.get().then((function(t){e(Function.open_io.field.account(t))})).catch(t)}))}name(e){return Object.to.promise(this.client.updateName(e))}status(e){return Object.to.promise(this.client.updateStatus(e))}}),Function.define(Function.open_io.account,"session",class{constructor(e,t){this.open_io=e,this.account=t,this.event={}}on(e,t){return e in this.event?this.event[e].push(t):this.event[e]=[t],this}emit(e,...t){if(e in this.event){if(1===this.event[e].length)return this.event[e][0].call(this,...t);for(var n in this.event[e])this.event[e][n].call(this,...t)}}exist(e){return e&&this.on("check",e),this.emit("check")}empty(){return!this.exist()}error(e=0,t="Unknown"){if(this.empty())return this.e=Object.to.promise(Function.promise.catch({code:e,message:t}))}error_found(){return this.error(404,"Session not Found")}set(e,t,n){return n=Function.option(n),n.anonymous?this.account.anonymous.session():(e=Object.to.email(e),n.password||(t=Function.hash.password(t)),Object.to.promise({client:this,account:this.account},(function(n,i){var r=function(e){var t=Function.open_io.field.account.session(e);this.client.emit("set",t),n(t)};this.account.client.createEmailSession(e,t).then(r.bind({client:this.client})).catch(i)})))}get(e="current"){return this.error_found()?this.e:"*"===e?Object.to.promise({account:this.account},(function(e,t){var n=function(t){var n=[];for(var i in t.sessions)n.push(Function.open_io.field.account.session(t.sessions[i]));e({data:n,length:t.total})};this.account.client.listSessions().then(n.bind({account:this.account})).catch(t)})):Object.to.promise({account:this.account},(function(t,n){var i=function(e){t(Function.open_io.field.account.session(e))};this.account.client.getSession(e).then(i).catch(n)}))}delete(e="current"){return this.error_found()?this.e:"*"===e?(this.emit("delete"),Object.to.promise({client:this,account:this.account},(function(e,t){var n=function(e){for(var t in e.sessions)this.client.emit("delete:each"),this.account.client.deleteSession(e.sessions[t].$id)};this.account.client.listSessions().then(n.bind({client:this.client,account:this.account})).catch(t)}))):"all"===e?(this.emit("delete"),Object.to.promise(this.account.client.deleteSessions())):(this.emit("delete"),Object.to.promise(this.account.client.deleteSession(e)))}}),Function.define(Function.open_io.account,"anonymous",class{constructor(e,t){this.open_io=e,this.account=t}session(){return Object.to.promise(this.account.client.createAnonymousSession())}}),Function.define(Function.open_io.account,"email",class{constructor(e,t){this.open_io=e,this.account=t,this.prop()}prop(){this.verification=new Function.open_io.account.email.verification(this.open_io,this.account)}create(e,t){var n=Function.open_io.unique.id();return e=Object.to.email(e),t=Function.hash.password(t),Object.to.promise({account:this.account},(function(i,r){var o=function(e){i(Function.open_io.field.account(e))};this.account.client.create(n,e,t).then(o).catch(r)}))}}),Function.define(Function.open_io.account.email,"verification",class{constructor(e,t){this.open_io=e,this.account=t}send(e="http://127.0.0.1:8080"){return Object.to.promise(this.account.client.createVerification(e))}confirm(e,t){return Object.to.promise(this.account.client.updateVerification(e,t))}}),Function.define(Function.open_io.account,"meta",class{constructor(e,t){this.open_io=e,this.account=t}get(){return Object.to.promise(this.account.client.getPrefs())}push(e={}){return Object.to.promise({account:this.account},(function(t,n){this.account.client.updatePrefs(e).then((function(e){t(Function.open_io.field.account(e))})).catch(n)}))}}),Function.define(Function.open_io,"db",class{constructor(e,t){t&&(this.id=t),this.prop(this.open_io=e)}prop(){this.client=new hL(this.open_io.client),this.collection=new Function.open_io.db.collection(this.open_io,this),this.document=new Function.open_io.db.document(this.open_io,this)}use(e,t){return t?new Function.open_io.db(this.open_io,e):(this.id=e)?this:void 0}get(e,t,n){return this.document.get(e,t,n)}select(e,t){return this.document.select(e,t)}insert(e,t,n){return this.document.insert(e,t,n)}update(e,t,n){return this.document.update(e,t,n)}delete(e,t){return this.document.delete(e,t)}}),Function.define(Function.open_io.db,"collection",class{constructor(e,t){this.open_io=e,this.db=t,this.field={}}get(e){return this.field[e]||e}set(e,t){t?this.field[e]=t:this.field=e}}),Function.define(Function.open_io.db,"document",class{constructor(e,t){this.open_io=e,this.db=t}get(e,t,n){if(e=this.db.collection.get(e),t){Object.is.object(t)&&(n=t),n=Function.option(n,{db:this.db.id});var i=function(i,r){var o=function(e){i({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.getDocument(n.db,e,t).then(o).catch(r)};return Object.to.promise(new Promise(i.bind({db:this.db})))}return new Function.open_io.db.document.get(this.open_io,this.db,e)}select(e,t){e=this.db.collection.get(e),t=Function.option(t,{db:this.db.id});var n=function(n,i){var r=function(e){var t=[];for(var i in e.documents)t.push({"$:id":e.documents[i].$id,"$:stamp":Function.open_io.field.stamp(e.documents[i]),...Function.open_io.field(e.documents[i])});n({data:t,length:e.total})};this.db.client.listDocuments(t.db,e).then(r).catch(i)};return Object.to.promise(new Promise(n.bind({db:this.db})))}insert(e,t,n){if(e=this.db.collection.get(e),t){t["$:meta"]&&(t.meta=JSON.stringify(t["$:meta"])),delete t["$:meta"],n=Object.is.string(n)?{db:this.db.id,id:n}:Function.option(n,{db:this.db.id,id:Function.open_io.unique.id()});var i=function(i,r){var o=function(e){i({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.createDocument(n.db,e,n.id,t).then(o).catch(r)};return Object.to.promise(new Promise(i.bind({db:this.db})))}return new Function.open_io.db.document.insert(this.open_io,this.db,e)}update(e,t,n){if(e=this.db.collection.get(e),t){t["$:meta"]&&(t.meta=JSON.stringify(t["$:meta"])),delete t["$:meta"],n=Object.is.string(n)?{db:this.db.id,id:n}:Function.option(n,{db:this.db.id});var i=function(i,r){var o=function(e){i({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.updateDocument(n.db,e,n.id,t).then(o).catch(r)};return Object.to.promise(new Promise(i.bind({db:this.db})))}return new Function.open_io.db.document.update(this.open_io,this.db,e)}delete(e,t){if(e=this.db.collection.get(e),t){t=Object.is.string(t)?{db:this.db.id,id:t}:Function.option(t,{db:this.db.id});var n=function(n,i){var r=function(e){n({})};this.db.client.deleteDocument(t.db,e,t.id).then(r).catch(i)};return Object.to.promise(new Promise(n.bind({db:this.db})))}return new Function.open_io.db.document.delete(this.open_io,this.db,e)}}),Function.define(Function.open_io.db.document,"get",class{constructor(e,t,n){this.open_io=e,this.db=t,this.collection=n}select(e,t){t=Function.option(t,{db:this.db.id});var n=function(n,i){var r=function(e){n({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.getDocument(t.db,this.collection,e).then(r).catch(i)};return Object.to.promise(new Promise(n.bind({db:this.db,collection:this.collection})))}}),Function.define(Function.open_io.db.document,"insert",class{constructor(e,t,n){this.open_io=e,this.db=t,this.collection=n}set(e,t){e["$:meta"]&&(e.meta=JSON.stringify(e["$:meta"])),delete e["$:meta"],t=Object.is.string(t)?{db:this.db.id,id:t}:Function.option(t,{db:this.db.id,id:Function.open_io.unique.id()});var n=function(n,i){var r=function(e){n({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.createDocument(t.db,this.collection,t.id,e).then(r).catch(i)};return Object.to.promise(new Promise(n.bind({db:this.db,collection:this.collection})))}}),Function.define(Function.open_io.db.document,"update",class{constructor(e,t,n){this.open_io=e,this.db=t,this.collection=n}set(e,t){e["$:meta"]&&(e.meta=JSON.stringify(e["$:meta"])),delete e["$:meta"],t=Object.is.string(t)?{db:this.db.id,id:t}:Function.option(t,{db:this.db.id});var n=function(n,i){var r=function(e){n({"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),...Function.open_io.field(e)})};this.db.client.updateDocument(t.db,this.collection,t.id,e).then(r).catch(i)};return Object.to.promise(new Promise(n.bind({db:this.db,collection:this.collection})))}}),Function.define(Function.open_io.db.document,"delete",class{constructor(e,t,n){this.open_io=e,this.db=t,this.collection=n}data(e){e=Object.is.string(e)?{db:this.db.id,id:e}:Function.option(e,{db:this.db.id});var t=function(t,n){var i=function(e){t({})};this.db.client.deleteDocument(e.db,this.collection,e.id).then(i).catch(n)};return Object.to.promise(new Promise(t.bind({db:this.db,collection:this.collection})))}}),Function.define(Function.open_io,"unique",(function(){})),Function.define(Function.open_io.unique,"id",(function(e=!0,t=36){return e?Function.hash.sha.shuffle(t):fL.unique()})),Function.define(Function.open_io,"field",(function(e){var t={};for(var n in e)"meta"===n?t["$:meta"]=JSON.parse(e[n]):!1===n.startsWith("$")&&(t[n]=e[n]);return t})),Function.define(Function.open_io.field,"stamp",(function(e){var t=0,n=0;return e&&(e.$createdAt&&(t=new Date(e.$createdAt).getTime()),e.$updatedAt&&(n=new Date(e.$updatedAt).getTime())),{insert:t,update:n,delete:0}})),Function.define(Function.open_io.field,"account",(function(e){return{"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),"$:meta":e.prefs,name:e.name,email:e.email,email_verification:e.emailVerification,phone:e.phone,phone_verification:e.phoneVerification,status:e.status}})),Function.define(Function.open_io.field.account,"session",(function(e){return{"$:id":e.$id,"$:stamp":Function.open_io.field.stamp(e),account:e.userId,visitor:{ip:e.ip,country:{code:e.countryCode,name:e.countryName}},current:e.current}})),Function.define(Function.open_io.field,"vs",(function(e){return{account:e.userId,secret:e.secret}}));n(314);const pL={error:Error,catch:Function.catch,module:Function.module,package:Function.package,define:Function.define,is:Object.is,un:Object.un,to:Object.to,to_bool:Object.to_bool,to_boolean:Object.to_boolean,object:Object,array:Array,string:String,char:String.char,math:Math,number:Number,regex:RegExp,function:Function,date:Date,time:{stamp:Date.stamp,sleep:Date.sleep,interval:Date.interval,zone:Date.Time.zone},url:URL,parse_url:URL.parse_url,http:Function.http,socket:Function.socket,serialize:Function.serialize,xml:Function.xml,json:Function.json,path:Function.path,file:Function.file,dir:Function.dir,util:Function.util,diagnostic:Function.diagnostic,promise:Function.promise,event:Function.event,emit:Function.emit,emitter:Function.emitter,cpu:Function.cpu,archive:Function.archive,compress:Function.compress,hash:Function.hash,network:Function.network,stream:Function.stream,data:Function.data,db:Function.db,sql:Function.sql,mongo:Function.mongo,store:Function.store,storage:Function.storage,session:Function.session,cookie:Function.cookie,dom:Function.dom,component:Function.component,element:Function.element,query:Function.query,attribute:Function.attribute,mobile:Function.mobile,audio:Function.audio,visitor:Function.visitor,scroll:Function.scroll,user:Function.user,email:Function.email,phone:Function.phone,system:Function.system,plugin:Function.plugin,web:Function.web,cross:Function.cross,geo:Function.geo,map:Function.map,context:Function.context,argument:Function.argument,option:Function.option,optional:Function.optional,setting:Function.setting,console:Function.console,debug:Function.debug,log:Function.log,echo:Function.echo,print:Function.print,validation:Function.validation,validate:Function.validate,app:Function.app,application:Function.application,type_of:Object.type_of,instance_of:Object.instance_of,process:Function.process,proc:Function.proc,exe:Function.exe,exec:Function.exec,key:Function.key,value:Function.value,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,seo:Function.seo,bot:Function.bot,axios:Function.axios,google:Function.google,fire:Function.fire,open_io:Function.open_io,open_ai:Function.open_ai,browser:Function.browser,sort:Object.sort,to_array:Object.to.array,to_string:Object.to.string,to_number:Object.to.number,to_integer:Object.to.integer,to_float:Object.to.float,to_promise:Object.to.promise};pL.route=Zi.route,pL.router=Zi.router,Zi.library.io=null,Zi.library.axios=pL.axios;const mL=pL,gL=function(){},yL=function(){},vL={__:Zi.reactive(),proto:Zi.proto,var:Zi.reactive(),ini:Zi.reactive(),web:{site:Zi.reactive(),socket:Zi.reactive()},log:{},cache:{},part:[],partial:[],app:Zi.reactive({router:{}}),application:Zi.application,package:Zi.reactive(),module:Zi.reactive(),ready:Zi.reactive(),properties:Zi.properties,to:Zi.to,reference:Zi.reference,reactive:Zi.reactive,react:Zi.react,compute:Zi.compute,watch:Zi.watch,inject:Zi.inject,store:Zi.store,model:Zi.model,on:Zi.on,emit:Zi.emit,process:Zi.process,request:Zi.request,response:Zi.response,respond:Zi.respond,slot:Zi.slot,layout:Zi.layout,component:Zi.component,element:Zi.element,next:Zi.next,directive:Zi.directive,script:{},error:{}}},772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>An});var i=n(882),r=n(252);function o(e,t,n,i,o,s){const a=(0,r.up)("img:sys"),c=(0,r.up)("dom");return e.image?((0,r.wg)(),(0,r.j4)(a,{key:0,slot:e.image},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"])):e.layout?((0,r.wg)(),(0,r.j4)(c,{key:1,slot:e.layout},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"])):e.component?((0,r.wg)(),(0,r.j4)(c,{key:2,slot:e.component},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"])):e.element?((0,r.wg)(),(0,r.j4)(c,{key:3,slot:e.element},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"])):((0,r.wg)(),(0,r.j4)(c,{key:4,slot:e.slot},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"]))}const s=i.ZP.next({id:"vue:slot",attribute:["slot","layout","component","element","image"]});var a=n(744);const c=(0,a.Z)(s,[["render",o]]),u=c;function l(e,t,n,i,o,s){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.slot),null,{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3})}const h=i.ZP.next({id:"dom",attribute:["slot"]}),d=(0,a.Z)(h,[["render",l]]),f=d;function p(e,t,n,i,o,s){return(0,r.WI)(e.$slots,"default")}const m=i.ZP.next({id:"router:slot"}),g=(0,a.Z)(m,[["render",p]]),y=g;function v(e,t,n,i,o,s){const a=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(a,{slot:""})}const b=i.ZP.next({id:"router:view"}),w=(0,a.Z)(b,[["render",v]]),_=w,I={key:1};function k(e,t,n,i,o,s){const a=(0,r.up)("router-link");return e.url?((0,r.wg)(),(0,r.j4)(a,{key:0,to:e.url},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["to"])):((0,r.wg)(),(0,r.iD)("a",I,[(0,r.WI)(e.$slots,"default")]))}const E=i.ZP.next({id:"router:link",attribute:["url"],setup:function(e){var t=i.ZP.reference(i.ZP.url.convert(e.url));return{url:t}}}),T=(0,a.Z)(E,[["render",k]]),S=T,P={key:1};function C(e,t,n,i,o,s){const a=(0,r.up)("router-link");return e.url?((0,r.wg)(),(0,r.j4)(a,{key:0,to:e.url},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["to"])):((0,r.wg)(),(0,r.iD)("a",P,[(0,r.WI)(e.$slots,"default")]))}const O=i.ZP.next({id:"a:link",attribute:["url"],setup:function(e){var t=i.ZP.reference(i.ZP.url.convert(e.url));return{url:t}}}),x=(0,a.Z)(O,[["render",C]]),A=x;function F(e,t,n,i,o,s){const a=(0,r.up)("dom");return(0,r.wg)(),(0,r.j4)(a,{slot:e.slot||"layout:slot"},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["slot"])}const R=i.ZP.next({layout:"slot",attribute:["slot"]}),N=(0,a.Z)(R,[["render",F]]),D=N;i.ZP.next({component:"slot"});i.ZP.next({element:"slot"});const j={string:""};function L(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("span",j,[(0,r.WI)(e.$slots,"default")])}const M=i.ZP.next({element:"string"}),U=(0,a.Z)(M,[["render",L]]),q=U;var V=n(676);const B={key:0,src:V},Z={key:1,viewBox:"0 0 128 128",width:"24",height:"24"},$=(0,r._)("path",{fill:"#42b883",d:"M78.8,10L64,35.4L49.2,10H0l64,110l64-110C128,10,78.8,10,78.8,10z"},null,-1),z=(0,r._)("path",{fill:"#35495e",d:"M78.8,10L64,35.4L49.2,10H25.6L64,76l38.4-66H78.8z"},null,-1),H=[$,z],K={key:2,height:"477",viewBox:"0 0 319 477",width:"319",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},G=(0,r.uE)('<linearGradient id="a"><stop offset="0" stop-color="#52ce63"></stop><stop offset="1" stop-color="#51a256"></stop></linearGradient><linearGradient id="b" x1="55.342075%" x2="42.816933%" xlink:href="#a" y1="0%" y2="42.862855%"></linearGradient><linearGradient id="c" x1="55.348642%" x2="42.808103%" xlink:href="#a" y1="0%" y2="42.862855%"></linearGradient><linearGradient id="d" x1="50%" x2="50%" y1="0%" y2="58.811243%"><stop offset="0" stop-color="#8ae99c"></stop><stop offset="1" stop-color="#52ce63"></stop></linearGradient><linearGradient id="e" x1="51.37763%" x2="44.584719%" y1="17.472551%" y2="100%"><stop offset="0" stop-color="#ffe56c"></stop><stop offset="1" stop-color="#ffc63a"></stop></linearGradient><g fill="none" fill-rule="evenodd" transform="translate(-34 -24)"><g transform="matrix(.99254615 .12186934 -.12186934 .99254615 33.922073 .976691)"><path d="m103.950535 258.274149c44.361599-4.360825 60.014503-40.391282 65.353094-94.699444s-30.93219-103.451001-46.020347-101.9678079c-15.088156 1.4831932-63.0385313 58.9051239-68.3771222 113.2132869-5.3385908 54.308162 4.6827754 87.814791 49.0443752 83.453965z" fill="url(#b)" transform="matrix(.70710678 -.70710678 .70710678 .70710678 -80.496332 125.892944)"></path><path d="m275.876752 258.273992c44.3616 4.360826 53.167133-29.265322 47.828542-83.573485-5.338591-54.308162-52.073133-111.6105744-67.16129-113.0937675-15.088156-1.4831931-52.57477 47.5401275-47.236179 101.8482895s22.207328 90.458137 66.568927 94.818963z" fill="url(#c)" transform="matrix(.70710678 .70710678 -.70710678 .70710678 191.403399 -141.861963)"></path><path d="m188.370027 216.876305c39.941834 0 50.95265-38.251987 50.95265-97.89874 0-59.6467532-37.367733-118.10125956-50.95265-118.10125956s-52.04735 58.45450636-52.04735 118.10125956c0 59.646753 12.105516 97.89874 52.04735 97.89874z" fill="url(#d)"></path></g><path d="m184.473473 501c83.118854 0 150.526527-24.145148 150.526527-133.645148s-67.407673-199.354852-150.526527-199.354852c-83.118855 0-150.473473 89.854852-150.473473 199.354852s67.354618 133.645148 150.473473 133.645148z" fill="url(#e)"></path><ellipse cx="260.5" cy="335" fill="#eaadcc" rx="21.5" ry="10"></ellipse><ellipse cx="102.5" cy="329" fill="#eaadcc" rx="21.5" ry="10" transform="matrix(.99254615 .12186934 -.12186934 .99254615 40.859033 -10.039292)"></ellipse><g transform="matrix(-.99939083 .0348995 .0348995 .99939083 269.284825 271.027667)"><path d="m73.1046985 58.2728794c6.7372416 4.9130333 14.3132632 6.6640587 22.7280649 5.2530761 8.4148016-1.4109825 14.5054466-5.2535769 18.2719346-11.527783" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="6" transform="matrix(.9998477 .01745241 -.01745241 .9998477 1.026464 -1.624794)"></path><path d="m154.501124 3c-5.937545 0-11.312782 2.40629805-15.203644 6.29680621-3.89094 3.89058529-6.29748 9.26545449-6.29748 15.20263179 0 5.9376888 2.406488 11.3127422 6.297291 15.2034272 3.890886 3.8907673 9.266197 6.2971348 15.203833 6.2971348 5.937109 0 11.311896-2.4063889 15.202387-6.2972348 3.890299-3.8906535 6.296489-9.2656636 6.296489-15.2033272 0-5.9371521-2.406242-11.3119781-6.296677-15.20253181-3.890469-3.89058674-9.265181-6.29690619-15.202199-6.29690619z" fill="#000"></path><path d="m154 21c0-3.865549 3.135362-7 6.999413-7 3.866399 0 7.000587 3.134451 7.000587 7s-3.134188 7-7.000587 7c-3.864051-.0011735-6.999413-3.134451-6.999413-7z" fill="#fff"></path><path d="m24.5 13c-5.9375292 0-11.312426 2.406268-15.20299427 6.2967181-3.89069464 3.8905765-6.29700573 9.2654765-6.29700573 15.2027199 0 5.9377549 2.40625962 11.3128391 6.29681766 15.2035153 3.89059104 3.8907092 9.26556184 6.2970467 15.20318234 6.2970467 5.9371249 0 11.3122514-2.406419 15.2030371-6.2973229 3.8905441-3.8906623 6.2969629-9.2656416 6.2969629-15.2032391 0-5.937086-2.4064703-11.3118811-6.297151-15.2024437-3.890763-3.8906448-9.2658154-6.2969943-15.202849-6.2969943z" fill="#000"></path><g fill="#fff"><path d="m136 24.499438c0 10.2185232 8.282911 18.500562 18.501124 18.500562 10.217089 0 18.498876-8.2820388 18.498876-18.500562 0-10.2173992-8.281787-18.499438-18.498876-18.499438-10.218213 0-18.501124 8.2820388-18.501124 18.499438zm-6 0c0-13.5311954 10.96929-24.499438 24.501124-24.499438 13.530838 0 24.498876 10.9683711 24.498876 24.499438 0 13.5319607-10.967808 24.500562-24.498876 24.500562-13.532064 0-24.501124-10.9684728-24.501124-24.500562z" fill-rule="nonzero" stroke="#fff" stroke-width="3"></path><path d="m6 34.499438c0 10.2185232 8.2817873 18.500562 18.5 18.500562 10.2170889 0 18.5-8.2820388 18.5-18.500562 0-10.2173992-8.2829111-18.499438-18.5-18.499438-10.2182127 0-18.5 8.2820388-18.5 18.499438zm-6 0c0-13.531297 10.9682681-24.499438 24.5-24.499438 13.5309398 0 24.5 10.9684728 24.5 24.499438 0 13.5318591-10.96883 24.500562-24.5 24.500562-13.531962 0-24.5-10.9683711-24.5-24.500562z" fill-rule="nonzero" stroke="#fff" stroke-width="3"></path><path d="m24 31c0-3.865549 3.134451-7 7-7s7 3.134451 7 7-3.134451 7-7 7-7-3.134451-7-7z"></path></g></g><g stroke-linecap="round" stroke-width="11"><g stroke="#ecb732"><path d="m70.5 377.5 74 77"></path><path d="m134.5 386.5-47 50"></path></g><g stroke="#ecb732" transform="matrix(-1 0 0 1 298 377)"><path d="m.5.5 74 77"></path><path d="m64.5 9.5-47 50"></path></g><g stroke="#ffc73b" transform="matrix(0 1 -1 0 215 207)"><path d="m.5.5 49 49"></path><path d="m.5 10.5 49 49" transform="matrix(-1 0 0 1 50 0)"></path></g></g></g>',6),W=[G],Q={key:3,width:"1102",height:"278",viewBox:"0 0 1102 278",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J=(0,r.uE)('<path d="M82.3229 28.6444C71.5367 15.8469 62.2485 2.84945 60.351 0.149971C60.1512 -0.0499903 59.8515 -0.0499903 59.6518 0.149971C57.7542 2.84945 48.4661 15.8469 37.6798 28.6444C-54.9019 146.721 52.2613 226.406 52.2613 226.406L53.1601 227.006C53.959 239.303 55.9565 257 55.9565 257H59.9514H63.9463C63.9463 257 65.9438 239.403 66.7428 227.006L67.6416 226.306C67.7414 226.406 174.905 146.721 82.3229 28.6444ZM59.9514 224.606C59.9514 224.606 55.1576 220.507 53.8592 218.408V218.207L59.6518 89.6326C59.6518 89.2326 60.2511 89.2326 60.2511 89.6326L66.0436 218.207V218.408C64.7453 220.507 59.9514 224.606 59.9514 224.606Z" fill="#001E2B"></path><path d="M260.501 198.369L215.845 89.3012L215.745 89H181.001V96.3314H186.608C188.31 96.3314 189.912 97.0344 191.114 98.2396C192.315 99.4447 192.916 101.052 192.916 102.759L191.915 212.53C191.915 215.944 189.112 218.756 185.707 218.857L180 218.957V226.188H213.843V218.957L210.338 218.857C206.934 218.756 204.13 215.944 204.13 212.53V109.086L252.792 226.188C253.492 227.895 255.094 229 256.897 229C258.699 229 260.301 227.895 261.002 226.188L308.562 111.697L309.263 212.53C309.263 216.045 306.459 218.857 302.955 218.957H299.35V226.188H339V218.957H333.593C330.189 218.957 327.385 216.045 327.285 212.63L326.985 102.859C326.985 99.3443 329.788 96.5322 333.193 96.4318L339 96.3314V89H305.157L260.501 198.369Z" fill="#001E2B"></path><path d="M571.869 217.046C570.764 215.94 570.162 214.431 570.162 212.62V158.696C570.162 148.435 567.151 140.386 561.127 134.652C555.205 128.917 546.973 126 536.734 126C522.378 126 511.035 131.835 503.104 143.304C503.004 143.505 502.703 143.606 502.402 143.606C502.1 143.606 501.9 143.404 501.9 143.103L498.185 128.716H491.961L476 137.871V142.901H480.116C482.023 142.901 483.629 143.404 484.734 144.411C485.838 145.417 486.44 146.926 486.44 149.038V212.519C486.44 214.33 485.838 215.839 484.734 216.946C483.629 218.052 482.124 218.656 480.317 218.656H476.301V226H513.042V218.656H509.027C507.22 218.656 505.714 218.052 504.61 216.946C503.506 215.839 502.903 214.33 502.903 212.519V170.467C502.903 165.135 504.108 159.803 506.317 154.571C508.625 149.441 512.038 145.115 516.556 141.795C521.073 138.475 526.494 136.865 532.718 136.865C539.745 136.865 545.066 139.078 548.378 143.505C551.691 147.932 553.398 153.666 553.398 160.507V212.419C553.398 214.229 552.795 215.738 551.691 216.845C550.587 217.952 549.081 218.555 547.274 218.555H543.259V225.899H580V218.555H575.985C574.479 218.757 573.073 218.153 571.869 217.046Z" fill="#001E2B"></path><path d="M907.546 97.2119C897.39 91.804 886.039 89 873.792 89H826V96.3106H830.68C832.472 96.3106 834.065 97.0117 835.658 98.614C837.152 100.116 837.948 101.819 837.948 103.621V211.379C837.948 213.181 837.152 214.884 835.658 216.386C834.165 217.888 832.472 218.689 830.68 218.689H826V226H873.792C886.039 226 897.39 223.196 907.546 217.788C917.701 212.38 925.966 204.368 931.94 194.154C937.914 183.939 941 171.621 941 157.6C941 143.58 937.914 131.362 931.94 121.047C925.866 110.632 917.701 102.72 907.546 97.2119ZM921.784 157.4C921.784 170.219 919.494 181.034 915.013 189.747C910.533 198.46 904.558 204.969 897.19 209.176C889.823 213.382 881.658 215.485 872.896 215.485H863.238C861.446 215.485 859.853 214.784 858.26 213.181C856.766 211.679 855.97 209.977 855.97 208.174V106.526C855.97 104.723 856.667 103.121 858.26 101.518C859.753 100.016 861.446 99.2149 863.238 99.2149H872.896C881.658 99.2149 889.823 101.318 897.19 105.524C904.558 109.73 910.533 116.24 915.013 124.952C919.494 133.765 921.784 144.681 921.784 157.4Z" fill="#001E2B"></path><path d="M1053.97 164.711C1049.55 159.603 1041.02 155.297 1030.99 152.993C1044.84 146.083 1051.96 136.369 1051.96 123.851C1051.96 117.041 1050.16 110.932 1046.54 105.724C1042.93 100.517 1037.81 96.3106 1031.29 93.4063C1024.76 90.5021 1017.13 89 1008.5 89H954.402V96.3106H958.718C960.524 96.3106 962.13 97.0117 963.736 98.614C965.242 100.116 966.045 101.819 966.045 103.621V211.379C966.045 213.181 965.242 214.884 963.736 216.386C962.231 217.888 960.524 218.689 958.718 218.689H954V226H1012.72C1021.65 226 1029.98 224.498 1037.51 221.493C1045.04 218.489 1051.06 214.083 1055.38 208.274C1059.79 202.466 1062 195.355 1062 187.143C1061.9 178.33 1059.29 170.819 1053.97 164.711ZM986.621 213.281C985.115 211.779 984.312 210.077 984.312 208.274V159.903H1012.22C1022.05 159.903 1029.58 162.407 1034.8 167.414C1040.02 172.422 1042.63 178.931 1042.63 186.943C1042.63 191.75 1041.42 196.457 1039.22 200.763C1036.91 205.17 1033.49 208.675 1028.88 211.379C1024.36 214.083 1018.74 215.485 1012.22 215.485H991.639C989.833 215.485 988.227 214.784 986.621 213.281ZM984.413 149.588V106.626C984.413 104.823 985.115 103.221 986.721 101.618C988.227 100.116 989.933 99.315 991.74 99.315H1004.99C1014.52 99.315 1021.55 101.719 1025.97 106.325C1030.38 111.032 1032.59 117.041 1032.59 124.452C1032.59 132.063 1030.48 138.172 1026.37 142.778C1022.25 147.285 1016.03 149.588 1007.8 149.588H984.413Z" fill="#001E2B"></path><path d="M431.999 132.388C424.329 128.196 415.763 126 406.5 126C397.237 126 388.571 128.096 381.001 132.388C373.331 136.579 367.255 142.667 362.773 150.352C358.291 158.037 356 167.02 356 177C356 186.98 358.291 195.963 362.773 203.648C367.255 211.333 373.331 217.421 381.001 221.613C388.671 225.804 397.237 228 406.5 228C415.763 228 424.429 225.904 431.999 221.613C439.669 217.421 445.745 211.333 450.227 203.648C454.709 195.963 457 186.98 457 177C457 167.02 454.709 158.037 450.227 150.352C445.745 142.667 439.669 136.579 431.999 132.388ZM439.37 177C439.37 189.276 436.382 199.256 430.405 206.442C424.529 213.628 416.461 217.321 406.5 217.321C396.54 217.321 388.471 213.628 382.595 206.442C376.618 199.256 373.63 189.276 373.63 177C373.63 164.724 376.618 154.744 382.595 147.558C388.471 140.372 396.54 136.679 406.5 136.679C416.461 136.679 424.529 140.372 430.405 147.558C436.382 154.744 439.37 164.724 439.37 177Z" fill="#001E2B"></path><path d="M784.999 132.388C777.329 128.196 768.763 126 759.5 126C750.237 126 741.571 128.096 734.001 132.388C726.331 136.579 720.255 142.667 715.773 150.352C711.291 158.037 709 167.02 709 177C709 186.98 711.291 195.963 715.773 203.648C720.255 211.333 726.331 217.421 734.001 221.613C741.671 225.804 750.237 228 759.5 228C768.763 228 777.429 225.904 784.999 221.613C792.669 217.421 798.745 211.333 803.227 203.648C807.709 195.963 810 186.98 810 177C810 167.02 807.709 158.037 803.227 150.352C798.745 142.667 792.569 136.579 784.999 132.388ZM792.37 177C792.37 189.276 789.381 199.256 783.405 206.442C777.528 213.628 769.46 217.321 759.5 217.321C749.539 217.321 741.471 213.628 735.595 206.442C729.618 199.256 726.63 189.276 726.63 177C726.63 164.624 729.618 154.744 735.595 147.558C741.471 140.372 749.539 136.679 759.5 136.679C769.46 136.679 777.528 140.372 783.405 147.558C789.282 154.744 792.37 164.724 792.37 177Z" fill="#001E2B"></path><path d="M642.64 126C634.614 126 627.292 127.704 620.671 131.113C614.05 134.522 608.834 139.135 605.122 145.05C601.411 150.865 599.505 157.383 599.505 164.301C599.505 170.517 600.909 176.232 603.818 181.346C606.627 186.259 610.439 190.369 615.254 193.778L600.909 213.23C599.103 215.636 598.903 218.844 600.207 221.451C601.611 224.158 604.219 225.763 607.229 225.763H611.342C607.329 228.47 604.119 231.678 601.912 235.488C599.304 239.799 598 244.311 598 248.923C598 257.546 601.812 264.665 609.335 269.979C616.759 275.293 627.191 278 640.332 278C649.461 278 658.188 276.496 666.113 273.588C674.138 270.681 680.658 266.369 685.473 260.755C690.389 255.14 692.897 248.322 692.897 240.501C692.897 232.28 689.887 226.464 682.865 220.85C676.847 216.137 667.417 213.631 655.68 213.631H615.555C615.455 213.631 615.354 213.53 615.354 213.53C615.354 213.53 615.254 213.33 615.354 213.23L625.787 199.193C628.596 200.496 631.204 201.298 633.511 201.799C635.918 202.301 638.627 202.501 641.636 202.501C650.063 202.501 657.687 200.797 664.307 197.388C670.928 193.979 676.245 189.367 680.057 183.451C683.868 177.636 685.774 171.119 685.774 164.201C685.774 156.781 682.163 143.245 672.332 136.327C672.332 136.227 672.433 136.227 672.433 136.227L694 138.633V128.707H659.492C654.075 127.003 648.458 126 642.64 126ZM654.677 188.765C650.865 190.77 646.752 191.873 642.64 191.873C635.919 191.873 630 189.467 624.984 184.755C619.969 180.042 617.461 173.124 617.461 164.301C617.461 155.478 619.969 148.559 624.984 143.847C630 139.135 635.919 136.728 642.64 136.728C646.853 136.728 650.865 137.731 654.677 139.836C658.489 141.842 661.599 144.95 664.107 149.061C666.514 153.172 667.818 158.285 667.818 164.301C667.818 170.417 666.614 175.53 664.107 179.541C661.699 183.652 658.489 186.76 654.677 188.765ZM627.492 225.662H654.677C662.201 225.662 667.016 227.166 670.226 230.375C673.436 233.583 675.041 237.894 675.041 242.908C675.041 250.227 672.132 256.243 666.314 260.755C660.495 265.267 652.671 267.573 643.041 267.573C634.614 267.573 627.592 265.668 622.476 262.058C617.36 258.449 614.752 252.934 614.752 245.916C614.752 241.504 615.956 237.393 618.364 233.784C620.771 230.174 623.68 227.567 627.492 225.662Z" fill="#001E2B"></path><path d="M1082.35 224.327C1080.37 223.244 1078.88 221.669 1077.69 219.799C1076.6 217.831 1076 215.764 1076 213.5C1076 211.236 1076.6 209.071 1077.69 207.201C1078.78 205.232 1080.37 203.756 1082.35 202.673C1084.34 201.591 1086.52 201 1089 201C1091.48 201 1093.66 201.591 1095.65 202.673C1097.63 203.756 1099.12 205.331 1100.31 207.201C1101.4 209.169 1102 211.236 1102 213.5C1102 215.764 1101.4 217.929 1100.31 219.799C1099.22 221.768 1097.63 223.244 1095.65 224.327C1093.66 225.409 1091.48 226 1089 226C1086.62 226 1084.34 225.508 1082.35 224.327ZM1094.56 222.949C1096.24 222.063 1097.44 220.685 1098.43 219.11C1099.32 217.437 1099.82 215.567 1099.82 213.5C1099.82 211.433 1099.32 209.563 1098.43 207.89C1097.53 206.217 1096.24 204.937 1094.56 204.051C1092.87 203.165 1091.08 202.673 1089 202.673C1086.92 202.673 1085.13 203.165 1083.44 204.051C1081.76 204.937 1080.56 206.315 1079.57 207.89C1078.68 209.563 1078.18 211.433 1078.18 213.5C1078.18 215.567 1078.68 217.437 1079.57 219.11C1080.47 220.783 1081.76 222.063 1083.44 222.949C1085.13 223.835 1086.92 224.327 1089 224.327C1091.08 224.327 1092.97 223.835 1094.56 222.949ZM1083.64 219.504V218.618L1083.84 218.52H1084.44C1084.63 218.52 1084.83 218.421 1084.93 218.323C1085.13 218.126 1085.13 218.028 1085.13 217.831V208.677C1085.13 208.48 1085.03 208.284 1084.93 208.185C1084.73 207.988 1084.63 207.988 1084.44 207.988H1083.84L1083.64 207.89V207.004L1083.84 206.906H1089C1090.49 206.906 1091.58 207.201 1092.47 207.89C1093.37 208.579 1093.76 209.465 1093.76 210.646C1093.76 211.532 1093.47 212.417 1092.77 213.008C1092.08 213.697 1091.28 214.091 1090.29 214.189L1091.48 214.583L1093.76 218.224C1093.96 218.52 1094.16 218.618 1094.46 218.618H1095.05L1095.15 218.717V219.602L1095.05 219.701H1091.98L1091.78 219.602L1088.6 214.287H1087.81V217.831C1087.81 218.028 1087.91 218.224 1088.01 218.323C1088.21 218.52 1088.31 218.52 1088.5 218.52H1089.1L1089.3 218.618V219.504L1089.1 219.602H1083.84L1083.64 219.504ZM1088.7 213.008C1089.5 213.008 1090.19 212.811 1090.59 212.319C1090.98 211.925 1091.28 211.236 1091.28 210.449C1091.28 209.661 1091.08 209.071 1090.69 208.579C1090.29 208.087 1089.69 207.89 1089 207.89H1088.6C1088.4 207.89 1088.21 207.988 1088.11 208.087C1087.91 208.283 1087.91 208.382 1087.91 208.579V213.008H1088.7Z" fill="#001E2B"></path>',9),Y=[J];function X(e,t,n,i,o,s){return"node"===e.slot?((0,r.wg)(),(0,r.iD)("img",B)):"vue"===e.slot?((0,r.wg)(),(0,r.iD)("svg",Z,H)):"pinia"===e.slot?((0,r.wg)(),(0,r.iD)("svg",K,W)):"mongo"===e.slot?((0,r.wg)(),(0,r.iD)("svg",Q,Y)):(0,r.kq)("",!0)}const ee=i.ZP.next({element:"img:sys",attribute:["slot"]}),te=(0,a.Z)(ee,[["render",X]]),ne=te,ie=["src"];function re(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("img",{src:e.src},null,8,ie)}const oe=i.ZP.next({element:"img:logo",attribute:["src","slot"],setup:function(e){var t=i.ZP.reference(e.src);return"public"===e.slot?t.value=i.ZP["static"].logo.path(t.value):t.value=i.ZP.theme.logo.path(t.value),{vue:i.ZP,src:t}}}),se=(0,a.Z)(oe,[["render",re]]),ae=se,ce={icon:""};function ue(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("span",ce,[(0,r.WI)(e.$slots,"default")])}const le=i.ZP.next({element:"icon"}),he=(0,a.Z)(le,[["render",ue]]),de=he;var fe=n(577);function pe(e,t,n,i,o,s){return e.src?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,fe.C_)(e.type),element:"icon:material",icon:""},(0,fe.zw)(e.src),3)):((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,fe.C_)(e.type),element:"icon:material",icon:""},[(0,r.WI)(e.$slots,"default")],2))}const me=i.ZP.next({element:"icon:material",attribute:["src","type"],setup:function(e){var t=i.ZP.reference(e.src),n=i.ZP.reference(ge[e.type]||e.type||"material-icon");return{src:t,type:n}}});var ge={line:"material-icon-line",round:"material-icon-round",sharp:"material-icon-sharp",tone:"material-icon-tone"};const ye=(0,a.Z)(me,[["render",pe]]),ve=ye;function be(e,t,n,i,o,s){return e.src?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,fe.C_)(e.type),element:"icon:symbol",icon:""},(0,fe.zw)(e.src),3)):((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,fe.C_)(e.type),element:"icon:symbol",icon:""},[(0,r.WI)(e.$slots,"default")],2))}const we=i.ZP.next({element:"icon:symbol",attribute:["src","type","weight"],setup:function(e){var t=i.ZP.reference(e.src),n=i.ZP.reference(_e[e.weight]||e.weight||_e["bold-medium"]),r=i.ZP.reference("material-symbol");return"line"===e.type?r.value="material-symbol-line":r.value="material-symbol",r.value=r.value.implode(n.value,"weight".concat("__")).value(),{src:t,type:r}}});var _e={"light-ultra":100,"light-medium":200,light:300,regular:400,"bold-light":500,"bold-medium":600,bold:700};const Ie=(0,a.Z)(we,[["render",be]]),ke=Ie,Ee={key:0,container:""},Te={key:1,container:""},Se={key:2,container:""},Pe={key:3,container:""};function Ce(e,t,n,i,o,s){const a=(0,r.up)("icon:symbol"),c=(0,r.up)("icon:material"),u=(0,r.up)("string");return(0,r.wg)(),(0,r.iD)("button",{onClick:t[0]||(t[0]=t=>e.go__()),element:"button:material"},[e.is_icon()?((0,r.wg)(),(0,r.iD)("div",Ee,[e.is_symbol(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css),pad:""},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css),pad:""},null,8,["src","type","weight","class"]))])):e.is_text()?((0,r.wg)(),(0,r.iD)("div",Te,[(0,r.Wm)(u,{padding:"",both:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])):e.is_right(e.option.icon.position)?((0,r.wg)(),(0,r.iD)("div",Se,[(0,r.Wm)(u,{padding:"",left:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3}),e.is_symbol(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"]))])):((0,r.wg)(),(0,r.iD)("div",Pe,[e.is_symbol(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])),(0,r.Wm)(u,{padding:"",right:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3})]))])}const Oe=i.ZP.next({element:"button:material",attribute:["url","icon","option"],setup:function(e){var t=i.ZP.reference(e.url),n=i.ZP.reference(e.icon),r=i.ZP.reactive({icon:{}});return i.ZP.react(r,e.option),{vue:i.ZP,url:t,icon:n,option:r}},method:{function(){},slot(){return i.ZP.slot(this).default},go__(){this.url&&i.ZP.router.go(this.url)},is_icon(){if(this.icon)return!this.slot()},is_text(){if(this.slot())return!this.icon},is_left(e){return"left"===e},is_right(e){return"right"===e},is_symbol(e){return"symbol"===e}}}),xe=(0,a.Z)(Oe,[["render",Ce],["__scopeId","data-v-47b15a18"]]),Ae=xe,Fe={key:0,container:""},Re={key:1,container:""},Ne={key:2,container:""},De={key:3,container:""};function je(e,t,n,i,o,s){const a=(0,r.up)("icon:material"),c=(0,r.up)("icon:symbol"),u=(0,r.up)("string");return(0,r.wg)(),(0,r.iD)("button",{onClick:t[0]||(t[0]=t=>e.go__()),element:"button:material"},[e.is_icon()?((0,r.wg)(),(0,r.iD)("div",Fe,[e.is_material(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css),pad:""},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css),pad:""},null,8,["src","type","weight","class"]))])):e.is_text()?((0,r.wg)(),(0,r.iD)("div",Re,[(0,r.Wm)(u,{padding:"",both:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3})])):e.is_right(e.option.icon.position)?((0,r.wg)(),(0,r.iD)("div",Ne,[(0,r.Wm)(u,{padding:"",left:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3}),e.is_material(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"]))])):((0,r.wg)(),(0,r.iD)("div",De,[e.is_material(e.option.icon.style)?((0,r.wg)(),(0,r.j4)(a,{key:0,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])):((0,r.wg)(),(0,r.j4)(c,{key:1,src:e.icon,type:e.option.icon.type,weight:e.option.icon.weight,class:(0,fe.C_)(e.option.icon.css)},null,8,["src","type","weight","class"])),(0,r.Wm)(u,{padding:"",right:""},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3})]))])}const Le=i.ZP.next({element:"button:symbol",attribute:["url","icon","option"],setup:function(e){var t=i.ZP.reference(e.url),n=i.ZP.reference(e.icon),r=i.ZP.reactive({icon:{}});return i.ZP.react(r,e.option),{vue:i.ZP,url:t,icon:n,option:r}},method:{function(){},slot(){return i.ZP.slot(this).default},go__(){this.url&&i.ZP.router.go(this.url)},is_icon(){if(this.icon)return!this.slot()},is_text(){if(this.slot())return!this.icon},is_left(e){return"left"===e},is_right(e){return"right"===e},is_material(e){return"material"===e}}}),Me=(0,a.Z)(Le,[["render",je],["__scopeId","data-v-01ca5087"]]),Ue=Me;var qe=n(963);const Ve=(0,r._)("input",{type:"submit",class:"none"},null,-1),Be={key:1};function Ze(e,t,n,i,o,s){return e.enter?((0,r.wg)(),(0,r.iD)("form",{key:0,onSubmit:t[0]||(t[0]=(0,qe.iM)(((...t)=>e.enter&&e.enter(...t)),["prevent"]))},[(0,r.WI)(e.$slots,"default"),Ve],32)):((0,r.wg)(),(0,r.iD)("form",Be,[(0,r.WI)(e.$slots,"default")]))}const $e=i.ZP.next({element:"form:submit",attribute:["enter"],setup:function(e){var t=i.ZP.reference(e.enter);return{vue:i.ZP,enter:t}}}),ze=(0,a.Z)($e,[["render",Ze]]),He=ze,Ke=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],Ge=["autocomplete","autocapitalize","autocorrect","spellcheck"];function We(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.property.complete,autocapitalize:e.property.capitalize,autocorrect:e.property.correct,spellcheck:e.property.spell,element:"form:input"},null,40,Ke)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.property.complete,autocapitalize:e.property.capitalize,autocorrect:e.property.correct,spellcheck:e.property.spell,element:"form:input"},null,8,Ge)),[[qe.nr,e.vue.model.data[e.model]]])}const Qe=i.ZP.next({element:"form:input",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,property:r}}}),Je=(0,a.Z)(Qe,[["render",We]]),Ye=Je,Xe=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],et=["autocomplete","autocapitalize","autocorrect","spellcheck"];function tt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"text",element:"form:text"},null,40,Xe)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"text",element:"form:text"},null,8,et)),[[qe.nr,e.vue.model.data[e.model]]])}const nt=i.ZP.next({element:"form:text",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),it=(0,a.Z)(nt,[["render",tt]]),rt=it,ot=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],st=["autocomplete","autocapitalize","autocorrect","spellcheck"];function at(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"password",element:"form:password"},null,40,ot)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"password",element:"form:password"},null,8,st)),[[qe.nr,e.vue.model.data[e.model]]])}const ct=i.ZP.next({element:"form:password",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),ut=(0,a.Z)(ct,[["render",at]]),lt=ut,ht=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],dt=["autocomplete","autocapitalize","autocorrect","spellcheck"];function ft(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"number",element:"form:number"},null,40,ht)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"number",element:"form:number"},null,8,dt)),[[qe.nr,e.vue.model.data[e.model]]])}const pt=i.ZP.next({element:"form:number",attribute:["for","model","complete","capitalize","correct","spell","value"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.lib.is.define(e.value)&&(e.value?i.ZP.model(e.model,i.lib.number(e.value)):i.ZP.model(e.model,"")),i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),mt=(0,a.Z)(pt,[["render",ft]]),gt=mt,yt=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],vt=["autocomplete","autocapitalize","autocorrect","spellcheck"];function bt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"date",element:"form:date"},null,40,yt)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"date",element:"form:date"},null,8,vt)),[[qe.nr,e.vue.model.data[e.model]]])}const wt=i.ZP.next({element:"form:date",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),_t=(0,a.Z)(wt,[["render",bt]]),It=_t,kt=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],Et=["autocomplete","autocapitalize","autocorrect","spellcheck"];function Tt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"email",element:"form:email"},null,40,kt)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,type:"email",element:"form:email"},null,8,Et)),[[qe.nr,e.vue.model.data[e.model]]])}const St=i.ZP.next({element:"form:email",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),Pt=(0,a.Z)(St,[["render",Tt]]),Ct=Pt,Ot=["for","model"],xt=["model"];function At(e,t,n,i,o,s){const a=(0,r.Q2)("file");return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,model:e.model,type:"file",element:"form:text"},null,8,Ot)),[[a]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,model:e.model,type:"file",element:"form:file"},null,8,xt)),[[a]])}const Ft=i.ZP.next({element:"form:file",attribute:["for","model"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),Rt=(0,a.Z)(Ft,[["render",At]]),Nt=Rt,Dt=["for"];function jt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),type:"checkbox",element:"form:check"},null,40,Dt)),[[qe.e8,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),type:"checkbox",element:"form:check"},null,512)),[[qe.e8,e.vue.model.data[e.model]]])}const Lt=i.ZP.next({element:"form:check",attribute:["for","model"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model)})),{vue:i.ZP,label:t,model:n}}}),Mt=(0,a.Z)(Lt,[["render",jt]]),Ut=Mt,qt=["for"];function Vt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),type:"radio",element:"form:bullet"},null,40,qt)),[[qe.G2,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),type:"radio",element:"form:bullet"},null,512)),[[qe.G2,e.vue.model.data[e.model]]])}const Bt=i.ZP.next({element:"form:bullet",attribute:["for","model"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model)})),{vue:i.ZP,label:t,model:n}}}),Zt=(0,a.Z)(Bt,[["render",Vt]]),$t=Zt,zt=["for","autocomplete","autocapitalize","autocorrect","spellcheck"],Ht=["autocomplete","autocapitalize","autocorrect","spellcheck"];function Kt(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("textarea",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,element:"form:text-area"},null,40,zt)),[[qe.nr,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("textarea",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),autocomplete:e.attribute.complete,autocapitalize:e.attribute.capitalize,autocorrect:e.attribute.correct,spellcheck:e.attribute.spell,element:"form:text-area"},null,8,Ht)),[[qe.nr,e.vue.model.data[e.model]]])}const Gt=i.ZP.next({element:"form:text-area",attribute:["for","model","complete","capitalize","correct","spell"],setup:function(e){var t=i.ZP.reference(e.for),n=i.ZP.reference(i.ZP.model.format(e.model)),r=i.ZP.reactive(i.ZP.form.attribute(e));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){t.value=e.for,n.value=i.ZP.model.format(e.model),i.ZP.react(r,i.ZP.form.attribute(e))})),{vue:i.ZP,label:t,model:n,attribute:r}}}),Wt=(0,a.Z)(Gt,[["render",Kt]]),Qt=Wt,Jt=["for"],Yt=["value"],Xt=["value"];function en(e,t,n,i,o,s){return e.label?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,for:e.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vue.model.data[e.model]=t),onFocus:t[1]||(t[1]=(...t)=>e.vue.form.focus&&e.vue.form.focus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.vue.form.blur&&e.vue.form.blur(...t)),element:"form:select-option"},[e.slot()?(0,r.WI)(e.$slots,"default",{key:0}):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.data,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.key},(0,fe.zw)(e.value),9,Yt)))),256))],40,Jt)),[[qe.bM,e.vue.model.data[e.model]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.vue.model.data[e.model]=t),element:"form:select-option"},[e.slot()?(0,r.WI)(e.$slots,"default",{key:0}):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.data,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.key},(0,fe.zw)(e.value),9,Xt)))),256))],512)),[[qe.bM,e.vue.model.data[e.model]]])}const tn=i.ZP.next({element:"form:select-option",attribute:["for","model","data"],setup:function(e){var t=i.ZP.reference(e.data),n=i.ZP.reference(e.for),r=i.ZP.reference(i.ZP.model.format(e.model));return i.ZP.ini("watch:legacy")&&i.ZP.watch(e,(function(){n.value=e.for,r.value=i.ZP.model.format(e.model)})),{vue:i.ZP,label:n,model:r,data:t}},method:{slot(){return i.ZP.slot(this).default}}}),nn=(0,a.Z)(tn,[["render",en]]),rn=nn;function on(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("fieldset",null,[(0,r.WI)(e.$slots,"default")])}const sn=i.ZP.next({element:"form:field-set",attribute:["enter"],setup:function(e){var t=i.ZP.reference(e.enter);return{vue:i.ZP,enter:t}}}),an=(0,a.Z)(sn,[["render",on]]),cn=an;function un(e,t,n,i,o,s){const a=(0,r.up)("string");return(0,r.wg)(),(0,r.j4)(a,{element:"date:time"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,fe.zw)(e.convert(e.format,e.stamp,e.offset)),1)])),_:1})}const ln=i.ZP.next({element:"date:time",attribute:["format","stamp","offset"],setup:function(e){var t=i.ZP.reference(e.format),n=i.ZP.reference(i.lib.to.number(e.stamp)),r=i.ZP.reference(e.offset);return{format:t,stamp:n,offset:r}},method:{convert(...e){return i.ZP.date.format(...e)}}}),hn=(0,a.Z)(ln,[["render",un]]),dn=hn,fn={class:"flex"};function pn(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("div",fn,[(0,r.WI)(e.$slots,"default")])}const mn=i.ZP.next({element:"flex"}),gn=(0,a.Z)(mn,[["render",pn]]),yn=gn,vn={class:"flex-grow"};function bn(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("div",vn,[(0,r.WI)(e.$slots,"default")])}const wn=i.ZP.next({element:"flex:grow"}),_n=(0,a.Z)(wn,[["render",bn]]),In=_n,kn={vue:u,dom:f,"router:slot":y,"router:view":_,"router:link":S,"a:link":A,layout:D,string:q,"img:sys":ne,"img:logo":ae,icon:de,"icon:material":ve,"icon:symbol":ke,"button:material":Ae,"button:symbol":Ue,"form:submit":He,"form:input":Ye,"form:text":rt,"input:text":rt,"form:password":lt,"input:password":lt,"form:number":gt,"input:number":gt,"form:date":It,"input:date":It,"form:email":Ct,"input:email":Ct,"form:file":Nt,"input:file":Nt,"form:check":Ut,"input:check":Ut,"form:bullet":$t,"input:bullet":$t,"form:text-area":Qt,"text:area":Qt,"form:select-option":rn,"select:option":rn,"form:field-set":cn,"date:time":dn,flex:yn,"flex:grow":In,"div:grow":In};let{define:En}=i.lib,{zero:Tn,one:Sn}=i.lib;const Pn={file:function(e,t,n){var r=new i.lib.dom.doc(e);e.onchange=function(){i.ZP.model(r.attribute("model"),e["file".concat("s")][Tn])}},"flex-scroll":function(e,t,n){var r=new i.lib.dom.doc(e),o={current:r.attribute("style")||{}};"height"in o.current===!1&&r.attribute("style",i.lib.object.assign(o.current,{"overflow-y":"scroll",height:r.client.height+"px !important"}))}};let{define:Cn}=i.lib,{zero:On,one:xn}=i.lib;const An={install:function(e,t){for(var n in e.directive("component",(function(e,t){})),e.directive("element",(function(e,t){})),Pn)e.directive(n,Pn[n]);for(var n in kn)e.component(n,kn[n])}}},378:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Qe});var i=n(882),r=n(651);let{define:o}=i.lib,{zero:s,one:a}=i.lib.number;i.ZP.start=function(){var e;if(e=i.ZP.ini("script"))if(e.start)for(var t in e.start)i.ZP.script[e.start[t]]();else i.ZP.system.start();else i.ZP.system.start()},i.ZP.start.up=function(e,t){i.ZP.start.up.end||(i.ZP.then((()=>{i.ZP.emit("web:socket",e,t)})).catch((()=>{i.ZP.emit("web:browser",e,t)})),(i.ZP.start.up.end=!0)&&(i.ZP.document.emit("focus"),i.ZP.document.emit("click"),i.ZP.document.emit("cursor:move"),i.ZP.document.emit("cursor:in"),i.ZP.document.emit("cursor:out")))},i.ZP.system=function(){},i.ZP.system.setup=i.ZP.reference(),i.ZP.system.ready=i.ZP.reference(),i.ZP.system.start=function(e,t={delay:null}){i.ZP.sys={route:i.lib.route(),router:i.lib.router()},i.ZP.x=i.ZP.store.use("store"),i.ZP.v=i.ZP.store.use("pinia"),i.ZP.emit("store"),i.ZP.emit("pinia"),i.ZP.date.start(),i.lib.visitor.__(),(i.ZP.visitor=i.ZP.reactive(i.lib.visitor()))&&(["computer"].exist(i.ZP.visitor.device.type)?i.ZP.computer=!0:i.ZP.mobile=!0,i.lib.dom.attribute("body","device",i.ZP.visitor.device.type),i.lib.dom.attribute("body","browser",i.ZP.visitor.browser.platform),r.body.font&&i.lib.dom.attribute("body","font",r.body.font),r.body.theme&&i.lib.dom.attribute("body","theme",r.body.theme));var n={header:function(){},timeout:i.lib.time.sleep((function(){i.lib.un(i.ZP.system.setup.value)&&i.ZP.emit("package:error/timeout")}),i.ZP.ini("web:socket/timeout")||a+a+a+a+a)};i.ZP.then((()=>{i.ZP.socket.watch((function(){i.ZP.start.up(e,t),i.lib.time.sleep.clear(n.timeout)}))})),i.ZP["catch"]((()=>{i.ZP.start.up(e,t),i.lib.time.sleep.clear(n.timeout)})),i.ZP.emit("setup")},i.ZP.on("web:socket",(function(e,t){i.ZP.socket.emit("package").catch((function(e){i.ZP.emit("package:error",e)})).then((function(n){if(i.ZP.react(i.ZP["package"],n.package),i.ZP.react(i.ZP.visitor,n.visitor),i.ZP.link.data=n.router.link,n.var&&i.ZP.react(i.ZP["var"],n.var),n.web&&(n.web.site&&i.ZP.react(i.ZP.web.site,n.web.site),n.web.socket&&i.ZP.react(i.ZP.web.socket,n.web.socket)),i.ZP.ini&&i.ZP["package"].fire&&"base"===i.ZP["package"].fire.fighter&&(i.ZP["package"].fire.base=i.ZP.ini("fire:base")),!i.ZP.cookie.check()){if(i.ZP.session(n.session),i.ZP["package"].language&&(i.ZP.language.list.value=i.ZP["package"].language.list),i.ZP.language.apply(n.language),i.ZP.date.set("time:zone",i.ZP.session.get("time").zone,{session:"signature"}),i.ZP.date.routine(),i.ZP.date.cache=i.lib.time.interval(i.ZP.date.routine),i.ZP["package"].date)for(var r in i.ZP["package"].date.format)i.lib.date.format(r,i.ZP["package"].date.format[r]);1,i.ZP.emit("package"),e&&e.call(i.ZP),(i.ZP.ping||(i.ZP.ping=function(){}))&&(i.ZP.ping.cache=i.lib.time.interval((function(){i.ZP.emit("ping")}),i.ZP.ping.interval=i.ZP["package"].ping.interval)),!0===t.delay?i.lib.time.sleep((function(){i.ZP.ready.value=!0})):i.ZP.ready.value=!0,i.ZP.system.setup.value=!0}}))})),i.ZP.on("web:browser",(function(e,t){if(i.ZP.session({time:{zone:i.ZP.session.get("time").zone||i.ZP.ini("time").zone}}),i.ZP.date.set("time:zone",i.ZP.session.get("time").zone,{session:"signature"}),i.ZP.date.routine(),i.ZP.date.cache=i.lib.time.interval(i.ZP.date.routine),i.ZP["package"].date)for(var n in i.ZP["package"].date.format)i.lib.date.format(n,i.ZP["package"].date.format[n]);i.ZP.emit("package"),e&&e.call(i.ZP),!0===t.delay?i.lib.time.sleep((function(){i.ZP.ready.value=!0})):i.ZP.ready.value=!0,i.ZP.system.setup.value=!0})),i.ZP["import"]=function(){},i.ZP["export"]=function(e,t){return i.lib.is["function"](e)&&(t=e)&&(e=i.lib.un.define()),(i.ZP.ready.value||i.ZP.system.ready.value)&&t&&t.call(),i.ZP.watch(i.ZP.ready,(function(e){(e||i.ZP.ready.value)&&t&&(i.ZP.system.ready.value=!0)&&t.call()})),i.ZP.data(e)},i.ZP.data=function(e){return i.lib.object.assign({vue:i.ZP,the:i.Zl,lib:i.lib,library:i.vI,zero:s,one:a},i.ZP.method,e)},i.ZP.bind=function(e){return i.ZP.data(e)},i.ZP.layout.slot=function(){if(i.ZP.sys.route.meta.layout){var e=i.ZP.layout.format(i.ZP.sys.route.meta.layout,!0);return i.ZP.partial.exist(e)?e:"layout:slot"}return"layout:slot"},i.ZP.layout.format=function(e,t){return t?"layout".concat(":").concat(e):e},i.ZP.route=function(){i.ZP.then((()=>{i.ZP.ready.value?(i.ZP.media.query.screen.splash.start(),i.ZP.emit("route")):i.ZP.watch(i.ZP.ready,(function(e){e&&(i.ZP.media.query.screen.splash.start(),i.ZP.emit("route"))}))})),i.ZP["catch"]((()=>{i.ZP.media.query.screen.splash.start(),i.ZP.emit("route")}))},i.ZP.router=function(e){return e.router=e.id,i.ZP.next(e,i.ZP.composition.api)},i.ZP.composition=function(){},i.ZP.composition.api={mount:function(){i.ZP.emit("app:mount")},eject:function(){i.ZP.date.cache&&i.lib.time.interval.clear(i.ZP.date.cache),i.ZP.ping&&i.ZP.ping.cache&&i.lib.time.interval.clear(i.ZP.ping.cache),i.ZP.account.cache&&i.lib.time.interval.clear(i.ZP.account.cache),i.ZP.emit("app:eject")},create:function(){i.ZP.emit("app:create")},update:function(){i.ZP.emit("app:update")}},i.lib.prop=function(e){var t=[];for(var n in e=e.split("-"))n==s?t.push(e[n]):t.push(e[n].uc_begin());return t.implode()},i.lib.prop.s=function(...e){return e.join("-")},i.ZP.commit=function(e){return i.ZP.x.commit("mutation",e)},i.ZP.dispatch=function(e){return i.ZP.x.dispatch("action",e)},i.ZP.method=function(e,t){return i.ZP.method[e]=t};class c{constructor(e){c.then(e)}catch(e){c.catch(e)}}c.then=function(e){i.ZP.express(e)},i.ZP.then=function(e){return new c(e)},c.catch=function(e){i.ZP.express()||e.call()},i.ZP["catch"]=function(e){c.catch(e)},i.ZP.express=function(e,...t){return e&&i.ZP.ini("express")?e.call(...t):i.ZP.ini("express")},i.ZP.ini=function(e,t){return arguments.length>a?i.ZP.ini.data[e]=t:e?i.lib.is.object(e)?void i.ZP.react(i.ZP.ini.data,e):i.ZP.ini.data[e]:i.ZP.ini.data},i.ZP.ini.data=i.ZP.reactive({express:!1,"watch:legacy":!1,"web:browser":null,"web:site":null,"web:socket":null,"web:socket/timeout":5,"media-query:screen-splash":5,"media-query:screen-splash/timeout":60,language:{"*":"en-us",id:"en-us",list:["en-us","kr","id","id-aceh"],data:{"?":"Help"}},web:{site:{setting:{"media-player:audio":!0,"media-query:screen":!0,"media-query:screen-splash":!1,"media-query:line":!0,"media-query:loading":!0,"media-query:progress":!0}}}}),i.ZP.ini(r),i.ZP["static"]=function(){},i.ZP["static"].logo=function(){},i.ZP["static"].logo.path=function(e){return"/image/logo/"+e},i.ZP.theme=function(){},o(i.ZP.theme).set("name",i.ZP.ini("theme").name),o(i.ZP.theme).function("logo",(function(){})),o(i.ZP.theme.logo).function("path",(function(e){return"/theme/"+i.ZP.theme.name+"/image/logo/"+e}));let{define:u}=i.lib,{zero:l,one:h}=i.lib;i.ZP.setting=function(e,t){return arguments.length>h?i.ZP.setting.data.value[e]=t:e?i.ZP.setting.data.value[e]:i.ZP.setting.data.value},i.ZP.setting.data=i.ZP.reference({}),i.ZP.setting("media-player:audio",i.lib.storage.set("media-player:audio",null,!0)),i.ZP.setting("media-query:screen",i.lib.storage.set("media-query:screen",null,!0)),i.ZP.setting("media-query:screen-splash",i.lib.storage.set("media-query:screen-splash",null,!0)),i.ZP.setting("media-query:line",i.lib.storage.set("media-query:line",null,!0)),i.ZP.setting("media-query:loading",i.lib.storage.set("media-query:loading",null,!0)),i.ZP.setting("media-query:progress",i.lib.storage.set("media-query:progress",null,!0)),i.ZP.on("package",(function(){i.ZP["catch"]((()=>{i.ZP.web.site.setting=i.ZP.ini().web.site.setting})),"media-player:audio"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-player:audio"]===i.lib.storage.get("media-player:audio")===!1&&i.ZP.setting("media-player:audio",i.lib.storage.set("media-player:audio",i.ZP.web.site.setting["media-player:audio"])),"media-query:screen"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-query:screen"]===i.lib.storage.get("media-query:screen")===!1&&i.ZP.setting("media-query:screen",i.lib.storage.set("media-query:screen",i.ZP.web.site.setting["media-query:screen"])),"media-query:screen-splash"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-query:screen-splash"]===i.lib.storage.get("media-query:screen-splash")===!1&&i.ZP.setting("media-query:screen-splash",i.lib.storage.set("media-query:screen-splash",i.ZP.web.site.setting["media-query:screen-splash"])),"media-query:line"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-query:line"]===i.lib.storage.get("media-query:line")===!1&&i.ZP.setting("media-query:line",i.lib.storage.set("media-query:line",i.ZP.web.site.setting["media-query:line"])),"media-query:loading"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-query:loading"]===i.lib.storage.get("media-query:loading")===!1&&i.ZP.setting("media-query:loading",i.lib.storage.set("media-query:loading",i.ZP.web.site.setting["media-query:loading"])),"media-query:progress"in i.ZP.web.site.setting&&i.ZP.web.site.setting["media-query:progress"]===i.lib.storage.get("media-query:progress")===!1&&i.ZP.setting("media-query:progress",i.lib.storage.set("media-query:progress",i.ZP.web.site.setting["media-query:progress"]))}));let{define:d}=i.lib,{zero:f,one:p}=i.lib;let{define:m}=i.lib,{zero:g,one:y}=i.lib.number;window.url=i.lib.url.parse(i.lib.string(window.location)),document.url=i.ZP.reference(),i.ZP.window=function(){},i.ZP.window.on=function(e,t){i.ZP.document.on[e].push(t)},i.ZP.document=function(){},i.ZP.document.on=function(e,t){i.ZP.document.on[e].push(t)},i.ZP.document.on.click=[],i.ZP.document.emit=function(e){"click"===e&&i.lib.event.listener(document,"click",(function(e){for(var t in i.ZP.document.on.click)i.ZP.document.on.click[t].call(this,e)}))};let{define:v}=i.lib,{zero:b,one:w}=i.lib;var _={name:i.lib.session.name,signature:i.lib.session.signature,mode:i.lib.session.mode,secure:i.lib.session.secure},I=i.lib.storage.set("cookie:name",_.name||i.lib.session.name,!0),k=i.lib.storage.set("cookie:signature",_.signature||i.lib.session.signature,!0),E=i.lib.storage.set("cookie:mode",_.mode||i.lib.session.mode,!0),T=i.lib.storage.set("cookie:secure",_.secure||i.lib.session.secure,!0);i.ZP.cookie=new i.lib.session.manager("browser"),i.ZP.cookie.start({name:I,signature:k,mode:E,secure:T},(function(e){})),i.ZP.cookie.check=function(e){if(!e){var t=b,n=i.ZP["package"].session;return i.ZP.emit("session:check",t),n&&(n.name===i.lib.storage.get("cookie:name")===!1&&i.lib.storage.set("cookie:name",n.name)&&t++,n.signature===i.lib.storage.get("cookie:signature")===!1&&i.lib.storage.set("cookie:signature",n.signature)&&t++,n.mode===i.lib.storage.get("cookie:mode")===!1&&i.lib.storage.set("cookie:mode",n.mode)&&t++,n.secure===i.lib.storage.get("cookie:secure")===!1&&i.lib.storage.set("cookie:secure",n.secure)&&t++),t&&i.ZP.sys.router.go(),t}};let{define:S}=i.lib,{zero:P,one:C}=i.lib;i.ZP.session=function(e){return e?i.ZP.react(i.ZP.session.data,e):i.ZP.session.data},i.ZP.session.get=function(e,t){return e in i.ZP.session.data?i.ZP.session.data[e]||t:i.ZP.cookie.get(e,t)||""},i.ZP.session.set=function(e){if(e){if(i.ZP.react&&i.ZP.react(i.ZP.session.data,e),i.ZP.express())return i.ZP.socket.emit("session",e);for(var t in e)i.ZP.cookie.set(t,e[t])}},i.ZP.session["delete"]=function(e){e&&(i.ZP.react&&delete i.ZP.session.data[e],i.ZP.express()||i.ZP.cookie["delete"](e))},i.ZP.session.id=i.ZP.cookie.id,i.ZP.session.data=i.ZP.reactive();let{define:O}=i.lib,{zero:x,one:A}=i.lib;i.ZP.url=i.ZP.reactive({current:{}}),i.ZP.url.param=function(e){return i.ZP.sys.route["param".concat("s")][e]},i.ZP.url.previous=function(e=A){i.ZP.sys.router.go(-e)},i.ZP.url.go=i.ZP.router.go=function(e,t){return!0===e?i.ZP.sys.router.go():i.lib.is.object(e)||"/"===e.begin()?i.ZP.sys.router.push(e):i.ZP.sys.router.push(i.lib.object.concat({name:e},t))},i.ZP.url.convert=function(e){if(i.lib.is.string(e)&&"/"===e.begin()===!1)return{name:e};if(i.lib.is.object(e)){var t={};for(var n in e.query)t[n]=e.query[n];return delete e.query,e["param".concat("s")]=t,e}return e},i.ZP.parse_url=function(){var e=window.location.protocol.pop(),t=window.location.host,n=i.ZP.sys.route.path,r=i.lib.url.query.format(i.ZP.sys.route.query),o=i.lib.url.protocol.format(e)+t+n+r,s=i.lib.url.parse(document.url.value=o);i.ZP.react(i.ZP.url,s),i.ZP.url.current=s},i.ZP.fetch=function(...e){return i.ZP.fetch.get(...e)},i.ZP.fetch.get=function(e,t){return e=[i.lib.url.convert(e)],t&&e.push({["header".concat("s")]:t}),i.ZP.request.get(...e)},i.ZP.fetch.post=function(e,t,n){return e=[i.lib.url.convert(e),t],n&&e.push({["header".concat("s")]:n}),i.ZP.request.post(...e)},i.ZP.link=function(){i.ZP.then((()=>{if(i.ZP.on.progress.insert("link"),document.link)document.link.error?(i.ZP.app.router=i.ZP.link.value(document.link),i.ZP.link.error=!0,i.ZP.on.progress["delete"]("link"),i.ZP.emit("link:error",i.ZP.app.router),delete document.link):(i.ZP.app.router=i.ZP.link.value(document.link),i.ZP.link.error=null,i.ZP.on.progress["delete"]("link"),i.ZP.emit("link",i.ZP.app.router),delete document.link);else{var e=function(e){i.ZP.app.router=i.ZP.link.value(e),i.ZP.link.error=!0,i.ZP.on.progress["delete"]("link"),i.ZP.emit("link:error",i.ZP.app.router),document.title=i.ZP.app.router.title};i.ZP.socket.emit("link",i.ZP.url.current).catch(e).then((function(e){i.ZP.app.router=i.ZP.link.value(e),i.ZP.link.error=null,i.ZP.on.progress["delete"]("link"),i.ZP.emit("link",i.ZP.app.router),document.title=i.ZP.app.router.title}))}}))},i.ZP.link.value=function(e={}){var t={title:i.ZP.language("untitled")};return e.link=i.ZP.link.data||{},e.component=e.component||{},i.lib.object.merge(t,e)},i.ZP.on("route",(function(){i.ZP.link(),i.ZP.model.clear(),i.ZP.emit("link:url")}));let{define:F}=i.lib,{zero:R,one:N}=i.lib;var D={url:i.lib.dom.attribute("meta[name=socket:url]","content")||"",token:i.lib.dom.attribute("meta[name=socket:token]","content")||"",io:class{constructor(...e){this.socket=e}next(e){return this.then(e).catch(),this}then(e){return this.context=e,"error"in this?this.emit(this.error):this}catch(e){return"context"in this?this.emit(e):(this.error=e,this)}emit(e=console.error){return i.ZP.socket.ready.value?i.ZP.socket.emit(...this.socket):(i.ZP.watch(i.ZP.socket.ready,function(t){(t||i.ZP.socket.ready.value)&&i.ZP.socket.emit(...this.socket).then(this.context).catch(e||this.error)}.bind({socket:this.socket,context:this.context,error:this.error})),this)}}};(i.ZP.socket=new i.lib.web.socket.io(D.url,D.token,i.ZP.cookie.id))&&(i.ZP.then((()=>{i.ZP.socket.start((function(){i.ZP.socket.ready=i.ZP.reference()})),i.ZP.socket.on("connect",(function(){i.ZP.on.line(!0)})),i.ZP.socket.on("disconnect",(function(){i.ZP.on.line(!1)})),i.ZP.socket.on("tokenizer",(function(e){(this.socket.tokenizer=e)&&"ready"in this.socket&&(this.socket.ready.value=!0)}))})),i.ZP["catch"]((()=>{i.ZP.on.line(!0)}))),i.ZP.socket.watch=function(e){i.ZP.socket.ready.value?e.call():i.ZP.watch(i.ZP.socket.ready,(function(t){t&&e.call()}))},i.ZP.socket.fetch=function(...e){return new D.io(...e)},i.ZP.socket.send=function(e,...t){t=i.lib.argument.of(t);var n=i.lib.option(t.object),r=t.function;return r?i.ZP.socket.emit("pipe",{path:e,method:"pipe",data:n}).then(r):i.ZP.socket.emit("pipe",{path:e,method:"pipe",data:n})};var j=n(126);let{define:L}=i.lib,{zero:M,one:U}=i.lib;var q=!0;function V(e){for(var t in j)e[t]=j[t]}i.ZP.store.state=function(e){i.ZP.commit(e)},i.ZP.store.register=function(e){i.ZP.on("store",(function(){i.ZP.store(e)}))},i.ZP.store.register((function(e){e.dummy=[]})),i.ZP.pinia=function(e){i.ZP.v.mutation(e)},i.ZP.pinia.register=function(e){i.ZP.on("pinia",(function(){i.ZP.pinia(e)}))},i.ZP.pinia.register((function(e){e.dummy=[]})),i.ZP.state=function(e,t){return e?i.lib.is.string(e)?q?i.ZP.x.state[e]:i.ZP.v[e]:void(t?q?i.ZP.store.state(t.bind({vue:e})):i.ZP.pinia(t.bind({vue:e})):q?i.ZP.store.state(e):i.ZP.pinia(e)):q?i.ZP.x.state:i.ZP.v},i.ZP.store.register((function(e){V(e)})),i.ZP.pinia.register((function(e){V(e)}));let{define:B}=i.lib,{zero:Z,one:$}=i.lib;i.ZP.help=function(){};let{define:z}=i.lib,{zero:H,one:K}=i.lib;i.ZP.form=function(){},i.ZP.form.focus=function(e){var t=i.lib.dom(e.target).attribute("for").split(i.lib.string.char.space);for(var n in t)i.lib.dom(i.lib.dom.query(t[n])).class.insert("--focus")},i.ZP.form.blur=function(e){var t=i.lib.dom(e.target).attribute("for").split(i.lib.string.char.space);for(var n in t)i.lib.dom(i.lib.dom.query(t[n])).class.delete("--focus")},i.ZP.form.attribute=function(e){return{complete:i.lib.is.define(e.complete)?i.lib.to_bool(e.complete):null,capitalize:i.lib.is.define(e.capitalize)?i.lib.to_bool(e.capitalize,"switch"):null,correct:i.lib.is.define(e.correct)?i.lib.to_bool(e.correct):null,spell:i.lib.is.define(e.spell)?i.lib.to_boolean(e.spell):null}};let{define:G}=i.lib,{zero:W,one:Q}=i.lib;i.ZP.file=function(e,t){t=i.lib.option(t,{size:i.ZP.web.socket.buffer.size[i.ZP.web.socket.buffer.unit]()});var n=i.ZP.model(e),r=!1,o=W,s={};if(n){var a=n.name,c=i.lib.file.extension(n.name),u=n.size,l=n.type;return t.extension&&!1===t.extension.exist(c)&&(s.extension=!0)&&o++,t.size&&n.size>t.size&&(s.size=!0)&&o++,o===W&&(r=!0,s=null),{error:s,success:r,name:a,extension:c,size:u,type:l,buffer:n}}return{error:"file"}},i.ZP.file.upload=function(e,t){var n=i.ZP.file(e,t);return n.error?i.lib.promise["catch"](n):i.ZP.socket.emit("file:upload",{file:n})};let{define:J}=i.lib,{zero:Y,one:X}=i.lib;i.ZP.account=function(){},i.ZP.account.routine=function(){i.lib.time.interval((function(){var e=i.ZP.socket.emit("account",(function(e){console.log(123,e),i.ZP.account.on_log(e)}));e.catch((function(e){console.log("error",e),i.ZP.account.un_log()}))}),10)},i.ZP.account.require=function(e){i.ZP.account.on.line.value&&e?e.value=!0:i.ZP.router.go("account:login")},i.ZP.account.get=function(e){return i.lib.object.get.step(i.ZP.account.data,e)},i.ZP.account.register=function(e,t,n){e=(e||"").small().trim(),t=(t||"").trim();var r={name:(n||"").trim()},o=new i.lib.validation;return o.check("name",r.name).require().name(),o.check("email",e).require().email(),o.check("password",t).require(),new i.lib.promise((function(n,s){o=i.lib.validate(o).then((function(){var o=i.ZP.socket.send("/account/register",{email:e,password:t,"profile:name":r.name}).then((function(e){n(e)}));o.catch(s)})),o.catch(s)}))},i.ZP.account.login=function(e,t){e=(e||"").small().trim(),t=(t||"").trim();var n=new i.lib.validation;return n.check("user",e).require(),n.check("password",t).require(),new i.lib.promise((function(r,o){n=i.lib.validate(n).then((function(){var n=i.ZP.socket.send("/account/login",{user:e,password:t}).then((function(e){i.ZP.account.on_log(e),r(e)}));n.catch(o)})),n.catch(o)}))},i.ZP.account.logout=function(){return new i.lib.promise((function(e,t){console.log(i.ZP.account.id);var n=i.ZP.socket.emit("account:logout",{id:i.ZP.account.id}).then((function(t){i.ZP.account.un_log(),e(t)}));n.catch(t)}))},i.ZP.account.on_log=function(e){i.ZP.react(i.ZP.account.data,e),i.ZP.session({account:e}),i.ZP.account.on.line.value=!0},i.ZP.account.un_log=function(){i.ZP.session["delete"]("account"),i.ZP.session["delete"]("account:on-line"),i.ZP.account.on.line.value=null},i.ZP.account.on={line:i.ZP.reference()},i.ZP.account.data=i.ZP.reactive();let{define:ee}=i.lib,{zero:te,one:ne}=i.lib;i.ZP.network=function(){};let{define:ie}=i.lib,{zero:re,one:oe}=i.lib;for(var se in i.ZP.lang={list:i.ZP.ini("language").list},i.vI.language={"*":i.ZP.ini("language").data},i.ZP.lang.list)i.vI.language[i.ZP.lang.list[se]]=n(319)("./"+i.ZP.lang.list[se]+".json");i.ZP.language=function(e,t){return e?i.ZP.__[e]||t||"":i.ZP.__},i.ZP.language.format=function(e,...t){return e?(i.ZP.__[e]||e||"").format(...t):""},i.ZP.language.apply=function(e){for(var t in e)i.ZP.__[t]=e[t]},i.ZP.language.exist=function(e){return!!i.ZP.language.list.value.exist(e)||!!i.vI.language&&e in i.vI.language},i.ZP.language.set=function(e,...t){t=i.lib["function"].argument(...t),t.object;var n=t.function,r=t.boolean;["*"].exist(e)&&i.ZP.language.apply(i.vI.language["*"]),i.ZP.language.exist(e)&&i.ZP.socket.emit("language:set",e).next((function(t){i.ZP.language.apply(t),i.ZP.session.set("language",e,r),n&&n.call(null,e)}))},(i.ZP.language.list=i.ZP.reference([]))&&i.ZP.ini("language")&&i.ZP.language.apply(i.vI.language["*"]=i.vI.language[i.ZP.ini("language")["*"]]);let{define:ae}=i.lib,{zero:ce,one:ue}=i.lib;i.ZP.locale=function(){};let{define:le}=i.lib,{zero:he,one:de}=i.lib;i.ZP.date=function(...e){return i.ZP.date.format(...e)},i.ZP.date.get=i.ZP.reactive(),i.ZP.date.start=function(){i.lib.date.universal(i.lib.date.zone.universal.offset),i.ZP.date.set("time:zone",i.ZP.session.get("time:zone"),{check:"signature"}),i.ZP.date.routine()},i.ZP.date.routine=function(){i.ZP.date.create=i.lib.date.create({zone:i.ZP.time.zone.offset,month:{name:i.ZP.language("date-time:month")},day:{name:i.ZP.language("date-time:day")}}),i.ZP.date.time=i.ZP.date.create(i.ZP.time.stamp.value=i.lib.time.stamp());var e=i.lib.date.format();for(var t in e)i.ZP.date.get[t]=i.ZP.date.time.format(e[t]);i.ZP.emit("date:routine")},i.ZP.date.format=function(...e){var t,n="default",r=i.ZP.time.stamp.value;for(var o in e)i.lib.is.number(e[o])&&e[o]&&(r=e[o]),i.lib.is.string(e[o])&&e[o]&&(n=e[o]),i.lib.is.object(e[o])&&(t=e[o]);return i.ZP.date.create(r).format(n,t)},i.ZP.date.transform=function(e,...t){return i.ZP.date.create(e).format(...t)},i.ZP.date.factory=function(e){e=e.string();var t=e.substr(0,4),n=e.substr(4,2),i=e.substr(6,2);return[i,n,t].join("/")},i.ZP.date.set=function(e,t,...n){n=i.lib["function"].argument(...n);var r=i.lib.option(n.object,{socket:!0}),o=n.function;"time:zone"===e&&(i.lib.time.zone.exist(t)||["*","universal"].exist(t))&&("*"===t&&(t="universal"),i.ZP.react(i.ZP.time.zone,{name:i.ZP.cookie.set("time:zone",t,r.check)}),i.ZP.time.zone.offset=i.lib.time.zone(i.ZP.time.zone.name).offset,i.ZP.then((()=>{i.ZP.socket.watch((function(){i.ZP.socket.emit("time:zone",i.ZP.time.zone.name).next(o),r.socket&&i.ZP.session.set({time:{zone:i.ZP.time.zone.name}}).next(o)}))})),i.ZP["catch"]((()=>{i.ZP.session.set({time:{zone:i.ZP.time.zone.name}})})))},i.ZP.time=function(){return i.ZP.time.stamp.value},i.ZP.time.stamp=i.ZP.reference(i.lib.time.stamp()),i.ZP.time.zone=i.ZP.reactive({name:"universal",offset:i.lib.date.zone.universal.offset});let{define:fe}=i.lib,{zero:pe,one:me}=i.lib;i.ZP.geo=function(){},i.ZP.geo.location=function(e){var t={location:new i.lib.geo.location};t.location.start(),i.ZP.on("mount",(function(){t.location.watch((function(t){e&&(e.value=t)}))})),i.ZP.on("un:mount",(function(){t.location.clear()}))},i.ZP.geo.location.exist=function(e){return e.value.latitude!==pe||e.value.longitude!==pe},i.ZP.geo.location.pos=function(e,t){return t?{lat:i.lib.number(e.value.latitude),lng:i.lib.number(e.value.longitude)}:{lat:e.value.latitude,lng:e.value.longitude}},i.ZP.geo.location.position=function(e){return{latitude:e.value.latitude,longitude:e.value.longitude}},i.ZP.geo.location.save=function(e){i.lib.storage.json("geo:location",{latitude:e.value.latitude,longitude:e.value.longitude})},i.ZP.geo.location.extract=function(e){i.lib.storage.json("geo:location")&&(e.value=i.lib.storage.json("geo:location"))},i.ZP.geo.location.support=function(){return i.lib.geo.location.navigator()},i.ZP.geo.location.coordinate=i.ZP.reference({latitude:pe,longitude:pe}),i.ZP.map=function(){},i.ZP.map.option={zoom:17,control:{size:null}},i.ZP.map.start=function(e,t,n,r,o){var s={center:i.ZP.geo.location.pos(n,!0),zoom:i.ZP.map.option.zoom,controlSize:i.ZP.map.option.control.size};e.value=new i.lib.map(t.value,s,"google"),r&&(r.value=e.value.marker({position:i.ZP.geo.location.position(n)})),o&&o(e,r)},i.ZP.map.center=function(e,t){e.value&&e.value.center(i.ZP.geo.location.position(t))},i.ZP.map.marker=function(e,t,n){n=i.lib.option(n),n.position&&t.value.coordinate(i.ZP.geo.location.position(n.position)),n.icon&&t.value.icon(n.icon||i.lib.google.map.icon.base.src.parking),n.info_window&&t.value.info_window(n.info_window.title)};let{define:ge}=i.lib,{zero:ye,one:ve}=i.lib;i.ZP.service=function(){};let{define:be}=i.lib,{zero:we,one:_e}=i.lib;i.ZP.service.notification=function(){},i.ZP.service.notification.send=function(){};let{define:Ie}=i.lib,{zero:ke,one:Ee}=i.lib;i.ZP.service.toast=function(){},i.ZP.service.toast.send=function(){};let{define:Te}=i.lib,{zero:Se,one:Pe}=i.lib;i.ZP.print=function(){};let{define:Ce}=i.lib,{zero:Oe,one:xe}=i.lib;i.ZP.media=function(){},i.ZP.media.query=function(){},i.ZP.media.query.screen=function(){},i.ZP.media.query.screen.splash=function(){var e=i.ZP.ini("media-query:screen-splash"),t=i.ZP.ini("media-query:screen-splash/timeout");"/"===i.ZP.url.path&&i.lib.date.expire(i.ZP.time.stamp.value,i.ZP.session.get("media-query:screen-splash"),{second:t})?i.lib.time.sleep((function(){i.ZP.media.query.screen.splash.touch()}),e):i.ZP.media.query.screen.splash.touch()},i.ZP.media.query.screen.splash.touch=function(){i.ZP.media.query.screen.splash.show.status.value=null,i.ZP.session.set({"media-query:screen-splash":i.ZP.time.stamp.value})},i.ZP.media.query.screen.splash.show=function(e){return e&&(i.ZP.media.query.screen.splash.show.status.value=!0),i.ZP.media.query.screen.splash.show.status.value},i.ZP.media.query.screen.splash.start=function(){i.ZP.media.query.screen.splash.show(!0),i.ZP.media.query.screen.splash()},i.ZP.media.query.screen.splash.show.status=i.ZP.reference();let{define:Ae}=i.lib,{zero:Fe,one:Re}=i.lib,{define:Ne}=i.lib,{zero:De,one:je}=i.lib;i.lib.audio.play.list("alarm:analog","/audio/alarm/analog.mp3"),i.lib.audio.play.list("default","/audio/notification/003.ogg"),i.lib.audio.play.list("error","/audio/notification/014.ogg"),i.lib.audio.play.list("warning","/audio/notification/020.ogg"),i.lib.audio.play.list("tring","/audio/notification/001.ogg"),i.lib.audio.play.list("ding-dong","/audio/notification/003.ogg"),i.lib.audio.play.list("tic-toc","/audio/notification/007.ogg"),i.ZP.sound=function(e="audio"){return i.lib.audio(e)};let{define:Le}=i.lib,{zero:Me,one:Ue}=i.lib,{define:qe}=i.lib,{zero:Ve,one:Be}=i.lib.number;i.ZP.on("app:mount",(function(){})),i.ZP.on("app:eject",(function(){})),i.ZP.on("app:create",(function(){})),i.ZP.on("app:update",(function(){})),i.ZP.on("setup",(function(){})),i.ZP.on("package",(function(){})),i.ZP.on("package:error",(function(e){console.error("package:error",e||"token")})),i.ZP.on("package:error/timeout",(function(e){console.error("package:error/timeout",e)})),i.ZP.on("date:routine",(function(){})),i.ZP.on("account:routine",(function(){})),i.ZP.on("ping",(function(){})),i.ZP.on("link",(function(){})),i.ZP.on("link:url",(function(){})),i.ZP.on("route",(function(){i.ZP["package"].host&&i.ZP["package"].host.trial&&i.ZP["package"].host.trial.end&&(i.ZP.time.stamp,i.ZP["package"].host.trial.end)})),i.ZP.document.on("click",(function(e){var t="[pop-link]",n="[pop-up]",r="pop-active",o=t+"."+r,s=e.target.closest(t);if(s){if(e.target.closest(n))return;i.lib.dom.css.list(s).toggle(r),i.lib.dom.query.selector.all(o,(function(e){e!==s&&i.lib.dom.css.list(e).remove(r)}))}else i.lib.dom.query.selector.all(o,(function(e){e!==s&&i.lib.dom.css.list(e).remove(r)}))}));let{define:Ze}=i.lib,{zero:$e,one:ze}=i.lib.number;i.Zl.ref={},i.Zl.reference=function(e){return i.Zl.ref[e]},i.Zl["var"]=function(e,t){return e?arguments.length>ze?i.Zl.ref[e]=i.ZP.reference(t):i.Zl.ref[e].value:i.Zl.ref},i.Zl.react=i.ZP.reactive(),i.Zl.reactive=function(e,t){if(!i.lib.is.object(e))return e?arguments.length===ze?i.Zl.react[e]:i.Zl.react[e]=t:i.Zl.react;i.ZP.react(i.Zl.react,e)},i.Zl.snapshot=function(e,t=!0){return t&&e.call(),i.lib.time.interval(e,i.Zl.snapshot.interval||ze)},i.Zl.snapshot.interval=10;let{define:He}=i.lib,{zero:Ke,one:Ge}=i.lib.number;function We(...e){return We.language(...e)}We.model=function(...e){return i.ZP.model(...e)},We.language=function(...e){return i.ZP.language.format(...e)},We.locale=function(){};const Qe={$$$:We}}}]);
//# sourceMappingURL=chunk-vendors.4ae26282.js.map